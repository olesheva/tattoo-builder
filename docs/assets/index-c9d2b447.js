(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();function Ch(r,t){const e=Object.create(null),n=r.split(",");for(let i=0;i<n.length;i++)e[n[i]]=!0;return t?i=>!!e[i.toLowerCase()]:i=>!!e[i]}const se={},Gi=[],Bn=()=>{},tb=()=>!1,eb=/^on[^a-z]/,Ha=r=>eb.test(r),Sh=r=>r.startsWith("onUpdate:"),Oe=Object.assign,bh=(r,t)=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)},nb=Object.prototype.hasOwnProperty,Xt=(r,t)=>nb.call(r,t),xt=Array.isArray,$i=r=>Ya(r)==="[object Map]",Ip=r=>Ya(r)==="[object Set]",Ot=r=>typeof r=="function",be=r=>typeof r=="string",Th=r=>typeof r=="symbol",le=r=>r!==null&&typeof r=="object",Bp=r=>le(r)&&Ot(r.then)&&Ot(r.catch),jp=Object.prototype.toString,Ya=r=>jp.call(r),rb=r=>Ya(r).slice(8,-1),Wp=r=>Ya(r)==="[object Object]",Oh=r=>be(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,ma=Ch(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ua=r=>{const t=Object.create(null);return e=>t[e]||(t[e]=r(e))},ib=/-(\w)/g,Qi=Ua(r=>r.replace(ib,(t,e)=>e?e.toUpperCase():"")),sb=/\B([A-Z])/g,ls=Ua(r=>r.replace(sb,"-$1").toLowerCase()),Xp=Ua(r=>r.charAt(0).toUpperCase()+r.slice(1)),Sc=Ua(r=>r?`on${Xp(r)}`:""),qs=(r,t)=>!Object.is(r,t),bc=(r,t)=>{for(let e=0;e<r.length;e++)r[e](t)},wa=(r,t,e)=>{Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value:e})},ob=r=>{const t=parseFloat(r);return isNaN(t)?r:t};let cg;const zc=()=>cg||(cg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Eh(r){if(xt(r)){const t={};for(let e=0;e<r.length;e++){const n=r[e],i=be(n)?hb(n):Eh(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(be(r))return r;if(le(r))return r}}const ab=/;(?![^(]*\))/g,lb=/:([^]+)/,cb=/\/\*[^]*?\*\//g;function hb(r){const t={};return r.replace(cb,"").split(ab).forEach(e=>{if(e){const n=e.split(lb);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Js(r){let t="";if(be(r))t=r;else if(xt(r))for(let e=0;e<r.length;e++){const n=Js(r[e]);n&&(t+=n+" ")}else if(le(r))for(const e in r)r[e]&&(t+=e+" ");return t.trim()}const ub="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fb=Ch(ub);function Hp(r){return!!r||r===""}const db=r=>be(r)?r:r==null?"":xt(r)||le(r)&&(r.toString===jp||!Ot(r.toString))?JSON.stringify(r,Yp,2):String(r),Yp=(r,t)=>t&&t.__v_isRef?Yp(r,t.value):$i(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[n,i])=>(e[`${n} =>`]=i,e),{})}:Ip(t)?{[`Set(${t.size})`]:[...t.values()]}:le(t)&&!xt(t)&&!Wp(t)?String(t):t;let kn;class Up{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=kn,!t&&kn&&(this.index=(kn.scopes||(kn.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=kn;try{return kn=this,t()}finally{kn=e}}}on(){kn=this}off(){kn=this.parent}stop(t){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function gb(r){return new Up(r)}function pb(r,t=kn){t&&t.active&&t.effects.push(r)}function mb(){return kn}const Ph=r=>{const t=new Set(r);return t.w=0,t.n=0,t},Np=r=>(r.w&Ur)>0,zp=r=>(r.n&Ur)>0,_b=({deps:r})=>{if(r.length)for(let t=0;t<r.length;t++)r[t].w|=Ur},vb=r=>{const{deps:t}=r;if(t.length){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Np(i)&&!zp(i)?i.delete(r):t[e++]=i,i.w&=~Ur,i.n&=~Ur}t.length=e}},Vc=new WeakMap;let Fs=0,Ur=1;const Gc=30;let Rn;const gi=Symbol(""),$c=Symbol("");class Dh{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,pb(this,n)}run(){if(!this.active)return this.fn();let t=Rn,e=Xr;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Rn,Rn=this,Xr=!0,Ur=1<<++Fs,Fs<=Gc?_b(this):hg(this),this.fn()}finally{Fs<=Gc&&vb(this),Ur=1<<--Fs,Rn=this.parent,Xr=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Rn===this?this.deferStop=!0:this.active&&(hg(this),this.onStop&&this.onStop(),this.active=!1)}}function hg(r){const{deps:t}=r;if(t.length){for(let e=0;e<t.length;e++)t[e].delete(r);t.length=0}}let Xr=!0;const Vp=[];function cs(){Vp.push(Xr),Xr=!1}function hs(){const r=Vp.pop();Xr=r===void 0?!0:r}function on(r,t,e){if(Xr&&Rn){let n=Vc.get(r);n||Vc.set(r,n=new Map);let i=n.get(e);i||n.set(e,i=Ph()),Gp(i)}}function Gp(r,t){let e=!1;Fs<=Gc?zp(r)||(r.n|=Ur,e=!Np(r)):e=!r.has(Rn),e&&(r.add(Rn),Rn.deps.push(r))}function pr(r,t,e,n,i,o){const l=Vc.get(r);if(!l)return;let c=[];if(t==="clear")c=[...l.values()];else if(e==="length"&&xt(r)){const h=Number(n);l.forEach((f,d)=>{(d==="length"||d>=h)&&c.push(f)})}else switch(e!==void 0&&c.push(l.get(e)),t){case"add":xt(r)?Oh(e)&&c.push(l.get("length")):(c.push(l.get(gi)),$i(r)&&c.push(l.get($c)));break;case"delete":xt(r)||(c.push(l.get(gi)),$i(r)&&c.push(l.get($c)));break;case"set":$i(r)&&c.push(l.get(gi));break}if(c.length===1)c[0]&&Kc(c[0]);else{const h=[];for(const f of c)f&&h.push(...f);Kc(Ph(h))}}function Kc(r,t){const e=xt(r)?r:[...r];for(const n of e)n.computed&&ug(n);for(const n of e)n.computed||ug(n)}function ug(r,t){(r!==Rn||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const yb=Ch("__proto__,__v_isRef,__isVue"),$p=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(Th)),xb=Ah(),wb=Ah(!1,!0),Cb=Ah(!0),fg=Sb();function Sb(){const r={};return["includes","indexOf","lastIndexOf"].forEach(t=>{r[t]=function(...e){const n=Vt(this);for(let o=0,l=this.length;o<l;o++)on(n,"get",o+"");const i=n[t](...e);return i===-1||i===!1?n[t](...e.map(Vt)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{r[t]=function(...e){cs();const n=Vt(this)[t].apply(this,e);return hs(),n}}),r}function bb(r){const t=Vt(this);return on(t,"has",r),t.hasOwnProperty(r)}function Ah(r=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!r;if(i==="__v_isReadonly")return r;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(r?t?Xb:Qp:t?Zp:Jp).get(n))return n;const l=xt(n);if(!r){if(l&&Xt(fg,i))return Reflect.get(fg,i,o);if(i==="hasOwnProperty")return bb}const c=Reflect.get(n,i,o);return(Th(i)?$p.has(i):yb(i))||(r||on(n,"get",i),t)?c:Be(c)?l&&Oh(i)?c:c.value:le(c)?r?em(c):za(c):c}}const Tb=Kp(),Ob=Kp(!0);function Kp(r=!1){return function(e,n,i,o){let l=e[n];if(ts(l)&&Be(l)&&!Be(i))return!1;if(!r&&(!Ca(i)&&!ts(i)&&(l=Vt(l),i=Vt(i)),!xt(e)&&Be(l)&&!Be(i)))return l.value=i,!0;const c=xt(e)&&Oh(n)?Number(n)<e.length:Xt(e,n),h=Reflect.set(e,n,i,o);return e===Vt(o)&&(c?qs(i,l)&&pr(e,"set",n,i):pr(e,"add",n,i)),h}}function Eb(r,t){const e=Xt(r,t);r[t];const n=Reflect.deleteProperty(r,t);return n&&e&&pr(r,"delete",t,void 0),n}function Pb(r,t){const e=Reflect.has(r,t);return(!Th(t)||!$p.has(t))&&on(r,"has",t),e}function Db(r){return on(r,"iterate",xt(r)?"length":gi),Reflect.ownKeys(r)}const qp={get:xb,set:Tb,deleteProperty:Eb,has:Pb,ownKeys:Db},Ab={get:Cb,set(r,t){return!0},deleteProperty(r,t){return!0}},Mb=Oe({},qp,{get:wb,set:Ob}),Mh=r=>r,Na=r=>Reflect.getPrototypeOf(r);function sa(r,t,e=!1,n=!1){r=r.__v_raw;const i=Vt(r),o=Vt(t);e||(t!==o&&on(i,"get",t),on(i,"get",o));const{has:l}=Na(i),c=n?Mh:e?Fh:Zs;if(l.call(i,t))return c(r.get(t));if(l.call(i,o))return c(r.get(o));r!==i&&r.get(t)}function oa(r,t=!1){const e=this.__v_raw,n=Vt(e),i=Vt(r);return t||(r!==i&&on(n,"has",r),on(n,"has",i)),r===i?e.has(r):e.has(r)||e.has(i)}function aa(r,t=!1){return r=r.__v_raw,!t&&on(Vt(r),"iterate",gi),Reflect.get(r,"size",r)}function dg(r){r=Vt(r);const t=Vt(this);return Na(t).has.call(t,r)||(t.add(r),pr(t,"add",r,r)),this}function gg(r,t){t=Vt(t);const e=Vt(this),{has:n,get:i}=Na(e);let o=n.call(e,r);o||(r=Vt(r),o=n.call(e,r));const l=i.call(e,r);return e.set(r,t),o?qs(t,l)&&pr(e,"set",r,t):pr(e,"add",r,t),this}function pg(r){const t=Vt(this),{has:e,get:n}=Na(t);let i=e.call(t,r);i||(r=Vt(r),i=e.call(t,r)),n&&n.call(t,r);const o=t.delete(r);return i&&pr(t,"delete",r,void 0),o}function mg(){const r=Vt(this),t=r.size!==0,e=r.clear();return t&&pr(r,"clear",void 0,void 0),e}function la(r,t){return function(n,i){const o=this,l=o.__v_raw,c=Vt(l),h=t?Mh:r?Fh:Zs;return!r&&on(c,"iterate",gi),l.forEach((f,d)=>n.call(i,h(f),h(d),o))}}function ca(r,t,e){return function(...n){const i=this.__v_raw,o=Vt(i),l=$i(o),c=r==="entries"||r===Symbol.iterator&&l,h=r==="keys"&&l,f=i[r](...n),d=e?Mh:t?Fh:Zs;return!t&&on(o,"iterate",h?$c:gi),{next(){const{value:p,done:_}=f.next();return _?{value:p,done:_}:{value:c?[d(p[0]),d(p[1])]:d(p),done:_}},[Symbol.iterator](){return this}}}}function Lr(r){return function(...t){return r==="delete"?!1:this}}function kb(){const r={get(o){return sa(this,o)},get size(){return aa(this)},has:oa,add:dg,set:gg,delete:pg,clear:mg,forEach:la(!1,!1)},t={get(o){return sa(this,o,!1,!0)},get size(){return aa(this)},has:oa,add:dg,set:gg,delete:pg,clear:mg,forEach:la(!1,!0)},e={get(o){return sa(this,o,!0)},get size(){return aa(this,!0)},has(o){return oa.call(this,o,!0)},add:Lr("add"),set:Lr("set"),delete:Lr("delete"),clear:Lr("clear"),forEach:la(!0,!1)},n={get(o){return sa(this,o,!0,!0)},get size(){return aa(this,!0)},has(o){return oa.call(this,o,!0)},add:Lr("add"),set:Lr("set"),delete:Lr("delete"),clear:Lr("clear"),forEach:la(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{r[o]=ca(o,!1,!1),e[o]=ca(o,!0,!1),t[o]=ca(o,!1,!0),n[o]=ca(o,!0,!0)}),[r,e,t,n]}const[Lb,Rb,Fb,Ib]=kb();function kh(r,t){const e=t?r?Ib:Fb:r?Rb:Lb;return(n,i,o)=>i==="__v_isReactive"?!r:i==="__v_isReadonly"?r:i==="__v_raw"?n:Reflect.get(Xt(e,i)&&i in n?e:n,i,o)}const Bb={get:kh(!1,!1)},jb={get:kh(!1,!0)},Wb={get:kh(!0,!1)},Jp=new WeakMap,Zp=new WeakMap,Qp=new WeakMap,Xb=new WeakMap;function Hb(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Yb(r){return r.__v_skip||!Object.isExtensible(r)?0:Hb(rb(r))}function za(r){return ts(r)?r:Lh(r,!1,qp,Bb,Jp)}function tm(r){return Lh(r,!1,Mb,jb,Zp)}function em(r){return Lh(r,!0,Ab,Wb,Qp)}function Lh(r,t,e,n,i){if(!le(r)||r.__v_raw&&!(t&&r.__v_isReactive))return r;const o=i.get(r);if(o)return o;const l=Yb(r);if(l===0)return r;const c=new Proxy(r,l===2?n:e);return i.set(r,c),c}function Ki(r){return ts(r)?Ki(r.__v_raw):!!(r&&r.__v_isReactive)}function ts(r){return!!(r&&r.__v_isReadonly)}function Ca(r){return!!(r&&r.__v_isShallow)}function nm(r){return Ki(r)||ts(r)}function Vt(r){const t=r&&r.__v_raw;return t?Vt(t):r}function Rh(r){return wa(r,"__v_skip",!0),r}const Zs=r=>le(r)?za(r):r,Fh=r=>le(r)?em(r):r;function rm(r){Xr&&Rn&&(r=Vt(r),Gp(r.dep||(r.dep=Ph())))}function im(r,t){r=Vt(r);const e=r.dep;e&&Kc(e)}function Be(r){return!!(r&&r.__v_isRef===!0)}function ai(r){return sm(r,!1)}function Ub(r){return sm(r,!0)}function sm(r,t){return Be(r)?r:new Nb(r,t)}class Nb{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Vt(t),this._value=e?t:Zs(t)}get value(){return rm(this),this._value}set value(t){const e=this.__v_isShallow||Ca(t)||ts(t);t=e?t:Vt(t),qs(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:Zs(t),im(this))}}function Hr(r){return Be(r)?r.value:r}const zb={get:(r,t,e)=>Hr(Reflect.get(r,t,e)),set:(r,t,e,n)=>{const i=r[t];return Be(i)&&!Be(e)?(i.value=e,!0):Reflect.set(r,t,e,n)}};function om(r){return Ki(r)?r:new Proxy(r,zb)}class Vb{constructor(t,e,n,i){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Dh(t,()=>{this._dirty||(this._dirty=!0,im(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=Vt(this);return rm(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Gb(r,t,e=!1){let n,i;const o=Ot(r);return o?(n=r,i=Bn):(n=r.get,i=r.set),new Vb(n,i,o||!i,e)}function Yr(r,t,e,n){let i;try{i=n?r(...n):r()}catch(o){Va(o,t,e)}return i}function jn(r,t,e,n){if(Ot(r)){const o=Yr(r,t,e,n);return o&&Bp(o)&&o.catch(l=>{Va(l,t,e)}),o}const i=[];for(let o=0;o<r.length;o++)i.push(jn(r[o],t,e,n));return i}function Va(r,t,e,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const l=t.proxy,c=e;for(;o;){const f=o.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](r,l,c)===!1)return}o=o.parent}const h=t.appContext.config.errorHandler;if(h){Yr(h,null,10,[r,l,c]);return}}$b(r,e,i,n)}function $b(r,t,e,n=!0){console.error(r)}let Qs=!1,qc=!1;const Fe=[];let Kn=0;const qi=[];let hr=null,li=0;const am=Promise.resolve();let Ih=null;function lm(r){const t=Ih||am;return r?t.then(this?r.bind(this):r):t}function Kb(r){let t=Kn+1,e=Fe.length;for(;t<e;){const n=t+e>>>1;to(Fe[n])<r?t=n+1:e=n}return t}function Bh(r){(!Fe.length||!Fe.includes(r,Qs&&r.allowRecurse?Kn+1:Kn))&&(r.id==null?Fe.push(r):Fe.splice(Kb(r.id),0,r),cm())}function cm(){!Qs&&!qc&&(qc=!0,Ih=am.then(um))}function qb(r){const t=Fe.indexOf(r);t>Kn&&Fe.splice(t,1)}function Jb(r){xt(r)?qi.push(...r):(!hr||!hr.includes(r,r.allowRecurse?li+1:li))&&qi.push(r),cm()}function _g(r,t=Qs?Kn+1:0){for(;t<Fe.length;t++){const e=Fe[t];e&&e.pre&&(Fe.splice(t,1),t--,e())}}function hm(r){if(qi.length){const t=[...new Set(qi)];if(qi.length=0,hr){hr.push(...t);return}for(hr=t,hr.sort((e,n)=>to(e)-to(n)),li=0;li<hr.length;li++)hr[li]();hr=null,li=0}}const to=r=>r.id==null?1/0:r.id,Zb=(r,t)=>{const e=to(r)-to(t);if(e===0){if(r.pre&&!t.pre)return-1;if(t.pre&&!r.pre)return 1}return e};function um(r){qc=!1,Qs=!0,Fe.sort(Zb);const t=Bn;try{for(Kn=0;Kn<Fe.length;Kn++){const e=Fe[Kn];e&&e.active!==!1&&Yr(e,null,14)}}finally{Kn=0,Fe.length=0,hm(),Qs=!1,Ih=null,(Fe.length||qi.length)&&um()}}function Qb(r,t,...e){if(r.isUnmounted)return;const n=r.vnode.props||se;let i=e;const o=t.startsWith("update:"),l=o&&t.slice(7);if(l&&l in n){const d=`${l==="modelValue"?"model":l}Modifiers`,{number:p,trim:_}=n[d]||se;_&&(i=e.map(v=>be(v)?v.trim():v)),p&&(i=e.map(ob))}let c,h=n[c=Sc(t)]||n[c=Sc(Qi(t))];!h&&o&&(h=n[c=Sc(ls(t))]),h&&jn(h,r,6,i);const f=n[c+"Once"];if(f){if(!r.emitted)r.emitted={};else if(r.emitted[c])return;r.emitted[c]=!0,jn(f,r,6,i)}}function fm(r,t,e=!1){const n=t.emitsCache,i=n.get(r);if(i!==void 0)return i;const o=r.emits;let l={},c=!1;if(!Ot(r)){const h=f=>{const d=fm(f,t,!0);d&&(c=!0,Oe(l,d))};!e&&t.mixins.length&&t.mixins.forEach(h),r.extends&&h(r.extends),r.mixins&&r.mixins.forEach(h)}return!o&&!c?(le(r)&&n.set(r,null),null):(xt(o)?o.forEach(h=>l[h]=null):Oe(l,o),le(r)&&n.set(r,l),l)}function Ga(r,t){return!r||!Ha(t)?!1:(t=t.slice(2).replace(/Once$/,""),Xt(r,t[0].toLowerCase()+t.slice(1))||Xt(r,ls(t))||Xt(r,t))}let Ge=null,dm=null;function Sa(r){const t=Ge;return Ge=r,dm=r&&r.type.__scopeId||null,t}function Is(r,t=Ge,e){if(!t||r._n)return r;const n=(...i)=>{n._d&&Dg(-1);const o=Sa(t);let l;try{l=r(...i)}finally{Sa(o),n._d&&Dg(1)}return l};return n._n=!0,n._c=!0,n._d=!0,n}function Tc(r){const{type:t,vnode:e,proxy:n,withProxy:i,props:o,propsOptions:[l],slots:c,attrs:h,emit:f,render:d,renderCache:p,data:_,setupState:v,ctx:w,inheritAttrs:E}=r;let O,M;const R=Sa(r);try{if(e.shapeFlag&4){const B=i||n;O=$n(d.call(B,B,p,o,v,_,w)),M=h}else{const B=t;O=$n(B.length>1?B(o,{attrs:h,slots:c,emit:f}):B(o,null)),M=t.props?h:tT(h)}}catch(B){Ys.length=0,Va(B,r,1),O=Ce(Nr)}let X=O;if(M&&E!==!1){const B=Object.keys(M),{shapeFlag:$}=X;B.length&&$&7&&(l&&B.some(Sh)&&(M=eT(M,l)),X=es(X,M))}return e.dirs&&(X=es(X),X.dirs=X.dirs?X.dirs.concat(e.dirs):e.dirs),e.transition&&(X.transition=e.transition),O=X,Sa(R),O}const tT=r=>{let t;for(const e in r)(e==="class"||e==="style"||Ha(e))&&((t||(t={}))[e]=r[e]);return t},eT=(r,t)=>{const e={};for(const n in r)(!Sh(n)||!(n.slice(9)in t))&&(e[n]=r[n]);return e};function nT(r,t,e){const{props:n,children:i,component:o}=r,{props:l,children:c,patchFlag:h}=t,f=o.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&h>=0){if(h&1024)return!0;if(h&16)return n?vg(n,l,f):!!l;if(h&8){const d=t.dynamicProps;for(let p=0;p<d.length;p++){const _=d[p];if(l[_]!==n[_]&&!Ga(f,_))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:n===l?!1:n?l?vg(n,l,f):!0:!!l;return!1}function vg(r,t,e){const n=Object.keys(t);if(n.length!==Object.keys(r).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==r[o]&&!Ga(e,o))return!0}return!1}function rT({vnode:r,parent:t},e){for(;t&&t.subTree===r;)(r=t.vnode).el=e,t=t.parent}const iT=r=>r.__isSuspense;function sT(r,t){t&&t.pendingBranch?xt(r)?t.effects.push(...r):t.effects.push(r):Jb(r)}const ha={};function _a(r,t,e){return gm(r,t,e)}function gm(r,t,{immediate:e,deep:n,flush:i,onTrack:o,onTrigger:l}=se){var c;const h=mb()===((c=Ie)==null?void 0:c.scope)?Ie:null;let f,d=!1,p=!1;if(Be(r)?(f=()=>r.value,d=Ca(r)):Ki(r)?(f=()=>r,n=!0):xt(r)?(p=!0,d=r.some(B=>Ki(B)||Ca(B)),f=()=>r.map(B=>{if(Be(B))return B.value;if(Ki(B))return ui(B);if(Ot(B))return Yr(B,h,2)})):Ot(r)?t?f=()=>Yr(r,h,2):f=()=>{if(!(h&&h.isUnmounted))return _&&_(),jn(r,h,3,[v])}:f=Bn,t&&n){const B=f;f=()=>ui(B())}let _,v=B=>{_=R.onStop=()=>{Yr(B,h,4)}},w;if(no)if(v=Bn,t?e&&jn(t,h,3,[f(),p?[]:void 0,v]):f(),i==="sync"){const B=JT();w=B.__watcherHandles||(B.__watcherHandles=[])}else return Bn;let E=p?new Array(r.length).fill(ha):ha;const O=()=>{if(R.active)if(t){const B=R.run();(n||d||(p?B.some(($,tt)=>qs($,E[tt])):qs(B,E)))&&(_&&_(),jn(t,h,3,[B,E===ha?void 0:p&&E[0]===ha?[]:E,v]),E=B)}else R.run()};O.allowRecurse=!!t;let M;i==="sync"?M=O:i==="post"?M=()=>en(O,h&&h.suspense):(O.pre=!0,h&&(O.id=h.uid),M=()=>Bh(O));const R=new Dh(f,M);t?e?O():E=R.run():i==="post"?en(R.run.bind(R),h&&h.suspense):R.run();const X=()=>{R.stop(),h&&h.scope&&bh(h.scope.effects,R)};return w&&w.push(X),X}function oT(r,t,e){const n=this.proxy,i=be(r)?r.includes(".")?pm(n,r):()=>n[r]:r.bind(n,n);let o;Ot(t)?o=t:(o=t.handler,e=t);const l=Ie;ns(this);const c=gm(i,o.bind(n),e);return l?ns(l):pi(),c}function pm(r,t){const e=t.split(".");return()=>{let n=r;for(let i=0;i<e.length&&n;i++)n=n[e[i]];return n}}function ui(r,t){if(!le(r)||r.__v_skip||(t=t||new Set,t.has(r)))return r;if(t.add(r),Be(r))ui(r.value,t);else if(xt(r))for(let e=0;e<r.length;e++)ui(r[e],t);else if(Ip(r)||$i(r))r.forEach(e=>{ui(e,t)});else if(Wp(r))for(const e in r)ui(r[e],t);return r}function aT(r,t){const e=Ge;if(e===null)return r;const n=Za(e)||e.proxy,i=r.dirs||(r.dirs=[]);for(let o=0;o<t.length;o++){let[l,c,h,f=se]=t[o];l&&(Ot(l)&&(l={mounted:l,updated:l}),l.deep&&ui(c),i.push({dir:l,instance:n,value:c,oldValue:void 0,arg:h,modifiers:f}))}return r}function si(r,t,e,n){const i=r.dirs,o=t&&t.dirs;for(let l=0;l<i.length;l++){const c=i[l];o&&(c.oldValue=o[l].value);let h=c.dir[n];h&&(cs(),jn(h,e,8,[r.el,c,r,t]),hs())}}function xi(r,t){return Ot(r)?(()=>Oe({name:r.name},t,{setup:r}))():r}const Xs=r=>!!r.type.__asyncLoader,mm=r=>r.type.__isKeepAlive;function lT(r,t){_m(r,"a",t)}function cT(r,t){_m(r,"da",t)}function _m(r,t,e=Ie){const n=r.__wdc||(r.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return r()});if($a(t,n,e),e){let i=e.parent;for(;i&&i.parent;)mm(i.parent.vnode)&&hT(n,t,e,i),i=i.parent}}function hT(r,t,e,n){const i=$a(t,r,n,!0);ym(()=>{bh(n[t],i)},e)}function $a(r,t,e=Ie,n=!1){if(e){const i=e[r]||(e[r]=[]),o=t.__weh||(t.__weh=(...l)=>{if(e.isUnmounted)return;cs(),ns(e);const c=jn(t,e,r,l);return pi(),hs(),c});return n?i.unshift(o):i.push(o),o}}const _r=r=>(t,e=Ie)=>(!no||r==="sp")&&$a(r,(...n)=>t(...n),e),uT=_r("bm"),vm=_r("m"),fT=_r("bu"),dT=_r("u"),gT=_r("bum"),ym=_r("um"),pT=_r("sp"),mT=_r("rtg"),_T=_r("rtc");function vT(r,t=Ie){$a("ec",r,t)}const yT=Symbol.for("v-ndc");function yg(r,t,e,n){let i;const o=e&&e[n];if(xt(r)||be(r)){i=new Array(r.length);for(let l=0,c=r.length;l<c;l++)i[l]=t(r[l],l,void 0,o&&o[l])}else if(typeof r=="number"){i=new Array(r);for(let l=0;l<r;l++)i[l]=t(l+1,l,void 0,o&&o[l])}else if(le(r))if(r[Symbol.iterator])i=Array.from(r,(l,c)=>t(l,c,void 0,o&&o[c]));else{const l=Object.keys(r);i=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const f=l[c];i[c]=t(r[f],f,c,o&&o[c])}}else i=[];return e&&(e[n]=i),i}function xg(r,t,e={},n,i){if(Ge.isCE||Ge.parent&&Xs(Ge.parent)&&Ge.parent.isCE)return t!=="default"&&(e.name=t),Ce("slot",e,n&&n());let o=r[t];o&&o._c&&(o._d=!1),gn();const l=o&&xm(o(e)),c=qa(nn,{key:e.key||l&&l.key||`_${t}`},l||(n?n():[]),l&&r._===1?64:-2);return!i&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),o&&o._c&&(o._d=!0),c}function xm(r){return r.some(t=>Oa(t)?!(t.type===Nr||t.type===nn&&!xm(t.children)):!0)?r:null}const Jc=r=>r?Mm(r)?Za(r)||r.proxy:Jc(r.parent):null,Hs=Oe(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>Jc(r.parent),$root:r=>Jc(r.root),$emit:r=>r.emit,$options:r=>jh(r),$forceUpdate:r=>r.f||(r.f=()=>Bh(r.update)),$nextTick:r=>r.n||(r.n=lm.bind(r.proxy)),$watch:r=>oT.bind(r)}),Oc=(r,t)=>r!==se&&!r.__isScriptSetup&&Xt(r,t),xT={get({_:r},t){const{ctx:e,setupState:n,data:i,props:o,accessCache:l,type:c,appContext:h}=r;let f;if(t[0]!=="$"){const v=l[t];if(v!==void 0)switch(v){case 1:return n[t];case 2:return i[t];case 4:return e[t];case 3:return o[t]}else{if(Oc(n,t))return l[t]=1,n[t];if(i!==se&&Xt(i,t))return l[t]=2,i[t];if((f=r.propsOptions[0])&&Xt(f,t))return l[t]=3,o[t];if(e!==se&&Xt(e,t))return l[t]=4,e[t];Zc&&(l[t]=0)}}const d=Hs[t];let p,_;if(d)return t==="$attrs"&&on(r,"get",t),d(r);if((p=c.__cssModules)&&(p=p[t]))return p;if(e!==se&&Xt(e,t))return l[t]=4,e[t];if(_=h.config.globalProperties,Xt(_,t))return _[t]},set({_:r},t,e){const{data:n,setupState:i,ctx:o}=r;return Oc(i,t)?(i[t]=e,!0):n!==se&&Xt(n,t)?(n[t]=e,!0):Xt(r.props,t)||t[0]==="$"&&t.slice(1)in r?!1:(o[t]=e,!0)},has({_:{data:r,setupState:t,accessCache:e,ctx:n,appContext:i,propsOptions:o}},l){let c;return!!e[l]||r!==se&&Xt(r,l)||Oc(t,l)||(c=o[0])&&Xt(c,l)||Xt(n,l)||Xt(Hs,l)||Xt(i.config.globalProperties,l)},defineProperty(r,t,e){return e.get!=null?r._.accessCache[t]=0:Xt(e,"value")&&this.set(r,t,e.value,null),Reflect.defineProperty(r,t,e)}};function wg(r){return xt(r)?r.reduce((t,e)=>(t[e]=null,t),{}):r}let Zc=!0;function wT(r){const t=jh(r),e=r.proxy,n=r.ctx;Zc=!1,t.beforeCreate&&Cg(t.beforeCreate,r,"bc");const{data:i,computed:o,methods:l,watch:c,provide:h,inject:f,created:d,beforeMount:p,mounted:_,beforeUpdate:v,updated:w,activated:E,deactivated:O,beforeDestroy:M,beforeUnmount:R,destroyed:X,unmounted:B,render:$,renderTracked:tt,renderTriggered:nt,errorCaptured:ot,serverPrefetch:it,expose:lt,inheritAttrs:pt,components:Lt,directives:Wt,filters:jt}=t;if(f&&CT(f,n,null),l)for(const at in l){const ct=l[at];Ot(ct)&&(n[at]=ct.bind(e))}if(i){const at=i.call(e,e);le(at)&&(r.data=za(at))}if(Zc=!0,o)for(const at in o){const ct=o[at],ne=Ot(ct)?ct.bind(e,e):Ot(ct.get)?ct.get.bind(e,e):Bn,At=!Ot(ct)&&Ot(ct.set)?ct.set.bind(e):Bn,Jt=Ve({get:ne,set:At});Object.defineProperty(n,at,{enumerable:!0,configurable:!0,get:()=>Jt.value,set:ye=>Jt.value=ye})}if(c)for(const at in c)wm(c[at],n,e,at);if(h){const at=Ot(h)?h.call(e):h;Reflect.ownKeys(at).forEach(ct=>{va(ct,at[ct])})}d&&Cg(d,r,"c");function Ht(at,ct){xt(ct)?ct.forEach(ne=>at(ne.bind(e))):ct&&at(ct.bind(e))}if(Ht(uT,p),Ht(vm,_),Ht(fT,v),Ht(dT,w),Ht(lT,E),Ht(cT,O),Ht(vT,ot),Ht(_T,tt),Ht(mT,nt),Ht(gT,R),Ht(ym,B),Ht(pT,it),xt(lt))if(lt.length){const at=r.exposed||(r.exposed={});lt.forEach(ct=>{Object.defineProperty(at,ct,{get:()=>e[ct],set:ne=>e[ct]=ne})})}else r.exposed||(r.exposed={});$&&r.render===Bn&&(r.render=$),pt!=null&&(r.inheritAttrs=pt),Lt&&(r.components=Lt),Wt&&(r.directives=Wt)}function CT(r,t,e=Bn){xt(r)&&(r=Qc(r));for(const n in r){const i=r[n];let o;le(i)?"default"in i?o=dr(i.from||n,i.default,!0):o=dr(i.from||n):o=dr(i),Be(o)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:l=>o.value=l}):t[n]=o}}function Cg(r,t,e){jn(xt(r)?r.map(n=>n.bind(t.proxy)):r.bind(t.proxy),t,e)}function wm(r,t,e,n){const i=n.includes(".")?pm(e,n):()=>e[n];if(be(r)){const o=t[r];Ot(o)&&_a(i,o)}else if(Ot(r))_a(i,r.bind(e));else if(le(r))if(xt(r))r.forEach(o=>wm(o,t,e,n));else{const o=Ot(r.handler)?r.handler.bind(e):t[r.handler];Ot(o)&&_a(i,o,r)}}function jh(r){const t=r.type,{mixins:e,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:l}}=r.appContext,c=o.get(t);let h;return c?h=c:!i.length&&!e&&!n?h=t:(h={},i.length&&i.forEach(f=>ba(h,f,l,!0)),ba(h,t,l)),le(t)&&o.set(t,h),h}function ba(r,t,e,n=!1){const{mixins:i,extends:o}=t;o&&ba(r,o,e,!0),i&&i.forEach(l=>ba(r,l,e,!0));for(const l in t)if(!(n&&l==="expose")){const c=ST[l]||e&&e[l];r[l]=c?c(r[l],t[l]):t[l]}return r}const ST={data:Sg,props:bg,emits:bg,methods:Bs,computed:Bs,beforeCreate:Ue,created:Ue,beforeMount:Ue,mounted:Ue,beforeUpdate:Ue,updated:Ue,beforeDestroy:Ue,beforeUnmount:Ue,destroyed:Ue,unmounted:Ue,activated:Ue,deactivated:Ue,errorCaptured:Ue,serverPrefetch:Ue,components:Bs,directives:Bs,watch:TT,provide:Sg,inject:bT};function Sg(r,t){return t?r?function(){return Oe(Ot(r)?r.call(this,this):r,Ot(t)?t.call(this,this):t)}:t:r}function bT(r,t){return Bs(Qc(r),Qc(t))}function Qc(r){if(xt(r)){const t={};for(let e=0;e<r.length;e++)t[r[e]]=r[e];return t}return r}function Ue(r,t){return r?[...new Set([].concat(r,t))]:t}function Bs(r,t){return r?Oe(Object.create(null),r,t):t}function bg(r,t){return r?xt(r)&&xt(t)?[...new Set([...r,...t])]:Oe(Object.create(null),wg(r),wg(t??{})):t}function TT(r,t){if(!r)return t;if(!t)return r;const e=Oe(Object.create(null),r);for(const n in t)e[n]=Ue(r[n],t[n]);return e}function Cm(){return{app:null,config:{isNativeTag:tb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let OT=0;function ET(r,t){return function(n,i=null){Ot(n)||(n=Oe({},n)),i!=null&&!le(i)&&(i=null);const o=Cm(),l=new Set;let c=!1;const h=o.app={_uid:OT++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:ZT,get config(){return o.config},set config(f){},use(f,...d){return l.has(f)||(f&&Ot(f.install)?(l.add(f),f.install(h,...d)):Ot(f)&&(l.add(f),f(h,...d))),h},mixin(f){return o.mixins.includes(f)||o.mixins.push(f),h},component(f,d){return d?(o.components[f]=d,h):o.components[f]},directive(f,d){return d?(o.directives[f]=d,h):o.directives[f]},mount(f,d,p){if(!c){const _=Ce(n,i);return _.appContext=o,d&&t?t(_,f):r(_,f,p),c=!0,h._container=f,f.__vue_app__=h,Za(_.component)||_.component.proxy}},unmount(){c&&(r(null,h._container),delete h._container.__vue_app__)},provide(f,d){return o.provides[f]=d,h},runWithContext(f){Ta=h;try{return f()}finally{Ta=null}}};return h}}let Ta=null;function va(r,t){if(Ie){let e=Ie.provides;const n=Ie.parent&&Ie.parent.provides;n===e&&(e=Ie.provides=Object.create(n)),e[r]=t}}function dr(r,t,e=!1){const n=Ie||Ge;if(n||Ta){const i=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Ta._context.provides;if(i&&r in i)return i[r];if(arguments.length>1)return e&&Ot(t)?t.call(n&&n.proxy):t}}function PT(r,t,e,n=!1){const i={},o={};wa(o,Ja,1),r.propsDefaults=Object.create(null),Sm(r,t,i,o);for(const l in r.propsOptions[0])l in i||(i[l]=void 0);e?r.props=n?i:tm(i):r.type.props?r.props=i:r.props=o,r.attrs=o}function DT(r,t,e,n){const{props:i,attrs:o,vnode:{patchFlag:l}}=r,c=Vt(i),[h]=r.propsOptions;let f=!1;if((n||l>0)&&!(l&16)){if(l&8){const d=r.vnode.dynamicProps;for(let p=0;p<d.length;p++){let _=d[p];if(Ga(r.emitsOptions,_))continue;const v=t[_];if(h)if(Xt(o,_))v!==o[_]&&(o[_]=v,f=!0);else{const w=Qi(_);i[w]=th(h,c,w,v,r,!1)}else v!==o[_]&&(o[_]=v,f=!0)}}}else{Sm(r,t,i,o)&&(f=!0);let d;for(const p in c)(!t||!Xt(t,p)&&((d=ls(p))===p||!Xt(t,d)))&&(h?e&&(e[p]!==void 0||e[d]!==void 0)&&(i[p]=th(h,c,p,void 0,r,!0)):delete i[p]);if(o!==c)for(const p in o)(!t||!Xt(t,p))&&(delete o[p],f=!0)}f&&pr(r,"set","$attrs")}function Sm(r,t,e,n){const[i,o]=r.propsOptions;let l=!1,c;if(t)for(let h in t){if(ma(h))continue;const f=t[h];let d;i&&Xt(i,d=Qi(h))?!o||!o.includes(d)?e[d]=f:(c||(c={}))[d]=f:Ga(r.emitsOptions,h)||(!(h in n)||f!==n[h])&&(n[h]=f,l=!0)}if(o){const h=Vt(e),f=c||se;for(let d=0;d<o.length;d++){const p=o[d];e[p]=th(i,h,p,f[p],r,!Xt(f,p))}}return l}function th(r,t,e,n,i,o){const l=r[e];if(l!=null){const c=Xt(l,"default");if(c&&n===void 0){const h=l.default;if(l.type!==Function&&!l.skipFactory&&Ot(h)){const{propsDefaults:f}=i;e in f?n=f[e]:(ns(i),n=f[e]=h.call(null,t),pi())}else n=h}l[0]&&(o&&!c?n=!1:l[1]&&(n===""||n===ls(e))&&(n=!0))}return n}function bm(r,t,e=!1){const n=t.propsCache,i=n.get(r);if(i)return i;const o=r.props,l={},c=[];let h=!1;if(!Ot(r)){const d=p=>{h=!0;const[_,v]=bm(p,t,!0);Oe(l,_),v&&c.push(...v)};!e&&t.mixins.length&&t.mixins.forEach(d),r.extends&&d(r.extends),r.mixins&&r.mixins.forEach(d)}if(!o&&!h)return le(r)&&n.set(r,Gi),Gi;if(xt(o))for(let d=0;d<o.length;d++){const p=Qi(o[d]);Tg(p)&&(l[p]=se)}else if(o)for(const d in o){const p=Qi(d);if(Tg(p)){const _=o[d],v=l[p]=xt(_)||Ot(_)?{type:_}:Oe({},_);if(v){const w=Pg(Boolean,v.type),E=Pg(String,v.type);v[0]=w>-1,v[1]=E<0||w<E,(w>-1||Xt(v,"default"))&&c.push(p)}}}const f=[l,c];return le(r)&&n.set(r,f),f}function Tg(r){return r[0]!=="$"}function Og(r){const t=r&&r.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:r===null?"null":""}function Eg(r,t){return Og(r)===Og(t)}function Pg(r,t){return xt(t)?t.findIndex(e=>Eg(e,r)):Ot(t)&&Eg(t,r)?0:-1}const Tm=r=>r[0]==="_"||r==="$stable",Wh=r=>xt(r)?r.map($n):[$n(r)],AT=(r,t,e)=>{if(t._n)return t;const n=Is((...i)=>Wh(t(...i)),e);return n._c=!1,n},Om=(r,t,e)=>{const n=r._ctx;for(const i in r){if(Tm(i))continue;const o=r[i];if(Ot(o))t[i]=AT(i,o,n);else if(o!=null){const l=Wh(o);t[i]=()=>l}}},Em=(r,t)=>{const e=Wh(t);r.slots.default=()=>e},MT=(r,t)=>{if(r.vnode.shapeFlag&32){const e=t._;e?(r.slots=Vt(t),wa(t,"_",e)):Om(t,r.slots={})}else r.slots={},t&&Em(r,t);wa(r.slots,Ja,1)},kT=(r,t,e)=>{const{vnode:n,slots:i}=r;let o=!0,l=se;if(n.shapeFlag&32){const c=t._;c?e&&c===1?o=!1:(Oe(i,t),!e&&c===1&&delete i._):(o=!t.$stable,Om(t,i)),l=t}else t&&(Em(r,t),l={default:1});if(o)for(const c in i)!Tm(c)&&!(c in l)&&delete i[c]};function eh(r,t,e,n,i=!1){if(xt(r)){r.forEach((_,v)=>eh(_,t&&(xt(t)?t[v]:t),e,n,i));return}if(Xs(n)&&!i)return;const o=n.shapeFlag&4?Za(n.component)||n.component.proxy:n.el,l=i?null:o,{i:c,r:h}=r,f=t&&t.r,d=c.refs===se?c.refs={}:c.refs,p=c.setupState;if(f!=null&&f!==h&&(be(f)?(d[f]=null,Xt(p,f)&&(p[f]=null)):Be(f)&&(f.value=null)),Ot(h))Yr(h,c,12,[l,d]);else{const _=be(h),v=Be(h);if(_||v){const w=()=>{if(r.f){const E=_?Xt(p,h)?p[h]:d[h]:h.value;i?xt(E)&&bh(E,o):xt(E)?E.includes(o)||E.push(o):_?(d[h]=[o],Xt(p,h)&&(p[h]=d[h])):(h.value=[o],r.k&&(d[r.k]=h.value))}else _?(d[h]=l,Xt(p,h)&&(p[h]=l)):v&&(h.value=l,r.k&&(d[r.k]=l))};l?(w.id=-1,en(w,e)):w()}}}const en=sT;function LT(r){return RT(r)}function RT(r,t){const e=zc();e.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:l,createText:c,createComment:h,setText:f,setElementText:d,parentNode:p,nextSibling:_,setScopeId:v=Bn,insertStaticContent:w}=r,E=(C,b,L,j=null,N=null,z=null,Q=!1,K=null,q=!!b.dynamicChildren)=>{if(C===b)return;C&&!As(C,b)&&(j=U(C),ye(C,N,z,!0),C=null),b.patchFlag===-2&&(q=!1,b.dynamicChildren=null);const{type:V,ref:ut,shapeFlag:st}=b;switch(V){case Ka:O(C,b,L,j);break;case Nr:M(C,b,L,j);break;case Ec:C==null&&R(b,L,j,Q);break;case nn:Lt(C,b,L,j,N,z,Q,K,q);break;default:st&1?$(C,b,L,j,N,z,Q,K,q):st&6?Wt(C,b,L,j,N,z,Q,K,q):(st&64||st&128)&&V.process(C,b,L,j,N,z,Q,K,q,J)}ut!=null&&N&&eh(ut,C&&C.ref,z,b||C,!b)},O=(C,b,L,j)=>{if(C==null)n(b.el=c(b.children),L,j);else{const N=b.el=C.el;b.children!==C.children&&f(N,b.children)}},M=(C,b,L,j)=>{C==null?n(b.el=h(b.children||""),L,j):b.el=C.el},R=(C,b,L,j)=>{[C.el,C.anchor]=w(C.children,b,L,j,C.el,C.anchor)},X=({el:C,anchor:b},L,j)=>{let N;for(;C&&C!==b;)N=_(C),n(C,L,j),C=N;n(b,L,j)},B=({el:C,anchor:b})=>{let L;for(;C&&C!==b;)L=_(C),i(C),C=L;i(b)},$=(C,b,L,j,N,z,Q,K,q)=>{Q=Q||b.type==="svg",C==null?tt(b,L,j,N,z,Q,K,q):it(C,b,N,z,Q,K,q)},tt=(C,b,L,j,N,z,Q,K)=>{let q,V;const{type:ut,props:st,shapeFlag:gt,transition:_t,dirs:Pt}=C;if(q=C.el=l(C.type,z,st&&st.is,st),gt&8?d(q,C.children):gt&16&&ot(C.children,q,null,j,N,z&&ut!=="foreignObject",Q,K),Pt&&si(C,null,j,"created"),nt(q,C,C.scopeId,Q,j),st){for(const Ft in st)Ft!=="value"&&!ma(Ft)&&o(q,Ft,null,st[Ft],z,C.children,j,N,de);"value"in st&&o(q,"value",null,st.value),(V=st.onVnodeBeforeMount)&&Gn(V,j,C)}Pt&&si(C,null,j,"beforeMount");const Yt=(!N||N&&!N.pendingBranch)&&_t&&!_t.persisted;Yt&&_t.beforeEnter(q),n(q,b,L),((V=st&&st.onVnodeMounted)||Yt||Pt)&&en(()=>{V&&Gn(V,j,C),Yt&&_t.enter(q),Pt&&si(C,null,j,"mounted")},N)},nt=(C,b,L,j,N)=>{if(L&&v(C,L),j)for(let z=0;z<j.length;z++)v(C,j[z]);if(N){let z=N.subTree;if(b===z){const Q=N.vnode;nt(C,Q,Q.scopeId,Q.slotScopeIds,N.parent)}}},ot=(C,b,L,j,N,z,Q,K,q=0)=>{for(let V=q;V<C.length;V++){const ut=C[V]=K?Br(C[V]):$n(C[V]);E(null,ut,b,L,j,N,z,Q,K)}},it=(C,b,L,j,N,z,Q)=>{const K=b.el=C.el;let{patchFlag:q,dynamicChildren:V,dirs:ut}=b;q|=C.patchFlag&16;const st=C.props||se,gt=b.props||se;let _t;L&&oi(L,!1),(_t=gt.onVnodeBeforeUpdate)&&Gn(_t,L,b,C),ut&&si(b,C,L,"beforeUpdate"),L&&oi(L,!0);const Pt=N&&b.type!=="foreignObject";if(V?lt(C.dynamicChildren,V,K,L,j,Pt,z):Q||ct(C,b,K,null,L,j,Pt,z,!1),q>0){if(q&16)pt(K,b,st,gt,L,j,N);else if(q&2&&st.class!==gt.class&&o(K,"class",null,gt.class,N),q&4&&o(K,"style",st.style,gt.style,N),q&8){const Yt=b.dynamicProps;for(let Ft=0;Ft<Yt.length;Ft++){const oe=Yt[Ft],We=st[oe],Un=gt[oe];(Un!==We||oe==="value")&&o(K,oe,We,Un,N,C.children,L,j,de)}}q&1&&C.children!==b.children&&d(K,b.children)}else!Q&&V==null&&pt(K,b,st,gt,L,j,N);((_t=gt.onVnodeUpdated)||ut)&&en(()=>{_t&&Gn(_t,L,b,C),ut&&si(b,C,L,"updated")},j)},lt=(C,b,L,j,N,z,Q)=>{for(let K=0;K<b.length;K++){const q=C[K],V=b[K],ut=q.el&&(q.type===nn||!As(q,V)||q.shapeFlag&70)?p(q.el):L;E(q,V,ut,null,j,N,z,Q,!0)}},pt=(C,b,L,j,N,z,Q)=>{if(L!==j){if(L!==se)for(const K in L)!ma(K)&&!(K in j)&&o(C,K,L[K],null,Q,b.children,N,z,de);for(const K in j){if(ma(K))continue;const q=j[K],V=L[K];q!==V&&K!=="value"&&o(C,K,V,q,Q,b.children,N,z,de)}"value"in j&&o(C,"value",L.value,j.value)}},Lt=(C,b,L,j,N,z,Q,K,q)=>{const V=b.el=C?C.el:c(""),ut=b.anchor=C?C.anchor:c("");let{patchFlag:st,dynamicChildren:gt,slotScopeIds:_t}=b;_t&&(K=K?K.concat(_t):_t),C==null?(n(V,L,j),n(ut,L,j),ot(b.children,L,ut,N,z,Q,K,q)):st>0&&st&64&&gt&&C.dynamicChildren?(lt(C.dynamicChildren,gt,L,N,z,Q,K),(b.key!=null||N&&b===N.subTree)&&Pm(C,b,!0)):ct(C,b,L,ut,N,z,Q,K,q)},Wt=(C,b,L,j,N,z,Q,K,q)=>{b.slotScopeIds=K,C==null?b.shapeFlag&512?N.ctx.activate(b,L,j,Q,q):jt(b,L,j,N,z,Q,q):Nt(C,b,q)},jt=(C,b,L,j,N,z,Q)=>{const K=C.component=NT(C,j,N);if(mm(C)&&(K.ctx.renderer=J),zT(K),K.asyncDep){if(N&&N.registerDep(K,Ht),!C.el){const q=K.subTree=Ce(Nr);M(null,q,b,L)}return}Ht(K,C,b,L,N,z,Q)},Nt=(C,b,L)=>{const j=b.component=C.component;if(nT(C,b,L))if(j.asyncDep&&!j.asyncResolved){at(j,b,L);return}else j.next=b,qb(j.update),j.update();else b.el=C.el,j.vnode=b},Ht=(C,b,L,j,N,z,Q)=>{const K=()=>{if(C.isMounted){let{next:ut,bu:st,u:gt,parent:_t,vnode:Pt}=C,Yt=ut,Ft;oi(C,!1),ut?(ut.el=Pt.el,at(C,ut,Q)):ut=Pt,st&&bc(st),(Ft=ut.props&&ut.props.onVnodeBeforeUpdate)&&Gn(Ft,_t,ut,Pt),oi(C,!0);const oe=Tc(C),We=C.subTree;C.subTree=oe,E(We,oe,p(We.el),U(We),C,N,z),ut.el=oe.el,Yt===null&&rT(C,oe.el),gt&&en(gt,N),(Ft=ut.props&&ut.props.onVnodeUpdated)&&en(()=>Gn(Ft,_t,ut,Pt),N)}else{let ut;const{el:st,props:gt}=b,{bm:_t,m:Pt,parent:Yt}=C,Ft=Xs(b);if(oi(C,!1),_t&&bc(_t),!Ft&&(ut=gt&&gt.onVnodeBeforeMount)&&Gn(ut,Yt,b),oi(C,!0),st&&Rt){const oe=()=>{C.subTree=Tc(C),Rt(st,C.subTree,C,N,null)};Ft?b.type.__asyncLoader().then(()=>!C.isUnmounted&&oe()):oe()}else{const oe=C.subTree=Tc(C);E(null,oe,L,j,C,N,z),b.el=oe.el}if(Pt&&en(Pt,N),!Ft&&(ut=gt&&gt.onVnodeMounted)){const oe=b;en(()=>Gn(ut,Yt,oe),N)}(b.shapeFlag&256||Yt&&Xs(Yt.vnode)&&Yt.vnode.shapeFlag&256)&&C.a&&en(C.a,N),C.isMounted=!0,b=L=j=null}},q=C.effect=new Dh(K,()=>Bh(V),C.scope),V=C.update=()=>q.run();V.id=C.uid,oi(C,!0),V()},at=(C,b,L)=>{b.component=C;const j=C.vnode.props;C.vnode=b,C.next=null,DT(C,b.props,j,L),kT(C,b.children,L),cs(),_g(),hs()},ct=(C,b,L,j,N,z,Q,K,q=!1)=>{const V=C&&C.children,ut=C?C.shapeFlag:0,st=b.children,{patchFlag:gt,shapeFlag:_t}=b;if(gt>0){if(gt&128){At(V,st,L,j,N,z,Q,K,q);return}else if(gt&256){ne(V,st,L,j,N,z,Q,K,q);return}}_t&8?(ut&16&&de(V,N,z),st!==V&&d(L,st)):ut&16?_t&16?At(V,st,L,j,N,z,Q,K,q):de(V,N,z,!0):(ut&8&&d(L,""),_t&16&&ot(st,L,j,N,z,Q,K,q))},ne=(C,b,L,j,N,z,Q,K,q)=>{C=C||Gi,b=b||Gi;const V=C.length,ut=b.length,st=Math.min(V,ut);let gt;for(gt=0;gt<st;gt++){const _t=b[gt]=q?Br(b[gt]):$n(b[gt]);E(C[gt],_t,L,null,N,z,Q,K,q)}V>ut?de(C,N,z,!0,!1,st):ot(b,L,j,N,z,Q,K,q,st)},At=(C,b,L,j,N,z,Q,K,q)=>{let V=0;const ut=b.length;let st=C.length-1,gt=ut-1;for(;V<=st&&V<=gt;){const _t=C[V],Pt=b[V]=q?Br(b[V]):$n(b[V]);if(As(_t,Pt))E(_t,Pt,L,null,N,z,Q,K,q);else break;V++}for(;V<=st&&V<=gt;){const _t=C[st],Pt=b[gt]=q?Br(b[gt]):$n(b[gt]);if(As(_t,Pt))E(_t,Pt,L,null,N,z,Q,K,q);else break;st--,gt--}if(V>st){if(V<=gt){const _t=gt+1,Pt=_t<ut?b[_t].el:j;for(;V<=gt;)E(null,b[V]=q?Br(b[V]):$n(b[V]),L,Pt,N,z,Q,K,q),V++}}else if(V>gt)for(;V<=st;)ye(C[V],N,z,!0),V++;else{const _t=V,Pt=V,Yt=new Map;for(V=Pt;V<=gt;V++){const Pe=b[V]=q?Br(b[V]):$n(b[V]);Pe.key!=null&&Yt.set(Pe.key,V)}let Ft,oe=0;const We=gt-Pt+1;let Un=!1,Oi=0;const Qn=new Array(We);for(V=0;V<We;V++)Qn[V]=0;for(V=_t;V<=st;V++){const Pe=C[V];if(oe>=We){ye(Pe,N,z,!0);continue}let qe;if(Pe.key!=null)qe=Yt.get(Pe.key);else for(Ft=Pt;Ft<=gt;Ft++)if(Qn[Ft-Pt]===0&&As(Pe,b[Ft])){qe=Ft;break}qe===void 0?ye(Pe,N,z,!0):(Qn[qe-Pt]=V+1,qe>=Oi?Oi=qe:Un=!0,E(Pe,b[qe],L,null,N,z,Q,K,q),oe++)}const Ei=Un?FT(Qn):Gi;for(Ft=Ei.length-1,V=We-1;V>=0;V--){const Pe=Pt+V,qe=b[Pe],Pi=Pe+1<ut?b[Pe+1].el:j;Qn[V]===0?E(null,qe,L,Pi,N,z,Q,K,q):Un&&(Ft<0||V!==Ei[Ft]?Jt(qe,L,Pi,2):Ft--)}}},Jt=(C,b,L,j,N=null)=>{const{el:z,type:Q,transition:K,children:q,shapeFlag:V}=C;if(V&6){Jt(C.component.subTree,b,L,j);return}if(V&128){C.suspense.move(b,L,j);return}if(V&64){Q.move(C,b,L,J);return}if(Q===nn){n(z,b,L);for(let st=0;st<q.length;st++)Jt(q[st],b,L,j);n(C.anchor,b,L);return}if(Q===Ec){X(C,b,L);return}if(j!==2&&V&1&&K)if(j===0)K.beforeEnter(z),n(z,b,L),en(()=>K.enter(z),N);else{const{leave:st,delayLeave:gt,afterLeave:_t}=K,Pt=()=>n(z,b,L),Yt=()=>{st(z,()=>{Pt(),_t&&_t()})};gt?gt(z,Pt,Yt):Yt()}else n(z,b,L)},ye=(C,b,L,j=!1,N=!1)=>{const{type:z,props:Q,ref:K,children:q,dynamicChildren:V,shapeFlag:ut,patchFlag:st,dirs:gt}=C;if(K!=null&&eh(K,null,L,C,!0),ut&256){b.ctx.deactivate(C);return}const _t=ut&1&&gt,Pt=!Xs(C);let Yt;if(Pt&&(Yt=Q&&Q.onVnodeBeforeUnmount)&&Gn(Yt,b,C),ut&6)En(C.component,L,j);else{if(ut&128){C.suspense.unmount(L,j);return}_t&&si(C,null,b,"beforeUnmount"),ut&64?C.type.remove(C,b,L,N,J,j):V&&(z!==nn||st>0&&st&64)?de(V,b,L,!1,!0):(z===nn&&st&384||!N&&ut&16)&&de(q,b,L),j&&Yn(C)}(Pt&&(Yt=Q&&Q.onVnodeUnmounted)||_t)&&en(()=>{Yt&&Gn(Yt,b,C),_t&&si(C,null,b,"unmounted")},L)},Yn=C=>{const{type:b,el:L,anchor:j,transition:N}=C;if(b===nn){Sr(L,j);return}if(b===Ec){B(C);return}const z=()=>{i(L),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(C.shapeFlag&1&&N&&!N.persisted){const{leave:Q,delayLeave:K}=N,q=()=>Q(L,z);K?K(C.el,z,q):q()}else z()},Sr=(C,b)=>{let L;for(;C!==b;)L=_(C),i(C),C=L;i(b)},En=(C,b,L)=>{const{bum:j,scope:N,update:z,subTree:Q,um:K}=C;j&&bc(j),N.stop(),z&&(z.active=!1,ye(Q,C,b,L)),K&&en(K,b),en(()=>{C.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},de=(C,b,L,j=!1,N=!1,z=0)=>{for(let Q=z;Q<C.length;Q++)ye(C[Q],b,L,j,N)},U=C=>C.shapeFlag&6?U(C.component.subTree):C.shapeFlag&128?C.suspense.next():_(C.anchor||C.el),et=(C,b,L)=>{C==null?b._vnode&&ye(b._vnode,null,null,!0):E(b._vnode||null,C,b,null,null,null,L),_g(),hm(),b._vnode=C},J={p:E,um:ye,m:Jt,r:Yn,mt:jt,mc:ot,pc:ct,pbc:lt,n:U,o:r};let ft,Rt;return t&&([ft,Rt]=t(J)),{render:et,hydrate:ft,createApp:ET(et,ft)}}function oi({effect:r,update:t},e){r.allowRecurse=t.allowRecurse=e}function Pm(r,t,e=!1){const n=r.children,i=t.children;if(xt(n)&&xt(i))for(let o=0;o<n.length;o++){const l=n[o];let c=i[o];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[o]=Br(i[o]),c.el=l.el),e||Pm(l,c)),c.type===Ka&&(c.el=l.el)}}function FT(r){const t=r.slice(),e=[0];let n,i,o,l,c;const h=r.length;for(n=0;n<h;n++){const f=r[n];if(f!==0){if(i=e[e.length-1],r[i]<f){t[n]=i,e.push(n);continue}for(o=0,l=e.length-1;o<l;)c=o+l>>1,r[e[c]]<f?o=c+1:l=c;f<r[e[o]]&&(o>0&&(t[n]=e[o-1]),e[o]=n)}}for(o=e.length,l=e[o-1];o-- >0;)e[o]=l,l=t[l];return e}const IT=r=>r.__isTeleport,nn=Symbol.for("v-fgt"),Ka=Symbol.for("v-txt"),Nr=Symbol.for("v-cmt"),Ec=Symbol.for("v-stc"),Ys=[];let In=null;function gn(r=!1){Ys.push(In=r?null:[])}function BT(){Ys.pop(),In=Ys[Ys.length-1]||null}let eo=1;function Dg(r){eo+=r}function Dm(r){return r.dynamicChildren=eo>0?In||Gi:null,BT(),eo>0&&In&&In.push(r),r}function ur(r,t,e,n,i,o){return Dm(me(r,t,e,n,i,o,!0))}function qa(r,t,e,n,i){return Dm(Ce(r,t,e,n,i,!0))}function Oa(r){return r?r.__v_isVNode===!0:!1}function As(r,t){return r.type===t.type&&r.key===t.key}const Ja="__vInternal",Am=({key:r})=>r??null,ya=({ref:r,ref_key:t,ref_for:e})=>(typeof r=="number"&&(r=""+r),r!=null?be(r)||Be(r)||Ot(r)?{i:Ge,r,k:t,f:!!e}:r:null);function me(r,t=null,e=null,n=0,i=null,o=r===nn?0:1,l=!1,c=!1){const h={__v_isVNode:!0,__v_skip:!0,type:r,props:t,key:t&&Am(t),ref:t&&ya(t),scopeId:dm,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ge};return c?(Xh(h,e),o&128&&r.normalize(h)):e&&(h.shapeFlag|=be(e)?8:16),eo>0&&!l&&In&&(h.patchFlag>0||o&6)&&h.patchFlag!==32&&In.push(h),h}const Ce=jT;function jT(r,t=null,e=null,n=0,i=null,o=!1){if((!r||r===yT)&&(r=Nr),Oa(r)){const c=es(r,t,!0);return e&&Xh(c,e),eo>0&&!o&&In&&(c.shapeFlag&6?In[In.indexOf(r)]=c:In.push(c)),c.patchFlag|=-2,c}if(KT(r)&&(r=r.__vccOpts),t){t=WT(t);let{class:c,style:h}=t;c&&!be(c)&&(t.class=Js(c)),le(h)&&(nm(h)&&!xt(h)&&(h=Oe({},h)),t.style=Eh(h))}const l=be(r)?1:iT(r)?128:IT(r)?64:le(r)?4:Ot(r)?2:0;return me(r,t,e,n,i,l,o,!0)}function WT(r){return r?nm(r)||Ja in r?Oe({},r):r:null}function es(r,t,e=!1){const{props:n,ref:i,patchFlag:o,children:l}=r,c=t?HT(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:c,key:c&&Am(c),ref:t&&t.ref?e&&i?xt(i)?i.concat(ya(t)):[i,ya(t)]:ya(t):i,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:l,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:t&&r.type!==nn?o===-1?16:o|16:o,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&es(r.ssContent),ssFallback:r.ssFallback&&es(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce}}function nh(r=" ",t=0){return Ce(Ka,null,r,t)}function XT(r="",t=!1){return t?(gn(),qa(Nr,null,r)):Ce(Nr,null,r)}function $n(r){return r==null||typeof r=="boolean"?Ce(Nr):xt(r)?Ce(nn,null,r.slice()):typeof r=="object"?Br(r):Ce(Ka,null,String(r))}function Br(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:es(r)}function Xh(r,t){let e=0;const{shapeFlag:n}=r;if(t==null)t=null;else if(xt(t))e=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Xh(r,i()),i._c&&(i._d=!0));return}else{e=32;const i=t._;!i&&!(Ja in t)?t._ctx=Ge:i===3&&Ge&&(Ge.slots._===1?t._=1:(t._=2,r.patchFlag|=1024))}else Ot(t)?(t={default:t,_ctx:Ge},e=32):(t=String(t),n&64?(e=16,t=[nh(t)]):e=8);r.children=t,r.shapeFlag|=e}function HT(...r){const t={};for(let e=0;e<r.length;e++){const n=r[e];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Js([t.class,n.class]));else if(i==="style")t.style=Eh([t.style,n.style]);else if(Ha(i)){const o=t[i],l=n[i];l&&o!==l&&!(xt(o)&&o.includes(l))&&(t[i]=o?[].concat(o,l):l)}else i!==""&&(t[i]=n[i])}return t}function Gn(r,t,e,n=null){jn(r,t,7,[e,n])}const YT=Cm();let UT=0;function NT(r,t,e){const n=r.type,i=(t?t.appContext:r.appContext)||YT,o={uid:UT++,vnode:r,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Up(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:bm(n,i),emitsOptions:fm(n,i),emit:null,emitted:null,propsDefaults:se,inheritAttrs:n.inheritAttrs,ctx:se,data:se,props:se,attrs:se,slots:se,refs:se,setupState:se,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Qb.bind(null,o),r.ce&&r.ce(o),o}let Ie=null,Hh,Ui,Ag="__VUE_INSTANCE_SETTERS__";(Ui=zc()[Ag])||(Ui=zc()[Ag]=[]),Ui.push(r=>Ie=r),Hh=r=>{Ui.length>1?Ui.forEach(t=>t(r)):Ui[0](r)};const ns=r=>{Hh(r),r.scope.on()},pi=()=>{Ie&&Ie.scope.off(),Hh(null)};function Mm(r){return r.vnode.shapeFlag&4}let no=!1;function zT(r,t=!1){no=t;const{props:e,children:n}=r.vnode,i=Mm(r);PT(r,e,i,t),MT(r,n);const o=i?VT(r,t):void 0;return no=!1,o}function VT(r,t){const e=r.type;r.accessCache=Object.create(null),r.proxy=Rh(new Proxy(r.ctx,xT));const{setup:n}=e;if(n){const i=r.setupContext=n.length>1?$T(r):null;ns(r),cs();const o=Yr(n,r,0,[r.props,i]);if(hs(),pi(),Bp(o)){if(o.then(pi,pi),t)return o.then(l=>{Mg(r,l,t)}).catch(l=>{Va(l,r,0)});r.asyncDep=o}else Mg(r,o,t)}else km(r,t)}function Mg(r,t,e){Ot(t)?r.type.__ssrInlineRender?r.ssrRender=t:r.render=t:le(t)&&(r.setupState=om(t)),km(r,e)}let kg;function km(r,t,e){const n=r.type;if(!r.render){if(!t&&kg&&!n.render){const i=n.template||jh(r).template;if(i){const{isCustomElement:o,compilerOptions:l}=r.appContext.config,{delimiters:c,compilerOptions:h}=n,f=Oe(Oe({isCustomElement:o,delimiters:c},l),h);n.render=kg(i,f)}}r.render=n.render||Bn}ns(r),cs(),wT(r),hs(),pi()}function GT(r){return r.attrsProxy||(r.attrsProxy=new Proxy(r.attrs,{get(t,e){return on(r,"get","$attrs"),t[e]}}))}function $T(r){const t=e=>{r.exposed=e||{}};return{get attrs(){return GT(r)},slots:r.slots,emit:r.emit,expose:t}}function Za(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(om(Rh(r.exposed)),{get(t,e){if(e in t)return t[e];if(e in Hs)return Hs[e](r)},has(t,e){return e in t||e in Hs}}))}function KT(r){return Ot(r)&&"__vccOpts"in r}const Ve=(r,t)=>Gb(r,t,no);function Lm(r,t,e){const n=arguments.length;return n===2?le(t)&&!xt(t)?Oa(t)?Ce(r,null,[t]):Ce(r,t):Ce(r,null,t):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&Oa(e)&&(e=[e]),Ce(r,t,e))}const qT=Symbol.for("v-scx"),JT=()=>dr(qT),ZT="3.3.4",QT="http://www.w3.org/2000/svg",ci=typeof document<"u"?document:null,Lg=ci&&ci.createElement("template"),tO={insert:(r,t,e)=>{t.insertBefore(r,e||null)},remove:r=>{const t=r.parentNode;t&&t.removeChild(r)},createElement:(r,t,e,n)=>{const i=t?ci.createElementNS(QT,r):ci.createElement(r,e?{is:e}:void 0);return r==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:r=>ci.createTextNode(r),createComment:r=>ci.createComment(r),setText:(r,t)=>{r.nodeValue=t},setElementText:(r,t)=>{r.textContent=t},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>ci.querySelector(r),setScopeId(r,t){r.setAttribute(t,"")},insertStaticContent(r,t,e,n,i,o){const l=e?e.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),e),!(i===o||!(i=i.nextSibling)););else{Lg.innerHTML=n?`<svg>${r}</svg>`:r;const c=Lg.content;if(n){const h=c.firstChild;for(;h.firstChild;)c.appendChild(h.firstChild);c.removeChild(h)}t.insertBefore(c,e)}return[l?l.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}};function eO(r,t,e){const n=r._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?r.removeAttribute("class"):e?r.setAttribute("class",t):r.className=t}function nO(r,t,e){const n=r.style,i=be(e);if(e&&!i){if(t&&!be(t))for(const o in t)e[o]==null&&rh(n,o,"");for(const o in e)rh(n,o,e[o])}else{const o=n.display;i?t!==e&&(n.cssText=e):t&&r.removeAttribute("style"),"_vod"in r&&(n.display=o)}}const Rg=/\s*!important$/;function rh(r,t,e){if(xt(e))e.forEach(n=>rh(r,t,n));else if(e==null&&(e=""),t.startsWith("--"))r.setProperty(t,e);else{const n=rO(r,t);Rg.test(e)?r.setProperty(ls(n),e.replace(Rg,""),"important"):r[n]=e}}const Fg=["Webkit","Moz","ms"],Pc={};function rO(r,t){const e=Pc[t];if(e)return e;let n=Qi(t);if(n!=="filter"&&n in r)return Pc[t]=n;n=Xp(n);for(let i=0;i<Fg.length;i++){const o=Fg[i]+n;if(o in r)return Pc[t]=o}return t}const Ig="http://www.w3.org/1999/xlink";function iO(r,t,e,n,i){if(n&&t.startsWith("xlink:"))e==null?r.removeAttributeNS(Ig,t.slice(6,t.length)):r.setAttributeNS(Ig,t,e);else{const o=fb(t);e==null||o&&!Hp(e)?r.removeAttribute(t):r.setAttribute(t,o?"":e)}}function sO(r,t,e,n,i,o,l){if(t==="innerHTML"||t==="textContent"){n&&l(n,i,o),r[t]=e??"";return}const c=r.tagName;if(t==="value"&&c!=="PROGRESS"&&!c.includes("-")){r._value=e;const f=c==="OPTION"?r.getAttribute("value"):r.value,d=e??"";f!==d&&(r.value=d),e==null&&r.removeAttribute(t);return}let h=!1;if(e===""||e==null){const f=typeof r[t];f==="boolean"?e=Hp(e):e==null&&f==="string"?(e="",h=!0):f==="number"&&(e=0,h=!0)}try{r[t]=e}catch{}h&&r.removeAttribute(t)}function oO(r,t,e,n){r.addEventListener(t,e,n)}function aO(r,t,e,n){r.removeEventListener(t,e,n)}function lO(r,t,e,n,i=null){const o=r._vei||(r._vei={}),l=o[t];if(n&&l)l.value=n;else{const[c,h]=cO(t);if(n){const f=o[t]=fO(n,i);oO(r,c,f,h)}else l&&(aO(r,c,l,h),o[t]=void 0)}}const Bg=/(?:Once|Passive|Capture)$/;function cO(r){let t;if(Bg.test(r)){t={};let n;for(;n=r.match(Bg);)r=r.slice(0,r.length-n[0].length),t[n[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):ls(r.slice(2)),t]}let Dc=0;const hO=Promise.resolve(),uO=()=>Dc||(hO.then(()=>Dc=0),Dc=Date.now());function fO(r,t){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;jn(dO(n,e.value),t,5,[n])};return e.value=r,e.attached=uO(),e}function dO(r,t){if(xt(t)){const e=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{e.call(r),r._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const jg=/^on[a-z]/,gO=(r,t,e,n,i=!1,o,l,c,h)=>{t==="class"?eO(r,n,i):t==="style"?nO(r,e,n):Ha(t)?Sh(t)||lO(r,t,e,n,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):pO(r,t,n,i))?sO(r,t,n,o,l,c,h):(t==="true-value"?r._trueValue=n:t==="false-value"&&(r._falseValue=n),iO(r,t,n,i))};function pO(r,t,e,n){return n?!!(t==="innerHTML"||t==="textContent"||t in r&&jg.test(t)&&Ot(e)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&r.tagName==="INPUT"||t==="type"&&r.tagName==="TEXTAREA"||jg.test(t)&&be(e)?!1:t in r}const mO=["ctrl","shift","alt","meta"],_O={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,t)=>mO.some(e=>r[`${e}Key`]&&!t.includes(e))},vO=(r,t)=>(e,...n)=>{for(let i=0;i<t.length;i++){const o=_O[t[i]];if(o&&o(e,t))return}return r(e,...n)},yO={beforeMount(r,{value:t},{transition:e}){r._vod=r.style.display==="none"?"":r.style.display,e&&t?e.beforeEnter(r):Ms(r,t)},mounted(r,{value:t},{transition:e}){e&&t&&e.enter(r)},updated(r,{value:t,oldValue:e},{transition:n}){!t!=!e&&(n?t?(n.beforeEnter(r),Ms(r,!0),n.enter(r)):n.leave(r,()=>{Ms(r,!1)}):Ms(r,t))},beforeUnmount(r,{value:t}){Ms(r,t)}};function Ms(r,t){r.style.display=t?r._vod:"none"}const xO=Oe({patchProp:gO},tO);let Wg;function wO(){return Wg||(Wg=LT(xO))}const CO=(...r)=>{const t=wO().createApp(...r),{mount:e}=t;return t.mount=n=>{const i=SO(n);if(!i)return;const o=t._component;!Ot(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const l=e(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),l},t};function SO(r){return be(r)?document.querySelector(r):r}var bO=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const TO=Symbol();var Xg;(function(r){r.direct="direct",r.patchObject="patch object",r.patchFunction="patch function"})(Xg||(Xg={}));function OO(){const r=gb(!0),t=r.run(()=>ai({}));let e=[],n=[];const i=Rh({install(o){i._a=o,o.provide(TO,i),o.config.globalProperties.$pinia=i,n.forEach(l=>e.push(l)),n=[]},use(o){return!this._a&&!bO?n.push(o):e.push(o),this},_p:e,_a:null,_e:r,_s:new Map,state:t});return i}/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Ni=typeof window<"u";function EO(r){return r.__esModule||r[Symbol.toStringTag]==="Module"}const Kt=Object.assign;function Ac(r,t){const e={};for(const n in t){const i=t[n];e[n]=Xn(i)?i.map(r):r(i)}return e}const Us=()=>{},Xn=Array.isArray,PO=/\/$/,DO=r=>r.replace(PO,"");function Mc(r,t,e="/"){let n,i={},o="",l="";const c=t.indexOf("#");let h=t.indexOf("?");return c<h&&c>=0&&(h=-1),h>-1&&(n=t.slice(0,h),o=t.slice(h+1,c>-1?c:t.length),i=r(o)),c>-1&&(n=n||t.slice(0,c),l=t.slice(c,t.length)),n=LO(n??t,e),{fullPath:n+(o&&"?")+o+l,path:n,query:i,hash:l}}function AO(r,t){const e=t.query?r(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function Hg(r,t){return!t||!r.toLowerCase().startsWith(t.toLowerCase())?r:r.slice(t.length)||"/"}function MO(r,t,e){const n=t.matched.length-1,i=e.matched.length-1;return n>-1&&n===i&&rs(t.matched[n],e.matched[i])&&Rm(t.params,e.params)&&r(t.query)===r(e.query)&&t.hash===e.hash}function rs(r,t){return(r.aliasOf||r)===(t.aliasOf||t)}function Rm(r,t){if(Object.keys(r).length!==Object.keys(t).length)return!1;for(const e in r)if(!kO(r[e],t[e]))return!1;return!0}function kO(r,t){return Xn(r)?Yg(r,t):Xn(t)?Yg(t,r):r===t}function Yg(r,t){return Xn(t)?r.length===t.length&&r.every((e,n)=>e===t[n]):r.length===1&&r[0]===t}function LO(r,t){if(r.startsWith("/"))return r;if(!r)return t;const e=t.split("/"),n=r.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let o=e.length-1,l,c;for(l=0;l<n.length;l++)if(c=n[l],c!==".")if(c==="..")o>1&&o--;else break;return e.slice(0,o).join("/")+"/"+n.slice(l-(l===n.length?1:0)).join("/")}var ro;(function(r){r.pop="pop",r.push="push"})(ro||(ro={}));var Ns;(function(r){r.back="back",r.forward="forward",r.unknown=""})(Ns||(Ns={}));function RO(r){if(!r)if(Ni){const t=document.querySelector("base");r=t&&t.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),DO(r)}const FO=/^[^#]+#/;function IO(r,t){return r.replace(FO,"#")+t}function BO(r,t){const e=document.documentElement.getBoundingClientRect(),n=r.getBoundingClientRect();return{behavior:t.behavior,left:n.left-e.left-(t.left||0),top:n.top-e.top-(t.top||0)}}const Qa=()=>({left:window.pageXOffset,top:window.pageYOffset});function jO(r){let t;if("el"in r){const e=r.el,n=typeof e=="string"&&e.startsWith("#"),i=typeof e=="string"?n?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!i)return;t=BO(i,r)}else t=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Ug(r,t){return(history.state?history.state.position-t:-1)+r}const ih=new Map;function WO(r,t){ih.set(r,t)}function XO(r){const t=ih.get(r);return ih.delete(r),t}let HO=()=>location.protocol+"//"+location.host;function Fm(r,t){const{pathname:e,search:n,hash:i}=t,o=r.indexOf("#");if(o>-1){let c=i.includes(r.slice(o))?r.slice(o).length:1,h=i.slice(c);return h[0]!=="/"&&(h="/"+h),Hg(h,"")}return Hg(e,r)+n+i}function YO(r,t,e,n){let i=[],o=[],l=null;const c=({state:_})=>{const v=Fm(r,location),w=e.value,E=t.value;let O=0;if(_){if(e.value=v,t.value=_,l&&l===w){l=null;return}O=E?_.position-E.position:0}else n(v);i.forEach(M=>{M(e.value,w,{delta:O,type:ro.pop,direction:O?O>0?Ns.forward:Ns.back:Ns.unknown})})};function h(){l=e.value}function f(_){i.push(_);const v=()=>{const w=i.indexOf(_);w>-1&&i.splice(w,1)};return o.push(v),v}function d(){const{history:_}=window;_.state&&_.replaceState(Kt({},_.state,{scroll:Qa()}),"")}function p(){for(const _ of o)_();o=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:h,listen:f,destroy:p}}function Ng(r,t,e,n=!1,i=!1){return{back:r,current:t,forward:e,replaced:n,position:window.history.length,scroll:i?Qa():null}}function UO(r){const{history:t,location:e}=window,n={value:Fm(r,e)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(h,f,d){const p=r.indexOf("#"),_=p>-1?(e.host&&document.querySelector("base")?r:r.slice(p))+h:HO()+r+h;try{t[d?"replaceState":"pushState"](f,"",_),i.value=f}catch(v){console.error(v),e[d?"replace":"assign"](_)}}function l(h,f){const d=Kt({},t.state,Ng(i.value.back,h,i.value.forward,!0),f,{position:i.value.position});o(h,d,!0),n.value=h}function c(h,f){const d=Kt({},i.value,t.state,{forward:h,scroll:Qa()});o(d.current,d,!0);const p=Kt({},Ng(n.value,h,null),{position:d.position+1},f);o(h,p,!1),n.value=h}return{location:n,state:i,push:c,replace:l}}function NO(r){r=RO(r);const t=UO(r),e=YO(r,t.state,t.location,t.replace);function n(o,l=!0){l||e.pauseListeners(),history.go(o)}const i=Kt({location:"",base:r,go:n,createHref:IO.bind(null,r)},t,e);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function zO(r){return typeof r=="string"||r&&typeof r=="object"}function Im(r){return typeof r=="string"||typeof r=="symbol"}const Rr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Bm=Symbol("");var zg;(function(r){r[r.aborted=4]="aborted",r[r.cancelled=8]="cancelled",r[r.duplicated=16]="duplicated"})(zg||(zg={}));function is(r,t){return Kt(new Error,{type:r,[Bm]:!0},t)}function cr(r,t){return r instanceof Error&&Bm in r&&(t==null||!!(r.type&t))}const Vg="[^/]+?",VO={sensitive:!1,strict:!1,start:!0,end:!0},GO=/[.+*?^${}()[\]/\\]/g;function $O(r,t){const e=Kt({},VO,t),n=[];let i=e.start?"^":"";const o=[];for(const f of r){const d=f.length?[]:[90];e.strict&&!f.length&&(i+="/");for(let p=0;p<f.length;p++){const _=f[p];let v=40+(e.sensitive?.25:0);if(_.type===0)p||(i+="/"),i+=_.value.replace(GO,"\\$&"),v+=40;else if(_.type===1){const{value:w,repeatable:E,optional:O,regexp:M}=_;o.push({name:w,repeatable:E,optional:O});const R=M||Vg;if(R!==Vg){v+=10;try{new RegExp(`(${R})`)}catch(B){throw new Error(`Invalid custom RegExp for param "${w}" (${R}): `+B.message)}}let X=E?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;p||(X=O&&f.length<2?`(?:/${X})`:"/"+X),O&&(X+="?"),i+=X,v+=20,O&&(v+=-8),E&&(v+=-20),R===".*"&&(v+=-50)}d.push(v)}n.push(d)}if(e.strict&&e.end){const f=n.length-1;n[f][n[f].length-1]+=.7000000000000001}e.strict||(i+="/?"),e.end?i+="$":e.strict&&(i+="(?:/|$)");const l=new RegExp(i,e.sensitive?"":"i");function c(f){const d=f.match(l),p={};if(!d)return null;for(let _=1;_<d.length;_++){const v=d[_]||"",w=o[_-1];p[w.name]=v&&w.repeatable?v.split("/"):v}return p}function h(f){let d="",p=!1;for(const _ of r){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const v of _)if(v.type===0)d+=v.value;else if(v.type===1){const{value:w,repeatable:E,optional:O}=v,M=w in f?f[w]:"";if(Xn(M)&&!E)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const R=Xn(M)?M.join("/"):M;if(!R)if(O)_.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${w}"`);d+=R}}return d||"/"}return{re:l,score:n,keys:o,parse:c,stringify:h}}function KO(r,t){let e=0;for(;e<r.length&&e<t.length;){const n=t[e]-r[e];if(n)return n;e++}return r.length<t.length?r.length===1&&r[0]===40+40?-1:1:r.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function qO(r,t){let e=0;const n=r.score,i=t.score;for(;e<n.length&&e<i.length;){const o=KO(n[e],i[e]);if(o)return o;e++}if(Math.abs(i.length-n.length)===1){if(Gg(n))return 1;if(Gg(i))return-1}return i.length-n.length}function Gg(r){const t=r[r.length-1];return r.length>0&&t[t.length-1]<0}const JO={type:0,value:""},ZO=/[a-zA-Z0-9_]/;function QO(r){if(!r)return[[]];if(r==="/")return[[JO]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function t(v){throw new Error(`ERR (${e})/"${f}": ${v}`)}let e=0,n=e;const i=[];let o;function l(){o&&i.push(o),o=[]}let c=0,h,f="",d="";function p(){f&&(e===0?o.push({type:0,value:f}):e===1||e===2||e===3?(o.length>1&&(h==="*"||h==="+")&&t(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:f,regexp:d,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):t("Invalid state to consume buffer"),f="")}function _(){f+=h}for(;c<r.length;){if(h=r[c++],h==="\\"&&e!==2){n=e,e=4;continue}switch(e){case 0:h==="/"?(f&&p(),l()):h===":"?(p(),e=1):_();break;case 4:_(),e=n;break;case 1:h==="("?e=2:ZO.test(h)?_():(p(),e=0,h!=="*"&&h!=="?"&&h!=="+"&&c--);break;case 2:h===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+h:e=3:d+=h;break;case 3:p(),e=0,h!=="*"&&h!=="?"&&h!=="+"&&c--,d="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${f}"`),p(),l(),i}function t2(r,t,e){const n=$O(QO(r.path),e),i=Kt(n,{record:r,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function e2(r,t){const e=[],n=new Map;t=qg({strict:!1,end:!0,sensitive:!1},t);function i(d){return n.get(d)}function o(d,p,_){const v=!_,w=n2(d);w.aliasOf=_&&_.record;const E=qg(t,d),O=[w];if("alias"in d){const X=typeof d.alias=="string"?[d.alias]:d.alias;for(const B of X)O.push(Kt({},w,{components:_?_.record.components:w.components,path:B,aliasOf:_?_.record:w}))}let M,R;for(const X of O){const{path:B}=X;if(p&&B[0]!=="/"){const $=p.record.path,tt=$[$.length-1]==="/"?"":"/";X.path=p.record.path+(B&&tt+B)}if(M=t2(X,p,E),_?_.alias.push(M):(R=R||M,R!==M&&R.alias.push(M),v&&d.name&&!Kg(M)&&l(d.name)),w.children){const $=w.children;for(let tt=0;tt<$.length;tt++)o($[tt],M,_&&_.children[tt])}_=_||M,(M.record.components&&Object.keys(M.record.components).length||M.record.name||M.record.redirect)&&h(M)}return R?()=>{l(R)}:Us}function l(d){if(Im(d)){const p=n.get(d);p&&(n.delete(d),e.splice(e.indexOf(p),1),p.children.forEach(l),p.alias.forEach(l))}else{const p=e.indexOf(d);p>-1&&(e.splice(p,1),d.record.name&&n.delete(d.record.name),d.children.forEach(l),d.alias.forEach(l))}}function c(){return e}function h(d){let p=0;for(;p<e.length&&qO(d,e[p])>=0&&(d.record.path!==e[p].record.path||!jm(d,e[p]));)p++;e.splice(p,0,d),d.record.name&&!Kg(d)&&n.set(d.record.name,d)}function f(d,p){let _,v={},w,E;if("name"in d&&d.name){if(_=n.get(d.name),!_)throw is(1,{location:d});E=_.record.name,v=Kt($g(p.params,_.keys.filter(R=>!R.optional).map(R=>R.name)),d.params&&$g(d.params,_.keys.map(R=>R.name))),w=_.stringify(v)}else if("path"in d)w=d.path,_=e.find(R=>R.re.test(w)),_&&(v=_.parse(w),E=_.record.name);else{if(_=p.name?n.get(p.name):e.find(R=>R.re.test(p.path)),!_)throw is(1,{location:d,currentLocation:p});E=_.record.name,v=Kt({},p.params,d.params),w=_.stringify(v)}const O=[];let M=_;for(;M;)O.unshift(M.record),M=M.parent;return{name:E,path:w,params:v,matched:O,meta:i2(O)}}return r.forEach(d=>o(d)),{addRoute:o,resolve:f,removeRoute:l,getRoutes:c,getRecordMatcher:i}}function $g(r,t){const e={};for(const n of t)n in r&&(e[n]=r[n]);return e}function n2(r){return{path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:void 0,beforeEnter:r.beforeEnter,props:r2(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||null:r.component&&{default:r.component}}}function r2(r){const t={},e=r.props||!1;if("component"in r)t.default=e;else for(const n in r.components)t[n]=typeof e=="object"?e[n]:e;return t}function Kg(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function i2(r){return r.reduce((t,e)=>Kt(t,e.meta),{})}function qg(r,t){const e={};for(const n in r)e[n]=n in t?t[n]:r[n];return e}function jm(r,t){return t.children.some(e=>e===r||jm(r,e))}const Wm=/#/g,s2=/&/g,o2=/\//g,a2=/=/g,l2=/\?/g,Xm=/\+/g,c2=/%5B/g,h2=/%5D/g,Hm=/%5E/g,u2=/%60/g,Ym=/%7B/g,f2=/%7C/g,Um=/%7D/g,d2=/%20/g;function Yh(r){return encodeURI(""+r).replace(f2,"|").replace(c2,"[").replace(h2,"]")}function g2(r){return Yh(r).replace(Ym,"{").replace(Um,"}").replace(Hm,"^")}function sh(r){return Yh(r).replace(Xm,"%2B").replace(d2,"+").replace(Wm,"%23").replace(s2,"%26").replace(u2,"`").replace(Ym,"{").replace(Um,"}").replace(Hm,"^")}function p2(r){return sh(r).replace(a2,"%3D")}function m2(r){return Yh(r).replace(Wm,"%23").replace(l2,"%3F")}function _2(r){return r==null?"":m2(r).replace(o2,"%2F")}function Ea(r){try{return decodeURIComponent(""+r)}catch{}return""+r}function v2(r){const t={};if(r===""||r==="?")return t;const n=(r[0]==="?"?r.slice(1):r).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(Xm," "),l=o.indexOf("="),c=Ea(l<0?o:o.slice(0,l)),h=l<0?null:Ea(o.slice(l+1));if(c in t){let f=t[c];Xn(f)||(f=t[c]=[f]),f.push(h)}else t[c]=h}return t}function Jg(r){let t="";for(let e in r){const n=r[e];if(e=p2(e),n==null){n!==void 0&&(t+=(t.length?"&":"")+e);continue}(Xn(n)?n.map(o=>o&&sh(o)):[n&&sh(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+e,o!=null&&(t+="="+o))})}return t}function y2(r){const t={};for(const e in r){const n=r[e];n!==void 0&&(t[e]=Xn(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const x2=Symbol(""),Zg=Symbol(""),Uh=Symbol(""),Nm=Symbol(""),oh=Symbol("");function ks(){let r=[];function t(n){return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}function e(){r=[]}return{add:t,list:()=>r.slice(),reset:e}}function jr(r,t,e,n,i){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((l,c)=>{const h=p=>{p===!1?c(is(4,{from:e,to:t})):p instanceof Error?c(p):zO(p)?c(is(2,{from:t,to:p})):(o&&n.enterCallbacks[i]===o&&typeof p=="function"&&o.push(p),l())},f=r.call(n&&n.instances[i],t,e,h);let d=Promise.resolve(f);r.length<3&&(d=d.then(h)),d.catch(p=>c(p))})}function kc(r,t,e,n){const i=[];for(const o of r)for(const l in o.components){let c=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(w2(c)){const f=(c.__vccOpts||c)[t];f&&i.push(jr(f,e,n,o,l))}else{let h=c();i.push(()=>h.then(f=>{if(!f)return Promise.reject(new Error(`Couldn't resolve component "${l}" at "${o.path}"`));const d=EO(f)?f.default:f;o.components[l]=d;const _=(d.__vccOpts||d)[t];return _&&jr(_,e,n,o,l)()}))}}return i}function w2(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function Qg(r){const t=dr(Uh),e=dr(Nm),n=Ve(()=>t.resolve(Hr(r.to))),i=Ve(()=>{const{matched:h}=n.value,{length:f}=h,d=h[f-1],p=e.matched;if(!d||!p.length)return-1;const _=p.findIndex(rs.bind(null,d));if(_>-1)return _;const v=tp(h[f-2]);return f>1&&tp(d)===v&&p[p.length-1].path!==v?p.findIndex(rs.bind(null,h[f-2])):_}),o=Ve(()=>i.value>-1&&T2(e.params,n.value.params)),l=Ve(()=>i.value>-1&&i.value===e.matched.length-1&&Rm(e.params,n.value.params));function c(h={}){return b2(h)?t[Hr(r.replace)?"replace":"push"](Hr(r.to)).catch(Us):Promise.resolve()}return{route:n,href:Ve(()=>n.value.href),isActive:o,isExactActive:l,navigate:c}}const C2=xi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Qg,setup(r,{slots:t}){const e=za(Qg(r)),{options:n}=dr(Uh),i=Ve(()=>({[ep(r.activeClass,n.linkActiveClass,"router-link-active")]:e.isActive,[ep(r.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const o=t.default&&t.default(e);return r.custom?o:Lm("a",{"aria-current":e.isExactActive?r.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:i.value},o)}}}),S2=C2;function b2(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const t=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return r.preventDefault&&r.preventDefault(),!0}}function T2(r,t){for(const e in t){const n=t[e],i=r[e];if(typeof n=="string"){if(n!==i)return!1}else if(!Xn(i)||i.length!==n.length||n.some((o,l)=>o!==i[l]))return!1}return!0}function tp(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const ep=(r,t,e)=>r??t??e,O2=xi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(r,{attrs:t,slots:e}){const n=dr(oh),i=Ve(()=>r.route||n.value),o=dr(Zg,0),l=Ve(()=>{let f=Hr(o);const{matched:d}=i.value;let p;for(;(p=d[f])&&!p.components;)f++;return f}),c=Ve(()=>i.value.matched[l.value]);va(Zg,Ve(()=>l.value+1)),va(x2,c),va(oh,i);const h=ai();return _a(()=>[h.value,c.value,r.name],([f,d,p],[_,v,w])=>{d&&(d.instances[p]=f,v&&v!==d&&f&&f===_&&(d.leaveGuards.size||(d.leaveGuards=v.leaveGuards),d.updateGuards.size||(d.updateGuards=v.updateGuards))),f&&d&&(!v||!rs(d,v)||!_)&&(d.enterCallbacks[p]||[]).forEach(E=>E(f))},{flush:"post"}),()=>{const f=i.value,d=r.name,p=c.value,_=p&&p.components[d];if(!_)return np(e.default,{Component:_,route:f});const v=p.props[d],w=v?v===!0?f.params:typeof v=="function"?v(f):v:null,O=Lm(_,Kt({},w,t,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(p.instances[d]=null)},ref:h}));return np(e.default,{Component:O,route:f})||O}}});function np(r,t){if(!r)return null;const e=r(t);return e.length===1?e[0]:e}const zm=O2;function E2(r){const t=e2(r.routes,r),e=r.parseQuery||v2,n=r.stringifyQuery||Jg,i=r.history,o=ks(),l=ks(),c=ks(),h=Ub(Rr);let f=Rr;Ni&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Ac.bind(null,U=>""+U),p=Ac.bind(null,_2),_=Ac.bind(null,Ea);function v(U,et){let J,ft;return Im(U)?(J=t.getRecordMatcher(U),ft=et):ft=U,t.addRoute(ft,J)}function w(U){const et=t.getRecordMatcher(U);et&&t.removeRoute(et)}function E(){return t.getRoutes().map(U=>U.record)}function O(U){return!!t.getRecordMatcher(U)}function M(U,et){if(et=Kt({},et||h.value),typeof U=="string"){const L=Mc(e,U,et.path),j=t.resolve({path:L.path},et),N=i.createHref(L.fullPath);return Kt(L,j,{params:_(j.params),hash:Ea(L.hash),redirectedFrom:void 0,href:N})}let J;if("path"in U)J=Kt({},U,{path:Mc(e,U.path,et.path).path});else{const L=Kt({},U.params);for(const j in L)L[j]==null&&delete L[j];J=Kt({},U,{params:p(L)}),et.params=p(et.params)}const ft=t.resolve(J,et),Rt=U.hash||"";ft.params=d(_(ft.params));const C=AO(n,Kt({},U,{hash:g2(Rt),path:ft.path})),b=i.createHref(C);return Kt({fullPath:C,hash:Rt,query:n===Jg?y2(U.query):U.query||{}},ft,{redirectedFrom:void 0,href:b})}function R(U){return typeof U=="string"?Mc(e,U,h.value.path):Kt({},U)}function X(U,et){if(f!==U)return is(8,{from:et,to:U})}function B(U){return nt(U)}function $(U){return B(Kt(R(U),{replace:!0}))}function tt(U){const et=U.matched[U.matched.length-1];if(et&&et.redirect){const{redirect:J}=et;let ft=typeof J=="function"?J(U):J;return typeof ft=="string"&&(ft=ft.includes("?")||ft.includes("#")?ft=R(ft):{path:ft},ft.params={}),Kt({query:U.query,hash:U.hash,params:"path"in ft?{}:U.params},ft)}}function nt(U,et){const J=f=M(U),ft=h.value,Rt=U.state,C=U.force,b=U.replace===!0,L=tt(J);if(L)return nt(Kt(R(L),{state:typeof L=="object"?Kt({},Rt,L.state):Rt,force:C,replace:b}),et||J);const j=J;j.redirectedFrom=et;let N;return!C&&MO(n,ft,J)&&(N=is(16,{to:j,from:ft}),Jt(ft,ft,!0,!1)),(N?Promise.resolve(N):lt(j,ft)).catch(z=>cr(z)?cr(z,2)?z:At(z):ct(z,j,ft)).then(z=>{if(z){if(cr(z,2))return nt(Kt({replace:b},R(z.to),{state:typeof z.to=="object"?Kt({},Rt,z.to.state):Rt,force:C}),et||j)}else z=Lt(j,ft,!0,b,Rt);return pt(j,ft,z),z})}function ot(U,et){const J=X(U,et);return J?Promise.reject(J):Promise.resolve()}function it(U){const et=Sr.values().next().value;return et&&typeof et.runWithContext=="function"?et.runWithContext(U):U()}function lt(U,et){let J;const[ft,Rt,C]=P2(U,et);J=kc(ft.reverse(),"beforeRouteLeave",U,et);for(const L of ft)L.leaveGuards.forEach(j=>{J.push(jr(j,U,et))});const b=ot.bind(null,U,et);return J.push(b),de(J).then(()=>{J=[];for(const L of o.list())J.push(jr(L,U,et));return J.push(b),de(J)}).then(()=>{J=kc(Rt,"beforeRouteUpdate",U,et);for(const L of Rt)L.updateGuards.forEach(j=>{J.push(jr(j,U,et))});return J.push(b),de(J)}).then(()=>{J=[];for(const L of C)if(L.beforeEnter)if(Xn(L.beforeEnter))for(const j of L.beforeEnter)J.push(jr(j,U,et));else J.push(jr(L.beforeEnter,U,et));return J.push(b),de(J)}).then(()=>(U.matched.forEach(L=>L.enterCallbacks={}),J=kc(C,"beforeRouteEnter",U,et),J.push(b),de(J))).then(()=>{J=[];for(const L of l.list())J.push(jr(L,U,et));return J.push(b),de(J)}).catch(L=>cr(L,8)?L:Promise.reject(L))}function pt(U,et,J){c.list().forEach(ft=>it(()=>ft(U,et,J)))}function Lt(U,et,J,ft,Rt){const C=X(U,et);if(C)return C;const b=et===Rr,L=Ni?history.state:{};J&&(ft||b?i.replace(U.fullPath,Kt({scroll:b&&L&&L.scroll},Rt)):i.push(U.fullPath,Rt)),h.value=U,Jt(U,et,J,b),At()}let Wt;function jt(){Wt||(Wt=i.listen((U,et,J)=>{if(!En.listening)return;const ft=M(U),Rt=tt(ft);if(Rt){nt(Kt(Rt,{replace:!0}),ft).catch(Us);return}f=ft;const C=h.value;Ni&&WO(Ug(C.fullPath,J.delta),Qa()),lt(ft,C).catch(b=>cr(b,12)?b:cr(b,2)?(nt(b.to,ft).then(L=>{cr(L,20)&&!J.delta&&J.type===ro.pop&&i.go(-1,!1)}).catch(Us),Promise.reject()):(J.delta&&i.go(-J.delta,!1),ct(b,ft,C))).then(b=>{b=b||Lt(ft,C,!1),b&&(J.delta&&!cr(b,8)?i.go(-J.delta,!1):J.type===ro.pop&&cr(b,20)&&i.go(-1,!1)),pt(ft,C,b)}).catch(Us)}))}let Nt=ks(),Ht=ks(),at;function ct(U,et,J){At(U);const ft=Ht.list();return ft.length?ft.forEach(Rt=>Rt(U,et,J)):console.error(U),Promise.reject(U)}function ne(){return at&&h.value!==Rr?Promise.resolve():new Promise((U,et)=>{Nt.add([U,et])})}function At(U){return at||(at=!U,jt(),Nt.list().forEach(([et,J])=>U?J(U):et()),Nt.reset()),U}function Jt(U,et,J,ft){const{scrollBehavior:Rt}=r;if(!Ni||!Rt)return Promise.resolve();const C=!J&&XO(Ug(U.fullPath,0))||(ft||!J)&&history.state&&history.state.scroll||null;return lm().then(()=>Rt(U,et,C)).then(b=>b&&jO(b)).catch(b=>ct(b,U,et))}const ye=U=>i.go(U);let Yn;const Sr=new Set,En={currentRoute:h,listening:!0,addRoute:v,removeRoute:w,hasRoute:O,getRoutes:E,resolve:M,options:r,push:B,replace:$,go:ye,back:()=>ye(-1),forward:()=>ye(1),beforeEach:o.add,beforeResolve:l.add,afterEach:c.add,onError:Ht.add,isReady:ne,install(U){const et=this;U.component("RouterLink",S2),U.component("RouterView",zm),U.config.globalProperties.$router=et,Object.defineProperty(U.config.globalProperties,"$route",{enumerable:!0,get:()=>Hr(h)}),Ni&&!Yn&&h.value===Rr&&(Yn=!0,B(i.location).catch(Rt=>{}));const J={};for(const Rt in Rr)Object.defineProperty(J,Rt,{get:()=>h.value[Rt],enumerable:!0});U.provide(Uh,et),U.provide(Nm,tm(J)),U.provide(oh,h);const ft=U.unmount;Sr.add(U),U.unmount=function(){Sr.delete(U),Sr.size<1&&(f=Rr,Wt&&Wt(),Wt=null,h.value=Rr,Yn=!1,at=!1),ft()}}};function de(U){return U.reduce((et,J)=>et.then(()=>it(J)),Promise.resolve())}return En}function P2(r,t){const e=[],n=[],i=[],o=Math.max(t.matched.length,r.matched.length);for(let l=0;l<o;l++){const c=t.matched[l];c&&(r.matched.find(f=>rs(f,c))?n.push(c):e.push(c));const h=r.matched[l];h&&(t.matched.find(f=>rs(f,h))||i.push(h))}return[e,n,i]}const D2=xi({__name:"App",setup(r){return(t,e)=>(gn(),qa(Hr(zm)))}});const A2=(r,t)=>{const e=r.__vccOpts||r;for(const[n,i]of t)e[n]=i;return e},M2=A2(D2,[["__scopeId","data-v-651df105"]]),k2="modulepreload",L2=function(r){return"/tattoo-builder/"+r},rp={},R2=function(t,e,n){if(!e||e.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(e.map(o=>{if(o=L2(o),o in rp)return;rp[o]=!0;const l=o.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(!!n)for(let d=i.length-1;d>=0;d--){const p=i[d];if(p.href===o&&(!l||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":k2,l||(f.as="script",f.crossOrigin=""),f.href=o,document.head.appendChild(f),l)return new Promise((d,p)=>{f.addEventListener("load",d),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})},F2="/tattoo-builder/assets/ig-logo-96f41ae6.png";function ip(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function D(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ip(Object(e),!0).forEach(function(n){A(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ip(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function A(r,t,e){return t=Vm(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function I2(r,t){if(r==null)return{};var e={},n=Object.keys(r),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(e[i]=r[i]);return e}function ee(r,t){if(r==null)return{};var e=I2(r,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function Zn(r,t){return t||(t=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(t)}}))}function B2(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function Vm(r){var t=B2(r,"string");return typeof t=="symbol"?t:String(t)}class sp{constructor(){A(this,"browserShadowBlurConstant",1),A(this,"DPI",96),A(this,"devicePixelRatio",1),A(this,"perfLimitSizeTotal",2097152),A(this,"maxCacheSideLimit",4096),A(this,"minCacheSideLimit",256),A(this,"disableStyleCopyPaste",!1),A(this,"enableGLFiltering",!0),A(this,"textureSize",4096),A(this,"forceGLPutImageData",!1),A(this,"cachesBoundsOfCurve",!0),A(this,"fontPaths",{}),A(this,"NUM_FRACTION_DIGITS",4)}}class j2 extends sp{constructor(t){super(),this.configure(t)}configure(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,t)}addFonts(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=D(D({},this.fontPaths),t)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(e=>{delete this.fontPaths[e]})}clearFonts(){this.fontPaths={}}restoreDefaults(t){const e=new sp,n=(t==null?void 0:t.reduce((i,o)=>(i[o]=e[o],i),{}))||e;this.configure(n)}}const Dt=new j2;class W2{}class X2 extends W2{testPrecision(t,e){const n="precision ".concat(e,` float;
void main(){}`),i=t.createShader(t.FRAGMENT_SHADER);return i?(t.shaderSource(i,n),t.compileShader(i),!!t.getShaderParameter(i,t.COMPILE_STATUS)):!1}queryWebGL(t){const e=t.getContext("webgl");e&&(this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(n=>this.testPrecision(e,n)),console.log("fabric: max texture size ".concat(this.maxTextureSize)))}isSupported(t){return!!this.maxTextureSize&&this.maxTextureSize>=t}}const H2={};let op=!1,ap;const Y2=()=>(op||(Dt.configure({devicePixelRatio:window.devicePixelRatio||1}),ap="ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,op=!0),{document,window,isTouchSupported:ap,WebGLProbe:new X2,dispose(){},copyPasteData:H2}),Jn=()=>Y2(),us=()=>Jn().document,fi=()=>Jn().window;class U2{constructor(){A(this,"charWidthsCache",{}),A(this,"boundsOfCurveCache",{})}getFontCache(t){let{fontFamily:e,fontStyle:n,fontWeight:i}=t;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const o=this.charWidthsCache[e],l="".concat(n.toLowerCase(),"_").concat((i+"").toLowerCase());return o[l]||(o[l]={}),o[l]}clearFontCache(t){t=(t||"").toLowerCase(),t?this.charWidthsCache[t]&&delete this.charWidthsCache[t]:this.charWidthsCache={}}limitDimsByArea(t){const{perfLimitSizeTotal:e}=Dt,n=Math.sqrt(e*t);return[Math.floor(n),Math.floor(e/n)]}}const zs=new U2;var N2="6.0.0-beta13";const ah=N2;function mi(){}const vr=Math.PI/2,mr=Math.PI*2,Nh=Math.PI/180,pn=Object.freeze([1,0,0,1,0,0]),zh=16,lp=2,Fr=1-.5522847498,cp=1,ua=2,fa=3,bt="center",Ut="left",je="top",lh="bottom",_e="right",rn="none",Vh=/\r?\n/,Ls="json",Lc="svg";class z2{constructor(){this[Ls]=new Map,this[Lc]=new Map}getClass(t){const e=this[Ls].get(t);if(!e)throw new Error("No class registered for ".concat(t));return e}setClass(t,e){e?this[Ls].set(e,t):(this[Ls].set(t.type,t),this[Ls].set(t.type.toLowerCase(),t))}getSVGClass(t){return this[Lc].get(t)}setSVGClass(t,e){this[Lc].set(e??t.type.toLowerCase(),t)}}const dt=new z2;class V2 extends Array{remove(t){const e=this.indexOf(t);e>-1&&this.splice(e,1)}cancelAll(){const t=this.splice(0);return t.forEach(e=>e.abort()),t}cancelByCanvas(t){if(!t)return[];const e=this.filter(n=>{var i;return typeof n.target=="object"&&((i=n.target)===null||i===void 0?void 0:i.canvas)===t});return e.forEach(n=>n.abort()),e}cancelByTarget(t){if(!t)return[];const e=this.filter(n=>n.target===t);return e.forEach(n=>n.abort()),e}}const ch=new V2;class G2{constructor(){A(this,"__eventListeners",{})}on(t,e){if(this.__eventListeners||(this.__eventListeners={}),typeof t=="object")return Object.entries(t).forEach(n=>{let[i,o]=n;this.on(i,o)}),()=>this.off(t);if(e){const n=t;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(e),()=>this.off(n,e)}else return()=>!1}once(t,e){if(typeof t=="object"){const n=[];return Object.entries(t).forEach(i=>{let[o,l]=i;n.push(this.once(o,l))}),()=>n.forEach(i=>i())}else if(e){const n=this.on(t,function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];e.call(this,...l),n()});return n}else return()=>!1}_removeEventListener(t,e){if(this.__eventListeners[t])if(e){const n=this.__eventListeners[t],i=n.indexOf(e);i>-1&&n.splice(i,1)}else this.__eventListeners[t]=[]}off(t,e){if(this.__eventListeners)if(typeof t>"u")for(const n in this.__eventListeners)this._removeEventListener(n);else typeof t=="object"?Object.entries(t).forEach(n=>{let[i,o]=n;this._removeEventListener(i,o)}):this._removeEventListener(t,e)}fire(t,e){var n;if(!this.__eventListeners)return;const i=(n=this.__eventListeners[t])===null||n===void 0?void 0:n.concat();if(i)for(let o=0;o<i.length;o++)i[o].call(this,e||{})}}const $2=(r,t)=>{for(let e=r.length-1;e>=0;e--)if(t(r[e],e,r))return e;return-1},K2=(r,t)=>Math.floor(Math.random()*(t-r+1))+r,zi=(r,t)=>isNaN(r)&&typeof t=="number"?t:r,hi=(r,t)=>{const e=r.indexOf(t);return e!==-1&&r.splice(e,1),r},$e=r=>{if(r===0)return 1;switch(Math.abs(r)/vr){case 1:case 3:return 0;case 2:return-1}return Math.cos(r)},Ke=r=>{if(r===0)return 0;const t=r/vr,e=Math.sign(r);switch(t){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(r)};class F{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof t=="object"?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}add(t){return new F(this.x+t.x,this.y+t.y)}addEquals(t){return this.x+=t.x,this.y+=t.y,this}scalarAdd(t){return new F(this.x+t,this.y+t)}scalarAddEquals(t){return this.x+=t,this.y+=t,this}subtract(t){return new F(this.x-t.x,this.y-t.y)}subtractEquals(t){return this.x-=t.x,this.y-=t.y,this}scalarSubtract(t){return new F(this.x-t,this.y-t)}scalarSubtractEquals(t){return this.x-=t,this.y-=t,this}multiply(t){return new F(this.x*t.x,this.y*t.y)}scalarMultiply(t){return new F(this.x*t,this.y*t)}scalarMultiplyEquals(t){return this.x*=t,this.y*=t,this}divide(t){return new F(this.x/t.x,this.y/t.y)}scalarDivide(t){return new F(this.x/t,this.y/t)}scalarDivideEquals(t){return this.x/=t,this.y/=t,this}eq(t){return this.x===t.x&&this.y===t.y}lt(t){return this.x<t.x&&this.y<t.y}lte(t){return this.x<=t.x&&this.y<=t.y}gt(t){return this.x>t.x&&this.y>t.y}gte(t){return this.x>=t.x&&this.y>=t.y}lerp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return e=Math.max(Math.min(1,e),0),new F(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)}distanceFrom(t){const e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}midPointFrom(t){return this.lerp(t)}min(t){return new F(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new F(Math.max(this.x,t.x),Math.max(this.y,t.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPoint(t){return this.x=t.x,this.y=t.y,this}swap(t){const e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n}clone(){return new F(this.x,this.y)}rotate(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:q2;const n=Ke(t),i=$e(t),o=this.subtract(e);return new F(o.x*i-o.y*n,o.x*n+o.y*i).add(e)}transform(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new F(t[0]*this.x+t[2]*this.y+(e?0:t[4]),t[1]*this.x+t[3]*this.y+(e?0:t[5]))}}const q2=new F(0,0);function Gm(r){class t extends r{constructor(){super(...arguments),A(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];const l=this._objects.push(...i);return i.forEach(c=>this._onObjectAdded(c)),l}insertAt(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return this._objects.splice(n,0,...o),o.forEach(c=>this._onObjectAdded(c)),this._objects.length}remove(){const n=this._objects,i=[];for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return l.forEach(h=>{const f=n.indexOf(h);f!==-1&&(n.splice(f,1),i.push(h),this._onObjectRemoved(h))}),i}forEachObject(n){this.getObjects().forEach((i,o,l)=>n(i,o,l))}getObjects(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return i.length===0?[...this._objects]:this._objects.filter(l=>l.isType(...i))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,i){return this._objects.includes(n)?!0:i?this._objects.some(o=>o instanceof t&&o.contains(n,!0)):!1}complexity(){return this._objects.reduce((n,i)=>(n+=i.complexity?i.complexity():0,n),0)}sendObjectToBack(n){return!n||n===this._objects[0]?!1:(hi(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!n||n===this._objects[this._objects.length-1]?!1:(hi(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,i){if(!n)return!1;const o=this._objects.indexOf(n);if(o!==0){const l=this.findNewLowerIndex(n,o,i);return hi(this._objects,n),this._objects.splice(l,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,i){if(!n)return!1;const o=this._objects.indexOf(n);if(o!==this._objects.length-1){const l=this.findNewUpperIndex(n,o,i);return hi(this._objects,n),this._objects.splice(l,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,i){return n===this._objects[i]?!1:(hi(this._objects,n),this._objects.splice(i,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,i,o){let l;if(o){l=i;for(let c=i-1;c>=0;--c)if(n.isOverlapping(this._objects[c])){l=c;break}}else l=i-1;return l}findNewUpperIndex(n,i,o){let l;if(o){l=i;for(let c=i+1;c<this._objects.length;++c)if(n.isOverlapping(this._objects[c])){l=c;break}}else l=i+1;return l}collectObjects(n){let{left:i,top:o,width:l,height:c}=n,{includeIntersecting:h=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const f=[],d=new F(i,o),p=d.add(new F(l,c));for(let _=this._objects.length-1;_>=0;_--){const v=this._objects[_];v.selectable&&v.visible&&(h&&v.intersectsWithRect(d,p,!0)||v.isContainedWithinRect(d,p,!0)||h&&v.containsPoint(d,void 0,!0)||h&&v.containsPoint(p,void 0,!0))&&f.push(v)}return f}}return t}class $m extends G2{_setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const e in t)this.set(e,t[e])}_setObject(t){for(const e in t)this._set(e,t[e])}set(t,e){return typeof t=="object"?this._setObject(t):this._set(t,e),this}_set(t,e){this[t]=e}toggle(t){const e=this.get(t);return typeof e=="boolean"&&this.set(t,!e),this}get(t){return this[t]}}function Vs(r){return fi().requestAnimationFrame(r)}function Km(r){return fi().cancelAnimationFrame(r)}let J2=0;const zr=()=>J2++,fe=()=>{const r=us().createElement("canvas");if(!r||typeof r.getContext>"u")throw new Error("Failed to create `canvas` element");return r},qm=()=>us().createElement("img"),Z2=r=>{var t;const e=fe();return e.width=r.width,e.height=r.height,(t=e.getContext("2d"))===null||t===void 0||t.drawImage(r,0,0),e},Gh=(r,t,e)=>r.toDataURL("image/".concat(t),e),Q2=r=>!!r&&r.getContext!==void 0,te=r=>r*Nh,ss=r=>r/Nh,tE=["translateX","translateY","angle"],eE=r=>r.every((t,e)=>t===pn[e]),he=(r,t,e)=>new F(r).transform(t,e),Me=r=>{const t=1/(r[0]*r[3]-r[1]*r[2]),e=[t*r[3],-t*r[1],-t*r[2],t*r[0],0,0],{x:n,y:i}=new F(r[4],r[5]).transform(e,!0);return e[4]=-n,e[5]=-i,e},ke=(r,t,e)=>[r[0]*t[0]+r[2]*t[1],r[1]*t[0]+r[3]*t[1],r[0]*t[2]+r[2]*t[3],r[1]*t[2]+r[3]*t[3],e?0:r[0]*t[4]+r[2]*t[5]+r[4],e?0:r[1]*t[4]+r[3]*t[5]+r[5]],tl=(r,t)=>r.reduceRight((e,n)=>n?ke(n,e,t):e,pn),vi=r=>{const t=Math.atan2(r[1],r[0]),e=Math.pow(r[0],2)+Math.pow(r[1],2),n=Math.sqrt(e),i=(r[0]*r[3]-r[2]*r[1])/n,o=Math.atan2(r[0]*r[2]+r[1]*r[3],e);return{angle:ss(t),scaleX:n,scaleY:i,skewX:ss(o),skewY:0,translateX:r[4]||0,translateY:r[5]||0}},lo=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return[1,0,0,1,r,t]};function co(){let{angle:r=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:t=0,y:e=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=te(r),i=$e(n),o=Ke(n);return[i,o,-o,i,t?t-(i*t-o*e):0,e?e-(o*t+i*e):0]}const $h=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r;return[r,0,0,t,0,0]},Jm=r=>Math.tan(te(r)),Kh=r=>[1,0,Jm(r),1,0,0],qh=r=>[1,Jm(r),0,1,0,0],el=r=>{let{scaleX:t=1,scaleY:e=1,flipX:n=!1,flipY:i=!1,skewX:o=0,skewY:l=0}=r;return tl([$h(n?-t:t,i?-e:e),o&&Kh(o),l&&qh(l)],!0)},Zm=r=>{let{translateX:t=0,translateY:e=0,angle:n=0}=r,i=ee(r,tE);return tl([lo(t,e),n&&co({angle:n}),el(i)])},Gs=function(r){let{signal:t,crossOrigin:e=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,i){if(t&&t.aborted)return i(new Error("`options.signal` is in `aborted` state"));const o=qm();let l;t&&(l=function(h){o.src="",i(h)},t.addEventListener("abort",l,{once:!0}));const c=function(){o.onload=o.onerror=null,l&&(t==null||t.removeEventListener("abort",l)),n(o)};if(!r){c();return}o.onload=c,o.onerror=function(){l&&(t==null||t.removeEventListener("abort",l)),i(new Error("Error loading "+o.src))},e&&(o.crossOrigin=e),o.src=r})},os=function(r){let{signal:t,reviver:e=mi}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,i)=>{const o=[];t&&t.addEventListener("abort",i,{once:!0}),Promise.all(r.map(l=>dt.getClass(l.type).fromObject(l,{signal:t,reviver:e}).then(c=>(e(l,c),o.push(c),c)))).then(n).catch(l=>{o.forEach(c=>{c.dispose&&c.dispose()}),i(l)}).finally(()=>{t&&t.removeEventListener("abort",i)})})},ho=function(r){let{signal:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((e,n)=>{const i=[];t&&t.addEventListener("abort",n,{once:!0});const o=Object.values(r).map(c=>c&&(c.colorStops?new(dt.getClass("gradient"))(c):c.type?os([c],{signal:t}).then(h=>{let[f]=h;return i.push(f),f}):c.source?dt.getClass("pattern").fromObject(c,{signal:t}).then(h=>(i.push(h),h)):c)),l=Object.keys(r);Promise.all(o).then(c=>c.reduce((h,f,d)=>(h[l[d]]=f,h),{})).then(e).catch(c=>{i.forEach(h=>{h.dispose&&h.dispose()}),n(c)}).finally(()=>{t&&t.removeEventListener("abort",n)})})},wi=function(r){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,n)=>(n in r&&(e[n]=r[n]),e),{})},Qm=(r,t)=>Object.keys(r).reduce((e,n)=>(t(r[n],n,r)&&(e[n]=r[n]),e),{}),hp={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},nE=()=>/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i,rE=()=>/^hsla?\(\s*([+-]?\d{1,3})\s*[\s|,]\s*(\d{1,3}%)\s*[\s|,]\s*(\d{1,3}%)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i,iE=()=>/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i,Rc=(r,t,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+(t-r)*6*e:e<1/2?t:e<2/3?r+(t-r)*(2/3-e)*6:r),up=(r,t,e,n)=>{r/=255,t/=255,e/=255;const i=Math.max(r,t,e),o=Math.min(r,t,e);let l,c;const h=(i+o)/2;if(i===o)l=c=0;else{const f=i-o;switch(c=h>.5?f/(2-i-o):f/(i+o),i){case r:l=(t-e)/f+(t<e?6:0);break;case t:l=(e-r)/f+2;break;case e:l=(r-t)/f+4;break}l/=6}return[Math.round(l*360),Math.round(c*100),Math.round(h*100),n]},fp=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(r)/(r.endsWith("%")?100:1)},da=r=>Math.min(Math.round(r),255).toString(16).toUpperCase().padStart(2,"0"),dp=r=>{let[t,e,n,i=1]=r;const o=Math.round(t*.3+e*.59+n*.11);return[o,o,o,i]};class qt{constructor(t){if(!t)this.setSource([0,0,0,1]);else if(t instanceof qt)this.setSource([...t._source]);else if(Array.isArray(t)){const[e,n,i,o=1]=t;this.setSource([e,n,i,o])}else this.setSource(this._tryParsingColor(t))}_tryParsingColor(t){return t in hp&&(t=hp[t]),t==="transparent"?[255,255,255,0]:qt.sourceFromHex(t)||qt.sourceFromRgb(t)||qt.sourceFromHsl(t)||[0,0,0,1]}getSource(){return this._source}setSource(t){this._source=t}toRgb(){const[t,e,n]=this.getSource();return"rgb(".concat(t,",").concat(e,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[t,e,n]=up(...this.getSource());return"hsl(".concat(t,",").concat(e,"%,").concat(n,"%)")}toHsla(){const[t,e,n,i]=up(...this.getSource());return"hsla(".concat(t,",").concat(e,"%,").concat(n,"%,").concat(i,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[t,e,n,i]=this.getSource();return"".concat(da(t)).concat(da(e)).concat(da(n)).concat(da(Math.round(i*255)))}getAlpha(){return this.getSource()[3]}setAlpha(t){return this._source[3]=t,this}toGrayscale(){return this.setSource(dp(this.getSource())),this}toBlackWhite(t){const[e,,,n]=dp(this.getSource()),i=e<(t||127)?0:255;return this.setSource([i,i,i,n]),this}overlayWith(t){t instanceof qt||(t=new qt(t));const e=this.getSource(),n=.5,i=t.getSource(),[o,l,c]=e.map((h,f)=>Math.round(h*(1-n)+i[f]*n));return this.setSource([o,l,c,e[3]]),this}static fromRgb(t){return qt.fromRgba(t)}static fromRgba(t){return new qt(qt.sourceFromRgb(t))}static sourceFromRgb(t){const e=t.match(nE());if(e){const[n,i,o]=e.slice(1,4).map(l=>{const c=parseFloat(l);return l.endsWith("%")?Math.round(c*2.55):c});return[n,i,o,fp(e[4])]}}static fromHsl(t){return qt.fromHsla(t)}static fromHsla(t){return new qt(qt.sourceFromHsl(t))}static sourceFromHsl(t){const e=t.match(rE());if(!e)return;const n=(parseFloat(e[1])%360+360)%360/360,i=parseFloat(e[2])/100,o=parseFloat(e[3])/100;let l,c,h;if(i===0)l=c=h=o;else{const f=o<=.5?o*(i+1):o+i-o*i,d=o*2-f;l=Rc(d,f,n+1/3),c=Rc(d,f,n),h=Rc(d,f,n-1/3)}return[Math.round(l*255),Math.round(c*255),Math.round(h*255),fp(e[4])]}static fromHex(t){return new qt(qt.sourceFromHex(t))}static sourceFromHex(t){if(t.match(iE())){const e=t.slice(t.indexOf("#")+1),n=e.length<=4;let i;n?i=e.split("").map(f=>f+f):i=e.match(/.{2}/g);const[o,l,c,h=255]=i.map(f=>parseInt(f,16));return[o,l,c,h/255]}}}const Bt=(r,t)=>parseFloat(Number(r).toFixed(t)),sE=r=>{const t=["instantiated_by_use","style","id","class"];switch(r){case"linearGradient":return t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return t.concat(["offset","stop-color","stop-opacity"])}return t},_i=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zh;const e=/\D{0,2}$/.exec(r),n=parseFloat(r),i=Dt.DPI;switch(e==null?void 0:e[0]){case"mm":return n*i/25.4;case"cm":return n*i/2.54;case"in":return n*i;case"pt":return n*i/72;case"pc":return n*i/72*12;case"em":return n*t;default:return n}},oE=r=>r&&r!==rn?[r.slice(1,4),r.slice(5,8)]:r===rn?[r,r]:["Mid","Mid"],t0=r=>{const[t,e]=r.trim().split(" "),[n,i]=oE(t);return{meetOrSlice:e||"meet",alignX:n,alignY:i}},io=r=>"matrix("+r.map(t=>Bt(t,Dt.NUM_FRACTION_DIGITS)).join(" ")+")",so=(r,t)=>{if(t){if(t.toLive)return"".concat(r,": url(#SVGID_").concat(t.id,"); ");{const e=new qt(t),n=e.getAlpha();let i="".concat(r,": ").concat(e.toRgb(),"; ");return n!==1&&(i+="".concat(r,"-opacity: ").concat(n.toString(),"; ")),i}}else return"".concat(r,": none; ")},aE=function(r,t){let{left:e,top:n,width:i,height:o}=t,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Dt.NUM_FRACTION_DIGITS;const c=so("fill",r),[h,f,d,p]=[e,n,i,o].map(_=>Bt(_,l));return"<rect ".concat(c,' x="').concat(h,'" y="').concat(f,'" width="').concat(d,'" height="').concat(p,'"></rect>')},On=r=>!!r&&r.toLive!==void 0,gp=r=>!!r&&typeof r.toObject=="function",pp=r=>!!r&&r.offsetX!==void 0&&r.source!==void 0,hh=r=>!!r&&Array.isArray(r._objects),lE=r=>!!r&&r.isType("ActiveSelection"),e0=r=>!!r&&r.isType("Text","IText","Textbox"),cE=r=>!!r&&r.isType("Path"),xa=r=>!!r&&r.isType("IText","Textbox"),mp=r=>!!r&&typeof r.onDragStart=="function"&&typeof r.shouldStartDragging=="function";function n0(r){const t=r&&Fn(r);let e=0,n=0;if(!r||!t)return{left:e,top:n};const i=t.documentElement,o=t.body||{scrollLeft:0,scrollTop:0};for(;r&&(r.parentNode||r.host)&&(r=r.parentNode||r.host,r===t?(e=o.scrollLeft||i.scrollLeft||0,n=o.scrollTop||i.scrollTop||0):(e+=r.scrollLeft||0,n+=r.scrollTop||0),!(r.nodeType===1&&r.style.position==="fixed")););return{left:e,top:n}}const Fn=r=>r.ownerDocument||null,r0=r=>{var t;return((t=r.ownerDocument)===null||t===void 0?void 0:t.defaultView)||null};function oo(r,t){const e=r.style;if(e)typeof t=="string"?r.style.cssText+=";"+t:Object.entries(t).forEach(n=>{let[i,o]=n;return e.setProperty(i,o)});else return}const i0=function(r,t,e){let{width:n,height:i}=e,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;r.width=n,r.height=i,o>1&&(r.setAttribute("width",(n*o).toString()),r.setAttribute("height",(i*o).toString()),t.scale(o,o))};function hE(r,t){const e=t?"manipulation":rn;oo(r,{"touch-action":e,"-ms-touch-action":e})}const uh=(r,t)=>{let{width:e,height:n}=t;e&&(r.style.width=typeof e=="number"?"".concat(e,"px"):e),n&&(r.style.height=typeof n=="number"?"".concat(n,"px"):n)};function uE(r){var t;let e={left:0,top:0};const n=r&&Fn(r),i={left:0,top:0},o={borderLeftWidth:Ut,borderTopWidth:je,paddingLeft:Ut,paddingTop:je};if(!n)return i;const l=((t=r0(r))===null||t===void 0?void 0:t.getComputedStyle(r,null))||{};for(const f in o)i[o[f]]+=parseInt(l[f],10)||0;const c=n.documentElement;typeof r.getBoundingClientRect<"u"&&(e=r.getBoundingClientRect());const h=n0(r);return{left:e.left+h.left-(c.clientLeft||0)+i.left,top:e.top+h.top-(c.clientTop||0)+i.top}}function _p(r){return typeof r.onselectstart<"u"&&(r.onselectstart=()=>!1),r.style.userSelect=rn,r}class s0{constructor(t){A(this,"_originalCanvasStyle",void 0),A(this,"lower",void 0);const e=this.createLowerCanvas(t);this.lower={el:e,ctx:e.getContext("2d")}}createLowerCanvas(t){const e=Q2(t)?t:us().getElementById(t)||fe();if(e.hasAttribute("data-fabric"))throw new Error("fabric.js: trying to initialize a canvas that has already been initialized");return this._originalCanvasStyle=e.style.cssText,e.setAttribute("data-fabric","main"),e.classList.add("lower-canvas"),e}cleanupDOM(t){let{width:e,height:n}=t;const{el:i}=this.lower;i.classList.remove("lower-canvas"),i.removeAttribute("data-fabric"),i.setAttribute("width","".concat(e)),i.setAttribute("height","".concat(n)),i.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(t,e){const{el:n,ctx:i}=this.lower;i0(n,i,t,e)}setCSSDimensions(t){uh(this.lower.el,t)}calcOffset(){return uE(this.lower.el)}dispose(){Jn().dispose(this.lower.el),delete this.lower}}const fE={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...pn]};class uo extends Gm($m){get lowerCanvasEl(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.el}get contextContainer(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.ctx}static getDefaults(){return uo.ownDefaults}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(e),this.initElements(t),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(t){this.elements=new s0(t)}add(){const t=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}insertAt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const o=super.insertAt(t,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),o}remove(){const t=super.remove(...arguments);return t.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}_onObjectAdded(t){t.canvas&&t.canvas!==this&&(console.warn(`fabric.Canvas: trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t){t._set("canvas",void 0),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}_isRetinaScaling(){return Dt.devicePixelRatio>1&&this.enableRetinaScaling}getRetinaScaling(){return this._isRetinaScaling()?Math.max(1,Dt.devicePixelRatio):1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setDimensions({width:t},e)}setHeight(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setDimensions({height:t},e)}_setDimensionsImpl(t){let{cssOnly:e=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e){const i=D({width:this.width,height:this.height},t);this.elements.setDimensions(i,this.getRetinaScaling()),this.hasLostContext=!0,this.width=i.width,this.height=i.height}n||this.elements.setCSSDimensions(t),this.calcOffset()}setDimensions(t){let{cssOnly:e=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._setDimensionsImpl(t,{cssOnly:e,backstoreOnly:n}),e||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(t){const e=this.backgroundImage,n=this.overlayImage,i=this._objects.length;this.viewportTransform=t;for(let o=0;o<i;o++){const l=this._objects[o];l.group||l.setCoords()}e&&e.setCoords(),n&&n.setCoords(),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(t,e){const n=t,i=[...this.viewportTransform],o=he(t,Me(i));i[0]=e,i[3]=e;const l=he(o,i);i[4]+=n.x-l.x,i[5]+=n.y-l.y,this.setViewportTransform(i)}setZoom(t){this.zoomToPoint(new F(0,0),t)}absolutePan(t){const e=[...this.viewportTransform];return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)}relativePan(t){return this.absolutePan(new F(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(t){t.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),!this.destroyed&&this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){!this.nextRenderHandle&&!this.disposed&&!this.destroyed&&(this.nextRenderHandle=Vs(()=>this.renderAndReset()))}calcViewportBoundaries(){const t=this.width,e=this.height,n=Me(this.viewportTransform),i=he({x:0,y:0},n),o=he({x:t,y:e},n),l=i.min(o),c=i.max(o);return this.vptCoords={tl:l,tr:new F(c.x,l.y),bl:new F(l.x,c.y),br:c}}cancelRequestedRender(){this.nextRenderHandle&&(Km(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(t){}renderCanvas(t,e){if(this.destroyed)return;const n=this.viewportTransform,i=this.clipPath;this.calcViewportBoundaries(),this.clearContext(t),t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.patternQuality="best",this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(t,e),t.restore(),this.controlsAboveOverlay||this.drawControls(t),i&&(i._set("canvas",this),i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t,i)),this._renderOverlay(t),this.controlsAboveOverlay&&this.drawControls(t),this.fire("after:render",{ctx:t}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(t,e){const n=this.viewportTransform;t.save(),t.transform(...n),t.globalCompositeOperation="destination-in",e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}_renderObjects(t,e){for(let n=0,i=e.length;n<i;++n)e[n]&&e[n].render(t)}_renderBackgroundOrOverlay(t,e){const n=this["".concat(e,"Color")],i=this["".concat(e,"Image")],o=this.viewportTransform,l=this["".concat(e,"Vpt")];if(!n&&!i)return;const c=On(n);if(n){if(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=c?n.toLive(t):n,l&&t.transform(...o),c){t.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const h=n.gradientTransform||n.patternTransform;h&&t.transform(...h)}t.fill(),t.restore()}if(i){t.save();const{skipOffscreen:h}=this;this.skipOffscreen=l,l&&t.transform(...o),i.render(t),this.skipOffscreen=h,t.restore()}}_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")}_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new F(this.width/2,this.height/2)}centerObjectH(t){return this._centerObject(t,new F(this.getCenterPoint().x,t.getCenterPoint().y))}centerObjectV(t){return this._centerObject(t,new F(t.getCenterPoint().x,this.getCenterPoint().y))}centerObject(t){return this._centerObject(t,this.getCenterPoint())}viewportCenterObject(t){return this._centerObject(t,this.getVpCenter())}viewportCenterObjectH(t){return this._centerObject(t,new F(this.getVpCenter().x,t.getCenterPoint().y))}viewportCenterObjectV(t){return this._centerObject(t,new F(t.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return he(this.getCenterPoint(),Me(this.viewportTransform))}_centerObject(t,e){t.setXY(e,bt,bt),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(t){return this.toDatalessObject(t)}toObject(t){return this._toObjectMethod("toObject",t)}toJSON(){return this.toObject()}toDatalessObject(t){return this._toObjectMethod("toDatalessObject",t)}_toObjectMethod(t,e){const n=this.clipPath,i=n&&!n.excludeFromExport?this._toObject(n,t,e):null;return D(D(D({version:ah},wi(this,e)),{},{objects:this._objects.filter(o=>!o.excludeFromExport).map(o=>this._toObject(o,t,e))},this.__serializeBgOverlay(t,e)),i?{clipPath:i}:null)}_toObject(t,e,n){let i;this.includeDefaultValues||(i=t.includeDefaultValues,t.includeDefaultValues=!1);const o=t[e](n);return this.includeDefaultValues||(t.includeDefaultValues=!!i),o}__serializeBgOverlay(t,e){const n={},i=this.backgroundImage,o=this.overlayImage,l=this.backgroundColor,c=this.overlayColor;return On(l)?l.excludeFromExport||(n.background=l.toObject(e)):l&&(n.background=l),On(c)?c.excludeFromExport||(n.overlay=c.toObject(e)):c&&(n.overlay=c),i&&!i.excludeFromExport&&(n.backgroundImage=this._toObject(i,t,e)),o&&!o.excludeFromExport&&(n.overlayImage=this._toObject(o,t,e)),n}toSVG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;t.reviver=e;const n=[];return this._setSVGPreamble(n,t),this._setSVGHeader(n,t),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",e),this._setSVGObjects(n,e),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",e),n.push("</svg>"),n.join("")}_setSVGPreamble(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(t,e){const n=e.width||"".concat(this.width),i=e.height||"".concat(this.height),o=Dt.NUM_FRACTION_DIGITS,l=e.viewBox;let c;if(l)c='viewBox="'.concat(l.x," ").concat(l.y," ").concat(l.width," ").concat(l.height,'" ');else if(this.svgViewportTransformation){const h=this.viewportTransform;c='viewBox="'.concat(Bt(-h[4]/h[0],o)," ").concat(Bt(-h[5]/h[3],o)," ").concat(Bt(this.width/h[0],o)," ").concat(Bt(this.height/h[3],o),'" ')}else c='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',i,'" ',c,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",ah,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),`</defs>
`)}createSVGClipPathMarkup(t){const e=this.clipPath;return e?(e.clipPathId="CLIPPATH_".concat(zr()),'<clipPath id="'.concat(e.clipPathId,`" >
`).concat(e.toClipPathSVG(t.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(t=>{const e=this["".concat(t,"Color")];if(On(e)){const n=this["".concat(t,"Vpt")],i=this.viewportTransform,o={isType:()=>!1,width:this.width/(n?i[0]:1),height:this.height/(n?i[3]:1)};return e.toSVG(o,{additionalTransform:n?io(i):""})}}).join("")}createSVGFontFacesMarkup(){const t=[],e={},n=Dt.fontPaths;this._objects.forEach(function o(l){t.push(l),hh(l)&&l._objects.forEach(o)}),t.forEach(o=>{if(!e0(o))return;const{styles:l,fontFamily:c}=o;e[c]||!n[c]||(e[c]=!0,l&&Object.values(l).forEach(h=>{Object.values(h).forEach(f=>{let{fontFamily:d=""}=f;!e[d]&&n[d]&&(e[d]=!0)})}))});const i=Object.keys(e).map(o=>`		@font-face {
			font-family: '`.concat(o,`';
			src: url('`).concat(n[o],`');
		}
`)).join("");return i?`	<style type="text/css"><![CDATA[
`.concat(i,`]]></style>
`):""}_setSVGObjects(t,e){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(t,n,e)})}_setSVGObject(t,e,n){t.push(e.toSVG(n))}_setSVGBgOverlayImage(t,e,n){const i=this[e];i&&!i.excludeFromExport&&i.toSVG&&t.push(i.toSVG(n))}_setSVGBgOverlayColor(t,e){const n=this["".concat(e,"Color")];if(n)if(On(n)){const i=n.repeat||"",o=this.width,l=this.height,c=this["".concat(e,"Vpt")],h=c?io(Me(this.viewportTransform)):"";t.push('<rect transform="'.concat(h," translate(").concat(o/2,",").concat(l/2,')" x="').concat(n.offsetX-o/2,'" y="').concat(n.offsetY-l/2,'" width="').concat((i==="repeat-y"||i==="no-repeat")&&pp(n)?n.source.width:o,'" height="').concat((i==="repeat-x"||i==="no-repeat")&&pp(n)?n.source.height:l,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(t,e){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return Promise.reject(new Error("fabric.js: `json` is undefined"));const i=typeof t=="string"?JSON.parse(t):t,{objects:o=[],backgroundImage:l,background:c,overlayImage:h,overlay:f,clipPath:d}=i,p=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([os(o,{reviver:e,signal:n}),ho({backgroundImage:l,backgroundColor:c,overlayImage:h,overlayColor:f,clipPath:d},{signal:n})]).then(_=>{let[v,w]=_;return this.clear(),this.add(...v),this.set(i),this.set(w),this.renderOnAddRemove=p,this})}clone(t){const e=this.toObject(t);return this.cloneWithoutData().loadFromJSON(e)}cloneWithoutData(){const t=fe();return t.width=this.width,t.height=this.height,new this.constructor(t)}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:n=1,multiplier:i=1,enableRetinaScaling:o=!1}=t,l=i*(o?this.getRetinaScaling():1);return Gh(this.toCanvasElement(l,t),e,n)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:e,height:n,left:i,top:o,filter:l}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=(e||this.width)*t,h=(n||this.height)*t,f=this.getZoom(),d=this.width,p=this.height,_=f*t,v=this.viewportTransform,w=(v[4]-(i||0))*t,E=(v[5]-(o||0))*t,O=[_,0,0,_,w,E],M=this.enableRetinaScaling,R=fe(),X=l?this._objects.filter(B=>l(B)):this._objects;return R.width=c,R.height=h,this.enableRetinaScaling=!1,this.viewportTransform=O,this.width=c,this.height=h,this.calcViewportBoundaries(),this.renderCanvas(R.getContext("2d"),X),this.viewportTransform=v,this.width=d,this.height=p,this.calcViewportBoundaries(),this.enableRetinaScaling=M,R}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),this.disposed=!0,new Promise((t,e)=>{const n=()=>{this.destroy(),t(!0)};n.kill=e,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?t(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(t=>t.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}A(uo,"ownDefaults",fE);const dE=["touchstart","touchmove","touchend"];function gE(r){const t=r.changedTouches;return t&&t[0]?t[0]:r}const o0=r=>{const t=r.target,e=n0(t),n=gE(r);return new F(n.clientX+e.left,n.clientY+e.top)},Pa=r=>dE.includes(r.type)||r.pointerType==="touch",fh=r=>{r.preventDefault(),r.stopPropagation()},gr=r=>{if(r.length===0)return{left:0,top:0,width:0,height:0};const{min:t,max:e}=r.reduce((i,o)=>{let{min:l,max:c}=i;return{min:l.min(o),max:c.max(o)}},{min:new F(r[0]),max:new F(r[0])}),n=e.subtract(t);return{left:t.x,top:t.y,width:n.x,height:n.y}},pE=["translateX","translateY","scaleX","scaleY"],mE=(r,t)=>{const e=Me(t),n=ke(e,r.calcOwnMatrix());as(r,n)},a0=(r,t)=>as(r,ke(t,r.calcOwnMatrix())),as=(r,t)=>{const e=vi(t),{translateX:n,translateY:i,scaleX:o,scaleY:l}=e,c=ee(e,pE),h=new F(n,i);r.flipX=!1,r.flipY=!1,Object.assign(r,c),r.set({scaleX:o,scaleY:l}),r.setPositionByOrigin(h,bt,bt)},Jh=r=>{r.scaleX=1,r.scaleY=1,r.skewX=0,r.skewY=0,r.flipX=!1,r.flipY=!1,r.rotate(0)},Zh=r=>({scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,angle:r.angle,left:r.left,flipX:r.flipX,flipY:r.flipY,top:r.top}),Qh=(r,t,e)=>{const n=r/2,i=t/2,o=el(e),l=[new F(-n,-i),new F(n,-i),new F(-n,i),new F(n,i)].map(h=>h.transform(o)),c=gr(l);return new F(c.width,c.height)},tu=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pn,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pn;return ke(Me(t),r)},eu=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pn,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pn;return r.transform(tu(t,e))},_E=(r,t,e,n)=>{if(e!=="child"&&e!=="sibling")throw new Error("fabric.js: received bad argument ".concat(e));if(n!=="child"&&n!=="sibling")throw new Error("fabric.js: received bad argument ".concat(n));if(e===n)return r;const i=t.viewportTransform;return r.transform(n==="child"?Me(i):i)},nu=(r,t,e)=>{const n=tu(t,e);return as(r,ke(n,r.calcOwnMatrix())),n},l0=(r,t)=>{var e;const{transform:{target:n}}=t;(e=n.canvas)===null||e===void 0||e.fire("object:".concat(r),D(D({},t),{},{target:n})),n.fire(r,t)},vE={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Wr=r=>typeof r=="string"?vE[r]:r-.5,Da="not-allowed",yE=(r,t,e,n)=>{if(!t||!r)return"drag";const i=n.controls[t];return i.getActionName(e,i,n)};function c0(r){return r.originX===bt&&r.originY===bt}function vp(r){return-Wr(r)+.5}const Wn=(r,t)=>r[t],h0=(r,t,e,n)=>({e:r,transform:t,pointer:new F(e,n)});function u0(r,t){const e=r.getTotalAngle(),n=e+ss(Math.atan2(t.y,t.x))+360;return Math.round(n%360/45)}function xE(r,t,e,n){const i=r.getRelativeCenterPoint(),o=typeof e<"u"&&typeof n<"u"?r.translateToGivenOrigin(i,bt,bt,e,n):new F(r.left,r.top);return(r.angle?t.rotate(-te(r.angle),i):t).subtract(o)}function fo(r,t,e,n,i){var o;let{target:l,corner:c}=r;const h=l.controls[c],f=((o=l.canvas)===null||o===void 0?void 0:o.getZoom())||1,d=l.padding/f,p=xE(l,new F(n,i),t,e);return p.x>=d&&(p.x-=d),p.x<=-d&&(p.x+=d),p.y>=d&&(p.y-=d),p.y<=d&&(p.y+=d),p.x-=h.offsetX,p.y-=h.offsetY,p}const f0=(r,t,e,n)=>{const{target:i,offsetX:o,offsetY:l}=t,c=e-o,h=n-l,f=!Wn(i,"lockMovementX")&&i.left!==c,d=!Wn(i,"lockMovementY")&&i.top!==h;return f&&i.set(Ut,c),d&&i.set(je,h),(f||d)&&l0("moving",h0(r,t,e,n)),f||d};class d0{getSvgStyles(t){const e=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):rn,o=this.strokeDashOffset?this.strokeDashOffset:"0",l=this.strokeLineCap?this.strokeLineCap:"butt",c=this.strokeLineJoin?this.strokeLineJoin:"miter",h=this.strokeMiterLimit?this.strokeMiterLimit:"4",f=typeof this.opacity<"u"?this.opacity:"1",d=this.visible?"":" visibility: hidden;",p=t?"":this.getSvgFilter(),_=so("fill",this.fill);return[so("stroke",this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",l,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",c,"; ","stroke-miterlimit: ",h,"; ",_,"fill-rule: ",e,"; ","opacity: ",f,";",p,d].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=t?this.calcTransformMatrix():this.calcOwnMatrix(),i='transform="'.concat(io(n));return"".concat(i).concat(e,'" ')}_toSVG(t){return[""]}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:e,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),o=t.indexOf("COMMON_PARTS");return t[o]=i,e?e(t.join("")):t.join("")}_createBaseSVGMarkup(t){let{noStyle:e,reviver:n,withShadow:i,additionalTransform:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=e?"":'style="'.concat(this.getSvgStyles(),'" '),c=i?'style="'.concat(this.getSvgFilter(),'" '):"",h=this.clipPath,f=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",d=h&&h.absolutePositioned,p=this.stroke,_=this.fill,v=this.shadow,w=[],E=t.indexOf("COMMON_PARTS");let O;h&&(h.clipPathId="CLIPPATH_".concat(zr()),O='<clipPath id="'.concat(h.clipPathId,`" >
`).concat(h.toClipPathSVG(n),`</clipPath>
`)),d&&w.push("<g ",c,this.getSvgCommons(),` >
`),w.push("<g ",this.getSvgTransform(!1),d?"":c+this.getSvgCommons(),` >
`);const M=[l,f,e?"":this.addPaintOrder()," ",o?'transform="'.concat(o,'" '):""].join("");return t[E]=M,On(_)&&w.push(_.toSVG(this)),On(p)&&w.push(p.toSVG(this)),v&&w.push(v.toSVG(this)),h&&w.push(O),w.push(t.join("")),w.push(`</g>
`),d&&w.push(`</g>
`),n?n(w.join("")):w.join("")}addPaintOrder(){return this.paintFirst!=="fill"?' paint-order="'.concat(this.paintFirst,'" '):""}}const ru=(r,t,e,n)=>(r<Math.abs(t)?(r=t,n=e/4):t===0&&r===0?n=e/mr*Math.asin(1):n=e/mr*Math.asin(t/r),{a:r,c:t,p:e,s:n}),g0=(r,t,e,n,i)=>r*Math.pow(2,10*(n-=1))*Math.sin((n*i-t)*mr/e),p0=(r,t,e,n)=>-e*Math.cos(r/n*vr)+e+t,wE=(r,t,e,n)=>e*(r/n)**3+t,CE=(r,t,e,n)=>e*((r/n-1)**3+1)+t,SE=(r,t,e,n)=>(r/=n/2,r<1?e/2*r**3+t:e/2*((r-2)**3+2)+t),bE=(r,t,e,n)=>e*(r/=n)*r**3+t,TE=(r,t,e,n)=>-e*((r=r/n-1)*r**3-1)+t,OE=(r,t,e,n)=>(r/=n/2,r<1?e/2*r**4+t:-e/2*((r-=2)*r**3-2)+t),EE=(r,t,e,n)=>e*(r/n)**5+t,PE=(r,t,e,n)=>e*((r/n-1)**5+1)+t,DE=(r,t,e,n)=>(r/=n/2,r<1?e/2*r**5+t:e/2*((r-2)**5+2)+t),AE=(r,t,e,n)=>-e*Math.cos(r/n*vr)+e+t,ME=(r,t,e,n)=>e*Math.sin(r/n*vr)+t,kE=(r,t,e,n)=>-e/2*(Math.cos(Math.PI*r/n)-1)+t,LE=(r,t,e,n)=>r===0?t:e*2**(10*(r/n-1))+t,RE=(r,t,e,n)=>r===n?t+e:e*-(2**(-10*r/n)+1)+t,FE=(r,t,e,n)=>r===0?t:r===n?t+e:(r/=n/2,r<1?e/2*2**(10*(r-1))+t:e/2*-(2**(-10*--r)+2)+t),IE=(r,t,e,n)=>-e*(Math.sqrt(1-(r/=n)*r)-1)+t,BE=(r,t,e,n)=>e*Math.sqrt(1-(r=r/n-1)*r)+t,jE=(r,t,e,n)=>(r/=n/2,r<1?-e/2*(Math.sqrt(1-r**2)-1)+t:e/2*(Math.sqrt(1-(r-=2)*r)+1)+t),WE=(r,t,e,n)=>{const o=e;let l=0;if(r===0)return t;if(r/=n,r===1)return t+e;l||(l=n*.3);const{a:c,s:h,p:f}=ru(o,e,l,1.70158);return-g0(c,h,f,r,n)+t},XE=(r,t,e,n)=>{const o=e;let l=0;if(r===0)return t;if(r/=n,r===1)return t+e;l||(l=n*.3);const{a:c,s:h,p:f,c:d}=ru(o,e,l,1.70158);return c*2**(-10*r)*Math.sin((r*n-h)*mr/f)+d+t},HE=(r,t,e,n)=>{const o=e;let l=0;if(r===0)return t;if(r/=n/2,r===2)return t+e;l||(l=n*(.3*1.5));const{a:c,s:h,p:f,c:d}=ru(o,e,l,1.70158);return r<1?-.5*g0(c,h,f,r,n)+t:c*Math.pow(2,-10*(r-=1))*Math.sin((r*n-h)*mr/f)*.5+d+t},YE=function(r,t,e,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return e*(r/=n)*r*((i+1)*r-i)+t},UE=function(r,t,e,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return e*((r=r/n-1)*r*((i+1)*r+i)+1)+t},NE=function(r,t,e,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return r/=n/2,r<1?e/2*(r*r*(((i*=1.525)+1)*r-i))+t:e/2*((r-=2)*r*(((i*=1.525)+1)*r+i)+2)+t},iu=(r,t,e,n)=>(r/=n)<1/2.75?e*(7.5625*r*r)+t:r<2/2.75?e*(7.5625*(r-=1.5/2.75)*r+.75)+t:r<2.5/2.75?e*(7.5625*(r-=2.25/2.75)*r+.9375)+t:e*(7.5625*(r-=2.625/2.75)*r+.984375)+t,m0=(r,t,e,n)=>e-iu(n-r,0,e,n)+t,zE=(r,t,e,n)=>r<n/2?m0(r*2,0,e,n)*.5+t:iu(r*2-n,0,e,n)*.5+e*.5+t,VE=(r,t,e,n)=>e*(r/=n)*r+t,GE=(r,t,e,n)=>-e*(r/=n)*(r-2)+t,$E=(r,t,e,n)=>(r/=n/2,r<1?e/2*r**2+t:-e/2*(--r*(r-2)-1)+t);var KE=Object.freeze({__proto__:null,defaultEasing:p0,easeInBack:YE,easeInBounce:m0,easeInCirc:IE,easeInCubic:wE,easeInElastic:WE,easeInExpo:LE,easeInOutBack:NE,easeInOutBounce:zE,easeInOutCirc:jE,easeInOutCubic:SE,easeInOutElastic:HE,easeInOutExpo:FE,easeInOutQuad:$E,easeInOutQuart:OE,easeInOutQuint:DE,easeInOutSine:kE,easeInQuad:VE,easeInQuart:bE,easeInQuint:EE,easeInSine:AE,easeOutBack:UE,easeOutBounce:iu,easeOutCirc:BE,easeOutCubic:CE,easeOutElastic:XE,easeOutExpo:RE,easeOutQuad:GE,easeOutQuart:TE,easeOutQuint:PE,easeOutSine:ME});const qE=()=>!1;class su{constructor(t){let{startValue:e,byValue:n,duration:i=500,delay:o=0,easing:l=p0,onStart:c=mi,onChange:h=mi,onComplete:f=mi,abort:d=qE,target:p}=t;A(this,"_state","pending"),A(this,"durationProgress",0),A(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=i,this.delay=o,this.easing=l,this._onStart=c,this._onChange=h,this._onComplete=f,this._abort=d,this.target=p,this.startValue=e,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const t=e=>{this._state==="pending"&&(this.startTime=e||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Vs(t),this.delay):Vs(t)}tick(t){const e=(t||+new Date)-this.startTime,n=Math.min(e,this.duration);this.durationProgress=n/this.duration;const{value:i,valueProgress:o}=this.calculate(n);this.value=Object.freeze(i),this.valueProgress=o,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):e>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Vs(this.tick)))}register(){ch.push(this)}unregister(){ch.remove(this)}abort(){this._state="aborted",this.unregister()}}const JE=["startValue","endValue"];class ZE extends su{constructor(t){let{startValue:e=0,endValue:n=100}=t,i=ee(t,JE);super(D(D({},i),{},{startValue:e,byValue:n-e}))}calculate(t){const e=this.easing(t,this.startValue,this.byValue,this.duration);return{value:e,valueProgress:Math.abs((e-this.startValue)/this.byValue)}}}const QE=["startValue","endValue"];class tP extends su{constructor(t){let{startValue:e=[0],endValue:n=[100]}=t,i=ee(t,QE);super(D(D({},i),{},{startValue:e,byValue:n.map((o,l)=>o-e[l])}))}calculate(t){const e=this.startValue.map((n,i)=>this.easing(t,n,this.byValue[i],this.duration,i));return{value:e,valueProgress:Math.abs((e[0]-this.startValue[0])/this.byValue[0])}}}const yi=(r,t,e)=>Math.max(r,Math.min(t,e)),eP=["startValue","endValue","easing","onChange","onComplete","abort"],nP=(r,t,e,n)=>{const i=1-Math.cos(r/n*vr);return t+e*i},Fc=r=>r&&((t,e,n)=>r(new qt(t).toRgba(),e,n));class rP extends su{constructor(t){let{startValue:e,endValue:n,easing:i=nP,onChange:o,onComplete:l,abort:c}=t,h=ee(t,eP);const f=new qt(e).getSource(),d=new qt(n).getSource();super(D(D({},h),{},{startValue:f,byValue:d.map((p,_)=>p-f[_]),easing:i,onChange:Fc(o),onComplete:Fc(l),abort:Fc(c)}))}calculate(t){const[e,n,i,o]=this.startValue.map((c,h)=>this.easing(t,c,this.byValue[h],this.duration,h)),l=[...[e,n,i].map(Math.round),yi(0,o,1)];return{value:l,valueProgress:l.map((c,h)=>this.byValue[h]!==0?Math.abs((c-this.startValue[h])/this.byValue[h]):0).find(c=>c!==0)||0}}}const iP=r=>Array.isArray(r.startValue)||Array.isArray(r.endValue);function ou(r){const t=iP(r)?new tP(r):new ZE(r);return t.start(),t}function _0(r){const t=new rP(r);return t.start(),t}const sP=new F(1,0),v0=new F,au=(r,t)=>r.rotate(t),Aa=(r,t)=>new F(t).subtract(r),Ma=r=>r.distanceFrom(v0),ka=(r,t)=>Math.atan2(Ji(r,t),x0(r,t)),y0=r=>ka(sP,r),nl=r=>r.eq(v0)?r:r.scalarDivide(Ma(r)),lu=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return nl(new F(-r.y,r.x).scalarMultiply(t?1:-1))},Ji=(r,t)=>r.x*t.y-r.y*t.x,x0=(r,t)=>r.x*t.x+r.y*t.y,dh=(r,t,e)=>{if(r.eq(t)||r.eq(e))return!0;const n=Ji(t,e),i=Ji(t,r),o=Ji(e,r);return n>=0?i>=0&&o<=0:!(i<=0&&o>=0)};class ve{constructor(t){this.status=t,this.points=[]}includes(t){return this.points.some(e=>e.eq(t))}append(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.points=this.points.concat(e.filter(i=>!this.includes(i))),this}static isPointContained(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.eq(n))return t.eq(e);if(e.x===n.x)return t.x===e.x&&(i||t.y>=Math.min(e.y,n.y)&&t.y<=Math.max(e.y,n.y));if(e.y===n.y)return t.y===e.y&&(i||t.x>=Math.min(e.x,n.x)&&t.x<=Math.max(e.x,n.x));{const o=Aa(e,n),c=Aa(e,t).divide(o);return i?Math.abs(c.x)===Math.abs(c.y):c.x===c.y&&c.x>=0&&c.x<=1}}static intersectLineLine(t,e,n,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;const c=e.x-t.x,h=e.y-t.y,f=i.x-n.x,d=i.y-n.y,p=t.x-n.x,_=t.y-n.y,v=f*_-d*p,w=c*_-h*p,E=d*c-f*h;if(E!==0){const O=v/E,M=w/E;return(o||0<=O&&O<=1)&&(l||0<=M&&M<=1)?new ve("Intersection").append(new F(t.x+O*c,t.y+O*h)):new ve}else if(v===0||w===0){const O=o||l||ve.isPointContained(t,n,i)||ve.isPointContained(e,n,i)||ve.isPointContained(n,t,e)||ve.isPointContained(i,t,e);return new ve(O?"Coincident":void 0)}else return new ve("Parallel")}static intersectSegmentLine(t,e,n,i){return ve.intersectLineLine(t,e,n,i,!1,!0)}static intersectSegmentSegment(t,e,n,i){return ve.intersectLineLine(t,e,n,i,!1,!1)}static intersectLinePolygon(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const o=new ve,l=n.length;for(let c=0,h,f,d;c<l;c++){if(h=n[c],f=n[(c+1)%l],d=ve.intersectLineLine(t,e,h,f,i,!1),d.status==="Coincident")return d;o.append(...d.points)}return o.points.length>0&&(o.status="Intersection"),o}static intersectSegmentPolygon(t,e,n){return ve.intersectLinePolygon(t,e,n,!1)}static intersectPolygonPolygon(t,e){const n=new ve,i=t.length,o=[];for(let l=0;l<i;l++){const c=t[l],h=t[(l+1)%i],f=ve.intersectSegmentPolygon(c,h,e);f.status==="Coincident"?(o.push(f),n.append(c,h)):n.append(...f.points)}return o.length>0&&o.length===t.length?new ve("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(t,e,n){const i=e.min(n),o=e.max(n),l=new F(o.x,i.y),c=new F(i.x,o.y);return ve.intersectPolygonPolygon(t,[i,l,o,c])}}class oP extends $m{_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=D({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},t),n=e.strokeWidth;let i=n,o=0;this.strokeUniform&&(i=0,o=n);const l=e.width+i,c=e.height+i,h=e.skewX===0&&e.skewY===0;let f;return h?f=new F(l*e.scaleX,c*e.scaleY):f=Qh(l,c,e),f.scalarAdd(o)}translateToGivenOrigin(t,e,n,i,o){let l=t.x,c=t.y;const h=Wr(i)-Wr(e),f=Wr(o)-Wr(n);if(h||f){const d=this._getTransformedDimensions();l+=h*d.x,c+=f*d.y}return new F(l,c)}translateToCenterPoint(t,e,n){const i=this.translateToGivenOrigin(t,e,n,bt,bt);return this.angle?i.rotate(te(this.angle),t):i}translateToOriginPoint(t,e,n){const i=this.translateToGivenOrigin(t,bt,bt,e,n);return this.angle?i.rotate(te(this.angle),t):i}getCenterPoint(){const t=this.getRelativeCenterPoint();return this.group?he(t,this.group.calcTransformMatrix()):t}getRelativeCenterPoint(){return this.translateToCenterPoint(new F(this.left,this.top),this.originX,this.originY)}getPointByOrigin(t,e){return this.translateToOriginPoint(this.getRelativeCenterPoint(),t,e)}setPositionByOrigin(t,e,n){const i=this.translateToCenterPoint(t,e,n),o=this.translateToOriginPoint(i,this.originX,this.originY);this.set({left:o.x,top:o.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Ut,je)}}class aP extends oP{getX(){return this.getXY().x}setX(t){this.setXY(this.getXY().setX(t))}getY(){return this.getXY().y}setY(t){this.setXY(this.getXY().setY(t))}getRelativeX(){return this.left}setRelativeX(t){this.left=t}getRelativeY(){return this.top}setRelativeY(t){this.top=t}getXY(){const t=this.getRelativeXY();return this.group?he(t,this.group.calcTransformMatrix()):t}setXY(t,e,n){this.group&&(t=he(t,Me(this.group.calcTransformMatrix()))),this.setRelativeXY(t,e,n)}getRelativeXY(){return new F(this.left,this.top)}setRelativeXY(t,e,n){this.setPositionByOrigin(t,e||this.originX,n||this.originY)}_getCoords(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?t?this.calcACoords():this.calcLineCoords():(this.aCoords||(this.aCoords=this.calcACoords()),this.lineCoords||(this.lineCoords=this.calcLineCoords()),t?this.aCoords:this.lineCoords)}getCoords(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{tl:n,tr:i,br:o,bl:l}=this._getCoords(t,e),c=[n,i,o,l];if(this.group){const h=this.group.calcTransformMatrix();return c.map(f=>he(f,h))}return c}intersectsWithRect(t,e,n,i){const o=this.getCoords(n,i);return ve.intersectPolygonRectangle(o,t,e).status==="Intersection"}intersectsWithObject(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=ve.intersectPolygonPolygon(this.getCoords(e,n),t.getCoords(e,n));return i.status==="Intersection"||i.status==="Coincident"||t.isContainedWithinObject(this,e,n)||this.isContainedWithinObject(t,e,n)}isContainedWithinObject(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=this.getCoords(e,n),o=e?t.aCoords:t.lineCoords,l=t._getImageLines(o);for(let c=0;c<4;c++)if(!t.containsPoint(i[c],l))return!1;return!0}isContainedWithinRect(t,e,n,i){const o=this.getBoundingRect(n,i);return o.left>=t.x&&o.left+o.width<=e.x&&o.top>=t.y&&o.top+o.height<=e.y}isOverlapping(t){return this.intersectsWithObject(t)||this.isContainedWithinObject(t)||t.isContainedWithinObject(this)}containsPoint(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const o=this._getCoords(n,i),l=e||this._getImageLines(o),c=this._findCrossPoints(t,l);return c!==0&&c%2===1}isOnScreen(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.canvas)return!1;const{tl:e,br:n}=this.canvas.vptCoords;return this.getCoords(!0,t).some(o=>o.x<=n.x&&o.x>=e.x&&o.y<=n.y&&o.y>=e.y)||this.intersectsWithRect(e,n,!0,t)?!0:this._containsCenterOfCanvas(e,n,t)}_containsCenterOfCanvas(t,e,n){const i=t.midPointFrom(e);return this.containsPoint(i,void 0,!0,n)}isPartiallyOnScreen(t){if(!this.canvas)return!1;const{tl:e,br:n}=this.canvas.vptCoords;return this.intersectsWithRect(e,n,!0,t)?!0:this.getCoords(!0,t).every(o=>(o.x>=n.x||o.x<=e.x)&&(o.y>=n.y||o.y<=e.y))&&this._containsCenterOfCanvas(e,n,t)}_getImageLines(t){let{tl:e,tr:n,bl:i,br:o}=t;return{topline:{o:e,d:n},rightline:{o:n,d:o},bottomline:{o,d:i},leftline:{o:i,d:e}}}_findCrossPoints(t,e){let n=0;for(const i in e){let o;const l=e[i];if(!(l.o.y<t.y&&l.d.y<t.y)&&!(l.o.y>=t.y&&l.d.y>=t.y)){if(l.o.x===l.d.x&&l.o.x>=t.x)o=l.o.x;else{const h=(l.d.y-l.o.y)/(l.d.x-l.o.x),f=t.y-0*t.x,d=l.o.y-h*l.o.x;o=-(f-d)/(0-h)}if(o>=t.x&&(n+=1),n===2)break}}return n}getBoundingRect(t,e){return gr(this.getCoords(t,e))}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(t){this._set("scaleX",t),this._set("scaleY",t),this.setCoords()}scaleToWidth(t,e){const n=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/n)}scaleToHeight(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/n)}getCanvasRetinaScaling(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.getRetinaScaling())||1}getTotalAngle(){return this.group?vi(this.calcTransformMatrix()).angle:this.angle}calcLineCoords(){const t=this.getViewportTransform(),e=this.padding,n=te(this.getTotalAngle()),i=$e(n)*e,o=Ke(n)*e,l=i+o,c=i-o,{tl:h,tr:f,bl:d,br:p}=this.calcACoords(),_={tl:he(h,t),tr:he(f,t),bl:he(d,t),br:he(p,t)};return e&&(_.tl.x-=c,_.tl.y-=l,_.tr.x+=l,_.tr.y-=c,_.bl.x-=l,_.bl.y+=c,_.br.x+=c,_.br.y+=l),_}getViewportTransform(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.viewportTransform)||pn.concat()}calcACoords(){const t=co({angle:this.angle}),{x:e,y:n}=this.getRelativeCenterPoint(),i=lo(e,n),o=ke(i,t),l=this._getTransformedDimensions(),c=l.x/2,h=l.y/2;return{tl:he({x:-c,y:-h},o),tr:he({x:c,y:-h},o),bl:he({x:-c,y:h},o),br:he({x:c,y:h},o)}}setCoords(){this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords()}transformMatrixKey(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const e="_";let n="";return!t&&this.group&&(n=this.group.transformMatrixKey(t)+e),n+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY}calcTransformMatrix(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.calcOwnMatrix();if(t||!this.group)return e;const n=this.transformMatrixKey(t),i=this.matrixCache;return i&&i.key===n?i.value:(this.group&&(e=ke(this.group.calcTransformMatrix(!1),e)),this.matrixCache={key:n,value:e},e)}calcOwnMatrix(){const t=this.transformMatrixKey(!0),e=this.ownMatrixCache;if(e&&e.key===t)return e.value;const n=this.getRelativeCenterPoint(),i={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},o=Zm(i);return this.ownMatrixCache={key:t,value:o},o}_getNonTransformedDimensions(){return new F(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(t){return this._getTransformedDimensions(t).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}}class cu extends aP{getParent(t){return(lE(this.group)?this.__owningGroup:this.group)||(t?void 0:this.canvas)}isDescendantOf(t){return this.__owningGroup===t||this.group===t||this.canvas===t||!!this.__owningGroup&&this.__owningGroup.isDescendantOf(t)||!!this.group&&this.group.isDescendantOf(t)}getAncestors(t){const e=[];let n=this;do n=n instanceof cu?n.getParent(t):void 0,n&&e.push(n);while(n);return e}findCommonAncestors(t,e){if(this===t)return{fork:[],otherFork:[],common:[this,...this.getAncestors(e)]};const n=this.getAncestors(e),i=t.getAncestors(e);if(n.length===0&&i.length>0&&this===i[i.length-1])return{fork:[],otherFork:[t,...i.slice(0,i.length-1)],common:[this]};for(let o=0,l;o<n.length;o++){if(l=n[o],l===t)return{fork:[this,...n.slice(0,o)],otherFork:[],common:n.slice(o)};for(let c=0;c<i.length;c++){if(this===i[c])return{fork:[],otherFork:[t,...i.slice(0,c)],common:[this,...n]};if(l===i[c])return{fork:[this,...n.slice(0,o)],otherFork:[t,...i.slice(0,c)],common:n.slice(o)}}}return{fork:[this,...n],otherFork:[t,...i],common:[]}}hasCommonAncestors(t,e){const n=this.findCommonAncestors(t,e);return n&&!!n.common.length}isInFrontOf(t){if(this===t)return;const e=this.findCommonAncestors(t);if(!e)return;if(e.fork.includes(t))return!0;if(e.otherFork.includes(this))return!1;const n=e.common[0];if(!n)return;const i=e.fork.pop(),o=e.otherFork.pop(),l=n._objects.indexOf(i),c=n._objects.indexOf(o);return l>-1&&l>c}}class lP extends cu{animate(t,e){return Object.entries(t).reduce((n,i)=>{let[o,l]=i;return n[o]=this._animate(o,l,e),n},{})}_animate(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=t.split("."),o=this.colorProperties.includes(i[i.length-1]),{easing:l,duration:c,abort:h,startValue:f,onChange:d,onComplete:p}=n,_={target:this,startValue:f??i.reduce((v,w)=>v[w],this),endValue:e,easing:l,duration:c,abort:h==null?void 0:h.bind(this),onChange:(v,w,E)=>{i.reduce((O,M,R)=>(R===i.length-1&&(O[M]=v),O[M]),this),d&&d(v,w,E)},onComplete:(v,w,E)=>{this.setCoords(),p&&p(v,w,E)}};return o?_0(_):ou(_)}}const cP={color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1};class fr{constructor(t){const e=typeof t=="string"?fr.parseShadow(t):t;Object.assign(this,this.constructor.ownDefaults);for(const n in e)this[n]=e[n];this.id=zr()}static parseShadow(t){const e=t.trim(),[n,i=0,o=0,l=0]=(fr.reOffsetsAndBlur.exec(e)||[]).map(h=>parseFloat(h)||0);return{color:(e.replace(fr.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:i,offsetY:o,blur:l}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(t){const e=au(new F(this.offsetX,this.offsetY),te(-t.angle)),n=20,i=new qt(this.color);let o=40,l=40;return t.width&&t.height&&(o=Bt((Math.abs(e.x)+this.blur)/t.width,Dt.NUM_FRACTION_DIGITS)*100+n,l=Bt((Math.abs(e.y)+this.blur)/t.height,Dt.NUM_FRACTION_DIGITS)*100+n),t.flipX&&(e.x*=-1),t.flipY&&(e.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(l,'%" height="').concat(100+2*l,'%" x="-').concat(o,'%" width="').concat(100+2*o,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Bt(this.blur?this.blur/2:0,Dt.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Bt(e.x,Dt.NUM_FRACTION_DIGITS),'" dy="').concat(Bt(e.y,Dt.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(i.toRgb(),'" flood-opacity="').concat(i.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const t={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling},e=fr.ownDefaults;return this.includeDefaultValues?t:Qm(t,(n,i)=>n!==e[i])}}A(fr,"ownDefaults",cP);A(fr,"reOffsetsAndBlur",/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/);const fs=r=>JSON.parse(JSON.stringify(r)),hP=[je,Ut,"scaleX","scaleY","flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible","skewX","skewY"],yr=["fill","stroke","strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],uP={originX:Ut,originY:je,top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!0,noScaleCache:!0,strokeUniform:!1,dirty:!0,paintFirst:"fill",activeOn:"down",colorProperties:["fill","stroke","backgroundColor"],clipPath:void 0,inverted:!1,absolutePositioned:!1,FX_DURATION:500},fP=["extraParam"];let Ci=class w0 extends lP{static getDefaults(){return D({},w0.ownDefaults)}get type(){const t=this.constructor.type;return t==="FabricObject"?"object":t.toLowerCase()}set type(t){console.warn("Setting type has no effect",t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),A(this,"_cacheContext",null),Object.assign(this,this.constructor.getDefaults()),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=fe(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(t){const e=t.width,n=t.height,i=Dt.maxCacheSideLimit,o=Dt.minCacheSideLimit;if(e<=i&&n<=i&&e*n<=Dt.perfLimitSizeTotal)return e<o&&(t.width=o),n<o&&(t.height=o),t;const l=e/n,[c,h]=zs.limitDimsByArea(l),f=yi(o,c,i),d=yi(o,h,i);return e>f&&(t.zoomX/=e/f,t.width=f,t.capped=!0),n>d&&(t.zoomY/=n/d,t.height=d,t.capped=!0),t}_getCacheCanvasDimensions(){const t=this.getTotalObjectScaling(),e=this._getTransformedDimensions({skewX:0,skewY:0}),n=e.x*t.x/this.scaleX,i=e.y*t.y/this.scaleY;return{width:n+lp,height:i+lp,zoomX:t.x,zoomY:t.y,x:n,y:i}}_updateCacheCanvas(){const t=this._cacheCanvas,e=this._cacheContext,n=this._limitCacheSize(this._getCacheCanvasDimensions()),i=Dt.minCacheSideLimit,o=n.width,l=n.height,c=n.zoomX,h=n.zoomY,f=o!==this.cacheWidth||l!==this.cacheHeight,d=this.zoomX!==c||this.zoomY!==h;if(!t||!e)return!1;let p,_,v=f||d,w=0,E=0,O=!1;if(f){const M=this._cacheCanvas.width,R=this._cacheCanvas.height,X=o>M||l>R,B=(o<M*.9||l<R*.9)&&M>i&&R>i;O=X||B,X&&!n.capped&&(o>i||l>i)&&(w=o*.1,E=l*.1)}return e0(this)&&this.path&&(v=!0,O=!0,w+=this.getHeightOfLine(0)*this.zoomX,E+=this.getHeightOfLine(0)*this.zoomY),v?(O?(t.width=Math.ceil(o+w),t.height=Math.ceil(l+E)):(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height)),p=n.x/2,_=n.y/2,this.cacheTranslationX=Math.round(t.width/2-p)+p,this.cacheTranslationY=Math.round(t.height/2-_)+_,this.cacheWidth=o,this.cacheHeight=l,e.translate(this.cacheTranslationX,this.cacheTranslationY),e.scale(c,h),this.zoomX=c,this.zoomY=h,!0):!1}setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(t)}transform(t){const e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,n=this.calcTransformMatrix(!e);t.transform(n[0],n[1],n[2],n[3],n[4],n[5])}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=Dt.NUM_FRACTION_DIGITS,n=this.clipPath&&!this.clipPath.excludeFromExport?D(D({},this.clipPath.toObject(t)),{},{inverted:this.clipPath.inverted,absolutePositioned:this.clipPath.absolutePositioned}):null,i=D(D({},wi(this,t)),{},{type:this.constructor.type,version:ah,originX:this.originX,originY:this.originY,left:Bt(this.left,e),top:Bt(this.top,e),width:Bt(this.width,e),height:Bt(this.height,e),fill:gp(this.fill)?this.fill.toObject():this.fill,stroke:gp(this.stroke)?this.stroke.toObject():this.stroke,strokeWidth:Bt(this.strokeWidth,e),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:Bt(this.strokeMiterLimit,e),scaleX:Bt(this.scaleX,e),scaleY:Bt(this.scaleY,e),angle:Bt(this.angle,e),flipX:this.flipX,flipY:this.flipY,opacity:Bt(this.opacity,e),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:Bt(this.skewX,e),skewY:Bt(this.skewY,e)},n?{clipPath:n}:null);return this.includeDefaultValues?i:this._removeDefaultValues(i)}toDatalessObject(t){return this.toObject(t)}_removeDefaultValues(t){const e=this.constructor.getDefaults(),i=Object.keys(e).length>0?e:Object.getPrototypeOf(this);return Qm(t,(o,l)=>{if(l===Ut||l===je||l==="type")return!0;const c=i[l];return o!==c&&!(Array.isArray(o)&&Array.isArray(c)&&o.length===0&&c.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}getObjectScaling(){if(!this.group)return new F(Math.abs(this.scaleX),Math.abs(this.scaleY));const t=vi(this.calcTransformMatrix());return new F(Math.abs(t.scaleX),Math.abs(t.scaleY))}getTotalObjectScaling(){const t=this.getObjectScaling();if(this.canvas){const e=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return t.scalarMultiply(e*n)}return t}getObjectOpacity(){let t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t}_constrainScale(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t===0?1e-4:t}_set(t,e){const n=this[t]!==e;if((t==="scaleX"||t==="scaleY")&&(e=this._constrainScale(e)),t==="scaleX"&&e<0?(this.flipX=!this.flipX,e*=-1):t==="scaleY"&&e<0?(this.flipY=!this.flipY,e*=-1):t==="shadow"&&e&&!(e instanceof fr)?e=new fr(e):t==="dirty"&&this.group&&this.group.set("dirty",e),this[t]=e,n){const i=this.group&&this.group.isOnACache();this.constructor.cacheProperties.includes(t)?(this.dirty=!0,i&&this.group.set("dirty",!0)):i&&this.constructor.stateProperties.includes(t)&&this.group.set("dirty",!0)}return this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.drawObject(t),this.dirty=!1),t.restore())}drawSelectionBackground(t){}renderCache(t){t=t||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext&&(this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)}shouldCache(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(t,e){if(t.save(),e.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",e.absolutePositioned){const n=Me(this.calcTransformMatrix());t.transform(n[0],n[1],n[2],n[3],n[4],n[5])}e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}drawObject(t,e){const n=this.fill,i=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath),this.fill=n,this.stroke=i}_drawClipPath(t,e){e&&(e._set("canvas",this.canvas),e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t,e))}drawCacheOnCanvas(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned){if(this._cacheCanvas&&this._cacheContext&&!t){const e=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-n/2,e,n)}return!0}return!1}_renderBackground(t){if(!this.backgroundColor)return;const e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity}_setStrokeStyles(t,e){const n=e.stroke;n&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,On(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(t,n):(t.strokeStyle=n.toLive(t),this._applyPatternGradientTransform(t,n)):t.strokeStyle=e.stroke)}_setFillStyles(t,e){let{fill:n}=e;n&&(On(n)?(t.fillStyle=n.toLive(t),this._applyPatternGradientTransform(t,n)):t.fillStyle=n)}_setClippingProperties(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"}_setLineDash(t,e){!e||e.length===0||(1&e.length&&e.push(...e),t.setLineDash(e))}_setShadow(t){if(!this.shadow)return;const e=this.shadow,n=this.canvas,i=this.getCanvasRetinaScaling(),[o,,,l]=(n==null?void 0:n.viewportTransform)||pn,c=o*i,h=l*i,f=e.nonScaling?new F(1,1):this.getObjectScaling();t.shadowColor=e.color,t.shadowBlur=e.blur*Dt.browserShadowBlurConstant*(c+h)*(f.x+f.y)/4,t.shadowOffsetX=e.offsetX*c*f.x,t.shadowOffsetY=e.offsetY*h*f.y}_removeShadow(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)}_applyPatternGradientTransform(t,e){if(!On(e))return{offsetX:0,offsetY:0};const n=e.gradientTransform||e.patternTransform,i=-this.width/2+e.offsetX||0,o=-this.height/2+e.offsetY||0;return e.gradientUnits==="percentage"?t.transform(this.width,0,0,this.height,i,o):t.transform(1,0,0,1,i,o),n&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:i,offsetY:o}}_renderPaintInOrder(t){this.paintFirst==="stroke"?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))}_render(t){}_renderFill(t){this.fill&&(t.save(),this._setFillStyles(t,this),this.fillRule==="evenodd"?t.fill("evenodd"):t.fill(),t.restore())}_renderStroke(t){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform){const e=this.getObjectScaling();t.scale(1/e.x,1/e.y)}this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}}_applyPatternForTransformedGradient(t,e){var n;const i=this._limitCacheSize(this._getCacheCanvasDimensions()),o=fe(),l=this.getCanvasRetinaScaling(),c=i.x/this.scaleX/l,h=i.y/this.scaleY/l;o.width=Math.ceil(c),o.height=Math.ceil(h);const f=o.getContext("2d");f&&(f.beginPath(),f.moveTo(0,0),f.lineTo(c,0),f.lineTo(c,h),f.lineTo(0,h),f.closePath(),f.translate(c/2,h/2),f.scale(i.zoomX/this.scaleX/l,i.zoomY/this.scaleY/l),this._applyPatternGradientTransform(f,e),f.fillStyle=e.toLive(t),f.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(l*this.scaleX/i.zoomX,l*this.scaleY/i.zoomY),t.strokeStyle=(n=f.createPattern(o,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new F(this.left+this.width/2,this.top+this.height/2)}clone(t){const e=this.toObject(t);return this.constructor.fromObject(e)}cloneAsImage(t){const e=this.toCanvasElement(t),n=dt.getClass("image");return new n(e)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=Zh(this),n=this.group,i=this.shadow,o=Math.abs,l=t.enableRetinaScaling?Math.max(Dt.devicePixelRatio,1):1,c=(t.multiplier||1)*l;delete this.group,t.withoutTransform&&Jh(this),t.withoutShadow&&(this.shadow=null),t.viewportTransform&&nu(this,this.getViewportTransform());const h=fe(),f=this.getBoundingRect(!0,!0),d=this.shadow,p=new F;if(d){const M=d.blur,R=d.nonScaling?new F(1,1):this.getObjectScaling();p.x=2*Math.round(o(d.offsetX)+M)*o(R.x),p.y=2*Math.round(o(d.offsetY)+M)*o(R.y)}const _=f.width+p.x,v=f.height+p.y;h.width=Math.ceil(_),h.height=Math.ceil(v);const w=new uo(h,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});t.format==="jpeg"&&(w.backgroundColor="#fff"),this.setPositionByOrigin(new F(w.width/2,w.height/2),bt,bt);const E=this.canvas;w._objects=[this],this.set("canvas",w),this.setCoords();const O=w.toCanvasElement(c||1,t);return this.set("canvas",E),this.shadow=i,n&&(this.group=n),this.set(e),this.setCoords(),w._objects=[],w.destroy(),O}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Gh(this.toCanvasElement(t),t.format||"png",t.quality||1)}isType(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.includes(this.constructor.type)||e.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(t){const{centeredRotation:e,originX:n,originY:i}=this;if(e){const{x:o,y:l}=this.getRelativeCenterPoint();this.originX=bt,this.originY=bt,this.left=o,this.top=l}if(this.set("angle",t),e){const{x:o,y:l}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,i);this.left=o,this.top=l,this.originX=n,this.originY=i}}setOnGroup(){}_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}dispose(){ch.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Jn().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}static _fromObject(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:n}=e,i=ee(e,fP);return ho(fs(t),i).then(o=>{const l=D(D({},i),o);if(n){const{[n]:c,type:h}=l,f=ee(l,[n,"type"].map(Vm));return new this(c,f)}else return new this(l)})}static fromObject(t,e){return this._fromObject(t,e)}};A(Ci,"stateProperties",hP);A(Ci,"cacheProperties",yr);A(Ci,"ownDefaults",uP);A(Ci,"type","FabricObject");dt.setClass(Ci);dt.setClass(Ci,"object");const Si=(r,t)=>(e,n,i,o)=>{const l=t(e,n,i,o);return l&&l0(r,h0(e,n,i,o)),l};function bi(r){return(t,e,n,i)=>{const{target:o,originX:l,originY:c}=e,h=o.getRelativeCenterPoint(),f=o.translateToOriginPoint(h,l,c),d=r(t,e,n,i);return o.setPositionByOrigin(f,e.originX,e.originY),d}}const dP=(r,t,e,n)=>{const i=fo(t,t.originX,t.originY,e,n);if(t.originX===bt||t.originX===_e&&i.x<0||t.originX===Ut&&i.x>0){const{target:o}=t,l=o.strokeWidth/(o.strokeUniform?o.scaleX:1),c=c0(t)?2:1,h=o.width,f=Math.ceil(Math.abs(i.x*c/o.scaleX)-l);return o.set("width",Math.max(f,0)),h!==o.width}return!1},gh=Si("resizing",bi(dP));function C0(r,t,e,n,i){n=n||{};const o=this.sizeX||n.cornerSize||i.cornerSize,l=this.sizeY||n.cornerSize||i.cornerSize,c=typeof n.transparentCorners<"u"?n.transparentCorners:i.transparentCorners,h=c?"stroke":"fill",f=!c&&(n.cornerStrokeColor||i.cornerStrokeColor);let d=t,p=e,_;r.save(),r.fillStyle=n.cornerColor||i.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||i.cornerStrokeColor||"",o>l?(_=o,r.scale(1,l/o),p=e*o/l):l>o?(_=l,r.scale(o/l,1),d=t*l/o):_=o,r.lineWidth=1,r.beginPath(),r.arc(d,p,_/2,0,mr,!1),r[h](),f&&r.stroke(),r.restore()}function S0(r,t,e,n,i){n=n||{};const o=this.sizeX||n.cornerSize||i.cornerSize,l=this.sizeY||n.cornerSize||i.cornerSize,c=typeof n.transparentCorners<"u"?n.transparentCorners:i.transparentCorners,h=c?"stroke":"fill",f=!c&&(n.cornerStrokeColor||i.cornerStrokeColor),d=o/2,p=l/2;r.save(),r.fillStyle=n.cornerColor||i.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||i.cornerStrokeColor||"",r.lineWidth=1,r.translate(t,e);const _=i.getTotalAngle();r.rotate(te(_)),r["".concat(h,"Rect")](-d,-p,o,l),f&&r.strokeRect(-d,-p,o,l),r.restore()}class Ne{constructor(t){A(this,"visible",!0),A(this,"actionName","scale"),A(this,"angle",0),A(this,"x",0),A(this,"y",0),A(this,"offsetX",0),A(this,"offsetY",0),A(this,"sizeX",null),A(this,"sizeY",null),A(this,"touchSizeX",null),A(this,"touchSizeY",null),A(this,"cursorStyle","crosshair"),A(this,"withConnection",!1),Object.assign(this,t)}shouldActivate(t,e){var n;return((n=e.canvas)===null||n===void 0?void 0:n.getActiveObject())===e&&e.isControlVisible(t)}getActionHandler(t,e,n){return this.actionHandler}getMouseDownHandler(t,e,n){return this.mouseDownHandler}getMouseUpHandler(t,e,n){return this.mouseUpHandler}cursorStyleHandler(t,e,n){return e.cursorStyle}getActionName(t,e,n){return e.actionName}getVisibility(t,e){var n,i;return(n=(i=t._controlsVisibility)===null||i===void 0?void 0:i[e])!==null&&n!==void 0?n:this.visible}setVisibility(t,e,n){this.visible=t}positionHandler(t,e,n,i){return new F(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(e)}calcCornerCoords(t,e,n,i,o){let l,c,h,f;const d=o?this.touchSizeX:this.sizeX,p=o?this.touchSizeY:this.sizeY;if(d&&p&&d!==p){const _=Math.atan2(p,d),v=Math.sqrt(d*d+p*p)/2,w=_-te(t),E=vr-_-te(t);l=v*$e(w),c=v*Ke(w),h=v*$e(E),f=v*Ke(E)}else{const v=(d&&p?d:e)*Math.SQRT1_2,w=te(45-t);l=h=v*$e(w),c=f=v*Ke(w)}return{tl:new F(n-f,i-h),tr:new F(n+l,i-c),bl:new F(n-l,i+c),br:new F(n+f,i+h)}}render(t,e,n,i,o){switch(i=i||{},i.cornerStyle||o.cornerStyle){case"circle":C0.call(this,t,e,n,i,o);break;default:S0.call(this,t,e,n,i,o)}}}const b0=(r,t,e)=>e.lockRotation?Da:t.cursorStyle,gP=(r,t,e,n)=>{let{target:i,ex:o,ey:l,theta:c,originX:h,originY:f}=t;const d=i.translateToOriginPoint(i.getRelativeCenterPoint(),h,f);if(Wn(i,"lockRotation"))return!1;const p=Math.atan2(l-d.y,o-d.x),_=Math.atan2(n-d.y,e-d.x);let v=ss(_-p+c);if(i.snapAngle&&i.snapAngle>0){const E=i.snapAngle,O=i.snapThreshold||E,M=Math.ceil(v/E)*E,R=Math.floor(v/E)*E;Math.abs(v-R)<O?v=R:Math.abs(v-M)<O&&(v=M)}v<0&&(v=360+v),v%=360;const w=i.angle!==v;return i.angle=v,w},T0=Si("rotating",bi(gP));function O0(r,t){const e=t.canvas,n=r[e.uniScaleKey];return e.uniformScaling&&!n||!e.uniformScaling&&n}function E0(r,t,e){const n=Wn(r,"lockScalingX"),i=Wn(r,"lockScalingY");return!!(n&&i||!t&&(n||i)&&e||n&&t==="x"||i&&t==="y")}const pP=["e","se","s","sw","w","nw","n","ne","e"],Vi=(r,t,e)=>{const n=O0(r,e),i=t.x!==0&&t.y===0?"x":t.x===0&&t.y!==0?"y":"";if(E0(e,i,n))return Da;const o=u0(e,t);return"".concat(pP[o],"-resize")};function hu(r,t,e,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o=t.target,l=i.by,c=O0(r,o),h=E0(o,l,c);let f,d,p,_,v,w;if(h)return!1;if(t.gestureScale)d=t.scaleX*t.gestureScale,p=t.scaleY*t.gestureScale;else{if(f=fo(t,t.originX,t.originY,e,n),v=l!=="y"?Math.sign(f.x||t.signX||1):1,w=l!=="x"?Math.sign(f.y||t.signY||1):1,t.signX||(t.signX=v),t.signY||(t.signY=w),Wn(o,"lockScalingFlip")&&(t.signX!==v||t.signY!==w))return!1;if(_=o._getTransformedDimensions(),c&&!l){const M=Math.abs(f.x)+Math.abs(f.y),{original:R}=t,X=Math.abs(_.x*R.scaleX/o.scaleX)+Math.abs(_.y*R.scaleY/o.scaleY),B=M/X;d=R.scaleX*B,p=R.scaleY*B}else d=Math.abs(f.x*o.scaleX/_.x),p=Math.abs(f.y*o.scaleY/_.y);c0(t)&&(d*=2,p*=2),t.signX!==v&&l!=="y"&&(t.originX=vp(t.originX),d*=-1,t.signX=v),t.signY!==w&&l!=="x"&&(t.originY=vp(t.originY),p*=-1,t.signY=w)}const E=o.scaleX,O=o.scaleY;return l?(l==="x"&&o.set("scaleX",d),l==="y"&&o.set("scaleY",p)):(!Wn(o,"lockScalingX")&&o.set("scaleX",d),!Wn(o,"lockScalingY")&&o.set("scaleY",p)),E!==o.scaleX||O!==o.scaleY}const mP=(r,t,e,n)=>hu(r,t,e,n),_P=(r,t,e,n)=>hu(r,t,e,n,{by:"x"}),vP=(r,t,e,n)=>hu(r,t,e,n,{by:"y"}),js=Si("scaling",bi(mP)),P0=Si("scaling",bi(_P)),D0=Si("scaling",bi(vP)),yP=["target","ex","ey","skewingSide"],ph={x:{counterAxis:"y",scale:"scaleX",skew:"skewX",lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:"scaleY",skew:"skewY",lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},xP=["ns","nesw","ew","nwse"],A0=(r,t,e)=>{if(t.x!==0&&Wn(e,"lockSkewingY")||t.y!==0&&Wn(e,"lockSkewingX"))return Da;const n=u0(e,t)%4;return"".concat(xP[n],"-resize")};function wP(r,t,e){let{target:n,ex:i,ey:o,skewingSide:l}=t,c=ee(t,yP);const{skew:h}=ph[r],f=e.subtract(new F(i,o)).divide(new F(n.scaleX,n.scaleY))[r],d=n[h],p=c[h],_=Math.tan(te(p)),v=r==="y"?n._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:n._getTransformedDimensions({scaleX:1,scaleY:1}).y,w=2*f*l/Math.max(v,1)+_,E=ss(Math.atan(w));n.set(h,E);const O=d!==n[h];if(O&&r==="y"){const{skewX:M,scaleX:R}=n,X=n._getTransformedDimensions({skewY:d}),B=n._getTransformedDimensions(),$=M!==0?X.x/B.x:1;$!==1&&n.set("scaleX",$*R)}return O}function M0(r,t,e,n,i){const{target:o}=e,{counterAxis:l,origin:c,lockSkewing:h,skew:f,flip:d}=ph[r];if(Wn(o,h))return!1;const{origin:p,flip:_}=ph[l],v=Wr(e[p])*(o[_]?-1:1),w=-Math.sign(v)*(o[d]?-1:1),E=(o[f]===0&&fo(e,bt,bt,n,i)[r]>0||o[f]>0?1:-1)*w,O=-E*.5+.5;return Si("skewing",bi((R,X,B,$)=>wP(r,X,new F(B,$))))(t,D(D({},e),{},{[c]:O,skewingSide:w}),n,i)}const k0=(r,t,e,n)=>M0("x",r,t,e,n),L0=(r,t,e,n)=>M0("y",r,t,e,n);function rl(r,t){return r[t.canvas.altActionKey]}const Ws=(r,t,e)=>{const n=rl(r,e);return t.x===0?n?"skewX":"scaleY":t.y===0?n?"skewY":"scaleX":""},di=(r,t,e)=>rl(r,e)?A0(r,t,e):Vi(r,t,e),mh=(r,t,e,n)=>rl(r,t.target)?L0(r,t,e,n):P0(r,t,e,n),_h=(r,t,e,n)=>rl(r,t.target)?k0(r,t,e,n):D0(r,t,e,n),uu=()=>({ml:new Ne({x:-.5,y:0,cursorStyleHandler:di,actionHandler:mh,getActionName:Ws}),mr:new Ne({x:.5,y:0,cursorStyleHandler:di,actionHandler:mh,getActionName:Ws}),mb:new Ne({x:0,y:.5,cursorStyleHandler:di,actionHandler:_h,getActionName:Ws}),mt:new Ne({x:0,y:-.5,cursorStyleHandler:di,actionHandler:_h,getActionName:Ws}),tl:new Ne({x:-.5,y:-.5,cursorStyleHandler:Vi,actionHandler:js}),tr:new Ne({x:.5,y:-.5,cursorStyleHandler:Vi,actionHandler:js}),bl:new Ne({x:-.5,y:.5,cursorStyleHandler:Vi,actionHandler:js}),br:new Ne({x:.5,y:.5,cursorStyleHandler:Vi,actionHandler:js}),mtr:new Ne({x:0,y:-.5,actionHandler:T0,cursorStyleHandler:b0,offsetY:-40,withConnection:!0,actionName:"rotate"})}),R0=()=>({mr:new Ne({x:.5,y:0,actionHandler:gh,cursorStyleHandler:di,actionName:"resizing"}),ml:new Ne({x:-.5,y:0,actionHandler:gh,cursorStyleHandler:di,actionName:"resizing"})}),F0=()=>D(D({},uu()),R0()),CP={};class il extends Ci{static getDefaults(){return D(D({},super.getDefaults()),{},{controls:uu()},il.ownDefaults)}_updateCacheCanvas(){const t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){const e=t._currentTransform.target,n=t._currentTransform.action;if(this===e&&n.startsWith("scale"))return!1}return super._updateCacheCanvas()}getActiveControl(){return this.__corner}_findTargetCorner(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasControls||!this.canvas)return"";this.__corner=void 0;const n=Object.entries(this.oCoords);for(let i=n.length-1;i>=0;i--){const[o,l]=n[i];if(this.controls[o].shouldActivate(o,this)){const c=this._getImageLines(e?l.touchCorner:l.corner),h=this._findCrossPoints(t,c);if(h!==0&&h%2===1)return this.__corner=o,o}}return""}calcOCoords(){const t=this.getViewportTransform(),e=this.getCenterPoint(),n=lo(e.x,e.y),i=co({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),o=ke(n,i),l=ke(t,o),c=ke(l,[1/t[0],0,0,1/t[3],0,0]),h=this.group?vi(this.calcTransformMatrix()):void 0,f=this._calculateCurrentDimensions(h),d={};return this.forEachControl((p,_)=>{const v=p.positionHandler(f,c,this,p);d[_]=Object.assign(v,this._calcCornerCoords(p,v))}),d}_calcCornerCoords(t,e){const n=t.calcCornerCoords(this.angle,this.cornerSize,e.x,e.y,!1),i=t.calcCornerCoords(this.angle,this.touchCornerSize,e.x,e.y,!0);return{corner:n,touchCorner:i}}setCoords(){super.setCoords(),this.oCoords=this.calcOCoords()}forEachControl(t){for(const e in this.controls)t(this.controls[e],e,this)}drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;t.save();const e=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),i=this.getViewportTransform();t.translate(e.x,e.y),t.scale(1/i[0],1/i[3]),t.rotate(te(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-n.x/2,-n.y/2,n.x,n.y),t.restore()}strokeBorders(t,e){t.strokeRect(-e.x/2,-e.y/2,e.x,e.y)}_drawBorders(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=D({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);t.save(),t.strokeStyle=i.borderColor,this._setLineDash(t,i.borderDashArray),this.strokeBorders(t,e),i.hasControls&&this.drawControlsConnectingLines(t,e),t.restore()}_renderControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:n,hasControls:i}=this,o=D({hasBorders:n,hasControls:i},e),l=this.getViewportTransform(),c=o.hasBorders,h=o.hasControls,f=ke(l,this.calcTransformMatrix()),d=vi(f);t.save(),t.translate(d.translateX,d.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(d.angle-=180),t.rotate(te(this.group?d.angle:this.angle)),c&&this.drawBorders(t,d,e),h&&this.drawControls(t,e),t.restore()}drawBorders(t,e,n){let i;if(n&&n.forActiveSelection||this.group){const o=Qh(this.width,this.height,e),l=(this.strokeUniform?new F().scalarAdd(this.canvas?this.canvas.getZoom():1):new F(e.scaleX,e.scaleY)).scalarMultiply(this.strokeWidth);i=o.add(l).scalarAdd(this.borderScaleFactor).scalarAdd(this.padding*2)}else i=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(t,i,n)}drawControlsConnectingLines(t,e){let n=!1;t.beginPath(),this.forEachControl((i,o)=>{i.withConnection&&i.getVisibility(this,o)&&(n=!0,t.moveTo(i.x*e.x,i.y*e.y),t.lineTo(i.x*e.x+i.offsetX,i.y*e.y+i.offsetY))}),n&&t.stroke()}drawControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:i,cornerDashArray:o,cornerColor:l}=this,c=D({cornerStrokeColor:i,cornerDashArray:o,cornerColor:l},e);t.setTransform(n,0,0,n,0,0),t.strokeStyle=t.fillStyle=c.cornerColor,this.transparentCorners||(t.strokeStyle=c.cornerStrokeColor),this._setLineDash(t,c.cornerDashArray),this.setCoords(),this.forEachControl((h,f)=>{if(h.getVisibility(this,f)){const d=this.oCoords[f];h.render(t,d.x,d.y,c,this)}}),t.restore()}isControlVisible(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)}setControlVisible(t,e){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e}setControlsVisibility(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(t).forEach(e=>{let[n,i]=e;return this.setControlVisible(n,i)})}clearContextTop(t){if(!this.canvas)return;const e=this.canvas.contextTop;if(!e)return;const n=this.canvas.viewportTransform;e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(e);const i=this.width+4,o=this.height+4;return e.clearRect(-i/2,-o/2,i,o),t||e.restore(),e}onDeselect(t){return!1}onSelect(t){return!1}canDrop(t){return!1}renderDragSourceEffect(t){}renderDropTargetEffect(t){}}A(il,"ownDefaults",CP);function I0(r,t){return t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(e.prototype,n)||Object.create(null))})}),r}class Se extends il{}I0(Se,[d0]);dt.setClass(Se);dt.setClass(Se,"object");const B0=(r,t,e,n)=>{n=Math.round(n);const i=n*2+1,{data:o}=r.getImageData(t-n,e-n,i,i);for(let l=3;l<o.length;l+=4)if(o[l]>0)return!1;return!0},Vr=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function sl(r){return new RegExp("^("+r.join("|")+")\\b","i")}var yp,xp;const ao=String.raw(yp||(yp=Zn(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"])));String.raw(xp||(xp=Zn(["(?:s+,?s*|,s*|$)"],["(?:\\s+,?\\s*|,\\s*|$)"])));const SP=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+ao+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+ao+"))?\\s+(.*)"),bP=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],TP=["symbol","image","marker","pattern","view","svg"],OP=["pattern","defs","symbol","metadata","clipPath","mask","desc"],EP=["symbol","g","a","svg","clipPath","defs"],PP={cx:Ut,x:Ut,r:"radius",cy:je,y:je,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},Ic="font-size",Bc="clip-path";sl(bP);sl(TP);const wp=sl(EP);function j0(r,t){const e=r.nodeName,n=r.getAttribute("class"),i=r.getAttribute("id");let o;if(o=new RegExp("^"+e,"i"),t=t.replace(o,""),i&&t.length&&(o=new RegExp("#"+i+"(?![a-zA-Z\\-]+)","i"),t=t.replace(o,"")),n&&t.length){const l=n.split(" ");for(let c=l.length;c--;)o=new RegExp("\\."+l[c]+"(?![a-zA-Z\\-]+)","i"),t=t.replace(o,"")}return t.length===0}function DP(r,t){let e,n=!0;for(;r.parentElement&&r.parentElement.nodeType===1&&t.length;)n&&(e=t.pop()),r=r.parentElement,n=j0(r,e);return t.length===0}function AP(r,t){let e=!0;const n=j0(r,t.pop());return n&&t.length&&(e=DP(r,t)),n&&e&&t.length===0}function MP(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e={};for(const n in t)AP(r,n.split(" "))&&(e=D(D({},e),t[n]));return e}const kP=r=>{var t;return(t=PP[r])!==null&&t!==void 0?t:r},W0=r=>r.replace(new RegExp("(".concat(ao,")"),"gi")," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Cp,Sp,bp,Tp,Op,Ep,Pp;const ze="(".concat(ao,")"),LP=String.raw(Cp||(Cp=Zn(["(skewX)(",")"],["(skewX)\\(","\\)"])),ze),RP=String.raw(Sp||(Sp=Zn(["(skewY)(",")"],["(skewY)\\(","\\)"])),ze),FP=String.raw(bp||(bp=Zn(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),ze,ze,ze),IP=String.raw(Tp||(Tp=Zn(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),ze,ze),BP=String.raw(Op||(Op=Zn(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),ze,ze),jP=String.raw(Ep||(Ep=Zn(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),ze,ze,ze,ze,ze,ze),fu="(?:".concat(jP,"|").concat(BP,"|").concat(FP,"|").concat(IP,"|").concat(LP,"|").concat(RP,")"),WP="(?:".concat(fu,"*)"),XP=String.raw(Pp||(Pp=Zn(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),WP),HP=new RegExp(XP),YP=new RegExp(fu,"g");function vh(r){r=W0(r).replace(/\s*([()])\s*/gi,"$1");const t=[];if(!r||r&&!HP.test(r))return[...pn];for(const e of r.matchAll(YP)){const n=new RegExp(fu).exec(e[0]);if(!n)continue;let i=pn;const o=n.filter(w=>!!w),[,l,...c]=o,[h,f,d,p,_,v]=c.map(w=>parseFloat(w));switch(l){case"translate":i=lo(h,f);break;case"rotate":i=co({angle:h},{x:f,y:d});break;case"scale":i=$h(h,f);break;case"skewX":i=Kh(h);break;case"skewY":i=qh(h);break;case"matrix":i=[h,f,d,p,_,v];break}t.push(i)}return tl(t)}function UP(r,t,e,n){const i=Array.isArray(t);let o,l=t;if((r==="fill"||r==="stroke")&&t===rn)l="";else{if(r==="strokeUniform")return t==="non-scaling-stroke";if(r==="strokeDashArray")t===rn?l=null:l=t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(r==="transformMatrix")e&&e.transformMatrix?l=ke(e.transformMatrix,vh(t)):l=vh(t);else if(r==="visible")l=t!==rn&&t!=="hidden",e&&e.visible===!1&&(l=!1);else if(r==="opacity")l=parseFloat(t),e&&typeof e.opacity<"u"&&(l*=e.opacity);else if(r==="textAnchor")l=t==="start"?Ut:t==="end"?_e:bt;else if(r==="charSpacing")o=_i(t,n)/n*1e3;else if(r==="paintFirst"){const c=t.indexOf("fill"),h=t.indexOf("stroke");l="fill",(c>-1&&h>-1&&h<c||c===-1&&h>-1)&&(l="stroke")}else{if(r==="href"||r==="xlink:href"||r==="font")return t;if(r==="imageSmoothing")return t==="optimizeQuality";o=i?t.map(_i):_i(t,n)}}return!i&&isNaN(o)?l:o}function NP(r,t){const e=r.match(SP);if(!e)return;const n=e[1],i=e[3],o=e[4],l=e[5],c=e[6];n&&(t.fontStyle=n),i&&(t.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),o&&(t.fontSize=_i(o)),c&&(t.fontFamily=c),l&&(t.lineHeight=l==="normal"?1:l)}function zP(r,t){Object.entries(r).forEach(e=>{let[n,i]=e;i!==void 0&&(t[n.toLowerCase()]=i)})}function VP(r,t){r.replace(/;\s*$/,"").split(";").forEach(e=>{const[n,i]=e.split(":");t[n.trim().toLowerCase()]=i.trim()})}function GP(r){const t={},e=r.getAttribute("style");return e&&(typeof e=="string"?VP(e,t):zP(e,t)),t}const $P={stroke:"strokeOpacity",fill:"fillOpacity"};function KP(r){const t=Se.getDefaults();return Object.entries($P).forEach(e=>{let[n,i]=e;if(typeof r[i]>"u"||r[n]==="")return;if(typeof r[n]>"u"){if(!t[n])return;r[n]=t[n]}if(r[n].indexOf("url(")===0)return;const o=new qt(r[n]);r[n]=o.setAlpha(Bt(o.getAlpha()*r[i],2)).toRgba()}),r}function xr(r,t,e){if(!r)return{};let n={},i,o=zh;r.parentNode&&wp.test(r.parentNode.nodeName)&&(n=xr(r.parentElement,t,e),n.fontSize&&(i=o=_i(n.fontSize)));const l=D(D(D({},t.reduce((f,d)=>{const p=r.getAttribute(d);return p&&(f[d]=p),f},{})),MP(r,e)),GP(r));l[Bc]&&r.setAttribute(Bc,l[Bc]),l[Ic]&&(i=_i(l[Ic],o),l[Ic]="".concat(i));const c={};for(const f in l){const d=kP(f),p=UP(d,l[f],n,i);c[d]=p}c&&c.font&&NP(c.font,c);const h=D(D({},n),c);return wp.test(r.nodeName)?h:KP(h)}const qP=["left","top","width","height","visible"],JP={rx:0,ry:0},X0=["rx","ry"];class wr extends Se{static getDefaults(){return D(D({},super.getDefaults()),wr.ownDefaults)}constructor(t){super(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:e}=this;t&&!e?this.ry=t:e&&!t&&(this.rx=e)}_render(t){const{width:e,height:n}=this,i=-e/2,o=-n/2,l=this.rx?Math.min(this.rx,e/2):0,c=this.ry?Math.min(this.ry,n/2):0,h=l!==0||c!==0;t.beginPath(),t.moveTo(i+l,o),t.lineTo(i+e-l,o),h&&t.bezierCurveTo(i+e-Fr*l,o,i+e,o+Fr*c,i+e,o+c),t.lineTo(i+e,o+n-c),h&&t.bezierCurveTo(i+e,o+n-Fr*c,i+e-Fr*l,o+n,i+e-l,o+n),t.lineTo(i+l,o+n),h&&t.bezierCurveTo(i+Fr*l,o+n,i,o+n-Fr*c,i,o+n-c),t.lineTo(i,o+c),h&&t.bezierCurveTo(i,o+Fr*c,i+Fr*l,o,i+l,o),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...X0,...t])}_toSVG(){const{width:t,height:e,rx:n,ry:i}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-t/2,'" y="').concat(-e/2,'" rx="').concat(n,'" ry="').concat(i,'" width="').concat(t,'" height="').concat(e,`" />
`)]}static async fromElement(t,e,n){const i=xr(t,this.ATTRIBUTE_NAMES,n),{left:o=0,top:l=0,width:c=0,height:h=0,visible:f=!0}=i,d=ee(i,qP);return new this(D(D(D({},e),d),{},{left:o,top:l,width:c,height:h,visible:!!(f&&c&&h)}))}}A(wr,"type","Rect");A(wr,"cacheProperties",[...yr,...X0]);A(wr,"ownDefaults",JP);A(wr,"ATTRIBUTE_NAMES",[...Vr,"x","y","rx","ry","width","height"]);dt.setClass(wr);dt.setSVGClass(wr);const ZP=["objects"],QP={layout:"fit-content",strokeWidth:0,subTargetCheck:!1,interactive:!1};class Cr extends Gm(Se){static getDefaults(){return D(D({},super.getDefaults()),Cr.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;super(),A(this,"_activeObjects",[]),A(this,"__objectSelectionTracker",void 0),A(this,"__objectSelectionDisposer",void 0),A(this,"_firstLayoutDone",!1),this._objects=t.slice(),this.__objectMonitor=this.__objectMonitor.bind(this),this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.set(D(D({},e),{},{angle:0,skewX:0,skewY:0})),this.forEachObject(i=>{this.enterGroup(i,!1)}),this._applyLayoutStrategy({type:"initialization",options:e,objectsRelativeToGroup:n})}canEnterGroup(t){return t===this||this.isDescendantOf(t)?(console.error("fabric.Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(t)!==-1?(console.error("fabric.Group: duplicate objects are not supported inside group, this call has no effect"),!1):!0}_filterObjectsBeforeEnteringGroup(t){return t.filter((e,n,i)=>this.canEnterGroup(e)&&i.indexOf(e)===n)}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=this._filterObjectsBeforeEnteringGroup(e),o=super.add(...i);return this._onAfterObjectsChange("added",i),o}insertAt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const o=this._filterObjectsBeforeEnteringGroup(n),l=super.insertAt(t,...o);return this._onAfterObjectsChange("added",o),l}remove(){const t=super.remove(...arguments);return this._onAfterObjectsChange("removed",t),t}_onObjectAdded(t){this.enterGroup(t,!0),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onRelativeObjectAdded(t){this.enterGroup(t,!1),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t,e){this.exitGroup(t,e),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onAfterObjectsChange(t,e){this._applyLayoutStrategy({type:t,targets:e}),this._set("dirty",!0)}_onStackOrderChanged(){this._set("dirty",!0)}_set(t,e){const n=this[t];return super._set(t,e),t==="canvas"&&n!==e&&this.forEachObject(i=>{i._set(t,e)}),t==="layout"&&n!==e&&this._applyLayoutStrategy({type:"layout_change",layout:e,prevLayout:n}),t==="interactive"&&this.forEachObject(i=>this._watchObject(e,i)),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectMonitor(t){this._applyLayoutStrategy(D(D({},t),{},{type:"object_modified"})),this._set("dirty",!0)}__objectSelectionMonitor(t,e){let{target:n}=e;if(t)this._activeObjects.push(n),this._set("dirty",!0);else if(this._activeObjects.length>0){const i=this._activeObjects.indexOf(n);i>-1&&(this._activeObjects.splice(i,1),this._set("dirty",!0))}}_watchObject(t,e){const n=t?"on":"off";t&&this._watchObject(!1,e),e[n]("changed",this.__objectMonitor),e[n]("modified",this.__objectMonitor),e[n]("selected",this.__objectSelectionTracker),e[n]("deselected",this.__objectSelectionDisposer)}enterGroup(t,e){return t.group&&t.group.remove(t),this._enterGroup(t,e),!0}_enterGroup(t,e){e&&as(t,ke(Me(this.calcTransformMatrix()),t.calcTransformMatrix())),this._shouldSetNestedCoords()&&t.setCoords(),t._set("group",this),t._set("canvas",this.canvas),this.interactive&&this._watchObject(!0,t);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===t||t.isDescendantOf(n))&&this._activeObjects.push(t)}exitGroup(t,e){this._exitGroup(t,e),t._set("canvas",void 0)}_exitGroup(t,e){t._set("group",void 0),e||(as(t,ke(this.calcTransformMatrix(),t.calcTransformMatrix())),t.setCoords()),this._watchObject(!1,t);const n=this._activeObjects.length>0?this._activeObjects.indexOf(t):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const t=Se.prototype.shouldCache.call(this);if(t){for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1,!1}return t}willDrawShadow(){if(Se.prototype.willDrawShadow.call(this))return!0;for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.group&&this.group.isOnACache()}drawObject(t){this._renderBackground(t);for(let n=0;n<this._objects.length;n++){var e;(e=this.canvas)!==null&&e!==void 0&&e.preserveObjectStacking&&this._objects[n].group!==this?(t.save(),t.transform(...Me(this.calcTransformMatrix())),this._objects[n].render(t),t.restore()):this._objects[n].group===this&&this._objects[n].render(t)}this._drawClipPath(t,this.clipPath)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(t=>t.setCoords())}render(t){this._transformDone=!0,super.render(t),this._transformDone=!1}triggerLayout(t){t&&t.layout&&(t.prevLayout=this.layout,this.layout=t.layout),this._applyLayoutStrategy({type:"imperative",context:t})}_adjustObjectPosition(t,e){t.set({left:t.left+e.x,top:t.top+e.y})}_applyLayoutStrategy(t){const e=t.type==="initialization";if(!e&&!this._firstLayoutDone)return;const n=e&&t.options,i=n&&{angle:n.angle||0,skewX:n.skewX||0,skewY:n.skewY||0},o=this.getRelativeCenterPoint();let l=this.getLayoutStrategyResult(this.layout,[...this._objects],t),c;if(l){const h=new F(l.centerX,l.centerY);c=o.subtract(h).add(new F(l.correctionX||0,l.correctionY||0)).transform(Me(this.calcOwnMatrix()),!0),this.set({width:l.width,height:l.height}),!t.objectsRelativeToGroup&&this.forEachObject(d=>{d.group===this&&this._adjustObjectPosition(d,c)}),!e&&this.layout!=="clip-path"&&this.clipPath&&!this.clipPath.absolutePositioned&&this._adjustObjectPosition(this.clipPath,c),(!h.eq(o)||i)&&(this.setPositionByOrigin(h,bt,bt),i&&this.set(i),this.setCoords())}else if(e)l={centerX:o.x,centerY:o.y,width:this.width,height:this.height},i&&this.set(i),c=new F;else return;this._firstLayoutDone=!0,this.onLayout(t,l),this.fire("layout",{context:t,result:l,diff:c}),this.group&&this.group._applyLayoutStrategy&&(t.path||(t.path=[]),t.path.push(this),this.group._applyLayoutStrategy(t))}getLayoutStrategyResult(t,e,n){if(t==="fit-content-lazy"&&n.type==="added"&&e.length>n.targets.length){const i=n.targets.concat(this);return this.prepareBoundingBox(t,i,n)}else{if(t==="fit-content"||t==="fit-content-lazy"||t==="fixed"&&(n.type==="initialization"||n.type==="imperative"))return this.prepareBoundingBox(t,e,n);if(t==="clip-path"&&this.clipPath){const i=this.clipPath,o=i._getTransformedDimensions();if(i.absolutePositioned&&(n.type==="initialization"||n.type==="layout_change")){let l=i.getCenterPoint();if(this.group){const c=Me(this.group.calcTransformMatrix());l=he(l,c)}return{centerX:l.x,centerY:l.y,width:o.x,height:o.y}}else if(!i.absolutePositioned){let l;const c=i.getRelativeCenterPoint(),h=he(c,this.calcOwnMatrix(),!0);if(n.type==="initialization"||n.type==="layout_change"){const f=this.prepareBoundingBox(t,e,n)||{};return l=new F(f.centerX||0,f.centerY||0),{centerX:l.x+h.x,centerY:l.y+h.y,correctionX:f.correctionX-h.x,correctionY:f.correctionY-h.y,width:i.width,height:i.height}}else return l=this.getRelativeCenterPoint(),{centerX:l.x+h.x,centerY:l.y+h.y,width:o.x,height:o.y}}}}}prepareBoundingBox(t,e,n){return n.type==="initialization"?this.prepareInitialBoundingBox(t,e,n):n.type==="imperative"&&n.context?D(D({},this.getObjectsBoundingBox(e)||{}),n.context):this.getObjectsBoundingBox(e)}prepareInitialBoundingBox(t,e,n){const i=n.options||{},o=typeof i.left=="number",l=typeof i.top=="number",c=typeof i.width=="number",h=typeof i.height=="number";if(o&&l&&c&&h&&n.objectsRelativeToGroup||e.length===0)return;const f=this.getObjectsBoundingBox(e)||{},{centerX:d=0,centerY:p=0,width:_=0,height:v=0}=f,w=c?this.width:_,E=h?this.height:v,O=new F(d,p),M=new F(Wr(this.originX),Wr(this.originY)),R=new F(w,E),X=this._getTransformedDimensions({width:0,height:0}),B=this._getTransformedDimensions({width:w,height:E,strokeWidth:0}),$=this._getTransformedDimensions({width:f.width,height:f.height,strokeWidth:0}),tt=new F(0,0),nt=M.scalarAdd(.5),ot=B.multiply(nt),it=new F(c?$.x/2:ot.x,h?$.y/2:ot.y),lt=new F(o?this.left-(B.x+X.x)*M.x:O.x-it.x,l?this.top-(B.y+X.y)*M.y:O.y-it.y),pt=new F(o?lt.x-O.x+$.x*(c?.5:0):-(c?(B.x-X.x)*.5:B.x*nt.x),l?lt.y-O.y+$.y*(h?.5:0):-(h?(B.y-X.y)*.5:B.y*nt.y)).add(tt),Lt=new F(c?-B.x/2:0,h?-B.y/2:0).add(pt);return{centerX:lt.x,centerY:lt.y,correctionX:Lt.x,correctionY:Lt.y,width:R.x,height:R.y}}getObjectsBoundingBox(t,e){if(t.length===0)return null;const n=[];t.forEach(p=>{const _=p.getRelativeCenterPoint();let v=p._getTransformedDimensions().scalarDivide(2);if(p.angle){const w=te(p.angle),E=Math.abs(Ke(w)),O=Math.abs($e(w)),M=v.x*O+v.y*E,R=v.x*E+v.y*O;v=new F(M,R)}n.push(_.subtract(v),_.add(v))});const{left:i,top:o,width:l,height:c}=gr(n),h=new F(l,c),f=(e?new F:new F(i,o)).add(h.scalarDivide(2)),d=f.transform(this.calcOwnMatrix());return{centerX:d.x,centerY:d.y,width:h.x,height:h.y}}onLayout(t,e){}__serializeObjects(t,e){const n=this.includeDefaultValues;return this._objects.filter(function(i){return!i.excludeFromExport}).map(function(i){const o=i.includeDefaultValues;i.includeDefaultValues=n;const l=i[t||"toObject"](e);return i.includeDefaultValues=o,l})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(["layout","subTargetCheck","interactive",...t])),{},{objects:this.__serializeObjects("toObject",t)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this._activeObjects=[],this.forEachObject(t=>{this._watchObject(!1,t),t.dispose()}),super.dispose()}_createSVGBgRect(t){if(!this.backgroundColor)return"";const e=wr.prototype._toSVG.call(this),n=e.indexOf("COMMON_PARTS");e[n]='for="group" ';const i=e.join("");return t?t(i):i}_toSVG(t){const e=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(t);n&&e.push("		",n);for(let i=0;i<this._objects.length;i++)e.push("		",this._objects[i].toSVG(t));return e.push(`</g>
`),e}getSvgStyles(){const t=typeof this.opacity<"u"&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")}toClipPathSVG(t){const e=[],n=this._createSVGBgRect(t);n&&e.push("	",n);for(let i=0;i<this._objects.length;i++)e.push("	",this._objects[i].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}static fromObject(t){let{objects:e=[]}=t,n=ee(t,ZP);return Promise.all([os(e),ho(n)]).then(i=>{let[o,l]=i;return new this(o,D(D({},n),l),!0)})}}A(Cr,"stateProperties",[...Se.stateProperties,"layout"]);A(Cr,"type","Group");A(Cr,"ownDefaults",QP);dt.setClass(Cr);class ol extends Cr{constructor(){super(...arguments),A(this,"multiSelectionStacking","canvas-stacking")}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...e):e.forEach(i=>{const o=this._objects.findIndex(c=>c.isInFrontOf(i)),l=o===-1?this.size():o;this.insertAt(l,i)})}enterGroup(t,e){if(t.group){const n=t.group;n._exitGroup(t),t.__owningGroup=n}return this._enterGroup(t,e),!0}exitGroup(t,e){this._exitGroup(t,e);const n=t.__owningGroup;n&&(n._enterGroup(t,!0),delete t.__owningGroup)}_onAfterObjectsChange(t,e){super._onAfterObjectsChange(t,e);const n=[];e.forEach(i=>{i.group&&!n.includes(i.group)&&n.push(i.group)}),t==="removed"?n.forEach(i=>{i._onAfterObjectsChange("added",e)}):n.forEach(i=>{i._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}_applyLayoutStrategy(t){super._applyLayoutStrategy(t),this._objects.length===0&&Object.assign(this,{left:0,top:0,angle:0,scaleX:1,scaleY:1,skewX:0,skewY:0,flipX:!1,flipY:!1})}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(t,e,n){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,super._renderControls(t,e);const i=D(D({hasControls:!1},n),{},{forActiveSelection:!0});for(let o=0;o<this._objects.length;o++)this._objects[o]._renderControls(t,i);t.restore()}}A(ol,"type","ActiveSelection");dt.setClass(ol);dt.setClass(ol,"activeSelection");const tD=(r,t,e)=>r.rotate(e,t);class H0{constructor(t){this.options=t,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new F(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new F(1/this.options.scaleX,1/this.options.scaleY):new F(1,1)}createSideVector(t,e){const n=Aa(t,e);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(t,e,n){return this.applySkew(t.add(this.calcOrthogonalProjection(t,e,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(t){const e=new F(t);return e.y+=e.x*Math.tan(te(this.options.skewY)),e.x+=e.y*Math.tan(te(this.options.skewX)),e}scaleUnitVector(t,e){return t.multiply(this.strokeUniformScalar).scalarMultiply(e)}}const eD=new F;class Zi extends H0{static getOrthogonalRotationFactor(t,e){const n=e?ka(t,e):y0(t);return Math.abs(n)<vr?-1:1}constructor(t,e,n,i){super(i),A(this,"AB",void 0),A(this,"AC",void 0),A(this,"alpha",void 0),A(this,"bisector",void 0),this.A=new F(t),this.B=new F(e),this.C=new F(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=ka(this.AB,this.AC),this.bisector=nl(au(this.AB.eq(eD)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(t,e),o=lu(i),l=Zi.getOrthogonalRotationFactor(o,this.bisector);return this.scaleUnitVector(o,n*l)}projectBevel(){const t=[];return(this.alpha%mr===0?[this.B]:[this.B,this.C]).forEach(e=>{t.push(this.projectOrthogonally(this.A,e)),t.push(this.projectOrthogonally(this.A,e,-this.strokeProjectionMagnitude))}),t}projectMiter(){const t=[],e=Math.abs(this.alpha),n=1/Math.sin(e/2),i=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),o=this.options.strokeUniform?Ma(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return Ma(i)/this.strokeProjectionMagnitude<=o&&t.push(this.applySkew(this.A.add(i))),t.push(...this.projectBevel()),t}projectRoundNoSkew(t,e){const n=[],i=new F(Zi.getOrthogonalRotationFactor(this.bisector),Zi.getOrthogonalRotationFactor(new F(this.bisector.y,this.bisector.x))),o=new F(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i),l=new F(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i);return[o,l].forEach(c=>{dh(c,t,e)&&n.push(this.A.add(c))}),n}projectRoundWithSkew(t,e){const n=[],{skewX:i,skewY:o,scaleX:l,scaleY:c,strokeUniform:h}=this.options,f=new F(Math.tan(te(i)),Math.tan(te(o))),d=this.strokeProjectionMagnitude,p=h?d/c/Math.sqrt(1/c**2+1/l**2*f.y**2):d/Math.sqrt(1+f.y**2),_=new F(Math.sqrt(Math.max(d**2-p**2,0)),p),v=h?d/Math.sqrt(1+f.x**2*(1/c)**2/(1/l+1/l*f.x*f.y)**2):d/Math.sqrt(1+f.x**2/(1+f.x*f.y)**2),w=new F(v,Math.sqrt(Math.max(d**2-v**2,0)));return[w,w.scalarMultiply(-1),_,_.scalarMultiply(-1)].map(E=>this.applySkew(h?E.multiply(this.strokeUniformScalar):E)).forEach(E=>{dh(E,t,e)&&n.push(this.applySkew(this.A).add(E))}),n}projectRound(){const t=[];t.push(...this.projectBevel());const e=this.alpha%mr===0,n=this.applySkew(this.A),i=t[e?0:2].subtract(n),o=t[e?1:0].subtract(n),l=e?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),c=Ji(i,l)>0,h=c?i:o,f=c?o:i;return this.isSkewed()?t.push(...this.projectRoundWithSkew(h,f)):t.push(...this.projectRoundNoSkew(h,f)),t}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t,angle:this.alpha,bisector:this.bisector}))}}class Dp extends H0{constructor(t,e,n){super(n),this.A=new F(t),this.T=new F(e)}calcOrthogonalProjection(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(t,e);return this.scaleUnitVector(lu(i),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const t=[];if(!this.isSkewed()&&this.A.eq(this.T)){const e=new F(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.applySkew(this.A.add(e)),this.applySkew(this.A.subtract(e)))}else t.push(...new Zi(this.A,this.T,this.T,this.options).projectRound());return t}projectSquare(){const t=[];if(this.A.eq(this.T)){const e=new F(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.A.add(e),this.A.subtract(e))}else{const e=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(nl(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),i=this.A.add(n);t.push(i.add(e),i.subtract(e))}return t.map(e=>this.applySkew(e))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t}))}}const Y0=function(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const n=[];if(r.length===0)return n;const i=r.reduce((o,l)=>(o[o.length-1].eq(l)||o.push(new F(l)),o),[new F(r[0])]);if(i.length===1)e=!0;else if(!e){const o=i[0],l=$2(i,c=>!c.eq(o));i.splice(l+1)}return i.forEach((o,l,c)=>{let h,f;l===0?(f=c[1],h=e?o:c[c.length-1]):l===c.length-1?(h=c[l-1],f=e?o:c[0]):(h=c[l-1],f=c[l+1]),e&&c.length===1?n.push(...new Dp(o,o,t).project()):e&&(l===0||l===c.length-1)?n.push(...new Dp(o,l===0?f:h,t).project()):n.push(...new Zi(o,h,f,t).project())}),n},al=function(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return r.fill!==t.fill||r.stroke!==t.stroke||r.strokeWidth!==t.strokeWidth||r.fontSize!==t.fontSize||r.fontFamily!==t.fontFamily||r.fontWeight!==t.fontWeight||r.fontStyle!==t.fontStyle||r.textBackgroundColor!==t.textBackgroundColor||r.deltaY!==t.deltaY||e&&(r.overline!==t.overline||r.underline!==t.underline||r.linethrough!==t.linethrough)},U0=(r,t)=>{const e=t.split(`
`),n=[];let i=-1,o={};r=fs(r);for(let l=0;l<e.length;l++){if(!r[l]){i+=e[l].length,o={};continue}for(let c=0;c<e[l].length;c++){i++;const h=r[l][c];h&&Object.keys(h).length>0&&(al(o,h,!0)?n.push({start:i,end:i+1,style:h}):n[n.length-1].end++),o=h||{}}}return n},N0=(r,t)=>{if(!Array.isArray(r))return fs(r);const e=t.split(Vh),n={};let i=-1,o=0;for(let l=0;l<e.length;l++)for(let c=0;c<e[l].length;c++)i++,r[o]&&r[o].start<=i&&i<r[o].end&&(n[l]=n[l]||{},n[l][c]=D({},r[o].style),i===r[o].end-1&&o++);return n},nD=r=>r&&r.length===1?r[0]:new Cr(r),z0=(r,t)=>Math.min(t.width/r.width,t.height/r.height),V0=(r,t)=>Math.max(t.width/r.width,t.height/r.height),rD=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return"".concat(r.charAt(0).toUpperCase()).concat(t?r.slice(1):r.slice(1).toLowerCase())},G0=r=>r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),$0=r=>{const t=[];for(let e=0,n;e<r.length;e++)(n=iD(r,e))!==!1&&t.push(n);return t},iD=(r,t)=>{const e=r.charCodeAt(t);if(isNaN(e))return"";if(e<55296||e>57343)return r.charAt(t);if(55296<=e&&e<=56319){if(r.length<=t+1)throw"High surrogate without following low surrogate";const i=r.charCodeAt(t+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return r.charAt(t)+r.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";const n=r.charCodeAt(t-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1};var sD=Object.freeze({__proto__:null,capitalize:rD,escapeXml:G0,graphemeSplit:$0}),Ap;const Qt="(".concat(ao,")"),oD="(M) (?:".concat(Qt," ").concat(Qt," ?)+"),aD="(L) (?:".concat(Qt," ").concat(Qt," ?)+"),lD="(H) (?:".concat(Qt," ?)+"),cD="(V) (?:".concat(Qt," ?)+"),hD=String.raw(Ap||(Ap=Zn(["(Z)s*"],["(Z)\\s*"]))),uD="(C) (?:".concat(Qt," ").concat(Qt," ").concat(Qt," ").concat(Qt," ").concat(Qt," ").concat(Qt," ?)+"),fD="(S) (?:".concat(Qt," ").concat(Qt," ").concat(Qt," ").concat(Qt," ?)+"),dD="(Q) (?:".concat(Qt," ").concat(Qt," ").concat(Qt," ").concat(Qt," ?)+"),gD="(T) (?:".concat(Qt," ").concat(Qt," ?)+"),pD="(A) (?:".concat(Qt," ").concat(Qt," ").concat(Qt," ([01]) ?([01]) ").concat(Qt," ").concat(Qt," ?)+"),Mp="(?:(?:".concat(oD,")")+"|(?:".concat(aD,")")+"|(?:".concat(lD,")")+"|(?:".concat(cD,")")+"|(?:".concat(hD,")")+"|(?:".concat(uD,")")+"|(?:".concat(fD,")")+"|(?:".concat(dD,")")+"|(?:".concat(gD,")")+"|(?:".concat(pD,"))"),mD={m:"l",M:"L"},_D=(r,t,e,n,i,o,l,c,h,f,d)=>{const p=$e(r),_=Ke(r),v=$e(t),w=Ke(t),E=e*i*v-n*o*w+l,O=n*i*v+e*o*w+c,M=f+h*(-e*i*_-n*o*p),R=d+h*(-n*i*_+e*o*p),X=E+h*(e*i*w+n*o*v),B=O+h*(n*i*w-e*o*v);return["C",M,R,X,B,E,O]},vD=(r,t,e,n,i,o,l)=>{if(e===0||n===0)return[];let c=0,h=0,f=0;const d=Math.PI,p=l*Nh,_=Ke(p),v=$e(p),w=.5*(-v*r-_*t),E=.5*(-v*t+_*r),O=e**2,M=n**2,R=E**2,X=w**2,B=O*M-O*R-M*X;let $=Math.abs(e),tt=Math.abs(n);if(B<0){const ct=Math.sqrt(1-B/(O*M));$*=ct,tt*=ct}else f=(i===o?-1:1)*Math.sqrt(B/(O*R+M*X));const nt=f*$*E/tt,ot=-f*tt*w/$,it=v*nt-_*ot+r*.5,lt=_*nt+v*ot+t*.5;let pt=kp(1,0,(w-nt)/$,(E-ot)/tt),Lt=kp((w-nt)/$,(E-ot)/tt,(-w-nt)/$,(-E-ot)/tt);o===0&&Lt>0?Lt-=2*d:o===1&&Lt<0&&(Lt+=2*d);const Wt=Math.ceil(Math.abs(Lt/d*2)),jt=new Array(Wt),Nt=Lt/Wt,Ht=8/3*Math.sin(Nt/4)*Math.sin(Nt/4)/Math.sin(Nt/2);let at=pt+Nt;for(let ct=0;ct<Wt;ct++)jt[ct]=_D(pt,at,v,_,$,tt,it,lt,Ht,c,h),c=jt[ct][5],h=jt[ct][6],pt=at,at+=Nt;return jt},kp=(r,t,e,n)=>{const i=Math.atan2(t,r),o=Math.atan2(n,e);return o>=i?o-i:2*Math.PI-(i-o)},yD=r=>r**3,xD=r=>3*r**2*(1-r),wD=r=>3*r*(1-r)**2,CD=r=>(1-r)**3;function yh(r,t,e,n,i,o,l,c){let h;if(Dt.cachesBoundsOfCurve&&(h=[...arguments].join(),zs.boundsOfCurveCache[h]))return zs.boundsOfCurveCache[h];const f=Math.sqrt,d=Math.abs,p=[],_=[[0,0],[0,0]];let v=6*r-12*e+6*i,w=-3*r+9*e-9*i+3*l,E=3*e-3*r;for(let B=0;B<2;++B){if(B>0&&(v=6*t-12*n+6*o,w=-3*t+9*n-9*o+3*c,E=3*n-3*t),d(w)<1e-12){if(d(v)<1e-12)continue;const it=-E/v;0<it&&it<1&&p.push(it);continue}const $=v*v-4*E*w;if($<0)continue;const tt=f($),nt=(-v+tt)/(2*w);0<nt&&nt<1&&p.push(nt);const ot=(-v-tt)/(2*w);0<ot&&ot<1&&p.push(ot)}let O=p.length;const M=O,R=q0(r,t,e,n,i,o,l,c);for(;O--;){const{x:B,y:$}=R(p[O]);_[0][O]=B,_[1][O]=$}_[0][M]=r,_[1][M]=t,_[0][M+1]=l,_[1][M+1]=c;const X=[new F(Math.min(..._[0]),Math.min(..._[1])),new F(Math.max(..._[0]),Math.max(..._[1]))];return Dt.cachesBoundsOfCurve&&(zs.boundsOfCurveCache[h]=X),X}const SD=(r,t,e)=>{let[n,i,o,l,c,h,f,d]=e;const p=vD(f-r,d-t,i,o,c,h,l);for(let _=0,v=p.length;_<v;_++)p[_][1]+=r,p[_][2]+=t,p[_][3]+=r,p[_][4]+=t,p[_][5]+=r,p[_][6]+=t;return p},K0=r=>{let t=0,e=0,n=0,i=0;const o=[];let l,c=0,h=0;for(const f of r){const d=[...f];let p;switch(d[0]){case"l":d[1]+=t,d[2]+=e;case"L":t=d[1],e=d[2],p=["L",t,e];break;case"h":d[1]+=t;case"H":t=d[1],p=["L",t,e];break;case"v":d[1]+=e;case"V":e=d[1],p=["L",t,e];break;case"m":d[1]+=t,d[2]+=e;case"M":t=d[1],e=d[2],n=d[1],i=d[2],p=["M",t,e];break;case"c":d[1]+=t,d[2]+=e,d[3]+=t,d[4]+=e,d[5]+=t,d[6]+=e;case"C":c=d[3],h=d[4],t=d[5],e=d[6],p=["C",d[1],d[2],c,h,t,e];break;case"s":d[1]+=t,d[2]+=e,d[3]+=t,d[4]+=e;case"S":l==="C"?(c=2*t-c,h=2*e-h):(c=t,h=e),t=d[3],e=d[4],p=["C",c,h,d[1],d[2],t,e],c=p[3],h=p[4];break;case"q":d[1]+=t,d[2]+=e,d[3]+=t,d[4]+=e;case"Q":c=d[1],h=d[2],t=d[3],e=d[4],p=["Q",c,h,t,e];break;case"t":d[1]+=t,d[2]+=e;case"T":l==="Q"?(c=2*t-c,h=2*e-h):(c=t,h=e),t=d[1],e=d[2],p=["Q",c,h,t,e];break;case"a":d[6]+=t,d[7]+=e;case"A":SD(t,e,d).forEach(_=>o.push(_)),t=d[6],e=d[7];break;case"z":case"Z":t=n,e=i,p=["Z"];break}p?(o.push(p),l=p[0]):l=""}return o},La=(r,t,e,n)=>Math.sqrt((e-r)**2+(n-t)**2),q0=(r,t,e,n,i,o,l,c)=>h=>{const f=yD(h),d=xD(h),p=wD(h),_=CD(h);return new F(l*f+i*d+e*p+r*_,c*f+o*d+n*p+t*_)},J0=r=>r**2,Z0=r=>2*r*(1-r),Q0=r=>(1-r)**2,bD=(r,t,e,n,i,o,l,c)=>h=>{const f=J0(h),d=Z0(h),p=Q0(h),_=3*(p*(e-r)+d*(i-e)+f*(l-i)),v=3*(p*(n-t)+d*(o-n)+f*(c-o));return Math.atan2(v,_)},TD=(r,t,e,n,i,o)=>l=>{const c=J0(l),h=Z0(l),f=Q0(l);return new F(i*c+e*h+r*f,o*c+n*h+t*f)},OD=(r,t,e,n,i,o)=>l=>{const c=1-l,h=2*(c*(e-r)+l*(i-e)),f=2*(c*(n-t)+l*(o-n));return Math.atan2(f,h)},Lp=(r,t,e)=>{let n=new F(t,e),i=0;for(let o=1;o<=100;o+=1){const l=r(o/100);i+=La(n.x,n.y,l.x,l.y),n=l}return i},Rp=(r,t)=>{let e=0,n=0,i={x:r.x,y:r.y},o=D({},i),l,c=.01,h=0;const f=r.iterator,d=r.angleFinder;for(;n<t&&c>1e-4;)o=f(e),h=e,l=La(i.x,i.y,o.x,o.y),l+n>t?(e-=c,c/=2):(i=o,e+=c,n+=l);return D(D({},o),{},{angle:d(h)})},du=r=>{let t=0,e=0,n=0,i=0,o=0,l,c;const h=[];for(const f of r){const d={x:e,y:n,command:f[0],length:0};switch(f[0]){case"M":c=d,c.x=i=e=f[1],c.y=o=n=f[2];break;case"L":c=d,c.length=La(e,n,f[1],f[2]),e=f[1],n=f[2];break;case"C":l=q0(e,n,f[1],f[2],f[3],f[4],f[5],f[6]),c=d,c.iterator=l,c.angleFinder=bD(e,n,f[1],f[2],f[3],f[4],f[5],f[6]),c.length=Lp(l,e,n),e=f[5],n=f[6];break;case"Q":l=TD(e,n,f[1],f[2],f[3],f[4]),c=d,c.iterator=l,c.angleFinder=OD(e,n,f[1],f[2],f[3],f[4]),c.length=Lp(l,e,n),e=f[3],n=f[4];break;case"Z":c=d,c.destX=i,c.destY=o,c.length=La(e,n,i,o),e=i,n=o;break}t+=c.length,h.push(c)}return h.push({length:t,x:e,y:n}),h},t_=function(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:du(r),n=0;for(;t-e[n].length>0&&n<e.length-2;)t-=e[n].length,n++;const i=e[n],o=t/i.length,l=r[n];switch(i.command){case"M":return{x:i.x,y:i.y,angle:0};case"Z":return D(D({},new F(i.x,i.y).lerp(new F(i.destX,i.destY),o)),{},{angle:Math.atan2(i.destY-i.y,i.destX-i.x)});case"L":return D(D({},new F(i.x,i.y).lerp(new F(l[1],l[2]),o)),{},{angle:Math.atan2(l[2]-i.y,l[1]-i.x)});case"C":return Rp(i,t);case"Q":return Rp(i,t)}},e_=r=>{r=W0(r);const t=[];for(const e of r.matchAll(new RegExp(Mp,"gi"))){let n=e[0];const i=[];let o;do{if(o=new RegExp(Mp,"i").exec(n),!o)break;const l=o.filter(h=>h);l.shift();const c=l.map(h=>{const f=Number.parseFloat(h);return Number.isNaN(f)?h:f});if(i.push(c),l.length<=1)break;l.shift(),n=n.replace(new RegExp("".concat(l.join(" ?")," ?$")),"")}while(o);i.reverse().forEach((l,c)=>{const h=mD[l[0]];c>0&&(h=="l"||h=="L")&&(l[0]=h),t.push(l)})}return t},ED=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=new F(r[0]),n=new F(r[1]),i=1,o=0;const l=[],c=r.length,h=c>2;h&&(i=r[2].x<n.x?-1:r[2].x===n.x?0:1,o=r[2].y<n.y?-1:r[2].y===n.y?0:1),l.push(["M",e.x-i*t,e.y-o*t]);let f;for(f=1;f<c;f++){if(!e.eq(n)){const d=e.midPointFrom(n);l.push(["Q",e.x,e.y,d.x,d.y])}e=r[f],f+1<r.length&&(n=r[f+1])}return h&&(i=e.x>r[f-2].x?1:e.x===r[f-2].x?0:-1,o=e.y>r[f-2].y?1:e.y===r[f-2].y?0:-1),l.push(["L",e.x+i*t,e.y+o*t]),l},PD=(r,t,e)=>(e&&(t=ke(t,[1,0,0,1,-e.x,-e.y])),r.map(n=>{const i=[...n];for(let o=1;o<n.length-1;o+=2){const{x:l,y:c}=he({x:n[o],y:n[o+1]},t);i[o]=l,i[o+1]=c}return i})),DD=(r,t)=>{const e=Math.PI*2/r;let n=-vr;r%2===0&&(n+=e/2);const i=new Array(r+1);for(let o=0;o<r;o++){const l=o*e+n,{x:c,y:h}=new F($e(l),Ke(l)).scalarMultiply(t);i[o]=[o===0?"M":"L",c,h]}return i[r]=["Z"],i},n_=(r,t)=>r.map(e=>e.map((n,i)=>i===0||t===void 0?n:Bt(n,t)).join(" ")).join(" "),AD=(r,t)=>{var e;let n=r,i=t;n.inverted&&!i.inverted&&(n=t,i=r),nu(i,(e=i.group)===null||e===void 0?void 0:e.calcTransformMatrix(),n.calcTransformMatrix());const o=n.inverted&&i.inverted;return o&&(n.inverted=i.inverted=!1),new Cr([n],{clipPath:i,inverted:o})};function MD(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e=t.onComplete||mi,n=new(fi()).XMLHttpRequest,i=t.signal,o=function(){n.abort()},l=function(){i&&i.removeEventListener("abort",o),n.onerror=n.ontimeout=mi};if(i&&i.aborted)throw new Error("`options.signal` is in `aborted` state");return i&&i.addEventListener("abort",o,{once:!0}),n.onreadystatechange=function(){n.readyState===4&&(l(),e(n),n.onreadystatechange=mi)},n.onerror=n.ontimeout=l,n.open("get",r,!0),n.send(),n}const kD=r=>{if(r.transformMatrix){const{scaleX:t,scaleY:e,angle:n,skewX:i}=vi(r.transformMatrix);r.flipX=!1,r.flipY=!1,r.set("scaleX",t),r.set("scaleY",e),r.angle=n,r.skewX=i,r.skewY=0}},LD=(r,t)=>{let e=r._findCenterFromElement();r.transformMatrix&&(kD(r),e=e.transform(r.transformMatrix)),delete r.transformMatrix,t&&(r.scaleX*=t.scaleX,r.scaleY*=t.scaleY,r.cropX=t.cropX,r.cropY=t.cropY,e.x+=t.offsetLeft,e.y+=t.offsetTop,r.width=t.width,r.height=t.height),r.setPositionByOrigin(e,bt,bt)};var jc=Object.freeze({__proto__:null,addTransformToObject:a0,animate:ou,animateColor:_0,applyTransformToObject:as,calcAngleBetweenVectors:ka,calcDimensionsMatrix:el,calcPlaneChangeMatrix:tu,calcVectorRotation:y0,cancelAnimFrame:Km,capValue:yi,composeMatrix:Zm,copyCanvasElement:Z2,cos:$e,createCanvasElement:fe,createImage:qm,createRotateMatrix:co,createScaleMatrix:$h,createSkewXMatrix:Kh,createSkewYMatrix:qh,createTranslateMatrix:lo,createVector:Aa,crossProduct:Ji,degreesToRadians:te,dotProduct:x0,ease:KE,enlivenObjectEnlivables:ho,enlivenObjects:os,findScaleToCover:V0,findScaleToFit:z0,getBoundsOfCurve:yh,getOrthonormalVector:lu,getPathSegmentsInfo:du,getPointOnPath:t_,getPointer:o0,getRandomInt:K2,getRegularPolygonPath:DD,getSmoothPathFromPoints:ED,getSvgAttributes:sE,getUnitVector:nl,groupSVGElements:nD,hasStyleChanged:al,invertTransform:Me,isBetweenVectors:dh,isIdentityMatrix:eE,isTouchEvent:Pa,isTransparent:B0,joinPath:n_,loadImage:Gs,magnitude:Ma,makeBoundingBoxFromPoints:gr,makePathSimpler:K0,matrixToSVG:io,mergeClipPaths:AD,multiplyTransformMatrices:ke,multiplyTransformMatrixArray:tl,parsePath:e_,parsePreserveAspectRatioAttribute:t0,parseUnit:_i,pick:wi,projectStrokeOnPoints:Y0,qrDecompose:vi,radiansToDegrees:ss,removeFromArray:hi,removeTransformFromObject:mE,removeTransformMatrixForSvgParsing:LD,request:MD,requestAnimFrame:Vs,resetObjectTransform:Jh,rotatePoint:tD,rotateVector:au,saveObjectTransform:Zh,sendObjectToPlane:nu,sendPointToPlane:eu,setStyle:oo,sin:Ke,sizeAfterTransform:Qh,string:sD,stylesFromArray:N0,stylesToArray:U0,toDataURL:Gh,toFixed:Bt,transformPath:PD,transformPoint:he,transformPointRelativeToCanvas:_E});class RD extends s0{constructor(t){let{allowTouchScrolling:e=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t),A(this,"upper",void 0),A(this,"container",void 0);const{el:i}=this.lower,o=this.createUpperCanvas();this.upper={el:o,ctx:o.getContext("2d")},this.applyCanvasStyle(i,{allowTouchScrolling:e}),this.applyCanvasStyle(o,{allowTouchScrolling:e});const l=this.createContainerElement();l.classList.add(n),i.parentNode&&i.parentNode.replaceChild(l,i),l.append(i,o),this.container=l}createUpperCanvas(){const{el:t}=this.lower,e=fe();return e.className=t.className,e.classList.remove("lower-canvas"),e.classList.add("upper-canvas"),e.setAttribute("data-fabric","top"),e.style.cssText=t.style.cssText,e.setAttribute("draggable","true"),e}createContainerElement(){const t=us().createElement("div");return t.setAttribute("data-fabric","wrapper"),oo(t,{position:"relative"}),_p(t),t}applyCanvasStyle(t,e){let{allowTouchScrolling:n}=e;oo(t,{position:"absolute",left:"0",top:"0"}),hE(t,n),_p(t)}setDimensions(t,e){super.setDimensions(t,e);const{el:n,ctx:i}=this.upper;i0(n,i,t,e)}setCSSDimensions(t){super.setCSSDimensions(t),uh(this.upper.el,t),uh(this.container,t)}cleanupDOM(t){const e=this.container,{el:n}=this.lower,{el:i}=this.upper;super.cleanupDOM(t),e.removeChild(i),e.removeChild(n),e.parentNode&&e.parentNode.replaceChild(n,e)}dispose(){super.dispose(),Jn().dispose(this.upper.el),delete this.upper,delete this.container}}const FD={uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1},ID=["activeSelection"];class ll extends uo{static getDefaults(){return D(D({},super.getDefaults()),ll.ownDefaults)}get upperCanvasEl(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.el}get contextTop(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.ctx}get wrapperEl(){return this.elements.container}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{activeSelection:n=new ol}=e,i=ee(e,ID);super(t,i),A(this,"targets",[]),A(this,"_hoveredTargets",[]),A(this,"_objectsToRender",[]),A(this,"_currentTransform",null),A(this,"_groupSelector",null),A(this,"contextTopDirty",!1),A(this,"_activeSelection",void 0),this._activeSelection=n,this._activeSelection.set("canvas",this),this._activeSelection.setCoords()}initElements(t){this.elements=new RD(t,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(t){this._objectsToRender=void 0,super._onObjectAdded(t)}_onObjectRemoved(t){this._objectsToRender=void 0,t===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[t]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[t]}),t.fire("deselected",{target:t})),t===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(t)}_chooseObjectsToRender(){const t=this._activeObject;return!this.preserveObjectStacking&&t?this._objects.filter(e=>!e.group&&e!==t).concat(t):this._objects}renderAll(){this.cancelRequestedRender(),!this.destroyed&&(this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()}renderTop(){const t=this.contextTop;this.clearContext(t),this.renderTopLayer(t),this.fire("after:render",{ctx:t})}_normalizePointer(t,e){return he(this.restorePointerVpt(e),Me(t.calcTransformMatrix()))}setTargetFindTolerance(t){t=Math.round(t),this.targetFindTolerance=t;const e=this.getRetinaScaling(),n=Math.ceil((t*2+1)*e);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(e,e)}isTargetTransparent(t,e,n){const i=this.targetFindTolerance,o=this.pixelFindContext;this.clearContext(o),o.save(),o.translate(-e+i,-n+i),o.transform(...this.viewportTransform);const l=t.selectionBackgroundColor;t.selectionBackgroundColor="",t.render(o),t.selectionBackgroundColor=l,o.restore();const c=Math.round(i*this.getRetinaScaling());return B0(o,c,c,c)}_isSelectionKeyPressed(t){const e=this.selectionKey;return e?Array.isArray(e)?!!e.find(n=>!!n&&t[n]===!0):t[e]:!1}_shouldClearSelection(t,e){const n=this.getActiveObjects(),i=this._activeObject;return!!(!e||e&&i&&n.length>1&&n.indexOf(e)===-1&&i!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&i&&i!==e)}_shouldCenterTransform(t,e,n){if(!t)return;let i;return e==="scale"||e==="scaleX"||e==="scaleY"||e==="resizing"?i=this.centeredScaling||t.centeredScaling:e==="rotate"&&(i=this.centeredRotation||t.centeredRotation),i?!n:n}_getOriginFromCorner(t,e){const n={x:t.originX,y:t.originY};return["ml","tl","bl"].includes(e)?n.x=_e:["mr","tr","br"].includes(e)&&(n.x=Ut),["tl","mt","tr"].includes(e)?n.y=lh:["bl","mb","br"].includes(e)&&(n.y=je),n}_setupCurrentTransform(t,e,n){if(!e)return;const i=e.group?eu(this.getPointer(t),void 0,e.group.calcTransformMatrix()):this.getPointer(t),o=e.getActiveControl()||"",l=!!o&&e.controls[o],c=n&&l?l.getActionHandler(t,e,l):f0,h=yE(n,o,t,e),f=this._getOriginFromCorner(e,o),d=t[this.centeredKey],p={target:e,action:h,actionHandler:c,actionPerformed:!1,corner:o,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:i.x-e.left,offsetY:i.y-e.top,originX:f.x,originY:f.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,theta:te(e.angle),width:e.width,height:e.height,shiftKey:t.shiftKey,altKey:d,original:D(D({},Zh(e)),{},{originX:f.x,originY:f.y})};this._shouldCenterTransform(e,h,d)&&(p.originX=bt,p.originY=bt),this._currentTransform=p,this._beforeTransform(t)}setCursor(t){this.upperCanvasEl.style.cursor=t}_drawSelection(t){const{x:e,y:n,deltaX:i,deltaY:o}=this._groupSelector,l=new F(e,n).transform(this.viewportTransform),c=new F(e+i,n+o).transform(this.viewportTransform),h=this.selectionLineWidth/2;let f=Math.min(l.x,c.x),d=Math.min(l.y,c.y),p=Math.max(l.x,c.x),_=Math.max(l.y,c.y);this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(f,d,p-f,_-d)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,f+=h,d+=h,p-=h,_-=h,Se.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(f,d,p-f,_-d))}findTarget(t){if(this.skipTargetFind)return;const e=this.getPointer(t,!0),n=this._activeObject,i=this.getActiveObjects();if(this.targets=[],n&&i.length>=1){if(n._findTargetCorner(e,Pa(t)))return n;if(i.length>1&&this.searchPossibleTargets([n],e))return n;if(n===this.searchPossibleTargets([n],e))if(this.preserveObjectStacking){const o=this.targets;this.targets=[];const l=this.searchPossibleTargets(this._objects,e);return t[this.altSelectionKey]&&l&&l!==n?(this.targets=o,n):l}else return n}return this.searchPossibleTargets(this._objects,e)}_checkTarget(t,e,n){if(e&&e.visible&&e.evented&&e.containsPoint(t))if((this.perPixelTargetFind||e.perPixelTargetFind)&&!e.isEditing){if(!this.isTargetTransparent(e,n.x,n.y))return!0}else return!0;return!1}_searchPossibleTargets(t,e){let n,i=t.length;for(;i--;){const o=t[i],l=o.group?this._normalizePointer(o.group,e):e;if(this._checkTarget(l,o,e)){if(n=t[i],hh(n)&&n.subTargetCheck){const c=this._searchPossibleTargets(n._objects,e);c&&this.targets.push(c)}break}}return n}searchPossibleTargets(t,e){const n=this._searchPossibleTargets(t,e);return n&&hh(n)&&n.interactive&&this.targets[0]?this.targets[0]:n}restorePointerVpt(t){return t.transform(Me(this.viewportTransform))}getPointer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this._absolutePointer&&!e)return this._absolutePointer;if(this._pointer&&e)return this._pointer;const n=this.upperCanvasEl,i=n.getBoundingClientRect();let o=o0(t),l=i.width||0,c=i.height||0;(!l||!c)&&(je in i&&lh in i&&(c=Math.abs(i.top-i.bottom)),_e in i&&Ut in i&&(l=Math.abs(i.right-i.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,e||(o=this.restorePointerVpt(o));const h=this.getRetinaScaling();h!==1&&(o.x/=h,o.y/=h);const f=l===0||c===0?new F(1,1):new F(n.width/l,n.height/c);return o.multiply(f)}_setDimensionsImpl(t,e){this._resetTransformEventData(),super._setDimensionsImpl(t,e),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=fe(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveSelection(){return this._activeSelection}getActiveObjects(){const t=this._activeObject;return t?t===this._activeSelection?[...t._objects]:[t]:[]}_fireSelectionEvents(t,e){let n=!1,i=!1;const o=this.getActiveObjects(),l=[],c=[];t.forEach(h=>{o.includes(h)||(n=!0,h.fire("deselected",{e,target:h}),c.push(h))}),o.forEach(h=>{t.includes(h)||(n=!0,h.fire("selected",{e,target:h}),l.push(h))}),t.length>0&&o.length>0?(i=!0,n&&this.fire("selection:updated",{e,selected:l,deselected:c})):o.length>0?(i=!0,this.fire("selection:created",{e,selected:l})):t.length>0&&(i=!0,this.fire("selection:cleared",{e,deselected:c})),i&&(this._objectsToRender=void 0)}setActiveObject(t,e){const n=this.getActiveObjects(),i=this._setActiveObject(t,e);return this._fireSelectionEvents(n,e),i}_setActiveObject(t,e){return this._activeObject===t||!this._discardActiveObject(e,t)&&this._activeObject||t.onSelect({e})?!1:(this._activeObject=t,!0)}_discardActiveObject(t,e){const n=this._activeObject;return n?n.onDeselect({e:t,object:e})?!1:(n===this._activeSelection&&(this._activeSelection.removeAll(),Jh(this._activeSelection)),this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(t),this._activeObject=void 0,!0):!1}discardActiveObject(t){const e=this.getActiveObjects(),n=this.getActiveObject();e.length&&this.fire("before:selection:cleared",{e:t,deselected:[n]});const i=this._discardActiveObject(t);return this._fireSelectionEvents(e,t),i}setViewportTransform(t){super.setViewportTransform(t);const e=this._activeObject;e&&e.setCoords()}destroy(){const t=this._activeSelection;t.removeAll(),this._activeSelection=void 0,t.dispose(),super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(t){const e=this._activeObject;e&&e._renderControls(t)}_toObject(t,e,n){const i=this._realizeGroupTransformOnObject(t),o=super._toObject(t,e,n);return t.set(i),o}_realizeGroupTransformOnObject(t){if(t.group&&t.group===this._activeSelection&&this._activeObject===t.group){const n=wi(t,["angle","flipX","flipY",Ut,"scaleX","scaleY","skewX","skewY",je]);return a0(t,this._activeObject.calcOwnMatrix()),n}else return{}}_setSVGObject(t,e,n){const i=this._realizeGroupTransformOnObject(e);super._setSVGObject(t,e,n),e.set(i)}}A(ll,"ownDefaults",FD);class BD{constructor(t){A(this,"targets",[]),A(this,"__disposer",void 0);const e=()=>{const i=t.getActiveObject();xa(i)&&i.hiddenTextarea&&i.hiddenTextarea.focus()},n=t.upperCanvasEl;n.addEventListener("click",e),this.__disposer=()=>n.removeEventListener("click",e)}exitTextEditing(){this.target=void 0,this.targets.forEach(t=>{t.isEditing&&t.exitEditing()})}add(t){this.targets.push(t)}remove(t){this.unregister(t),hi(this.targets,t)}register(t){this.target=t}unregister(t){t===this.target&&(this.target=void 0)}onMouseMove(t){var e;!((e=this.target)===null||e===void 0)&&e.isEditing&&this.target.updateSelectionOnMouseMove(t)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const jD=["target","oldTarget","fireCanvas","e"],dn={passive:!1};function ga(r,t){return!!r.button&&r.button===t-1}const Ir=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return r.addEventListener(...e)},Tn=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return r.removeEventListener(...e)},WD={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class xh extends ll{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,e),A(this,"_isClick",void 0),A(this,"textEditingManager",new BD(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(n=>{this[n]=this[n].bind(this)}),this.addOrRemove(Ir,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(t,e){const n=this.upperCanvasEl,i=this._getEventPrefix();t(r0(n),"resize",this._onResize),t(n,i+"down",this._onMouseDown),t(n,"".concat(i,"move"),this._onMouseMove,dn),t(n,"".concat(i,"out"),this._onMouseOut),t(n,"".concat(i,"enter"),this._onMouseEnter),t(n,"wheel",this._onMouseWheel),t(n,"contextmenu",this._onContextMenu),t(n,"dblclick",this._onDoubleClick),t(n,"dragstart",this._onDragStart),t(n,"dragend",this._onDragEnd),t(n,"dragover",this._onDragOver),t(n,"dragenter",this._onDragEnter),t(n,"dragleave",this._onDragLeave),t(n,"drop",this._onDrop),this.enablePointerEvents||t(n,"touchstart",this._onTouchStart,dn)}removeListeners(){this.addOrRemove(Tn,"remove");const t=this._getEventPrefix(),e=Fn(this.upperCanvasEl);Tn(e,"".concat(t,"up"),this._onMouseUp),Tn(e,"touchend",this._onTouchEnd,dn),Tn(e,"".concat(t,"move"),this._onMouseMove,dn),Tn(e,"touchmove",this._onMouseMove,dn)}_onMouseWheel(t){this.__onMouseWheel(t)}_onMouseOut(t){const e=this._hoveredTarget,n={e:t,isClick:!1,pointer:this.getPointer(t,!0),absolutePointer:this.getPointer(t)};this.fire("mouse:out",D(D({},n),{},{target:e})),this._hoveredTarget=void 0,e&&e.fire("mouseout",D({},n)),this._hoveredTargets.forEach(i=>{this.fire("mouse:out",D(D({},n),{},{target:i})),i&&i.fire("mouseout",D({},n))}),this._hoveredTargets=[]}_onMouseEnter(t){!this._currentTransform&&!this.findTarget(t)&&(this.fire("mouse:over",{e:t,isClick:!1,pointer:this.getPointer(t,!0),absolutePointer:this.getPointer(t)}),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(t){this._isClick=!1;const e=this.getActiveObject();if(mp(e)&&e.onDragStart(t)){this._dragSource=e;const n={e:t,target:e};this.fire("dragstart",n),e.fire("dragstart",n),Ir(this.upperCanvasEl,"drag",this._onDragProgress);return}fh(t)}_renderDragEffects(t,e,n){let i=!1;const o=this._dropTarget;o&&o!==e&&o!==n&&(o.clearContextTop(),i=!0),e==null||e.clearContextTop(),n!==e&&(n==null||n.clearContextTop());const l=this.contextTop;l.save(),l.transform(...this.viewportTransform),e&&(l.save(),e.transform(l),e.renderDragSourceEffect(t),l.restore(),i=!0),n&&(l.save(),n.transform(l),n.renderDropTargetEffect(t),l.restore(),i=!0),l.restore(),i&&(this.contextTopDirty=!0)}_onDragEnd(t){const e=!!t.dataTransfer&&t.dataTransfer.dropEffect!==rn,n=e?this._activeObject:void 0,i={e:t,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:e,dropTarget:n};Tn(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",i),this._dragSource&&this._dragSource.fire("dragend",i),delete this._dragSource,this._onMouseUp(t)}_onDragProgress(t){const e={e:t,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",e),this._dragSource&&this._dragSource.fire("drag",e)}findDragTargets(t){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getPointer(t,!0)),targets:[...this.targets]}}_onDragOver(t){const e="dragover",{target:n,targets:i}=this.findDragTargets(t),o=this._dragSource,l={e:t,target:n,subTargets:i,dragSource:o,canDrop:!1,dropTarget:void 0};let c;this.fire(e,l),this._fireEnterLeaveEvents(n,l),n&&(n.canDrop(t)&&(c=n),n.fire(e,l));for(let h=0;h<i.length;h++){const f=i[h];f.canDrop(t)&&(c=f),f.fire(e,l)}this._renderDragEffects(t,o,c),this._dropTarget=c}_onDragEnter(t){const{target:e,targets:n}=this.findDragTargets(t),i={e:t,target:e,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",i),this._fireEnterLeaveEvents(e,i)}_onDragLeave(t){const e={e:t,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",e),this._fireEnterLeaveEvents(void 0,e),this._renderDragEffects(t,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(t){const{target:e,targets:n}=this.findDragTargets(t),i=this._basicEventHandler("drop:before",{e:t,target:e,subTargets:n,dragSource:this._dragSource,pointer:this.getPointer(t,!0),absolutePointer:this.getPointer(t)});i.didDrop=!1,i.dropTarget=void 0,this._basicEventHandler("drop",i),this.fire("drop:after",i)}_onContextMenu(t){const e=this.findTarget(t),n=this.targets||[],i=this._basicEventHandler("contextmenu:before",{e:t,target:e,subTargets:n});return this.stopContextMenu&&fh(t),this._basicEventHandler("contextmenu",i),!1}_onDoubleClick(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData()}getPointerId(t){const e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1}_isMainEvent(t){return t.isPrimary===!0?!0:t.isPrimary===!1?!1:t.type==="touchend"&&t.touches.length===0?!0:t.changedTouches?t.changedTouches[0].identifier===this.mainTouchId:!0}_onTouchStart(t){t.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,n=this._getEventPrefix(),i=Fn(e);Ir(i,"touchend",this._onTouchEnd,dn),Ir(i,"touchmove",this._onMouseMove,dn),Tn(e,"".concat(n,"down"),this._onMouseDown)}_onMouseDown(t){this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,n=this._getEventPrefix();Tn(e,"".concat(n,"move"),this._onMouseMove,dn);const i=Fn(e);Ir(i,"".concat(n,"up"),this._onMouseUp),Ir(i,"".concat(n,"move"),this._onMouseMove,dn)}_onTouchEnd(t){if(t.touches.length>0)return;this.__onMouseUp(t),this._resetTransformEventData(),this.mainTouchId=null;const e=this._getEventPrefix(),n=Fn(this.upperCanvasEl);Tn(n,"touchend",this._onTouchEnd,dn),Tn(n,"touchmove",this._onMouseMove,dn),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Ir(this.upperCanvasEl,"".concat(e,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(t){this.__onMouseUp(t),this._resetTransformEventData();const e=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(t)){const i=Fn(this.upperCanvasEl);Tn(i,"".concat(n,"up"),this._onMouseUp),Tn(i,"".concat(n,"move"),this._onMouseMove,dn),Ir(e,"".concat(n,"move"),this._onMouseMove,dn)}}_onMouseMove(t){const e=this.getActiveObject();!this.allowTouchScrolling&&(!e||mp(e)&&!e.shouldStartDragging())&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(t){const e=this.getActiveObject();return!!e!=!!t||e&&t&&e!==t?!0:(xa(e),!1)}__onMouseUp(t){const e=this._currentTransform;this._cacheTransformEventData(t);const n=this._target,i=this._isClick;if(this._handleEvent(t,"up:before"),ga(t,fa)){this.fireRightClick&&this._handleEvent(t,"up",fa,i);return}if(ga(t,ua)){this.fireMiddleClick&&this._handleEvent(t,"up",ua,i),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(t);return}if(!this._isMainEvent(t))return;let o=!1;if(e&&(this._finalizeCurrentTransform(t),o=e.actionPerformed),!i){const h=n===this._activeObject;this.handleSelection(t),o||(o=this._shouldRender(n)||!h&&n===this._activeObject)}let l,c;if(n){if(c=n._findTargetCorner(this.getPointer(t,!0),Pa(t)),n.selectable&&n!==this._activeObject&&n.activeOn==="up")this.setActiveObject(n,t),o=!0;else{const h=n.controls[c],f=h&&h.getMouseUpHandler(t,n,h);f&&(l=this.getPointer(t),f(t,e,l.x,l.y))}n.isMoving=!1}if(e&&(e.target!==n||e.corner!==c)){const h=e.target&&e.target.controls[e.corner],f=h&&h.getMouseUpHandler(t,e.target,h);l=l||this.getPointer(t),f&&f(t,e,l.x,l.y)}this._setCursorFromEvent(t,n),this._handleEvent(t,"up",cp,i),this._groupSelector=null,this._currentTransform=null,n&&(n.__corner=void 0),o?this.requestRenderAll():!i&&!(xa(this._activeObject)&&this._activeObject.isEditing)&&this.renderTop()}_basicEventHandler(t,e){const{target:n,subTargets:i=[]}=e;this.fire(t,e),n&&n.fire(t,e);for(let o=0;o<i.length;o++)i[o].fire(t,e);return e}_handleEvent(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cp,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const o=this._target,l=this.targets||[],c={e:t,target:o,subTargets:l,button:n,isClick:i,pointer:this.getPointer(t,!0),absolutePointer:this.getPointer(t),transform:this._currentTransform};e==="up"&&(c.currentTarget=this.findTarget(t),c.currentSubTargets=this.targets),this.fire("mouse:".concat(e),c),o&&o.fire("mouse".concat(e),c);for(let h=0;h<l.length;h++)l[h].fire("mouse".concat(e),c)}endCurrentTransform(t){const e=this._currentTransform;this._finalizeCurrentTransform(t),e&&e.target&&(e.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(t){const e=this._currentTransform,n=e.target,i={e:t,target:n,transform:e,action:e.action};n._scaling&&(n._scaling=!1),n.setCoords(),e.actionPerformed&&(this.fire("object:modified",i),n.fire("modified",i))}_onMouseDownInDrawingMode(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(t),this.requestRenderAll());const e=this.getPointer(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")}_onMouseMoveInDrawingMode(t){if(this._isCurrentlyDrawing){const e=this.getPointer(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")}_onMouseUpInDrawingMode(t){const e=this.getPointer(t);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:t,pointer:e}):this._isCurrentlyDrawing=!1,this._handleEvent(t,"up")}__onMouseDown(t){this._isClick=!0,this._cacheTransformEventData(t),this._handleEvent(t,"down:before");let e=this._target;if(ga(t,fa)){this.fireRightClick&&this._handleEvent(t,"down",fa);return}if(ga(t,ua)){this.fireMiddleClick&&this._handleEvent(t,"down",ua);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(t);return}if(!this._isMainEvent(t)||this._currentTransform)return;let n=this._shouldRender(e),i=!1;if(this.handleMultiSelection(t,e)?(e=this._activeObject,i=!0,n=!0):this._shouldClearSelection(t,e)&&this.discardActiveObject(t),this.selection&&(!e||!e.selectable&&!e.isEditing&&e!==this._activeObject)){const o=this.getPointer(t);this._groupSelector={x:o.x,y:o.y,deltaY:0,deltaX:0}}if(e){const o=e===this._activeObject;e.selectable&&e.activeOn==="down"&&this.setActiveObject(e,t);const l=e._findTargetCorner(this.getPointer(t,!0),Pa(t));if(e===this._activeObject&&(l||!i)){this._setupCurrentTransform(t,e,o);const c=e.controls[l],h=this.getPointer(t),f=c&&c.getMouseDownHandler(t,e,c);f&&f(t,this._currentTransform,h.x,h.y)}}n&&(this._objectsToRender=void 0),this._handleEvent(t,"down"),n&&this.requestRenderAll()}_resetTransformEventData(){this._target=void 0,this._pointer=void 0,this._absolutePointer=void 0}_cacheTransformEventData(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)}_beforeTransform(t){const e=this._currentTransform;this.fire("before:transform",{e:t,transform:e})}__onMouseMove(t){if(this._isClick=!1,this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode){this._onMouseMoveInDrawingMode(t);return}if(!this._isMainEvent(t))return;const e=this._groupSelector;if(e){const n=this.getPointer(t);e.deltaX=n.x-e.x,e.deltaY=n.y-e.y,this.renderTop()}else if(this._currentTransform)this._transformObject(t);else{const n=this.findTarget(t);this._setCursorFromEvent(t,n),this._fireOverOutEvents(t,n)}this.textEditingManager.onMouseMove(t),this._handleEvent(t,"move"),this._resetTransformEventData()}_fireOverOutEvents(t,e){const n=this._hoveredTarget,i=this._hoveredTargets,o=this.targets,l=Math.max(i.length,o.length);this.fireSyntheticInOutEvents("mouse",{e:t,target:e,oldTarget:n,fireCanvas:!0});for(let c=0;c<l;c++)this.fireSyntheticInOutEvents("mouse",{e:t,target:o[c],oldTarget:i[c]});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(t,e){const n=this._draggedoverTarget,i=this._hoveredTargets,o=this.targets,l=Math.max(i.length,o.length);this.fireSyntheticInOutEvents("drag",D(D({},e),{},{target:t,oldTarget:n,fireCanvas:!0}));for(let c=0;c<l;c++)this.fireSyntheticInOutEvents("drag",D(D({},e),{},{target:o[c],oldTarget:i[c]}));this._draggedoverTarget=t}fireSyntheticInOutEvents(t,e){let{target:n,oldTarget:i,fireCanvas:o,e:l}=e,c=ee(e,jD);const{targetIn:h,targetOut:f,canvasIn:d,canvasOut:p}=WD[t],_=i!==n;if(i&&_){const v=D(D({},c),{},{e:l,target:i,nextTarget:n,isClick:!1,pointer:this.getPointer(l,!0),absolutePointer:this.getPointer(l)});o&&this.fire(d,v),i.fire(f,v)}if(n&&_){const v=D(D({},c),{},{e:l,target:n,previousTarget:i,isClick:!1,pointer:this.getPointer(l,!0),absolutePointer:this.getPointer(l)});o&&this.fire(p,v),n.fire(h,v)}}__onMouseWheel(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()}_transformObject(t){const e=this.getPointer(t),n=this._currentTransform,i=n.target,o=i.group?eu(e,void 0,i.group.calcTransformMatrix()):e;n.reset=!1,n.shiftKey=t.shiftKey,n.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,n,o),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(t,e,n){const i=n.x,o=n.y,l=e.action,c=e.actionHandler;let h=!1;c&&(h=c(t,e,i,o)),l==="drag"&&h&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||h}_setCursorFromEvent(t,e){if(!e){this.setCursor(this.defaultCursor);return}let n=e.hoverCursor||this.hoverCursor;const i=this._activeObject===this._activeSelection?this._activeObject:null,o=(!i||e.group!==i)&&e._findTargetCorner(this.getPointer(t,!0));if(!o)e.subTargetCheck&&this.targets.concat().reverse().map(l=>{n=l.hoverCursor||n}),this.setCursor(n);else{const l=e.controls[o];this.setCursor(l.cursorStyleHandler(t,l,e))}}handleMultiSelection(t,e){const n=this._activeObject,i=this._activeSelection,o=n===i;if(n&&this._isSelectionKeyPressed(t)&&this.selection&&e&&e.selectable&&(n!==e||o)&&(o||!e.isDescendantOf(n)&&!n.isDescendantOf(e))&&!e.onSelect({e:t})&&!n.getActiveControl()){if(o){const l=i.getObjects();if(e===i){const c=this.getPointer(t,!0);if(e=this.searchPossibleTargets(l,c)||this.searchPossibleTargets(this._objects,c),!e||!e.selectable)return!1}e.group===i?(i.remove(e),this._hoveredTarget=e,this._hoveredTargets=[...this.targets],i.size()===1&&this._setActiveObject(i.item(0),t)):(i.multiSelectAdd(e),this._hoveredTarget=i,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(l,t)}else xa(n)&&n.exitEditing(),i.multiSelectAdd(n,e),this._hoveredTarget=i,this._setActiveObject(i,t),this._fireSelectionEvents([n],t);return!0}return!1}handleSelection(t){if(!this.selection||!this._groupSelector)return!1;const{x:e,y:n,deltaX:i,deltaY:o}=this._groupSelector,l=new F(e,n),c=l.add(new F(i,o)),h=l.min(c),f=l.max(c),d=f.subtract(h),p=l.eq(c),_=this.collectObjects({left:h.x,top:h.y,width:d.x,height:d.y},{includeIntersecting:!this.selectionFullyContained}),v=p?_[0]?[_[0]]:[]:_.length>1?_.filter(w=>!w.onSelect({e:t})).reverse():_;return v.length===1?this.setActiveObject(v[0],t):v.length>1&&(this._activeSelection.add(...v),this.setActiveObject(this._activeSelection,t)),this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const r_={x1:0,y1:0,x2:0,y2:0},XD=D(D({},r_),{},{r1:0,r2:0}),HD=/^(\d+\.\d+)%|(\d+)%$/;function i_(r){return r&&HD.test(r)}function s_(r,t){const e=typeof r=="number"?r:typeof r=="string"?parseFloat(r)/(i_(r)?100:1):NaN;return yi(0,zi(e,t),1)}const YD=/\s*;\s*/,UD=/\s*:\s*/;function ND(r,t){let e,n;const i=r.getAttribute("style");if(i){const l=i.split(YD);l[l.length-1]===""&&l.pop();for(let c=l.length;c--;){const[h,f]=l[c].split(UD).map(d=>d.trim());h==="stop-color"?e=f:h==="stop-opacity"&&(n=f)}}const o=new qt(e||r.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:s_(r.getAttribute("offset"),0),color:o.toRgb(),opacity:zi(parseFloat(n||r.getAttribute("stop-opacity")||""),1)*o.getAlpha()*t}}function zD(r,t){const e=[],n=r.getElementsByTagName("stop"),i=s_(t,1);for(let o=n.length;o--;)e.push(ND(n[o],i));return e}function o_(r){return r.nodeName==="linearGradient"||r.nodeName==="LINEARGRADIENT"?"linear":"radial"}function a_(r){return r.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function VD(r,t){let{width:e,height:n,gradientUnits:i}=t,o;return Object.keys(r).reduce((l,c)=>{const h=r[c];return h==="Infinity"?o=1:h==="-Infinity"?o=0:(o=typeof h=="string"?parseFloat(h):h,typeof h=="string"&&i_(h)&&(o*=.01,i==="pixels"&&((c==="x1"||c==="x2"||c==="r2")&&(o*=e),(c==="y1"||c==="y2")&&(o*=n)))),l[c]=o,l},{})}function Ln(r,t){return r.getAttribute(t)}function GD(r){return{x1:Ln(r,"x1")||0,y1:Ln(r,"y1")||0,x2:Ln(r,"x2")||"100%",y2:Ln(r,"y2")||0}}function $D(r){return{x1:Ln(r,"fx")||Ln(r,"cx")||"50%",y1:Ln(r,"fy")||Ln(r,"cy")||"50%",r1:0,x2:Ln(r,"cx")||"50%",y2:Ln(r,"cy")||"50%",r2:Ln(r,"r")||"50%"}}function KD(r,t){return VD(o_(r)==="linear"?GD(r):$D(r),D(D({},t),{},{gradientUnits:a_(r)}))}class l_{constructor(t){let{type:e="linear",gradientUnits:n="pixels",coords:i,colorStops:o=[],offsetX:l=0,offsetY:c=0,gradientTransform:h,id:f}=t;this.id=f?"".concat(f,"_").concat(zr()):zr(),this.type=e,this.gradientUnits=n,this.gradientTransform=h,this.offsetX=l,this.offsetY=c,this.coords=D(D({},this.type==="radial"?XD:r_),i),this.colorStops=o.slice()}addColorStop(t){for(const e in t){const n=new qt(t[e]);this.colorStops.push({offset:parseFloat(e),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(t){return D(D({},wi(this,t)),{},{type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(t){let{additionalTransform:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[],i=this.gradientTransform?this.gradientTransform.concat():pn.concat(),o=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",l=this.colorStops.map(d=>D({},d)).sort((d,p)=>d.offset-p.offset);let c=-this.offsetX,h=-this.offsetY;o==="objectBoundingBox"?(c/=t.width,h/=t.height):(c+=t.width/2,h+=t.height/2),cE(t)&&this.gradientUnits!=="percentage"&&(c-=t.pathOffset.x,h-=t.pathOffset.y),i[4]-=c,i[5]-=h;const f=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(o,'"'),'gradientTransform="'.concat(e?e+" ":"").concat(io(i),'"'),""].join(" ");if(this.type==="linear"){const{x1:d,y1:p,x2:_,y2:v}=this.coords;n.push("<linearGradient ",f,' x1="',d,'" y1="',p,'" x2="',_,'" y2="',v,`">
`)}else if(this.type==="radial"){const{x1:d,y1:p,x2:_,y2:v,r1:w,r2:E}=this.coords,O=w>E;n.push("<radialGradient ",f,' cx="',O?d:_,'" cy="',O?p:v,'" r="',O?w:E,'" fx="',O?_:d,'" fy="',O?v:p,`">
`),O&&(l.reverse(),l.forEach(R=>{R.offset=1-R.offset}));const M=Math.min(w,E);if(M>0){const R=Math.max(w,E),X=M/R;l.forEach(B=>{B.offset+=X*(1-B.offset)})}}return l.forEach(d=>{let{color:p,offset:_,opacity:v}=d;n.push("<stop ",'offset="',_*100+"%",'" style="stop-color:',p,typeof v<"u"?";stop-opacity: "+v:";",`"/>
`)}),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(t){const e=this.coords,n=this.type==="linear"?t.createLinearGradient(e.x1,e.y1,e.x2,e.y2):t.createRadialGradient(e.x1,e.y1,e.r1,e.x2,e.y2,e.r2);return this.colorStops.forEach(i=>{let{color:o,opacity:l,offset:c}=i;n.addColorStop(c,typeof l<"u"?new qt(o).setAlpha(l).toRgba():o)}),n}static fromElement(t,e,n){const i=a_(t),o=e._findCenterFromElement();return new this(D({id:t.getAttribute("id")||void 0,type:o_(t),coords:KD(t,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:zD(t,n.opacity),gradientUnits:i,gradientTransform:vh(t.getAttribute("gradientTransform")||"")},i==="pixels"?{offsetX:e.width/2-o.x,offsetY:e.height/2-o.y}:{offsetX:0,offsetY:0}))}}A(l_,"type","Gradient");dt.setClass(l_,"gradient");const qD=["source"];class gu{get type(){return"pattern"}set type(t){console.warn("Setting type has no effect",t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};A(this,"repeat","repeat"),A(this,"offsetX",0),A(this,"offsetY",0),A(this,"crossOrigin",""),A(this,"patternTransform",null),this.id=zr(),Object.assign(this,t)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(t){return!this.source||this.isImageSource()&&(!this.source.complete||this.source.naturalWidth===0||this.source.naturalHeight===0)?null:t.createPattern(this.source,this.repeat)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:e,crossOrigin:n}=this;return D(D({},wi(this,t)),{},{type:"pattern",source:this.sourceToString(),repeat:e,crossOrigin:n,offsetX:Bt(this.offsetX,Dt.NUM_FRACTION_DIGITS),offsetY:Bt(this.offsetY,Dt.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(t){let{width:e,height:n}=t;const{source:i,repeat:o,id:l}=this,c=zi(this.offsetX/e,0),h=zi(this.offsetY/n,0),f=o==="repeat-y"||o==="no-repeat"?1+Math.abs(c||0):zi(i.width/e,0),d=o==="repeat-x"||o==="no-repeat"?1+Math.abs(h||0):zi(i.height/n,0);return['<pattern id="SVGID_'.concat(l,'" x="').concat(c,'" y="').concat(h,'" width="').concat(f,'" height="').concat(d,'">'),'<image x="0" y="0" width="'.concat(i.width,'" height="').concat(i.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(t,e){let{source:n}=t,i=ee(t,qD);const o=await Gs(n,D(D({},e),{},{crossOrigin:i.crossOrigin}));return new this(D(D({},i),{},{source:o}))}}A(gu,"type","Pattern");dt.setClass(gu);dt.setClass(gu,"pattern");const JD=["path","left","top"],ZD=["d"];class go extends Se{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:i,top:o}=e,l=ee(e,JD);super(l),this._setPath(t||[],!0),typeof i=="number"&&this.set(Ut,i),typeof o=="number"&&this.set(je,o)}_setPath(t,e){this.path=K0(Array.isArray(t)?t:e_(t)),this.setBoundingBox(e)}_findCenterFromElement(){const t=this._calcBoundsFromPath();return new F(t.left+t.width/2,t.top+t.height/2)}_renderPathCommands(t){let e=0,n=0,i=0,o=0,l=0,c=0;const h=-this.pathOffset.x,f=-this.pathOffset.y;t.beginPath();for(const d of this.path)switch(d[0]){case"L":i=d[1],o=d[2],t.lineTo(i+h,o+f);break;case"M":i=d[1],o=d[2],e=i,n=o,t.moveTo(i+h,o+f);break;case"C":i=d[5],o=d[6],l=d[3],c=d[4],t.bezierCurveTo(d[1]+h,d[2]+f,l+h,c+f,i+h,o+f);break;case"Q":t.quadraticCurveTo(d[1]+h,d[2]+f,d[3]+h,d[4]+f),i=d[3],o=d[4],l=d[1],c=d[2];break;case"Z":i=e,o=n,t.closePath();break}}_render(t){this._renderPathCommands(t),this._renderPaintInOrder(t)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(t)),{},{path:fs(this.path)})}toDatalessObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.toObject(t);return this.sourcePath&&(delete e.path,e.sourcePath=this.sourcePath),e}_toSVG(){const t=n_(this.path,Dt.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(t,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const t=Dt.NUM_FRACTION_DIGITS;return" translate(".concat(Bt(-this.pathOffset.x,t),", ").concat(Bt(-this.pathOffset.y,t),")")}toClipPathSVG(t){const e=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}toSVG(t){const e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{width:e,height:n,pathOffset:i}=this._calcDimensions();this.set({width:e,height:n,pathOffset:i}),t&&this.setPositionByOrigin(i,bt,bt)}_calcBoundsFromPath(){const t=[];let e=0,n=0,i=0,o=0;for(const l of this.path)switch(l[0]){case"L":i=l[1],o=l[2],t.push(new F(e,n),new F(i,o));break;case"M":i=l[1],o=l[2],e=i,n=o;break;case"C":t.push(...yh(i,o,l[1],l[2],l[3],l[4],l[5],l[6])),i=l[5],o=l[6];break;case"Q":t.push(...yh(i,o,l[1],l[2],l[1],l[2],l[3],l[4])),i=l[3],o=l[4];break;case"Z":i=e,o=n;break}return gr(t)}_calcDimensions(){const t=this._calcBoundsFromPath();return D(D({},t),{},{pathOffset:new F(t.left+t.width/2,t.top+t.height/2)})}static fromObject(t){return this._fromObject(t,{extraParam:"path"})}static async fromElement(t,e,n){const i=xr(t,this.ATTRIBUTE_NAMES,n),{d:o}=i,l=ee(i,ZD);return new this(o,D(D(D({},l),e),{},{left:void 0,top:void 0}))}}A(go,"type","Path");A(go,"cacheProperties",[...yr,"path","fillRule"]);A(go,"ATTRIBUTE_NAMES",[...Vr,"d"]);dt.setClass(go);dt.setSVGClass(go);const QD=["left","top","radius"],c_=["radius","startAngle","endAngle"],tA={radius:0,startAngle:0,endAngle:360};class Gr extends Se{static getDefaults(){return D(D({},super.getDefaults()),Gr.ownDefaults)}_set(t,e){return super._set(t,e),t==="radius"&&this.setRadius(e),this}_render(t){t.beginPath(),t.arc(0,0,this.radius,te(this.startAngle),te(this.endAngle),!1),this._renderPaintInOrder(t)}getRadiusX(){return this.get("radius")*this.get("scaleX")}getRadiusY(){return this.get("radius")*this.get("scaleY")}setRadius(t){this.radius=t,this.set({width:t*2,height:t*2})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...c_,...t])}_toSVG(){const t=(this.endAngle-this.startAngle)%360;if(t===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:e}=this,n=te(this.startAngle),i=te(this.endAngle),o=$e(n)*e,l=Ke(n)*e,c=$e(i)*e,h=Ke(i)*e,f=t>180?"1":"0";return['<path d="M '.concat(o," ").concat(l)," A ".concat(e," ").concat(e)," 0 ","".concat(f," 1")," ".concat(c," ").concat(h),'" ',"COMMON_PARTS",` />
`]}}static async fromElement(t,e,n){const i=xr(t,this.ATTRIBUTE_NAMES,n),{left:o=0,top:l=0,radius:c=0}=i,h=ee(i,QD);return new this(D(D({},h),{},{radius:c,left:o-c,top:l-c}))}static fromObject(t){return super._fromObject(t)}}A(Gr,"type","Circle");A(Gr,"cacheProperties",[...yr,...c_]);A(Gr,"ownDefaults",tA);A(Gr,"ATTRIBUTE_NAMES",["cx","cy","r",...Vr]);dt.setClass(Gr);dt.setSVGClass(Gr);const eA=["x1","y1","x2","y2"],nA=["x1","y1","x2","y2"],pu=["x1","x2","y1","y2"];class po extends Se{constructor(){let[t,e,n,i]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(D(D({},o),{},{x1:t,y1:e,x2:n,y2:i})),this._setWidthHeight();const{left:l,top:c}=o;typeof l=="number"&&this.set(Ut,l),typeof c=="number"&&this.set(je,c)}_setWidthHeight(){const{x1:t,y1:e,x2:n,y2:i}=this;this.width=Math.abs(n-t),this.height=Math.abs(i-e);const{left:o,top:l,width:c,height:h}=gr([{x:t,y:e},{x:n,y:i}]),f=new F(o+c/2,l+h/2);this.setPositionByOrigin(f,bt,bt)}_set(t,e){return super._set(t,e),pu.includes(t)&&this._setWidthHeight(),this}_render(t){t.beginPath();const e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;const n=t.strokeStyle;if(On(this.stroke))t.strokeStyle=this.stroke.toLive(t);else{var i;t.strokeStyle=(i=this.stroke)!==null&&i!==void 0?i:t.fillStyle}this.stroke&&this._renderStroke(t),t.strokeStyle=n}_findCenterFromElement(){return new F((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(t)),this.calcLinePoints())}_getNonTransformedDimensions(){const t=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t}calcLinePoints(){const{x1:t,x2:e,y1:n,y2:i,width:o,height:l}=this,c=t<=e?-1:1,h=n<=i?-1:1,f=c*o/2,d=h*l/2,p=c*-o/2,_=h*-l/2;return{x1:f,x2:p,y1:d,y2:_}}_toSVG(){const{x1:t,x2:e,y1:n,y2:i}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(t,'" y1="').concat(n,'" x2="').concat(e,'" y2="').concat(i,`" />
`)]}static async fromElement(t,e,n){const i=xr(t,this.ATTRIBUTE_NAMES,n),{x1:o=0,y1:l=0,x2:c=0,y2:h=0}=i,f=ee(i,eA);return new this([o,l,c,h],f)}static fromObject(t){let{x1:e,y1:n,x2:i,y2:o}=t,l=ee(t,nA);return this._fromObject(D(D({},l),{},{points:[e,n,i,o]}),{extraParam:"points"})}}A(po,"type","Line");A(po,"cacheProperties",[...yr,...pu]);A(po,"ATTRIBUTE_NAMES",Vr.concat(pu));dt.setClass(po);dt.setSVGClass(po);const rA={width:100,height:100};class ds extends Se{static getDefaults(){return D(D({},super.getDefaults()),ds.ownDefaults)}_render(t){const e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,n),t.lineTo(0,-n),t.lineTo(e,n),t.closePath(),this._renderPaintInOrder(t)}_toSVG(){const t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-t," ").concat(e,",0 ").concat(-e,",").concat(t," ").concat(e),'" />']}}A(ds,"type","Triangle");A(ds,"ownDefaults",rA);dt.setClass(ds);dt.setSVGClass(ds);const iA={rx:0,ry:0},h_=["rx","ry"];class $r extends Se{static getDefaults(){return D(D({},super.getDefaults()),$r.ownDefaults)}_set(t,e){switch(super._set(t,e),t){case"rx":this.rx=e,this.set("width",e*2);break;case"ry":this.ry=e,this.set("height",e*2);break}return this}getRx(){return this.get("rx")*this.get("scaleX")}getRy(){return this.get("ry")*this.get("scaleY")}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...h_,...t])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,mr,!1),t.restore(),this._renderPaintInOrder(t)}static async fromElement(t,e,n){const i=xr(t,this.ATTRIBUTE_NAMES,n);return i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,new this(i)}}A($r,"type","Ellipse");A($r,"cacheProperties",[...yr,...h_]);A($r,"ownDefaults",iA);A($r,"ATTRIBUTE_NAMES",[...Vr,"cx","cy","rx","ry"]);dt.setClass($r);dt.setSVGClass($r);function sA(r){if(!r)return[];const t=r.replace(/,/g," ").trim().split(/\s+/),e=[];for(let n=0;n<t.length;n+=2)e.push({x:parseFloat(t[n]),y:parseFloat(t[n+1])});return e}const oA=["left","top"],u_={exactBoundingBox:!1};class Hn extends Se{static getDefaults(){return D(D({},super.getDefaults()),Hn.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(D({points:t},e)),A(this,"strokeDiff",void 0);const{left:n,top:i}=e;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(Ut,n),typeof i=="number"&&this.set(je,i)}isOpen(){return!0}_projectStrokeOnPoints(t){return Y0(this.points,t,this.isOpen())}_calcDimensions(t){t=D({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},t||{});const e=this.exactBoundingBox?this._projectStrokeOnPoints(t).map(p=>p.projectedPoint):this.points;if(e.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new F,strokeOffset:new F,strokeDiff:new F};const n=gr(e),i=el(D(D({},t),{},{scaleX:1,scaleY:1})),o=gr(this.points.map(p=>he(p,i,!0))),l=n.left+n.width/2,c=n.top+n.height/2,h=l-c*Math.tan(te(this.skewX)),f=c-h*Math.tan(te(this.skewY)),d=new F(this.scaleX,this.scaleY);return D(D({},n),{},{pathOffset:new F(h,f),strokeOffset:new F(o.left,o.top).subtract(new F(n.left,n.top)).multiply(d),strokeDiff:new F(n.width,n.height).subtract(new F(o.width,o.height)).multiply(d)})}_findCenterFromElement(){const t=gr(this.points);return new F(t.left+t.width/2,t.top+t.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{left:e,top:n,width:i,height:o,pathOffset:l,strokeOffset:c,strokeDiff:h}=this._calcDimensions();this.set({width:i,height:o,pathOffset:l,strokeOffset:c,strokeDiff:h}),t&&this.setPositionByOrigin(new F(e+i/2,n+o/2),bt,bt)}_getNonTransformedDimensions(){return this.exactBoundingBox?new F(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let l;if(Object.keys(t).some(c=>this.strokeUniform||this.constructor.layoutProperties.includes(c))){var e,n;const{width:c,height:h}=this._calcDimensions(t);l=new F((e=t.width)!==null&&e!==void 0?e:c,(n=t.height)!==null&&n!==void 0?n:h)}else{var i,o;l=new F((i=t.width)!==null&&i!==void 0?i:this.width,(o=t.height)!==null&&o!==void 0?o:this.height)}return l.multiply(new F(t.scaleX||this.scaleX,t.scaleY||this.scaleY))}else return super._getTransformedDimensions(t)}_set(t,e){const n=this.initialized&&this[t]!==e,i=super._set(t,e);return this.exactBoundingBox&&n&&((t==="scaleX"||t==="scaleY")&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(t))&&this.setDimensions(),i}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(t)),{},{points:fs(this.points)})}_toSVG(){const t=[],e=this.pathOffset.x,n=this.pathOffset.y,i=Dt.NUM_FRACTION_DIGITS;for(let o=0,l=this.points.length;o<l;o++)t.push(Bt(this.points[o].x-e,i),",",Bt(this.points[o].y-n,i)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(t.join(""),`" />
`)]}_render(t){const e=this.points.length,n=this.pathOffset.x,i=this.pathOffset.y;if(!(!e||isNaN(this.points[e-1].y))){t.beginPath(),t.moveTo(this.points[0].x-n,this.points[0].y-i);for(let o=0;o<e;o++){const l=this.points[o];t.lineTo(l.x-n,l.y-i)}!this.isOpen()&&t.closePath(),this._renderPaintInOrder(t)}}complexity(){return this.points.length}static async fromElement(t,e,n){const i=sA(t.getAttribute("points")),o=xr(t,this.ATTRIBUTE_NAMES,n),l=ee(o,oA);return new this(i,D(D({},l),e))}static fromObject(t){return this._fromObject(t,{extraParam:"points"})}}A(Hn,"ownDefaults",u_);A(Hn,"type","Polyline");A(Hn,"layoutProperties",["skewX","skewY","strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]);A(Hn,"cacheProperties",[...yr,"points"]);A(Hn,"ATTRIBUTE_NAMES",[...Vr]);dt.setClass(Hn);dt.setSVGClass(Hn);class cl extends Hn{static getDefaults(){return D(D({},super.getDefaults()),Hn.ownDefaults)}isOpen(){return!1}}A(cl,"ownDefaults",u_);A(cl,"type","Polygon");dt.setClass(cl);dt.setSVGClass(cl);const f_=["fontSize","fontWeight","fontFamily","fontStyle"],d_=["underline","overline","linethrough"],g_=[...f_,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],p_=[...g_,...d_,"textBackgroundColor","direction"],aA=[...f_,...d_,"stroke","strokeWidth","fill","deltaY","textBackgroundColor"],lA={_reNewline:Vh,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Ut,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Ut,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},qn="justify",Ra="justify-left",$s="justify-right",Ks="justify-center";class m_ extends Se{isEmptyStyles(t){if(!this.styles||typeof t<"u"&&!this.styles[t])return!0;const e=typeof t>"u"?this.styles:{line:this.styles[t]};for(const n in e)for(const i in e[n])for(const o in e[n][i])return!1;return!0}styleHas(t,e){if(!this.styles||typeof e<"u"&&!this.styles[e])return!1;const n=typeof e>"u"?this.styles:{0:this.styles[e]};for(const i in n)for(const o in n[i])if(typeof n[i][o][t]<"u")return!0;return!1}cleanStyle(t){if(!this.styles)return!1;const e=this.styles;let n=0,i,o,l=!0,c=0;for(const h in e){i=0;for(const f in e[h]){const d=e[h][f]||{},p=d[t]!==void 0;n++,p?(o?d[t]!==o&&(l=!1):o=d[t],d[t]===this[t]&&delete d[t]):l=!1,Object.keys(d).length!==0?i++:delete e[h][f]}i===0&&delete e[h]}for(let h=0;h<this._textLines.length;h++)c+=this._textLines[h].length;l&&n===c&&(this[t]=o,this.removeStyle(t))}removeStyle(t){if(!this.styles)return;const e=this.styles;let n,i,o;for(i in e){n=e[i];for(o in n)delete n[o][t],Object.keys(n[o]).length===0&&delete n[o];Object.keys(n).length===0&&delete e[i]}}_extendStyles(t,e){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(t);this._getLineStyle(n)||this._setLineStyle(n),Object.keys(this._getStyleDeclaration(n,i)).length||this._setStyleDeclaration(n,i,{}),Object.assign(this._getStyleDeclaration(n,i),e)}getSelectionStyles(t,e,n){const i=[];for(let o=t;o<(e||t);o++)i.push(this.getStyleAtPosition(o,n));return i}getStyleAtPosition(t,e){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(t);return e?this.getCompleteStyleDeclaration(n,i):this._getStyleDeclaration(n,i)}setSelectionStyles(t,e,n){for(let i=e;i<(n||e);i++)this._extendStyles(i,t);this._forceClearCache=!0}_getStyleDeclaration(t,e){var n;const i=this.styles&&this.styles[t];return i?(n=i[e])!==null&&n!==void 0?n:{}:{}}getCompleteStyleDeclaration(t,e){return D(D({},wi(this,this.constructor._styleProperties)),this._getStyleDeclaration(t,e))}_setStyleDeclaration(t,e,n){this.styles[t][e]=n}_deleteStyleDeclaration(t,e){delete this.styles[t][e]}_getLineStyle(t){return!!this.styles[t]}_setLineStyle(t){this.styles[t]={}}_deleteLineStyle(t){delete this.styles[t]}}A(m_,"_styleProperties",aA);const cA=/  +/g,hA=/"/g;function Wc(r,t,e,n,i){return"		".concat(aE(r,{left:t,top:e,width:n,height:i}),`
`)}class uA extends d0{_toSVG(){const t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(t){let{textBgRects:e,textSpans:n}=t;const i=!0,o=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(hA,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",o?'text-decoration="'.concat(o,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(i),'"',this.addPaintOrder()," >",n.join(""),`</text>
`]}_getSVGTextAndBg(t,e){const n=[],i=[];let o=t,l;this.backgroundColor&&i.push(...Wc(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let c=0,h=this._textLines.length;c<h;c++)l=this._getLineLeftOffset(c),this.direction==="rtl"&&(l+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",c))&&this._setSVGTextLineBg(i,c,e+l,o),this._setSVGTextLineText(n,c,e+l,o),o+=this.getHeightOfLine(c);return{textSpans:n,textBgRects:i}}_createTextCharSpan(t,e,n,i){const o=this.getSvgSpanStyles(e,t!==t.trim()||!!t.match(cA)),l=o?'style="'.concat(o,'"'):"",c=e.deltaY,h=c?' dy="'.concat(Bt(c,Dt.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(Bt(n,Dt.NUM_FRACTION_DIGITS),'" y="').concat(Bt(i,Dt.NUM_FRACTION_DIGITS),'" ').concat(h).concat(l,">").concat(G0(t),"</tspan>")}_setSVGTextLineText(t,e,n,i){const o=this.getHeightOfLine(e),l=this.textAlign.includes(qn),c=this._textLines[e];let h,f,d="",p,_,v=0,w;i+=o*(1-this._fontSizeFraction)/this.lineHeight;for(let E=0,O=c.length-1;E<=O;E++)w=E===O||this.charSpacing,d+=c[E],p=this.__charBounds[e][E],v===0?(n+=p.kernedWidth-p.width,v+=p.width):v+=p.kernedWidth,l&&!w&&this._reSpaceAndTab.test(c[E])&&(w=!0),w||(h=h||this.getCompleteStyleDeclaration(e,E),f=this.getCompleteStyleDeclaration(e,E+1),w=al(h,f,!0)),w&&(_=this._getStyleDeclaration(e,E),t.push(this._createTextCharSpan(d,_,n,i)),d="",h=f,this.direction==="rtl"?n-=v:n+=v,v=0)}_setSVGTextLineBg(t,e,n,i){const o=this._textLines[e],l=this.getHeightOfLine(e)/this.lineHeight;let c=0,h=0,f,d=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let p=0;p<o.length;p++){const{left:_,width:v,kernedWidth:w}=this.__charBounds[e][p];f=this.getValueOfPropertyAt(e,p,"textBackgroundColor"),f!==d?(d&&t.push(...Wc(d,n+h,i,c,l)),h=_,c=v,d=f):c+=w}f&&t.push(...Wc(d,n+h,i,c,l))}_getSVGLineTopOffset(t){let e=0,n;for(n=0;n<t;n++)e+=this.getHeightOfLine(n);const i=this.getHeightOfLine(n);return{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(t){return"".concat(super.getSvgStyles(t)," white-space: pre;")}getSvgSpanStyles(t,e){const{fontFamily:n,strokeWidth:i,stroke:o,fill:l,fontSize:c,fontStyle:h,fontWeight:f,deltaY:d}=t,p=this.getSvgTextDecoration(t);return[o?so("stroke",o):"",i?"stroke-width: ".concat(i,"; "):"",n?"font-family: ".concat(!n.includes("'")&&!n.includes('"')?"'".concat(n,"'"):n,"; "):"",c?"font-size: ".concat(c,"px; "):"",h?"font-style: ".concat(h,"; "):"",f?"font-weight: ".concat(f,"; "):"",p&&"text-decoration: ".concat(p,"; "),l?so("fill",l):"",d?"baseline-shift: ".concat(-d,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(t){return["overline","underline","line-through"].filter(e=>t[e.replace("-","")]).join(" ")}}const fA=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Xc;function dA(){return Xc||(Xc=fe().getContext("2d")),Xc}class sn extends m_{static getDefaults(){return D(D({},super.getDefaults()),sn.ownDefaults)}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(D(D({},e),{},{text:t,styles:(e==null?void 0:e.styles)||{}})),A(this,"__charBounds",[]),this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const t=this.path;t&&(t.segmentsInfo=du(t.path))}_splitText(){const t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(qn)&&this.enlargeSpaces()}enlargeSpaces(){let t,e,n,i,o,l,c;for(let h=0,f=this._textLines.length;h<f;h++)if(!(this.textAlign!==qn&&(h===f-1||this.isEndOfWrapping(h)))&&(i=0,o=this._textLines[h],e=this.getLineWidth(h),e<this.width&&(c=this.textLines[h].match(this._reSpacesAndTabs)))){n=c.length,t=(this.width-e)/n;for(let d=0;d<=o.length;d++)l=this.__charBounds[h][d],this._reSpaceAndTab.test(o[d])?(l.width+=t,l.kernedWidth+=t,l.left+=i,i+=t):l.left+=i}}isEndOfWrapping(t){return t===this._textLines.length-1}missingNewlineOffset(t){return 1}get2DCursorLocation(t,e){const n=e?this._unwrappedTextLines:this._textLines;let i;for(i=0;i<n.length;i++){if(t<=n[i].length)return{lineIndex:i,charIndex:t};t-=n[i].length+this.missingNewlineOffset(i,e)}return{lineIndex:i-1,charIndex:n[i-1].length<t?n[i-1].length:t}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const t=super._getCacheCanvasDimensions(),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t}_render(t){const e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")}_renderText(t){this.paintFirst==="stroke"?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))}_setTextStyles(t,e,n){if(t.textBaseline="alphabetic",this.path)switch(this.pathAlign){case bt:t.textBaseline="middle";break;case"ascender":t.textBaseline=je;break;case"descender":t.textBaseline=lh;break}t.font=this._getFontDeclaration(e,n)}calcTextWidth(){let t=this.getLineWidth(0);for(let e=1,n=this._textLines.length;e<n;e++){const i=this.getLineWidth(e);i>t&&(t=i)}return t}_renderTextLine(t,e,n,i,o,l){this._renderChars(t,e,n,i,o,l)}_renderTextLinesBackground(t){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const e=t.fillStyle,n=this._getLeftOffset();let i=this._getTopOffset();for(let o=0,l=this._textLines.length;o<l;o++){const c=this.getHeightOfLine(o);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",o)){i+=c;continue}const h=this._textLines[o].length,f=this._getLineLeftOffset(o);let d=0,p=0,_,v,w=this.getValueOfPropertyAt(o,0,"textBackgroundColor");for(let E=0;E<h;E++){const O=this.__charBounds[o][E];v=this.getValueOfPropertyAt(o,E,"textBackgroundColor"),this.path?(t.save(),t.translate(O.renderLeft,O.renderTop),t.rotate(O.angle),t.fillStyle=v,v&&t.fillRect(-O.width/2,-c/this.lineHeight*(1-this._fontSizeFraction),O.width,c/this.lineHeight),t.restore()):v!==w?(_=n+f+p,this.direction==="rtl"&&(_=this.width-_-d),t.fillStyle=w,w&&t.fillRect(_,i,d,c/this.lineHeight),p=O.left,d=O.width,w=v):d+=O.kernedWidth}v&&!this.path&&(_=n+f+p,this.direction==="rtl"&&(_=this.width-_-d),t.fillStyle=v,t.fillRect(_,i,d,c/this.lineHeight)),i+=c}t.fillStyle=e,this._removeShadow(t)}_measureChar(t,e,n,i){const o=zs.getFontCache(e),l=this._getFontDeclaration(e),c=n+t,h=n&&l===this._getFontDeclaration(i),f=e.fontSize/this.CACHE_FONT_SIZE;let d,p,_,v;if(n&&o[n]!==void 0&&(_=o[n]),o[t]!==void 0&&(v=d=o[t]),h&&o[c]!==void 0&&(p=o[c],v=p-_),d===void 0||_===void 0||p===void 0){const w=dA();this._setTextStyles(w,e,!0),d===void 0&&(v=d=w.measureText(t).width,o[t]=d),_===void 0&&h&&n&&(_=w.measureText(n).width,o[n]=_),h&&p===void 0&&(p=w.measureText(c).width,o[c]=p,v=p-_)}return{width:d*f,kernedWidth:v*f}}getHeightOfChar(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")}measureLine(t){const e=this._measureLine(t);return this.charSpacing!==0&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e}_measureLine(t){let e=0,n,i;const o=this.pathSide===_e,l=this.path,c=this._textLines[t],h=c.length,f=new Array(h);this.__charBounds[t]=f;for(let d=0;d<h;d++){const p=c[d];i=this._getGraphemeBox(p,t,d,n),f[d]=i,e+=i.kernedWidth,n=p}if(f[h]={left:i?i.left+i.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},l&&l.segmentsInfo){let d=0;const p=l.segmentsInfo[l.segmentsInfo.length-1].length;switch(this.textAlign){case Ut:d=o?p-e:0;break;case bt:d=(p-e)/2;break;case _e:d=o?0:p-e;break}d+=this.pathStartOffset*(o?-1:1);for(let _=o?h-1:0;o?_>=0:_<h;o?_--:_++)i=f[_],d>p?d%=p:d<0&&(d+=p),this._setGraphemeOnPath(d,i),d+=i.kernedWidth}return{width:e,numOfSpaces:0}}_setGraphemeOnPath(t,e){const n=t+e.kernedWidth/2,i=this.path,o=t_(i.path,n,i.segmentsInfo);e.renderLeft=o.x-i.pathOffset.x,e.renderTop=o.y-i.pathOffset.y,e.angle=o.angle+(this.pathSide===_e?Math.PI:0)}_getGraphemeBox(t,e,n,i,o){const l=this.getCompleteStyleDeclaration(e,n),c=i?this.getCompleteStyleDeclaration(e,n-1):{},h=this._measureChar(t,l,i,c);let f=h.kernedWidth,d=h.width,p;this.charSpacing!==0&&(p=this._getWidthOfCharSpacing(),d+=p,f+=p);const _={width:d,left:0,height:l.fontSize,kernedWidth:f,deltaY:l.deltaY};if(n>0&&!o){const v=this.__charBounds[e][n-1];_.left=v.left+v.width+h.kernedWidth-h.width}return _}getHeightOfLine(t){if(this.__lineHeights[t])return this.__lineHeights[t];let e=this.getHeightOfChar(t,0);for(let n=1,i=this._textLines[t].length;n<i;n++)e=Math.max(this.getHeightOfChar(t,n),e);return this.__lineHeights[t]=e*this.lineHeight*this._fontSizeMult}calcTextHeight(){let t,e=0;for(let n=0,i=this._textLines.length;n<i;n++)t=this.getHeightOfLine(n),e+=n===i-1?t/this.lineHeight:t;return e}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(t,e){t.save();let n=0;const i=this._getLeftOffset(),o=this._getTopOffset();for(let l=0,c=this._textLines.length;l<c;l++){const h=this.getHeightOfLine(l),f=h/this.lineHeight,d=this._getLineLeftOffset(l);this._renderTextLine(e,t,this._textLines[l],i+d,o+n+f,l),n+=h}t.restore()}_renderTextFill(t){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(t,"fillText")}_renderTextStroke(t){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())}_renderChars(t,e,n,i,o,l){const c=this.getHeightOfLine(l),h=this.textAlign.includes(qn),f=this.path,d=!h&&this.charSpacing===0&&this.isEmptyStyles(l)&&!f,p=this.direction==="ltr",_=this.direction==="ltr"?1:-1,v=e.direction;let w,E,O="",M,R=0,X,B;if(e.save(),v!==this.direction&&(e.canvas.setAttribute("dir",p?"ltr":"rtl"),e.direction=p?"ltr":"rtl",e.textAlign=p?Ut:_e),o-=c*this._fontSizeFraction/this.lineHeight,d){this._renderChar(t,e,l,0,n.join(""),i,o),e.restore();return}for(let $=0,tt=n.length-1;$<=tt;$++)X=$===tt||this.charSpacing||f,O+=n[$],M=this.__charBounds[l][$],R===0?(i+=_*(M.kernedWidth-M.width),R+=M.width):R+=M.kernedWidth,h&&!X&&this._reSpaceAndTab.test(n[$])&&(X=!0),X||(w=w||this.getCompleteStyleDeclaration(l,$),E=this.getCompleteStyleDeclaration(l,$+1),X=al(w,E,!1)),X&&(f?(e.save(),e.translate(M.renderLeft,M.renderTop),e.rotate(M.angle),this._renderChar(t,e,l,$,O,-R/2,0),e.restore()):(B=i,this._renderChar(t,e,l,$,O,B,o)),O="",w=E,i+=_*R,R=0);e.restore()}_applyPatternGradientTransformText(t){const e=fe(),n=this.width+this.strokeWidth,i=this.height+this.strokeWidth,o=e.getContext("2d");return e.width=n,e.height=i,o.beginPath(),o.moveTo(0,0),o.lineTo(n,0),o.lineTo(n,i),o.lineTo(0,i),o.closePath(),o.translate(n/2,i/2),o.fillStyle=t.toLive(o),this._applyPatternGradientTransform(o,t),o.fill(),o.createPattern(e,"no-repeat")}handleFiller(t,e,n){let i,o;return On(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(i=-this.width/2,o=-this.height/2,t.translate(i,o),t[e]=this._applyPatternGradientTransformText(n),{offsetX:i,offsetY:o}):(t[e]=n.toLive(t),this._applyPatternGradientTransform(t,n)):(t[e]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(t,e){let{stroke:n,strokeWidth:i}=e;return t.lineWidth=i,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",n)}_setFillStyles(t,e){let{fill:n}=e;return this.handleFiller(t,"fillStyle",n)}_renderChar(t,e,n,i,o,l,c){const h=this._getStyleDeclaration(n,i),f=this.getCompleteStyleDeclaration(n,i),d=t==="fillText"&&f.fill,p=t==="strokeText"&&f.stroke&&f.strokeWidth;if(!(!p&&!d)){if(e.save(),e.font=this._getFontDeclaration(f),h.textBackgroundColor&&this._removeShadow(e),h.deltaY&&(c+=h.deltaY),d){const _=this._setFillStyles(e,f);e.fillText(o,l-_.offsetX,c-_.offsetY)}if(p){const _=this._setStrokeStyles(e,f);e.strokeText(o,l-_.offsetX,c-_.offsetY)}e.restore()}}setSuperscript(t,e){this._setScript(t,e,this.superscript)}setSubscript(t,e){this._setScript(t,e,this.subscript)}_setScript(t,e,n){const i=this.get2DCursorLocation(t,!0),o=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),l=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),c={fontSize:o*n.size,deltaY:l+o*n.baseline};this.setSelectionStyles(c,t,e)}_getLineLeftOffset(t){const e=this.getLineWidth(t),n=this.width-e,i=this.textAlign,o=this.direction,l=this.isEndOfWrapping(t);let c=0;return i===qn||i===Ks&&!l||i===$s&&!l||i===Ra&&!l?0:(i===bt&&(c=n/2),i===_e&&(c=n),i===Ks&&(c=n/2),i===$s&&(c=n),o==="rtl"&&(i===_e||i===qn||i===$s?c=0:i===Ut||i===Ra?c=-n:(i===bt||i===Ks)&&(c=-n/2)),c)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(t){if(this.__lineWidths[t]!==void 0)return this.__lineWidths[t];const{width:e}=this.measureLine(t);return this.__lineWidths[t]=e,e}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(t,e,n){var i;return(i=this._getStyleDeclaration(t,e)[n])!==null&&i!==void 0?i:this[n]}_renderTextDecoration(t,e){if(!this[e]&&!this.styleHas(e))return;let n=this._getTopOffset();const i=this._getLeftOffset(),o=this.path,l=this._getWidthOfCharSpacing(),c=this.offsets[e];for(let h=0,f=this._textLines.length;h<f;h++){const d=this.getHeightOfLine(h);if(!this[e]&&!this.styleHas(e,h)){n+=d;continue}const p=this._textLines[h],_=d/this.lineHeight,v=this._getLineLeftOffset(h);let w=0,E=0,O=this.getValueOfPropertyAt(h,0,e),M=this.getValueOfPropertyAt(h,0,"fill"),R,X;const B=n+_*(1-this._fontSizeFraction);let $=this.getHeightOfChar(h,0),tt=this.getValueOfPropertyAt(h,0,"deltaY");for(let ot=0,it=p.length;ot<it;ot++){const lt=this.__charBounds[h][ot];R=this.getValueOfPropertyAt(h,ot,e),X=this.getValueOfPropertyAt(h,ot,"fill");const pt=this.getHeightOfChar(h,ot),Lt=this.getValueOfPropertyAt(h,ot,"deltaY");if(o&&R&&X)t.save(),t.fillStyle=M,t.translate(lt.renderLeft,lt.renderTop),t.rotate(lt.angle),t.fillRect(-lt.kernedWidth/2,c*pt+Lt,lt.kernedWidth,this.fontSize/15),t.restore();else if((R!==O||X!==M||pt!==$||Lt!==tt)&&E>0){let Wt=i+v+w;this.direction==="rtl"&&(Wt=this.width-Wt-E),O&&M&&(t.fillStyle=M,t.fillRect(Wt,B+c*$+tt,E,this.fontSize/15)),w=lt.left,E=lt.width,O=R,M=X,$=pt,tt=Lt}else E+=lt.kernedWidth}let nt=i+v+w;this.direction==="rtl"&&(nt=this.width-nt-E),t.fillStyle=X,R&&X&&t.fillRect(nt,B+c*$+tt,E-l,this.fontSize/15),n+=d}this._removeShadow(t)}_getFontDeclaration(){let{fontFamily:t=this.fontFamily,fontStyle:e=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:i=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;const l=t.includes("'")||t.includes('"')||t.includes(",")||sn.genericFonts.includes(t.toLowerCase())?t:'"'.concat(t,'"');return[e,n,"".concat(o?this.CACHE_FONT_SIZE:i,"px"),l].join(" ")}render(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(t)))}graphemeSplit(t){return $0(t)}_splitTextIntoLines(t){const e=t.split(this._reNewline),n=new Array(e.length),i=[`
`];let o=[];for(let l=0;l<e.length;l++)n[l]=this.graphemeSplit(e[l]),o=o.concat(n[l],i);return o.pop(),{_unwrappedLines:n,lines:e,graphemeText:o,graphemeLines:n}}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject([...p_,...t])),{},{styles:U0(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(t,e){const{textLayoutProperties:n}=this.constructor;super.set(t,e);let i=!1,o=!1;if(typeof t=="object")for(const l in t)l==="path"&&this.setPathInfo(),i=i||n.includes(l),o=o||l==="path";else i=n.includes(t),o=t==="path";return o&&this.setPathInfo(),i&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(t,e,n){const i=xr(t,sn.ATTRIBUTE_NAMES,n),o=D(D({},e),i),{textAnchor:l=Ut,textDecoration:c="",dx:h=0,dy:f=0,top:d=0,left:p=0,fontSize:_=zh,strokeWidth:v=1}=o,w=ee(o,fA),E=(t.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),O=new this(E,D({left:p+h,top:d+f,underline:c.includes("underline"),overline:c.includes("overline"),linethrough:c.includes("line-through"),strokeWidth:0,fontSize:_},w)),M=O.getScaledHeight()/O.height,R=(O.height+O.strokeWidth)*O.lineHeight-O.height,X=R*M,B=O.getScaledHeight()+X;let $=0;return l===bt&&($=O.getScaledWidth()/2),l===_e&&($=O.getScaledWidth()),O.set({left:O.left-$,top:O.top-(B-O.fontSize*(.07+O._fontSizeFraction))/O.lineHeight,strokeWidth:v}),O}static fromObject(t){return this._fromObject(D(D({},t),{},{styles:N0(t.styles||{},t.text)}),{extraParam:"text"})}}A(sn,"textLayoutProperties",g_);A(sn,"cacheProperties",[...yr,...p_]);A(sn,"ownDefaults",lA);A(sn,"type","Text");A(sn,"genericFonts",["sans-serif","serif","cursive","fantasy","monospace"]);A(sn,"ATTRIBUTE_NAMES",Vr.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor"));I0(sn,[uA]);dt.setClass(sn);dt.setSVGClass(sn);class gA{constructor(t){A(this,"target",void 0),A(this,"__mouseDownInPlace",!1),A(this,"__dragStartFired",!1),A(this,"__isDraggingOver",!1),A(this,"__dragStartSelection",void 0),A(this,"__dragImageDisposer",void 0),A(this,"_dispose",void 0),this.target=t;const e=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{e.forEach(n=>n()),this._dispose=void 0}}isPointerOverSelection(t){const e=this.target,n=e.getSelectionStartFromPointer(t);return e.isEditing&&n>=e.selectionStart&&n<=e.selectionEnd&&e.selectionStart<e.selectionEnd}start(t){return this.__mouseDownInPlace=this.isPointerOverSelection(t)}isActive(){return this.__mouseDownInPlace}end(t){const e=this.isActive();return e&&!this.__dragStartFired&&(this.target.setCursorByClick(t),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,e}getDragStartSelection(){return this.__dragStartSelection}setDragImage(t,e){var n;let{selectionStart:i,selectionEnd:o}=e;const l=this.target,c=l.canvas,h=new F(l.flipX?-1:1,l.flipY?-1:1),f=l._getCursorBoundaries(i),p=new F(f.left+f.leftOffset,f.top+f.topOffset).multiply(h).transform(l.calcTransformMatrix()),v=c.getPointer(t).subtract(p),w=c._isRetinaScaling(),E=l.getCanvasRetinaScaling(),O=l.getBoundingRect(!0),M=p.subtract(new F(O.left,O.top)),R=c.viewportTransform,X=M.add(v).transform(R,!0),B=l.backgroundColor,$=fs(l.styles);l.backgroundColor="";const tt={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};l.setSelectionStyles(tt,0,i),l.setSelectionStyles(tt,o,l.text.length),l.dirty=!0;const nt=l.toCanvasElement({enableRetinaScaling:w,viewportTransform:!0});l.backgroundColor=B,l.styles=$,l.dirty=!0,oo(nt,{position:"fixed",left:"".concat(-nt.width,"px"),border:rn,width:"".concat(nt.width/E,"px"),height:"".concat(nt.height/E,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{nt.remove()},Fn(t.target||this.target.hiddenTextarea).body.appendChild(nt),(n=t.dataTransfer)===null||n===void 0||n.setDragImage(nt,X.x,X.y)}onDragStart(t){this.__dragStartFired=!0;const e=this.target,n=this.isActive();if(n&&t.dataTransfer){const i=this.__dragStartSelection={selectionStart:e.selectionStart,selectionEnd:e.selectionEnd},o=e._text.slice(i.selectionStart,i.selectionEnd).join(""),l=D({text:e.text,value:o},i);t.dataTransfer.setData("text/plain",o),t.dataTransfer.setData("application/fabric",JSON.stringify({value:o,styles:e.getSelectionStyles(i.selectionStart,i.selectionEnd,!0)})),t.dataTransfer.effectAllowed="copyMove",this.setDragImage(t,l)}return e.abortCursorAnimation(),n}canDrop(t){if(this.target.editable&&!this.target.getActiveControl()&&!t.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const e=this.target.getSelectionStartFromPointer(t),n=this.__dragStartSelection;return e<n.selectionStart||e>n.selectionEnd}return!0}return!1}targetCanDrop(t){return this.target.canDrop(t)}dragEnterHandler(t){let{e}=t;const n=this.targetCanDrop(e);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(t){const{e}=t,n=this.targetCanDrop(e);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(e.preventDefault(),t.canDrop=!0,t.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(t){var e;const{e:n}=t,i=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let o=(e=n.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain");if(o&&!i){const l=this.target,c=l.canvas;let h=l.getSelectionStartFromPointer(n);const{styles:f}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},d=o[Math.max(0,o.length-1)],p=0;if(this.__dragStartSelection){const _=this.__dragStartSelection.selectionStart,v=this.__dragStartSelection.selectionEnd;h>_&&h<=v?h=_:h>v&&(h-=v-_),l.removeChars(_,v),delete this.__dragStartSelection}l._reNewline.test(d)&&(l._reNewline.test(l._text[h])||h===l._text.length)&&(o=o.trimEnd()),t.didDrop=!0,t.dropTarget=l,l.insertChars(o,f,h),c.setActiveObject(l),l.enterEditing(n),l.selectionStart=Math.min(h+p,l._text.length),l.selectionEnd=Math.min(l.selectionStart+o.length,l._text.length),l.hiddenTextarea.value=l.text,l._updateTextarea(),l.hiddenTextarea.focus(),l.fire("changed",{index:h+p,action:"drop"}),c.fire("text:changed",{target:l}),c.contextTopDirty=!0,c.requestRenderAll()}}dragEndHandler(t){let{e}=t;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const i=this.target,o=this.target.canvas,{selectionStart:l,selectionEnd:c}=this.__dragStartSelection,h=((n=e.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||rn;h===rn?(i.selectionStart=l,i.selectionEnd=c,i._updateTextarea(),i.hiddenTextarea.focus()):(i.clearContextTop(),h==="move"&&(i.removeChars(l,c),i.selectionStart=i.selectionEnd=l,i.hiddenTextarea&&(i.hiddenTextarea.value=i.text),i._updateTextarea(),i.fire("changed",{index:l,action:"dragend"}),o.fire("text:changed",{target:i}),o.requestRenderAll()),i.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Fp=/[ \n\.,;!\?\-]/;class pA extends sn{constructor(){super(...arguments),A(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(t){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(t)}_animateCursor(t){let{toValue:e,duration:n,delay:i,onComplete:o}=t;return ou({startValue:this._currentCursorOpacity,endValue:e,duration:n,delay:i,onComplete:o,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:l=>{this._currentCursorOpacity=l,this.renderCursorOrSelection()}})}_tick(t){this._currentTickState=this._animateCursor({toValue:1,duration:this.cursorDuration,delay:t,onComplete:this._onTickComplete})}_onTickComplete(){var t;(t=this._currentTickCompleteState)===null||t===void 0||t.abort(),this._currentTickCompleteState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:100,onComplete:this._tick})}initDelayedCursor(t){this.abortCursorAnimation(),this._tick(t?0:this.cursorDelay)}abortCursorAnimation(){let t=!1;[this._currentTickState,this._currentTickCompleteState].forEach(e=>{e&&!e.isDone()&&(t=!0,e.abort())}),this._currentCursorOpacity=1,t&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(t=>!t||t.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(t){let e=0,n=t-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n--;for(;/\S/.test(this._text[n])&&n>-1;)e++,n--;return t-e}findWordBoundaryRight(t){let e=0,n=t;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e}findLineBoundaryLeft(t){let e=0,n=t-1;for(;!/\n/.test(this._text[n])&&n>-1;)e++,n--;return t-e}findLineBoundaryRight(t){let e=0,n=t;for(;!/\n/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e}searchWordBoundary(t,e){const n=this._text;let i=t>0&&this._reSpace.test(n[t])&&(e===-1||!Vh.test(n[t-1]))?t-1:t,o=n[i];for(;i>0&&i<n.length&&!Fp.test(o);)i+=e,o=n[i];return e===-1&&Fp.test(o)&&i++,i}selectWord(t){t=t||this.selectionStart;const e=this.searchWordBoundary(t,-1),n=Math.max(e,this.searchWordBoundary(t,1));this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(t){t=t||this.selectionStart;const e=this.findLineBoundaryLeft(t),n=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(t){this.isEditing||!this.editable||(this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}updateSelectionOnMouseMove(t){if(this.getActiveControl())return;const e=this.hiddenTextarea;Fn(e).activeElement!==e&&e.focus();const n=this.getSelectionStartFromPointer(t),i=this.selectionStart,o=this.selectionEnd;(n!==this.__selectionStartOnMouseDown||i===o)&&(i===n||o===n)||(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==i||this.selectionEnd!==o)&&(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(t,e,n){const i=n.slice(0,t),o=this.graphemeSplit(i).length;if(t===e)return{selectionStart:o,selectionEnd:o};const l=n.slice(t,e),c=this.graphemeSplit(l).length;return{selectionStart:o,selectionEnd:o+c}}fromGraphemeToStringSelection(t,e,n){const i=n.slice(0,t),o=i.join("").length;if(t===e)return{selectionStart:o,selectionEnd:o};const l=n.slice(t,e),c=l.join("").length;return{selectionStart:o,selectionEnd:o+c}}_updateTextarea(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){const t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const t=this.hiddenTextarea;this.text=t.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const e=this.fromStringToGraphemeSelection(t.selectionStart,t.selectionEnd,t.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),n=this.get2DCursorLocation(t),i=n.lineIndex,o=n.charIndex,l=this.getValueOfPropertyAt(i,o,"fontSize")*this.lineHeight,c=e.leftOffset,h=this.getCanvasRetinaScaling(),f=this.canvas.upperCanvasEl,d=f.width/h,p=f.height/h,_=d-l,v=p-l,w=new F(e.left+c,e.top+e.topOffset+l).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new F(f.clientWidth/d,f.clientHeight/p));return w.x<0&&(w.x=0),w.x>_&&(w.x=_),w.y<0&&(w.y=0),w.y>v&&(w.y=v),w.x+=this.canvas._offset.left,w.y+=this.canvas._offset.top,{left:"".concat(w.x,"px"),top:"".concat(w.y,"px"),fontSize:"".concat(l,"px"),charHeight:l}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const t=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditing(){const t=this._textBeforeEdit!==this.text;return this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const t in this.styles)this._textLines[t]||delete this.styles[t]}removeStyleFromTo(t,e){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(t,!0),{lineIndex:o,charIndex:l}=this.get2DCursorLocation(e,!0);if(n!==o){if(this.styles[n])for(let c=i;c<this._unwrappedTextLines[n].length;c++)delete this.styles[n][c];if(this.styles[o])for(let c=l;c<this._unwrappedTextLines[o].length;c++){const h=this.styles[o][c];h&&(this.styles[n]||(this.styles[n]={}),this.styles[n][i+c-l]=h)}for(let c=n+1;c<=o;c++)delete this.styles[c];this.shiftLineStyles(o,n-o)}else if(this.styles[n]){const c=this.styles[n],h=l-i;for(let f=i;f<l;f++)delete c[f];for(const f in this.styles[n]){const d=parseInt(f,10);d>=l&&(c[d-h]=c[f],delete c[f])}}}shiftLineStyles(t,e){const n=Object.assign({},this.styles);for(const i in this.styles){const o=parseInt(i,10);o>t&&(this.styles[o+e]=n[o],n[o-e]||delete this.styles[o])}}insertNewlineStyleObject(t,e,n,i){const o={},l=this._unwrappedTextLines[t].length===e;let c=!1;n||(n=1),this.shiftLineStyles(t,n);const h=this.styles[t]?this.styles[t][e===0?e:e-1]:void 0;for(const d in this.styles[t]){const p=parseInt(d,10);p>=e&&(c=!0,o[p-e]=this.styles[t][d],l&&e===0||delete this.styles[t][d])}let f=!1;for(c&&!l&&(this.styles[t+n]=o,f=!0),f&&n--;n>0;)i&&i[n-1]?this.styles[t+n]={0:D({},i[n-1])}:h?this.styles[t+n]={0:D({},h)}:delete this.styles[t+n],n--;this._forceClearCache=!0}insertCharStyleObject(t,e,n,i){this.styles||(this.styles={});const o=this.styles[t],l=o?D({},o):{};n||(n=1);for(const h in l){const f=parseInt(h,10);f>=e&&(o[f+n]=l[f],l[f-n]||delete o[f])}if(this._forceClearCache=!0,i){for(;n--;)Object.keys(i[n]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+n]=D({},i[n]));return}if(!o)return;const c=o[e?e-1:1];for(;c&&n--;)this.styles[t][e+n]=D({},c)}insertNewStyleBlock(t,e,n){const i=this.get2DCursorLocation(e,!0),o=[0];let l=0;for(let h=0;h<t.length;h++)t[h]===`
`?(l++,o[l]=0):o[l]++;o[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,o[0],n),n=n&&n.slice(o[0]+1)),l&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+o[0],l);let c;for(c=1;c<l;c++)o[c]>0?this.insertCharStyleObject(i.lineIndex+c,0,o[c],n):n&&this.styles[i.lineIndex+c]&&n[0]&&(this.styles[i.lineIndex+c][0]=n[0]),n=n&&n.slice(o[c]+1);o[c]>0&&this.insertCharStyleObject(i.lineIndex+c,0,o[c],n)}removeChars(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t+1;this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;i>n&&this.removeStyleFromTo(n,i);const o=this.graphemeSplit(t);this.insertNewStyleBlock(o,n,e),this._text=[...this._text.slice(0,n),...o,...this._text.slice(i)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(t,e,n){n<=t?(e===t?this._selectionDirection=Ut:this._selectionDirection===_e&&(this._selectionDirection=Ut,this.selectionEnd=t),this.selectionStart=n):n>t&&n<e?this._selectionDirection===_e?this.selectionEnd=n:this.selectionStart=n:(e===t?this._selectionDirection=_e:this._selectionDirection===Ut&&(this._selectionDirection=_e,this.selectionStart=e),this.selectionEnd=n)}}class mA extends pA{initHiddenTextarea(){const t=this.canvas&&Fn(this.canvas.getElement())||us(),e=t.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(l=>{let[c,h]=l;return e.setAttribute(c,h)});const{top:n,left:i,fontSize:o}=this._calcTextareaPosition();e.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(i,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(o,";"),(this.hiddenTextareaContainer||t.body).appendChild(e),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",onCompositionUpdate:"onCompositionEnd"}).map(l=>{let[c,h]=l;return e.addEventListener(c,this[h].bind(this))}),this.hiddenTextarea=e}blur(){this.abortCursorAnimation()}onKeyDown(t){if(!this.isEditing)return;const e=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else if(t.keyCode in this.ctrlKeysMapDown&&(t.ctrlKey||t.metaKey))this[this.ctrlKeysMapDown[t.keyCode]](t);else return;t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(t){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey))this[this.ctrlKeysMapUp[t.keyCode]](t);else return;t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll()}onInput(t){const e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),!this.isEditing)return;const n=()=>{this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value===""){this.styles={},n();return}const i=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,o=this._text.length,l=i.length,c=this.selectionStart,h=this.selectionEnd,f=c!==h;let d,p,_=l-o,v,w;const E=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),O=c>E.selectionStart;f?(p=this._text.slice(c,h),_+=h-c):l<o&&(O?p=this._text.slice(h+_,h):p=this._text.slice(c,c-_));const M=i.slice(E.selectionEnd-_,E.selectionEnd);if(p&&p.length&&(M.length&&(d=this.getSelectionStyles(c,c+1,!1),d=M.map(()=>d[0])),f?(v=c,w=h):O?(v=h-p.length,w=h):(v=h,w=h+p.length),this.removeStyleFromTo(v,w)),M.length){const{copyPasteData:R}=Jn();e&&M.join("")===R.copiedText&&!Dt.disableStyleCopyPaste&&(d=R.copiedTextStyle),this.insertNewStyleBlock(M,c,d)}n()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(t){let{target:e}=t;const{selectionStart:n,selectionEnd:i}=e;this.compositionStart=n,this.compositionEnd=i,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:t}=Jn();t.copiedText=this.getSelectedText(),Dt.disableStyleCopyPaste?t.copiedTextStyle=void 0:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(t,e){let n=this._getLineLeftOffset(t),i;return e>0&&(i=this.__charBounds[t][e-1],n+=i.left+i.width),n}getDownCursorOffset(t,e){const n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),o=i.lineIndex;if(o===this._textLines.length-1||t.metaKey||t.keyCode===34)return this._text.length-n;const l=i.charIndex,c=this._getWidthBeforeCursor(o,l),h=this._getIndexOnLine(o+1,c);return this._textLines[o].slice(l).length+h+1+this.missingNewlineOffset(o)}_getSelectionForOffset(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart}getUpCursorOffset(t,e){const n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),o=i.lineIndex;if(o===0||t.metaKey||t.keyCode===33)return-n;const l=i.charIndex,c=this._getWidthBeforeCursor(o,l),h=this._getIndexOnLine(o-1,c),f=this._textLines[o].slice(0,l),d=this.missingNewlineOffset(o-1);return-this._textLines[o-1].length+h-f.length+(1-d)}_getIndexOnLine(t,e){const n=this._textLines[t];let o=this._getLineLeftOffset(t),l=0,c,h;for(let f=0,d=n.length;f<d;f++)if(c=this.__charBounds[t][f].width,o+=c,o>e){h=!0;const p=o-c,_=o,v=Math.abs(p-e);l=Math.abs(_-e)<v?f:f-1;break}return h||(l=n.length-1),l}moveCursorDown(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)}moveCursorUp(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",t)}_moveCursorUpOrDown(t,e){const n=this["get".concat(t,"CursorOffset")](e,this._selectionDirection===_e);if(e.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){const i=this.text.length;this.selectionStart=yi(0,this.selectionStart,i),this.selectionEnd=yi(0,this.selectionEnd,i),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(t){const e=this._selectionDirection===Ut?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),t!==0}moveCursorWithoutShift(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),t!==0}moveCursorLeft(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",t)}_move(t,e,n){let i;if(t.altKey)i=this["findWordBoundary".concat(n)](this[e]);else if(t.metaKey||t.keyCode===35||t.keyCode===36)i=this["findLineBoundary".concat(n)](this[e]);else return this[e]+=n==="Left"?-1:1,!0;return typeof i<"u"&&this[e]!==i?(this[e]=i,!0):!1}_moveLeft(t,e){return this._move(t,e,"Left")}_moveRight(t,e){return this._move(t,e,"Right")}moveCursorLeftWithoutShift(t){let e=!0;return this._selectionDirection=Ut,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e}moveCursorLeftWithShift(t){if(this._selectionDirection===_e&&this.selectionStart!==this.selectionEnd)return this._moveLeft(t,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection=Ut,this._moveLeft(t,"selectionStart")}moveCursorRight(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)}_moveCursorLeftOrRight(t,e){const n="moveCursor".concat(t).concat(e.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(t){if(this._selectionDirection===Ut&&this.selectionStart!==this.selectionEnd)return this._moveRight(t,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection=_e,this._moveRight(t,"selectionEnd")}moveCursorRightWithoutShift(t){let e=!0;return this._selectionDirection=_e,this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e}}function Hc(r){return r.button&&r.button!==1}class _A extends mA{constructor(){super(...arguments),A(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new gA(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(t){return this.draggableTextDelegate.onDragStart(t)}canDrop(t){return this.draggableTextDelegate.canDrop(t)}onMouseDown(t){if(!this.canvas)return;this.__newClickTime=+new Date;const e=t.pointer;this.isTripleClick(e)&&(this.fire("tripleclick",t),fh(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastSelected=this.selected}isTripleClick(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y}doubleClickHandler(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))}tripleClickHandler(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))}_mouseDownHandler(t){let{e}=t;!this.canvas||!this.editable||Hc(e)||this.getActiveControl()||this.draggableTextDelegate.start(e)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))}_mouseDownHandlerBefore(t){let{e}=t;!this.canvas||!this.editable||Hc(e)||(this.selected=this===this.canvas._activeObject)}mouseUpHandler(t){let{e,transform:n,button:i}=t;const o=this.draggableTextDelegate.end(e);if(this.canvas){this.canvas.textEditingManager.unregister(this);const l=this.canvas._activeObject;if(l&&l!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||Hc(e)||o||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(t){const e=this.getSelectionStartFromPointer(t),n=this.selectionStart,i=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(n,i,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(t){const e=this.canvas.getPointer(t).transform(Me(this.calcTransformMatrix())).add(new F(-this._getLeftOffset(),-this._getTopOffset()));let n=0,i=0,o=0;for(let d=0;d<this._textLines.length&&n<=e.y;d++)n+=this.getHeightOfLine(d),o=d,d>0&&(i+=this._textLines[d-1].length+this.missingNewlineOffset(d-1));let c=Math.abs(this._getLineLeftOffset(o));const h=this._textLines[o].length,f=this.__charBounds[o];for(let d=0;d<h;d++){const p=f[d].kernedWidth,_=c+p;if(e.x<=_){Math.abs(e.x-_)<=Math.abs(e.x-c)&&i++;break}c=_,i++}return Math.min(this.flipX?h-i:i,this._text.length)}}const Fa="moveCursorUp",Ia="moveCursorDown",Ba="moveCursorLeft",ja="moveCursorRight",Wa="exitEditing",vA={9:Wa,27:Wa,33:Fa,34:Ia,35:ja,36:Ba,37:Ba,38:Fa,39:ja,40:Ia},yA={9:Wa,27:Wa,33:Fa,34:Ia,35:Ba,36:ja,37:ja,38:Fa,39:Ba,40:Ia},xA={67:"copy",88:"cut"},wA={65:"selectAll"},CA={selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1,keysMap:vA,keysMapRtl:yA,ctrlKeysMapDown:wA,ctrlKeysMapUp:xA};class Kr extends _A{static getDefaults(){return D(D({},super.getDefaults()),Kr.ownDefaults)}get type(){const t=super.type;return t==="itext"?"i-text":t}constructor(t,e){super(t,e),this.initBehavior()}_set(t,e){return this.isEditing&&this._savedProps&&t in this._savedProps?(this._savedProps[t]=e,this):(t==="canvas"&&(this.canvas instanceof xh&&this.canvas.textEditingManager.remove(this),e instanceof xh&&e.textEditingManager.add(this)),super._set(t,e))}setSelectionStart(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)}setSelectionEnd(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)}_updateAndFire(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(t,e,n)}setSelectionStyles(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(t,e,n)}get2DCursorLocation(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(t,e)}render(t){super.render(t),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(t){const e=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(t);return this.isEditing=e,n}renderCursorOrSelection(){if(!this.isEditing)return;const t=this.clearContextTop(!0);if(!t)return;const e=this._getCursorBoundaries();this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),this.canvas.contextTopDirty=!0,t.restore()}_getCursorBoundaries(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),i=this._getTopOffset(),o=this._getCursorBoundariesOffsets(t,e);return{left:n,top:i,leftOffset:o.left,topOffset:o.top}}_getCursorBoundariesOffsets(t,e){return e?this.__getCursorBoundariesOffsets(t):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(t)}__getCursorBoundariesOffsets(t){let e=0,n=0;const{charIndex:i,lineIndex:o}=this.get2DCursorLocation(t);for(let f=0;f<o;f++)e+=this.getHeightOfLine(f);const l=this._getLineLeftOffset(o),c=this.__charBounds[o][i];c&&(n=c.left),this.charSpacing!==0&&i===this._textLines[o].length&&(n-=this._getWidthOfCharSpacing());const h={top:e,left:l+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===_e||this.textAlign===qn||this.textAlign===$s?h.left*=-1:(this.textAlign===Ut||this.textAlign===Ra||this.textAlign===bt||this.textAlign===Ks)&&(h.left=l-(n>0?n:0))),h}renderCursorAt(t){const e=this._getCursorBoundaries(t,!0);this._renderCursor(this.canvas.contextTop,e,t)}renderCursor(t,e){this._renderCursor(t,e,this.selectionStart)}_renderCursor(t,e,n){const i=this.get2DCursorLocation(n),o=i.lineIndex,l=i.charIndex>0?i.charIndex-1:0,c=this.getValueOfPropertyAt(o,l,"fontSize"),h=this.scaleX*this.canvas.getZoom(),f=this.cursorWidth/h,d=this.getValueOfPropertyAt(o,l,"deltaY"),p=e.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(o)/this.lineHeight-c*(1-this._fontSizeFraction);this.inCompositionMode&&this.renderSelection(t,e),t.fillStyle=this.cursorColor||this.getValueOfPropertyAt(o,l,"fill"),t.globalAlpha=this._currentCursorOpacity,t.fillRect(e.left+e.leftOffset-f/2,p+e.top+d,f,c)}renderSelection(t,e){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(t,n,e)}renderDragSourceEffect(){const t=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,t,this._getCursorBoundaries(t.selectionStart,!0))}renderDropTargetEffect(t){const e=this.getSelectionStartFromPointer(t);this.renderCursorAt(e)}_renderSelection(t,e,n){const i=e.selectionStart,o=e.selectionEnd,l=this.textAlign.includes(qn),c=this.get2DCursorLocation(i),h=this.get2DCursorLocation(o),f=c.lineIndex,d=h.lineIndex,p=c.charIndex<0?0:c.charIndex,_=h.charIndex<0?0:h.charIndex;for(let v=f;v<=d;v++){const w=this._getLineLeftOffset(v)||0;let E=this.getHeightOfLine(v),O=0,M=0,R=0;if(v===f&&(M=this.__charBounds[f][p].left),v>=f&&v<d)R=l&&!this.isEndOfWrapping(v)?this.width:this.getLineWidth(v)||5;else if(v===d)if(_===0)R=this.__charBounds[d][_].left;else{const nt=this._getWidthOfCharSpacing();R=this.__charBounds[d][_-1].left+this.__charBounds[d][_-1].width-nt}O=E,(this.lineHeight<1||v===d&&this.lineHeight>1)&&(E/=this.lineHeight);let X=n.left+w+M,B=E,$=0;const tt=R-M;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",B=1,$=E):t.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===_e||this.textAlign===qn||this.textAlign===$s?X=this.width-X-tt:(this.textAlign===Ut||this.textAlign===Ra||this.textAlign===bt||this.textAlign===Ks)&&(X=n.left+w-R)),t.fillRect(X,n.top+n.topOffset+$,tt,B),n.topOffset+=O}}getCurrentCharFontSize(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")}getCurrentCharColor(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fill")}_getCurrentCharIndex(){const t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}dispose(){this._exitEditing(),this.draggableTextDelegate.dispose(),super.dispose()}}A(Kr,"ownDefaults",CA);A(Kr,"type","IText");dt.setClass(Kr);dt.setClass(Kr,"i-text");const SA={minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1};class gs extends Kr{static getDefaults(){return D(D({},super.getDefaults()),{},{controls:F0()},gs.ownDefaults)}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(qn)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(t){let e=0,n=0,i=0;const o={};for(let l=0;l<t.graphemeLines.length;l++)t.graphemeText[i]===`
`&&l>0?(n=0,i++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[i])&&l>0&&(n++,i++),o[l]={line:e,offset:n},i+=t.graphemeLines[l].length,n+=t.graphemeLines[l].length;return o}styleHas(t,e){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];n&&(e=n.line)}return super.styleHas(t,e)}isEmptyStyles(t){if(!this.styles)return!0;let e=0,n=t+1,i,o=!1;const l=this._styleMap[t],c=this._styleMap[t+1];l&&(t=l.line,e=l.offset),c&&(n=c.line,o=n===t,i=c.offset);const h=typeof t>"u"?this.styles:{line:this.styles[t]};for(const f in h)for(const d in h[f]){const p=parseInt(d,10);if(p>=e&&(!o||p<i))for(const _ in h[f][d])return!1}return!0}_getStyleDeclaration(t,e){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[t];if(!n)return{};t=n.line,e=n.offset+e}return super._getStyleDeclaration(t,e)}_setStyleDeclaration(t,e,n){const i=this._styleMap[t];t=i.line,e=i.offset+e,this.styles[t][e]=n}_deleteStyleDeclaration(t,e){const n=this._styleMap[t];t=n.line,e=n.offset+e,delete this.styles[t][e]}_getLineStyle(t){const e=this._styleMap[t];return!!this.styles[e.line]}_setLineStyle(t){const e=this._styleMap[t];this.styles[e.line]={}}_wrapText(t,e){this.isWrapping=!0;const n=this.getGraphemeDataForRender(t),i=[];for(let o=0;o<n.wordsData.length;o++)i.push(...this._wrapLine(o,e,n));return this.isWrapping=!1,i}getGraphemeDataForRender(t){const e=this.splitByGrapheme,n=e?"":" ";let i=0;return{wordsData:t.map((l,c)=>{let h=0;const f=e?this.graphemeSplit(l):this.wordSplit(l);return f.length===0?[{word:[],width:0}]:f.map(d=>{const p=e?[d]:this.graphemeSplit(d),_=this._measureWord(p,c,h);return i=Math.max(_,i),h+=p.length+n.length,{word:p,width:_}})}),largestWordWidth:i}}_measureWord(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=0,o;const l=!0;for(let c=0,h=t.length;c<h;c++){const f=this._getGraphemeBox(t[c],e,c+n,o,l);i+=f.kernedWidth,o=t[c]}return i}wordSplit(t){return t.split(this._wordJoiners)}_wrapLine(t,e,n){let{largestWordWidth:i,wordsData:o}=n,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const c=this._getWidthOfCharSpacing(),h=this.splitByGrapheme,f=[],d=h?"":" ";let p=0,_=[],v=0,w=0,E=!0;e-=l;const O=Math.max(e,i,this.dynamicMinWidth),M=o[t];v=0;let R;for(R=0;R<M.length;R++){const{word:X,width:B}=M[R];v+=X.length,p+=w+B-c,p>O&&!E?(f.push(_),_=[],p=B,E=!0):p+=c,!E&&!h&&_.push(d),_=_.concat(X),w=h?0:this._measureWord([d],t,v),v++,E=!1}return R&&f.push(_),i+l>this.dynamicMinWidth&&(this.dynamicMinWidth=i-c+l),f}isEndOfWrapping(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line}missingNewlineOffset(t,e){return this.splitByGrapheme&&!e?this.isEndOfWrapping(t)?1:0:1}_splitTextIntoLines(t){const e=super._splitTextIntoLines(t),n=this._wrapText(e.lines,this.width),i=new Array(n.length);for(let o=0;o<n.length;o++)i[o]=n[o].join("");return e.lines=i,e.graphemeLines=n,e}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const t=new Map;for(const e in this._styleMap){const n=parseInt(e,10);if(this._textLines[n]){const i=this._styleMap[e].line;t.set("".concat(i),!0)}}for(const e in this.styles)t.has(e)||delete this.styles[e]}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...t])}}A(gs,"type","Textbox");A(gs,"textLayoutProperties",[...Kr.textLayoutProperties,"width"]);A(gs,"ownDefaults",SA);dt.setClass(gs);class bA{constructor(){A(this,"resources",{})}applyFilters(t,e,n,i,o){const l=o.getContext("2d");if(!l)return;l.drawImage(e,0,0,n,i);const c=l.getImageData(0,0,n,i),h=l.getImageData(0,0,n,i),f={sourceWidth:n,sourceHeight:i,imageData:c,originalEl:e,originalImageData:h,canvasEl:o,ctx:l,filterBackend:this};t.forEach(p=>{p.applyTo(f)});const{imageData:d}=f;return(d.width!==n||d.height!==i)&&(o.width=d.width,o.height=d.height),l.putImageData(d,0,0),f}}class __{constructor(){let{tileSize:t=Dt.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};A(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),A(this,"resources",{}),this.tileSize=t,this.setupGLContext(t,t),this.captureGPUInfo()}setupGLContext(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.chooseFastestCopyGLTo2DMethod(t,e)}chooseFastestCopyGLTo2DMethod(t,e){const n=fe(),i=new ArrayBuffer(t*e*4);if(Dt.forceGLPutImageData){this.imageBuffer=i,this.copyGLTo2D=Yc;return}const o={imageBuffer:i},l={destinationWidth:t,destinationHeight:e,targetCanvas:n};let c;n.width=t,n.height=e,c=fi().performance.now(),this.copyGLTo2D.call(o,this.gl,l);const h=fi().performance.now()-c;c=fi().performance.now(),Yc.call(o,this.gl,l);const f=fi().performance.now()-c;h>f&&(this.imageBuffer=i,this.copyGLTo2D=Yc)}createWebGLCanvas(t,e){const n=fe();n.width=t,n.height=e;const i={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},o=n.getContext("webgl",i);o&&(o.clearColor(0,0,0,0),this.canvas=n,this.gl=o)}applyFilters(t,e,n,i,o,l){const c=this.gl,h=o.getContext("2d");if(!c||!h)return;let f;l&&(f=this.getCachedTexture(l,e));const d={originalWidth:e.width||e.originalWidth||0,originalHeight:e.height||e.originalHeight||0,sourceWidth:n,sourceHeight:i,destinationWidth:n,destinationHeight:i,context:c,sourceTexture:this.createTexture(c,n,i,f?void 0:e),targetTexture:this.createTexture(c,n,i),originalTexture:f||this.createTexture(c,n,i,f?void 0:e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:o},p=c.createFramebuffer();return c.bindFramebuffer(c.FRAMEBUFFER,p),t.forEach(_=>{_&&_.applyTo(d)}),TA(d),this.copyGLTo2D(c,d),c.bindTexture(c.TEXTURE_2D,null),c.deleteTexture(d.sourceTexture),c.deleteTexture(d.targetTexture),c.deleteFramebuffer(p),h.setTransform(1,0,0,1,0,0),d}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(t,e,n,i,o){const{NEAREST:l,TEXTURE_2D:c,RGBA:h,UNSIGNED_BYTE:f,CLAMP_TO_EDGE:d,TEXTURE_MAG_FILTER:p,TEXTURE_MIN_FILTER:_,TEXTURE_WRAP_S:v,TEXTURE_WRAP_T:w}=t,E=t.createTexture();return t.bindTexture(c,E),t.texParameteri(c,p,o||l),t.texParameteri(c,_,o||l),t.texParameteri(c,v,d),t.texParameteri(c,w,d),i?t.texImage2D(c,0,h,h,f,i):t.texImage2D(c,0,h,e,n,0,h,f,null),E}getCachedTexture(t,e,n){const{textureCache:i}=this;if(i[t])return i[t];{const o=this.createTexture(this.gl,e.width,e.height,e,n);return o&&(i[t]=o),o}}evictCachesForKey(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])}copyGLTo2D(t,e){const n=t.canvas,i=e.targetCanvas,o=i.getContext("2d");if(!o)return;o.translate(0,i.height),o.scale(1,-1);const l=n.height-i.height;o.drawImage(n,0,l,i.width,i.height,0,0,i.width,i.height)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const t=this.gl,e={renderer:"",vendor:""};if(!t)return e;const n=t.getExtension("WEBGL_debug_renderer_info");if(n){const i=t.getParameter(n.UNMASKED_RENDERER_WEBGL),o=t.getParameter(n.UNMASKED_VENDOR_WEBGL);i&&(e.renderer=i.toLowerCase()),o&&(e.vendor=o.toLowerCase())}return this.gpuInfo=e,e}}function TA(r){const t=r.targetCanvas,e=t.width,n=t.height,i=r.destinationWidth,o=r.destinationHeight;(e!==i||n!==o)&&(t.width=i,t.height=o)}function Yc(r,t){const e=t.targetCanvas,n=e.getContext("2d"),i=t.destinationWidth,o=t.destinationHeight,l=i*o*4;if(!n)return;const c=new Uint8Array(this.imageBuffer,0,l),h=new Uint8ClampedArray(this.imageBuffer,0,l);r.readPixels(0,0,i,o,r.RGBA,r.UNSIGNED_BYTE,c);const f=new ImageData(h,i,o);n.putImageData(f,0,0)}let Uc;function OA(){const{WebGLProbe:r}=Jn();return r.queryWebGL(fe()),Dt.enableGLFiltering&&r.isSupported(Dt.textureSize)?new __({tileSize:Dt.textureSize}):new bA}function Nc(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return!Uc&&r&&(Uc=OA()),Uc}const EA=["filters","resizeFilter","src","crossOrigin"],PA={strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0},v_=["cropX","cropY"];class mn extends Se{static getDefaults(){return D(D({},super.getDefaults()),mn.ownDefaults)}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(D({filters:[]},e)),A(this,"_lastScaleX",1),A(this,"_lastScaleY",1),A(this,"_filterScalingX",1),A(this,"_filterScalingY",1),this.cacheKey="texture".concat(zr()),this.setElement(typeof t=="string"?(this.canvas&&Fn(this.canvas.getElement())||us()).getElementById(t):t,e)}getElement(){return this._element}setElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=t,this._originalElement=t,this._setWidthHeight(e),t.classList.add(mn.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(t){const e=Nc(!1);e instanceof __&&e.evictCachesForKey(t)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(t=>{const e=this[t];e&&Jn().dispose(e),this[t]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const t=this.getElement();return t?{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}:{width:0,height:0}}_stroke(t){if(!this.stroke||this.strokeWidth===0)return;const e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,-n),t.lineTo(e,-n),t.lineTo(e,n),t.lineTo(-e,n),t.lineTo(-e,-n),t.closePath()}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=[];return this.filters.forEach(n=>{n&&e.push(n.toObject())}),D(D({},super.toObject([...v_,...t])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const t=[],e=this._element,n=-this.width/2,i=-this.height/2;let o=[],l=[],c="",h="";if(!e)return[];if(this.hasCrop()){const f=zr();o.push('<clipPath id="imageCrop_'+f+`">
`,'	<rect x="'+n+'" y="'+i+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),c=' clip-path="url(#imageCrop_'+f+')" '}if(this.imageSmoothing||(h=' image-rendering="optimizeSpeed"'),t.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(i-this.cropY,'" width="').concat(e.width||e.naturalWidth,'" height="').concat(e.height||e.naturalHeight,'"').concat(h).concat(c,`></image>
`)),this.stroke||this.strokeDashArray){const f=this.fill;this.fill=null,l=['	<rect x="'.concat(n,'" y="').concat(i,'" width="').concat(this.width,'" height="').concat(this.height,'" styles="').concat(this.getSvgStyles(),`" />
`)],this.fill=f}return this.paintFirst!=="fill"?o=o.concat(l,t):o=o.concat(t,l),o}getSrc(t){const e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src")||"":e.src:this.src||""}getSvgSrc(t){return this.getSrc(t)}setSrc(t){let{crossOrigin:e,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Gs(t,{crossOrigin:e,signal:n}).then(i=>{typeof e<"u"&&this.set({crossOrigin:e}),this.setElement(i)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const t=this.resizeFilter,e=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),i=n.x,o=n.y,l=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||i>e&&o>e){this._element=l,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,this._lastScaleY=o;return}const c=fe(),h=l.width,f=l.height;c.width=h,c.height=f,this._element=c,this._lastScaleX=t.scaleX=i,this._lastScaleY=t.scaleY=o,Nc().applyFilters([t],l,h,f,this._element),this._filterScalingX=c.width/this._originalElement.width,this._filterScalingY=c.height/this._originalElement.height}applyFilters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(t=t.filter(o=>o&&!o.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),t.length===0){this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,this._filterScalingY=1;return}const e=this._originalElement,n=e.naturalWidth||e.width,i=e.naturalHeight||e.height;if(this._element===this._originalElement){const o=fe();o.width=n,o.height=i,this._element=o,this._filteredEl=o}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,i),this._lastScaleX=1,this._lastScaleY=1);Nc().applyFilters(t,this._originalElement,n,i,this._element),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(t){t.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)}drawCacheOnCanvas(t){t.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(t)}shouldCache(){return this.needsItsOwnCache()}_renderFill(t){const e=this._element;if(!e)return;const n=this._filterScalingX,i=this._filterScalingY,o=this.width,l=this.height,c=Math.max(this.cropX,0),h=Math.max(this.cropY,0),f=e.naturalWidth||e.width,d=e.naturalHeight||e.height,p=c*n,_=h*i,v=Math.min(o*n,f-p),w=Math.min(l*i,d-_),E=-o/2,O=-l/2,M=Math.min(o,f/n-c),R=Math.min(l,d/i-h);e&&t.drawImage(e,p,_,v,w,E,O,M,R)}_needsResize(){const t=this.getTotalObjectScaling();return t.x!==this._lastScaleX||t.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:t,height:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getOriginalSize();this.width=t||n.width,this.height=e||n.height}parsePreserveAspectRatioAttribute(){const t=t0(this.preserveAspectRatio||""),e=this.width,n=this.height,i={width:e,height:n};let o=this._element.width,l=this._element.height,c=1,h=1,f=0,d=0,p=0,_=0,v;return t&&(t.alignX!==rn||t.alignY!==rn)?(t.meetOrSlice==="meet"&&(c=h=z0(this._element,i),v=(e-o*c)/2,t.alignX==="Min"&&(f=-v),t.alignX==="Max"&&(f=v),v=(n-l*h)/2,t.alignY==="Min"&&(d=-v),t.alignY==="Max"&&(d=v)),t.meetOrSlice==="slice"&&(c=h=V0(this._element,i),v=o-e/c,t.alignX==="Mid"&&(p=v/2),t.alignX==="Max"&&(p=v),v=l-n/h,t.alignY==="Mid"&&(_=v/2),t.alignY==="Max"&&(_=v),o=e/c,l=n/h)):(c=e/o,h=n/l),{width:o,height:l,scaleX:c,scaleY:h,offsetLeft:f,offsetTop:d,cropX:p,cropY:_}}static fromObject(t){let{filters:e,resizeFilter:n,src:i,crossOrigin:o}=t,l=ee(t,EA),c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Promise.all([Gs(i,D(D({},c),{},{crossOrigin:o})),e&&os(e,c),n&&os([n],c),ho(l,c)]).then(h=>{let[f,d=[],[p]=[],_={}]=h;return new this(f,D(D({},l),{},{src:i,filters:d,resizeFilter:p},_))})}static fromURL(t){let{crossOrigin:e=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return Gs(t,{crossOrigin:e,signal:n}).then(o=>new this(o,i))}static async fromElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i=xr(t,this.ATTRIBUTE_NAMES,n);return this.fromURL(i["xlink:href"],e,i).catch(o=>(console.log(o),null))}}A(mn,"type","Image");A(mn,"cacheProperties",[...yr,...v_]);A(mn,"ownDefaults",PA);A(mn,"CSS_CANVAS","canvas-img");A(mn,"ATTRIBUTE_NAMES",[...Vr,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]);dt.setClass(mn);dt.setSVGClass(mn);sl(OP);const DA=r=>new F(r.width,r.height),AA=r=>function(t,e,n){var i,o;const l=n.points[r].x-n.pathOffset.x,c=n.points[r].y-n.pathOffset.y;return new F(l,c).transform(ke((i=(o=n.canvas)===null||o===void 0?void 0:o.viewportTransform)!==null&&i!==void 0?i:pn,n.calcTransformMatrix()))},MA=(r,t,e,n)=>{const i=t.target,o=t.pointIndex,l=fo(t,bt,bt,e,n),c=DA(i),h=i._getTransformedDimensions(),f=c.divide(h),d=new F(i.flipX?-1:1,i.flipY?-1:1),p=l.multiply(d).multiply(f).add(i.pathOffset);return i.points[o]=p,i.setDimensions(),!0},kA=(r,t)=>function(e,n,i,o){const l=n.target,c=new F(l.points[(r>0?r:l.points.length)-1]),h=c.subtract(l.pathOffset).transform(l.calcOwnMatrix()),f=t(e,D(D({},n),{},{pointIndex:r}),i,o),d=new F(l.flipX?-1:1,l.flipY?-1:1),p=c.subtract(l.pathOffset).divide(l._getNonTransformedDimensions()).multiply(d);return l.setPositionByOrigin(h,p.x+.5,p.y+.5),f};function LA(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e={};for(let n=0;n<(typeof r=="number"?r:r.points.length);n++)e["p".concat(n)]=new Ne(D({actionName:"modifyPoly",positionHandler:AA(n),actionHandler:kA(n,MA)},t));return e}var RA=Object.freeze({__proto__:null,changeWidth:gh,createObjectDefaultControls:uu,createPolyControls:LA,createResizeControls:R0,createTextboxDefaultControls:F0,dragHandler:f0,getLocalPoint:fo,renderCircleControl:C0,renderSquareControl:S0,rotationStyleHandler:b0,rotationWithSnapping:T0,scaleCursorStyleHandler:Vi,scaleOrSkewActionName:Ws,scaleSkewCursorStyleHandler:di,scalingEqually:js,scalingX:P0,scalingXOrSkewingY:mh,scalingY:D0,scalingYOrSkewingX:_h,skewCursorStyleHandler:A0,skewHandlerX:k0,skewHandlerY:L0,wrapWithFireEvent:Si,wrapWithFixedAnchor:bi});const hl=r=>r.webgl!==void 0,wh="precision highp float",FA=`
    `.concat(wh,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),IA=`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`,BA=["type"],jA=["type"];class Ee{get type(){return this.constructor.type}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=ee(t,BA);A(this,"vertexSource",IA),Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return FA}createProgram(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.vertexSource;const{WebGLProbe:{GLPrecision:i="highp"}}=Jn();i!=="highp"&&(e=e.replace(new RegExp(wh,"g"),wh.replace("highp",i)));const o=t.createShader(t.VERTEX_SHADER),l=t.createShader(t.FRAGMENT_SHADER),c=t.createProgram();if(!o||!l||!c)throw new Error("Vertex, fragment shader or program creation error");if(t.shaderSource(o,n),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Error("Vertex shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(o)));if(t.shaderSource(l,e),t.compileShader(l),!t.getShaderParameter(l,t.COMPILE_STATUS))throw new Error("Fragment shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(l)));if(t.attachShader(c,o),t.attachShader(c,l),t.linkProgram(c),!t.getProgramParameter(c,t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+t.getProgramInfoLog(c));const h=this.getUniformLocations(t,c)||{};return h.uStepW=t.getUniformLocation(c,"uStepW"),h.uStepH=t.getUniformLocation(c,"uStepH"),{program:c,attributeLocations:this.getAttributeLocations(t,c),uniformLocations:h}}getAttributeLocations(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}}getUniformLocations(t,e){return{}}sendAttributeData(t,e,n){const i=e.aPosition,o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}_setupFrameBuffer(t){const e=t.context;if(t.passes>1){const n=t.destinationWidth,i=t.destinationHeight;(t.sourceWidth!==n||t.sourceHeight!==i)&&(e.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(e,n,i)),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.targetTexture,0)}else e.bindFramebuffer(e.FRAMEBUFFER,null),e.finish()}_swapTextures(t){t.passes--,t.pass++;const e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e}isNeutralState(t){const e=this.mainParameter,n=this.constructor.defaults[e];if(e){const i=this[e];return Array.isArray(n)&&Array.isArray(i)?n.every((o,l)=>o===i[l]):n===i}else return!1}applyTo(t){hl(t)?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){}getCacheKey(){return this.type}retrieveShader(t){const e=this.getCacheKey();return t.programCache[e]||(t.programCache[e]=this.createProgram(t.context)),t.programCache[e]}applyToWebGL(t){const e=t.context,n=this.retrieveShader(t);t.pass===0&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(n.program),this.sendAttributeData(e,n.attributeLocations,t.aPosition),e.uniform1f(n.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(n.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,n.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(t,e,n){t.activeTexture(n),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)}unbindAdditionalTexture(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)}getMainParameter(){return this.mainParameter?this[this.mainParameter]:void 0}setMainParameter(t){this.mainParameter&&(this[this.mainParameter]=t)}sendUniformData(t,e){}createHelpLayer(t){if(!t.helpLayer){const e=fe();e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}}toObject(){const t=this.mainParameter;return D({type:this.type},t?{[t]:this[t]}:{})}toJSON(){return this.toObject()}static async fromObject(t,e){let n=ee(t,jA);return new this(n)}}A(Ee,"type","BaseFilter");const WA={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `},XA={color:"#F95C63",mode:"multiply",alpha:1};class mu extends Ee{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(WA[this.mode],`
        }
      }
      `)}applyTo2d(t){let{imageData:{data:e}}=t;const n=new qt(this.color).getSource(),i=n[0]*this.alpha,o=n[1]*this.alpha,l=n[2]*this.alpha,c=1-this.alpha;for(let h=0;h<e.length;h+=4){const f=e[h],d=e[h+1],p=e[h+2];switch(this.mode){case"multiply":e[h]=f*i/255,e[h+1]=d*o/255,e[h+2]=p*l/255;break;case"screen":e[h]=255-(255-f)*(255-i)/255,e[h+1]=255-(255-d)*(255-o)/255,e[h+2]=255-(255-p)*(255-l)/255;break;case"add":e[h]=f+i,e[h+1]=d+o,e[h+2]=p+l;break;case"difference":e[h]=Math.abs(f-i),e[h+1]=Math.abs(d-o),e[h+2]=Math.abs(p-l);break;case"subtract":e[h]=f-i,e[h+1]=d-o,e[h+2]=p-l;break;case"darken":e[h]=Math.min(f,i),e[h+1]=Math.min(d,o),e[h+2]=Math.min(p,l);break;case"lighten":e[h]=Math.max(f,i),e[h+1]=Math.max(d,o),e[h+2]=Math.max(p,l);break;case"overlay":e[h]=i<128?2*f*i/255:255-2*(255-f)*(255-i)/255,e[h+1]=o<128?2*d*o/255:255-2*(255-d)*(255-o)/255,e[h+2]=l<128?2*p*l/255:255-2*(255-p)*(255-l)/255;break;case"exclusion":e[h]=i+f-2*i*f/255,e[h+1]=o+d-2*o*d/255,e[h+2]=l+p-2*l*p/255;break;case"tint":e[h]=i+f*c,e[h+1]=o+d*c,e[h+2]=l+p*c}}}getUniformLocations(t,e){return{uColor:t.getUniformLocation(e,"uColor")}}sendUniformData(t,e){const n=new qt(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,t.uniform4fv(e.uColor,n)}toObject(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}A(mu,"defaults",XA);A(mu,"type","BlendColor");dt.setClass(mu);const HA={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},YA=["type","image"],UA={mode:"multiply",alpha:1,vertexSource:`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `};class _u extends Ee{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return HA[this.mode]}applyToWebGL(t){const e=t.context,n=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,n,e.TEXTURE1),super.applyToWebGL(t),this.unbindAdditionalTexture(e,e.TEXTURE1)}createTexture(t,e){return t.getCachedTexture(e.cacheKey,e.getElement())}calculateMatrix(){const t=this.image,{width:e,height:n}=t.getElement();return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/n,1]}applyTo2d(t){let{imageData:{data:e,width:n,height:i},filterBackend:{resources:o}}=t;const l=this.image;o.blendImage||(o.blendImage=fe());const c=o.blendImage,h=c.getContext("2d");c.width!==n||c.height!==i?(c.width=n,c.height=i):h.clearRect(0,0,n,i),h.setTransform(l.scaleX,0,0,l.scaleY,l.left,l.top),h.drawImage(l.getElement(),0,0,n,i);const f=h.getImageData(0,0,n,i).data;for(let d=0;d<e.length;d+=4){const p=e[d],_=e[d+1],v=e[d+2],w=e[d+3],E=f[d],O=f[d+1],M=f[d+2],R=f[d+3];switch(this.mode){case"multiply":e[d]=p*E/255,e[d+1]=_*O/255,e[d+2]=v*M/255,e[d+3]=w*R/255;break;case"mask":e[d+3]=R;break}}}getUniformLocations(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}}sendUniformData(t,e){const n=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,n)}toObject(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}static fromObject(t,e){let{type:n,image:i}=t,o=ee(t,YA);return mn.fromObject(i,e).then(l=>new this(D(D({},o),{},{image:l})))}}A(_u,"type","BlendImage");A(_u,"defaults",UA);dt.setClass(_u);const NA=`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `,zA={blur:0,mainParameter:"blur"};class vu extends Ee{getFragmentSource(){return NA}applyTo(t){hl(t)?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){t.imageData=this.simpleBlur(t)}simpleBlur(t){let{ctx:e,imageData:n,filterBackend:{resources:i}}=t;const{width:o,height:l}=n;i.blurLayer1||(i.blurLayer1=fe(),i.blurLayer2=fe());const c=i.blurLayer1,h=i.blurLayer2;(c.width!==o||c.height!==l)&&(h.width=c.width=o,h.height=c.height=l);const f=c.getContext("2d"),d=h.getContext("2d"),p=15,_=this.blur*.06*.5;let v,w,E,O;for(f.putImageData(n,0,0),d.clearRect(0,0,o,l),O=-p;O<=p;O++)v=(Math.random()-.5)/4,w=O/p,E=_*w*o+v,d.globalAlpha=1-Math.abs(w),d.drawImage(c,E,v),f.drawImage(h,0,0),d.globalAlpha=1,d.clearRect(0,0,h.width,h.height);for(O=-p;O<=p;O++)v=(Math.random()-.5)/4,w=O/p,E=_*w*l+v,d.globalAlpha=1-Math.abs(w),d.drawImage(c,v,E),f.drawImage(h,0,0),d.globalAlpha=1,d.clearRect(0,0,h.width,h.height);e.drawImage(c,0,0);const M=e.getImageData(0,0,c.width,c.height);return f.globalAlpha=1,f.clearRect(0,0,c.width,c.height),M}getUniformLocations(t,e){return{delta:t.getUniformLocation(e,"uDelta")}}sendUniformData(t,e){const n=this.chooseRightDelta();t.uniform2fv(e.delta,n)}chooseRightDelta(){let t=1;const e=[0,0];this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio);const n=t*this.blur*.12;return this.horizontal?e[0]=n:e[1]=n,e}}A(vu,"type","Blur");A(vu,"defaults",zA);dt.setClass(vu);const VA=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`,GA={brightness:0,mainParameter:"brightness"};class yu extends Ee{getFragmentSource(){return VA}applyTo2d(t){let{imageData:{data:e}}=t;if(this.brightness===0)return;const n=Math.round(this.brightness*255);for(let i=0;i<e.length;i+=4)e[i]=e[i]+n,e[i+1]=e[i+1]+n,e[i+2]=e[i+2]+n}getUniformLocations(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}}sendUniformData(t,e){t.uniform1f(e.uBrightness,this.brightness)}}A(yu,"type","Brightness");A(yu,"defaults",GA);dt.setClass(yu);const $A=`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`,KA=["matrix"],y_={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0};class mo extends Ee{setOptions(t){let{matrix:e}=t,n=ee(t,KA);e&&(this.matrix=[...e]),Object.assign(this,n)}getFragmentSource(){return $A}applyTo2d(t){const e=t.imageData,n=e.data,i=this.matrix,o=this.colorsOnly;for(let l=0;l<n.length;l+=4){const c=n[l],h=n[l+1],f=n[l+2];if(o)n[l]=c*i[0]+h*i[1]+f*i[2]+i[4]*255,n[l+1]=c*i[5]+h*i[6]+f*i[7]+i[9]*255,n[l+2]=c*i[10]+h*i[11]+f*i[12]+i[14]*255;else{const d=n[l+3];n[l]=c*i[0]+h*i[1]+f*i[2]+d*i[3]+i[4]*255,n[l+1]=c*i[5]+h*i[6]+f*i[7]+d*i[8]+i[9]*255,n[l+2]=c*i[10]+h*i[11]+f*i[12]+d*i[13]+i[14]*255,n[l+3]=c*i[15]+h*i[16]+f*i[17]+d*i[18]+i[19]*255}}}getUniformLocations(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}}sendUniformData(t,e){const n=this.matrix,i=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],o=[n[4],n[9],n[14],n[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,i),t.uniform4fv(e.uConstants,o)}}A(mo,"type","ColorMatrix");A(mo,"defaults",y_);dt.setClass(mo);function Ti(r,t){var e;const n=(e=class extends mo{},A(e,"type",r),A(e,"defaults",D(D({},y_),{},{mainParameter:void 0,matrix:t})),e);return dt.setClass(n,r),n}Ti("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Ti("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Ti("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Ti("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Ti("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Ti("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Ti("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);const qA=["subFilters"];class x_ extends Ee{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{subFilters:e=[]}=t,n=ee(t,qA);super(n),this.subFilters=e}applyTo(t){hl(t)&&(t.passes+=this.subFilters.length-1),this.subFilters.forEach(e=>{e.applyTo(t)})}toObject(){return D(D({},super.toObject()),{},{subFilters:this.subFilters.map(t=>t.toObject())})}isNeutralState(){return!this.subFilters.some(t=>!t.isNeutralState())}static fromObject(t,e){return Promise.all((t.subFilters||[]).map(n=>dt.getClass(n.type).fromObject(n,e))).then(n=>new this({subFilters:n}))}}A(x_,"type","Composed");dt.setClass(x_);const JA=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`,ZA={contrast:0,mainParameter:"contrast"};class xu extends Ee{getFragmentSource(){return JA}applyTo2d(t){let{imageData:{data:e}}=t;if(this.contrast===0)return;const n=Math.floor(this.contrast*255),i=259*(n+255)/(255*(259-n));for(let o=0;o<e.length;o+=4)e[o]=i*(e[o]-128)+128,e[o+1]=i*(e[o+1]-128)+128,e[o+2]=i*(e[o+2]-128)+128}getUniformLocations(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}}sendUniformData(t,e){t.uniform1f(e.uContrast,this.contrast)}}A(xu,"type","Contrast");A(xu,"defaults",ZA);dt.setClass(xu);const QA={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `},tM={opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]};class wu extends Ee{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return QA[this.getCacheKey()]}applyTo2d(t){const e=t.imageData,n=e.data,i=this.matrix,o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=e.width,h=e.height,f=t.ctx.createImageData(c,h),d=f.data,p=this.opaque?1:0;let _,v,w,E,O,M,R,X,B,$,tt,nt,ot;for(tt=0;tt<h;tt++)for($=0;$<c;$++){for(O=(tt*c+$)*4,_=0,v=0,w=0,E=0,ot=0;ot<o;ot++)for(nt=0;nt<o;nt++)R=tt+ot-l,M=$+nt-l,!(R<0||R>=h||M<0||M>=c)&&(X=(R*c+M)*4,B=i[ot*o+nt],_+=n[X]*B,v+=n[X+1]*B,w+=n[X+2]*B,p||(E+=n[X+3]*B));d[O]=_,d[O+1]=v,d[O+2]=w,p?d[O+3]=n[O+3]:d[O+3]=E}t.imageData=f}getUniformLocations(t,e){return{uMatrix:t.getUniformLocation(e,"uMatrix"),uOpaque:t.getUniformLocation(e,"uOpaque"),uHalfSize:t.getUniformLocation(e,"uHalfSize"),uSize:t.getUniformLocation(e,"uSize")}}sendUniformData(t,e){t.uniform1fv(e.uMatrix,this.matrix)}toObject(){return D(D({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}A(wu,"type","Convolute");A(wu,"defaults",tM);dt.setClass(wu);const eM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`,nM=["gamma"],rM={mainParameter:"gamma",gamma:[1,1,1]};class Cu extends Ee{getFragmentSource(){return eM}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{gamma:e=[1,1,1]}=t,n=ee(t,nM);super(n),this.gamma=e}applyTo2d(t){let{imageData:{data:e}}=t;const n=this.gamma,i=1/n[0],o=1/n[1],l=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const c=this.rgbValues;for(let h=0;h<256;h++)c.r[h]=Math.pow(h/255,i)*255,c.g[h]=Math.pow(h/255,o)*255,c.b[h]=Math.pow(h/255,l)*255;for(let h=0;h<e.length;h+=4)e[h]=c.r[e[h]],e[h+1]=c.g[e[h+1]],e[h+2]=c.b[e[h+2]]}getUniformLocations(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}}sendUniformData(t,e){t.uniform3fv(e.uGamma,this.gamma)}}A(Cu,"type","Gamma");A(Cu,"defaults",rM);dt.setClass(Cu);const iM={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `},sM={mode:"average",mainParameter:"mode"};class Su extends Ee{applyTo2d(t){let{imageData:{data:e}}=t;for(let n=0,i;n<e.length;n+=4){switch(this.mode){case"average":i=(e[n]+e[n+1]+e[n+2])/3;break;case"lightness":i=(Math.min(e[n],e[n+1],e[n+2])+Math.max(e[n],e[n+1],e[n+2]))/2;break;case"luminosity":i=.21*e[n]+.72*e[n+1]+.07*e[n+2];break}e[n]=i,e[n+1]=i,e[n+2]=i}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return iM[this.mode]}getUniformLocations(t,e){return{uMode:t.getUniformLocation(e,"uMode")}}sendUniformData(t,e){t.uniform1i(e.uMode,1)}isNeutralState(){return!1}}A(Su,"type","Grayscale");A(Su,"defaults",sM);dt.setClass(Su);const oM={rotation:0,mainParameter:"rotation"};class bu extends mo{calculateMatrix(){const t=this.rotation*Math.PI,e=$e(t),n=Ke(t),i=1/3,o=Math.sqrt(i)*n,l=1-e;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=e+l/3,this.matrix[1]=i*l-o,this.matrix[2]=i*l+o,this.matrix[5]=i*l+o,this.matrix[6]=e+i*l,this.matrix[7]=i*l-o,this.matrix[10]=i*l-o,this.matrix[11]=i*l+o,this.matrix[12]=e+i*l}isNeutralState(){return this.calculateMatrix(),super.isNeutralState()}applyTo(t){this.calculateMatrix(),super.applyTo(t)}}A(bu,"type","HueRotation");A(bu,"defaults",oM);dt.setClass(bu);const aM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`,lM={alpha:!1,invert:!0,mainParameter:"invert"};class Tu extends Ee{applyTo2d(t){let{imageData:{data:e}}=t;for(let n=0;n<e.length;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2],this.alpha&&(e[n+3]=255-e[n+3])}getFragmentSource(){return aM}isNeutralState(){return!this.invert}getUniformLocations(t,e){return{uInvert:t.getUniformLocation(e,"uInvert"),uAlpha:t.getUniformLocation(e,"uAlpha")}}sendUniformData(t,e){t.uniform1i(e.uInvert,Number(this.invert)),t.uniform1i(e.uAlpha,Number(this.alpha))}}A(Tu,"type","Invert");A(Tu,"defaults",lM);dt.setClass(Tu);const cM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`,hM={mainParameter:"noise",noise:0};class Ou extends Ee{getFragmentSource(){return cM}applyTo2d(t){let{imageData:{data:e}}=t;if(this.noise===0)return;const n=this.noise;for(let i=0;i<e.length;i+=4){const o=(.5-Math.random())*n;e[i]+=o,e[i+1]+=o,e[i+2]+=o}}getUniformLocations(t,e){return{uNoise:t.getUniformLocation(e,"uNoise"),uSeed:t.getUniformLocation(e,"uSeed")}}sendUniformData(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())}toObject(){return D(D({},super.toObject()),{},{noise:this.noise})}}A(Ou,"type","Noise");A(Ou,"defaults",hM);dt.setClass(Ou);const uM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepW;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`,fM={blocksize:4,mainParameter:"blocksize"};class Eu extends Ee{applyTo2d(t){let{imageData:{data:e,width:n,height:i}}=t;for(let o=0;o<i;o+=this.blocksize)for(let l=0;l<n;l+=this.blocksize){const c=o*4*n+l*4,h=e[c],f=e[c+1],d=e[c+2],p=e[c+3];for(let _=o;_<Math.min(o+this.blocksize,i);_++)for(let v=l;v<Math.min(l+this.blocksize,n);v++){const w=_*4*n+v*4;e[w]=h,e[w+1]=f,e[w+2]=d,e[w+3]=p}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return uM}getUniformLocations(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}}sendUniformData(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}A(Eu,"type","Pixelate");A(Eu,"defaults",fM);dt.setClass(Eu);const dM=`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`,gM={color:"#FFFFFF",distance:.02,useAlpha:!1};class Pu extends Ee{getFragmentShader(){return dM}applyTo2d(t){let{imageData:{data:e}}=t;const n=this.distance*255,i=new qt(this.color).getSource(),o=[i[0]-n,i[1]-n,i[2]-n],l=[i[0]+n,i[1]+n,i[2]+n];for(let c=0;c<e.length;c+=4){const h=e[c],f=e[c+1],d=e[c+2];h>o[0]&&f>o[1]&&d>o[2]&&h<l[0]&&f<l[1]&&d<l[2]&&(e[c+3]=0)}}getUniformLocations(t,e){return{uLow:t.getUniformLocation(e,"uLow"),uHigh:t.getUniformLocation(e,"uHigh")}}sendUniformData(t,e){const n=new qt(this.color).getSource(),i=this.distance,o=[0+n[0]/255-i,0+n[1]/255-i,0+n[2]/255-i,1],l=[n[0]/255+i,n[1]/255+i,n[2]/255+i,1];t.uniform4fv(e.uLow,o),t.uniform4fv(e.uHigh,l)}toObject(){return D(D({},super.toObject()),{},{color:this.color,distance:this.distance})}}A(Pu,"type","RemoveColor");A(Pu,"defaults",gM);dt.setClass(Pu);const pM={resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,fragmentSourceTOP:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
  `};class Du extends Ee{getUniformLocations(t,e){return{uDelta:t.getUniformLocation(e,"uDelta"),uTaps:t.getUniformLocation(e,"uTaps")}}sendUniformData(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)}getFilterWindow(){const t=this.tempScale;return Math.ceil(this.lanczosLobes/t)}getCacheKey(){const t=this.getFilterWindow();return"".concat(this.type,"_").concat(t)}getFragmentSource(){const t=this.getFilterWindow();return this.generateShader(t)}getTaps(){const t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,n=this.getFilterWindow(),i=new Array(n);for(let o=1;o<=n;o++)i[o-1]=t(o*e);return i}generateShader(t){const e=new Array(t);for(let n=1;n<=t;n++)e[n-1]="".concat(n,".0 * uDelta");return`
      `.concat(this.fragmentSourceTOP,`
      uniform float uTaps[`).concat(t,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(e.map((n,i)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(i,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(i,`];
              sum += 2.0 * uTaps[`).concat(i,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(t){t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,super.applyTo(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,super.applyTo(t),t.sourceHeight=t.destinationHeight}applyTo(t){hl(t)?this.applyToForWebgl(t):this.applyTo2d(t)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(t){return e=>{if(e>=t||e<=-t)return 0;if(e<11920929e-14&&e>-11920929e-14)return 1;e*=Math.PI;const n=e/t;return Math.sin(e)/e*Math.sin(n)/n}}applyTo2d(t){const e=t.imageData,n=this.scaleX,i=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/i;const o=e.width,l=e.height,c=Math.round(o*n),h=Math.round(l*i);let f;this.resizeType==="sliceHack"?f=this.sliceByTwo(t,o,l,c,h):this.resizeType==="hermite"?f=this.hermiteFastResize(t,o,l,c,h):this.resizeType==="bilinear"?f=this.bilinearFiltering(t,o,l,c,h):this.resizeType==="lanczos"?f=this.lanczosResize(t,o,l,c,h):f=new ImageData(c,h),t.imageData=f}sliceByTwo(t,e,n,i,o){const l=t.imageData,c=.5;let h=!1,f=!1,d=e*c,p=n*c;const _=t.filterBackend.resources;let v=0,w=0;const E=e;let O=0;_.sliceByTwo||(_.sliceByTwo=fe());const M=_.sliceByTwo;(M.width<e*1.5||M.height<n)&&(M.width=e*1.5,M.height=n);const R=M.getContext("2d");for(R.clearRect(0,0,e*1.5,n),R.putImageData(l,0,0),i=Math.floor(i),o=Math.floor(o);!h||!f;)e=d,n=p,i<Math.floor(d*c)?d=Math.floor(d*c):(d=i,h=!0),o<Math.floor(p*c)?p=Math.floor(p*c):(p=o,f=!0),R.drawImage(M,v,w,e,n,E,O,d,p),v=E,w=O,O+=p;return R.getImageData(v,w,i,o)}lanczosResize(t,e,n,i,o){function l(B){let $,tt,nt,ot,it,lt,pt,Lt,Wt,jt,Nt;for(R.x=(B+.5)*p,X.x=Math.floor(R.x),$=0;$<o;$++){for(R.y=($+.5)*_,X.y=Math.floor(R.y),it=0,lt=0,pt=0,Lt=0,Wt=0,tt=X.x-E;tt<=X.x+E;tt++)if(!(tt<0||tt>=e)){jt=Math.floor(1e3*Math.abs(tt-R.x)),M[jt]||(M[jt]={});for(let Ht=X.y-O;Ht<=X.y+O;Ht++)Ht<0||Ht>=n||(Nt=Math.floor(1e3*Math.abs(Ht-R.y)),M[jt][Nt]||(M[jt][Nt]=d(Math.sqrt(Math.pow(jt*v,2)+Math.pow(Nt*w,2))/1e3)),nt=M[jt][Nt],nt>0&&(ot=(Ht*e+tt)*4,it+=nt,lt+=nt*c[ot],pt+=nt*c[ot+1],Lt+=nt*c[ot+2],Wt+=nt*c[ot+3]))}ot=($*i+B)*4,f[ot]=lt/it,f[ot+1]=pt/it,f[ot+2]=Lt/it,f[ot+3]=Wt/it}return++B<i?l(B):h}const c=t.imageData.data,h=t.ctx.createImageData(i,o),f=h.data,d=this.lanczosCreate(this.lanczosLobes),p=this.rcpScaleX,_=this.rcpScaleY,v=2/this.rcpScaleX,w=2/this.rcpScaleY,E=Math.ceil(p*this.lanczosLobes/2),O=Math.ceil(_*this.lanczosLobes/2),M={},R={x:0,y:0},X={x:0,y:0};return l(0)}bilinearFiltering(t,e,n,i,o){let l,c,h,f,d,p,_,v,w,E,O,M,R=0,X;const B=this.rcpScaleX,$=this.rcpScaleY,tt=4*(e-1),ot=t.imageData.data,it=t.ctx.createImageData(i,o),lt=it.data;for(_=0;_<o;_++)for(v=0;v<i;v++)for(d=Math.floor(B*v),p=Math.floor($*_),w=B*v-d,E=$*_-p,X=4*(p*e+d),O=0;O<4;O++)l=ot[X+O],c=ot[X+4+O],h=ot[X+tt+O],f=ot[X+tt+4+O],M=l*(1-w)*(1-E)+c*w*(1-E)+h*E*(1-w)+f*w*E,lt[R++]=M;return it}hermiteFastResize(t,e,n,i,o){const l=this.rcpScaleX,c=this.rcpScaleY,h=Math.ceil(l/2),f=Math.ceil(c/2),d=t.imageData,p=d.data,_=t.ctx.createImageData(i,o),v=_.data;for(let w=0;w<o;w++)for(let E=0;E<i;E++){const O=(E+w*i)*4;let M=0,R=0,X=0,B=0,$=0,tt=0,nt=0;const ot=(w+.5)*c;for(let it=Math.floor(w*c);it<(w+1)*c;it++){const lt=Math.abs(ot-(it+.5))/f,pt=(E+.5)*l,Lt=lt*lt;for(let Wt=Math.floor(E*l);Wt<(E+1)*l;Wt++){let jt=Math.abs(pt-(Wt+.5))/h;const Nt=Math.sqrt(Lt+jt*jt);Nt>1&&Nt<-1||(M=2*Nt*Nt*Nt-3*Nt*Nt+1,M>0&&(jt=4*(Wt+it*e),nt+=M*p[jt+3],X+=M,p[jt+3]<255&&(M=M*p[jt+3]/250),B+=M*p[jt],$+=M*p[jt+1],tt+=M*p[jt+2],R+=M))}}v[O]=B/R,v[O+1]=$/R,v[O+2]=tt/R,v[O+3]=nt/X}return _}toObject(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}A(Du,"type","Resize");A(Du,"defaults",pM);dt.setClass(Du);const mM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`,_M={saturation:0,mainParameter:"saturation"};class Au extends Ee{getFragmentSource(){return mM}applyTo2d(t){let{imageData:{data:e}}=t;if(this.saturation===0)return;const n=-this.saturation;for(let i=0;i<e.length;i+=4){const o=Math.max(e[i],e[i+1],e[i+2]);e[i]+=o!==e[i]?(o-e[i])*n:0,e[i+1]+=o!==e[i+1]?(o-e[i+1])*n:0,e[i+2]+=o!==e[i+2]?(o-e[i+2])*n:0}}getUniformLocations(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}}sendUniformData(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}A(Au,"type","Saturation");A(Au,"defaults",_M);dt.setClass(Au);const vM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`,yM={vibrance:0,mainParameter:"vibrance"};class Mu extends Ee{getFragmentSource(){return vM}applyTo2d(t){let{imageData:{data:e}}=t;if(this.vibrance===0)return;const n=-this.vibrance;for(let i=0;i<e.length;i+=4){const o=Math.max(e[i],e[i+1],e[i+2]),l=(e[i]+e[i+1]+e[i+2])/3,c=Math.abs(o-l)*2/255*n;e[i]+=o!==e[i]?(o-e[i])*c:0,e[i+1]+=o!==e[i+1]?(o-e[i+1])*c:0,e[i+2]+=o!==e[i+2]?(o-e[i+2])*c:0}}getUniformLocations(t,e){return{uVibrance:t.getUniformLocation(e,"uVibrance")}}sendUniformData(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}A(Mu,"type","Vibrance");A(Mu,"defaults",yM);dt.setClass(Mu);const xM=["href"],pa=xi({__name:"BaseButton",props:{look:{type:String,default:"primary"},href:{type:String,default:void 0}},setup(r){const t=r,e={primary:"rounded bg-indigo-500 px-3 py-2 text-xs font-semibold text-white shadow-sm hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500",secondary:"rounded bg-white px-3 py-2 text-xs font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},n=Ve(()=>e[t.look]);return(i,o)=>r.href?(gn(),ur("a",{key:1,href:r.href,target:"_blank",class:Js(n.value)},[xg(i.$slots,"default")],10,xM)):(gn(),ur("button",{key:0,class:Js(n.value)},[xg(i.$slots,"default")],2))}}),wM={class:"relative flex items-start"},CM={class:"flex h-6 items-center"},SM=["name","value","checked","id"],bM={class:"ml-3 text-sm leading-6"},TM=["for"],OM=xi({__name:"BaseCheckbox",props:{label:{type:String,default:""},name:{type:String,default:""},value:{type:String,required:!0},modelValue:{type:[String,Number,Array],required:!0}},emits:["update:modelValue"],setup(r,{emit:t}){const e=r,n=Ve(()=>Array.isArray(e.modelValue)?e.modelValue.includes(e.value):!!e.modelValue),i=o=>{const l=o.target.checked;if(Array.isArray(e.modelValue)){let c=[...e.modelValue];l?c.push(e.value):c.splice(c.indexOf(e.value),1),t("update:modelValue",c)}else t("update:modelValue",!!l)};return(o,l)=>(gn(),ur("div",wM,[me("div",CM,[me("input",{name:r.name,value:r.value,checked:n.value,onChange:i,id:r.name,type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600 cursor-pointer"},null,40,SM)]),me("div",bM,[me("label",{for:r.name,class:"font-medium text-gray-900 cursor-pointer"},db(r.label),9,TM)])]))}});var Rs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xa={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Xa.exports;(function(r,t){(function(){var e,n="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",f=500,d="__lodash_placeholder__",p=1,_=2,v=4,w=1,E=2,O=1,M=2,R=4,X=8,B=16,$=32,tt=64,nt=128,ot=256,it=512,lt=30,pt="...",Lt=800,Wt=16,jt=1,Nt=2,Ht=3,at=1/0,ct=9007199254740991,ne=17976931348623157e292,At=0/0,Jt=4294967295,ye=Jt-1,Yn=Jt>>>1,Sr=[["ary",nt],["bind",O],["bindKey",M],["curry",X],["curryRight",B],["flip",it],["partial",$],["partialRight",tt],["rearg",ot]],En="[object Arguments]",de="[object Array]",U="[object AsyncFunction]",et="[object Boolean]",J="[object Date]",ft="[object DOMException]",Rt="[object Error]",C="[object Function]",b="[object GeneratorFunction]",L="[object Map]",j="[object Number]",N="[object Null]",z="[object Object]",Q="[object Promise]",K="[object Proxy]",q="[object RegExp]",V="[object Set]",ut="[object String]",st="[object Symbol]",gt="[object Undefined]",_t="[object WeakMap]",Pt="[object WeakSet]",Yt="[object ArrayBuffer]",Ft="[object DataView]",oe="[object Float32Array]",We="[object Float64Array]",Un="[object Int8Array]",Oi="[object Int16Array]",Qn="[object Int32Array]",Ei="[object Uint8Array]",Pe="[object Uint8ClampedArray]",qe="[object Uint16Array]",Pi="[object Uint32Array]",w_=/\b__p \+= '';/g,C_=/\b(__p \+=) '' \+/g,S_=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Lu=/&(?:amp|lt|gt|quot|#39);/g,Ru=/[&<>"']/g,b_=RegExp(Lu.source),T_=RegExp(Ru.source),O_=/<%-([\s\S]+?)%>/g,E_=/<%([\s\S]+?)%>/g,Fu=/<%=([\s\S]+?)%>/g,P_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,D_=/^\w*$/,A_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ul=/[\\^$.*+?()[\]{}|]/g,M_=RegExp(ul.source),fl=/^\s+/,k_=/\s/,L_=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,R_=/\{\n\/\* \[wrapped with (.+)\] \*/,F_=/,? & /,I_=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,B_=/[()=,{}\[\]\/\s]/,j_=/\\(\\)?/g,W_=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Iu=/\w*$/,X_=/^[-+]0x[0-9a-f]+$/i,H_=/^0b[01]+$/i,Y_=/^\[object .+?Constructor\]$/,U_=/^0o[0-7]+$/i,N_=/^(?:0|[1-9]\d*)$/,z_=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_o=/($^)/,V_=/['\n\r\u2028\u2029\\]/g,vo="\\ud800-\\udfff",G_="\\u0300-\\u036f",$_="\\ufe20-\\ufe2f",K_="\\u20d0-\\u20ff",Bu=G_+$_+K_,ju="\\u2700-\\u27bf",Wu="a-z\\xdf-\\xf6\\xf8-\\xff",q_="\\xac\\xb1\\xd7\\xf7",J_="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Z_="\\u2000-\\u206f",Q_=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xu="A-Z\\xc0-\\xd6\\xd8-\\xde",Hu="\\ufe0e\\ufe0f",Yu=q_+J_+Z_+Q_,dl="[']",tv="["+vo+"]",Uu="["+Yu+"]",yo="["+Bu+"]",Nu="\\d+",ev="["+ju+"]",zu="["+Wu+"]",Vu="[^"+vo+Yu+Nu+ju+Wu+Xu+"]",gl="\\ud83c[\\udffb-\\udfff]",nv="(?:"+yo+"|"+gl+")",Gu="[^"+vo+"]",pl="(?:\\ud83c[\\udde6-\\uddff]){2}",ml="[\\ud800-\\udbff][\\udc00-\\udfff]",Di="["+Xu+"]",$u="\\u200d",Ku="(?:"+zu+"|"+Vu+")",rv="(?:"+Di+"|"+Vu+")",qu="(?:"+dl+"(?:d|ll|m|re|s|t|ve))?",Ju="(?:"+dl+"(?:D|LL|M|RE|S|T|VE))?",Zu=nv+"?",Qu="["+Hu+"]?",iv="(?:"+$u+"(?:"+[Gu,pl,ml].join("|")+")"+Qu+Zu+")*",sv="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ov="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",tf=Qu+Zu+iv,av="(?:"+[ev,pl,ml].join("|")+")"+tf,lv="(?:"+[Gu+yo+"?",yo,pl,ml,tv].join("|")+")",cv=RegExp(dl,"g"),hv=RegExp(yo,"g"),_l=RegExp(gl+"(?="+gl+")|"+lv+tf,"g"),uv=RegExp([Di+"?"+zu+"+"+qu+"(?="+[Uu,Di,"$"].join("|")+")",rv+"+"+Ju+"(?="+[Uu,Di+Ku,"$"].join("|")+")",Di+"?"+Ku+"+"+qu,Di+"+"+Ju,ov,sv,Nu,av].join("|"),"g"),fv=RegExp("["+$u+vo+Bu+Hu+"]"),dv=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,gv=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pv=-1,ie={};ie[oe]=ie[We]=ie[Un]=ie[Oi]=ie[Qn]=ie[Ei]=ie[Pe]=ie[qe]=ie[Pi]=!0,ie[En]=ie[de]=ie[Yt]=ie[et]=ie[Ft]=ie[J]=ie[Rt]=ie[C]=ie[L]=ie[j]=ie[z]=ie[q]=ie[V]=ie[ut]=ie[_t]=!1;var re={};re[En]=re[de]=re[Yt]=re[Ft]=re[et]=re[J]=re[oe]=re[We]=re[Un]=re[Oi]=re[Qn]=re[L]=re[j]=re[z]=re[q]=re[V]=re[ut]=re[st]=re[Ei]=re[Pe]=re[qe]=re[Pi]=!0,re[Rt]=re[C]=re[_t]=!1;var mv={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},_v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vv={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},yv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xv=parseFloat,wv=parseInt,ef=typeof Rs=="object"&&Rs&&Rs.Object===Object&&Rs,Cv=typeof self=="object"&&self&&self.Object===Object&&self,De=ef||Cv||Function("return this")(),vl=t&&!t.nodeType&&t,qr=vl&&!0&&r&&!r.nodeType&&r,nf=qr&&qr.exports===vl,yl=nf&&ef.process,_n=function(){try{var P=qr&&qr.require&&qr.require("util").types;return P||yl&&yl.binding&&yl.binding("util")}catch{}}(),rf=_n&&_n.isArrayBuffer,sf=_n&&_n.isDate,of=_n&&_n.isMap,af=_n&&_n.isRegExp,lf=_n&&_n.isSet,cf=_n&&_n.isTypedArray;function an(P,W,I){switch(I.length){case 0:return P.call(W);case 1:return P.call(W,I[0]);case 2:return P.call(W,I[0],I[1]);case 3:return P.call(W,I[0],I[1],I[2])}return P.apply(W,I)}function Sv(P,W,I,rt){for(var wt=-1,zt=P==null?0:P.length;++wt<zt;){var xe=P[wt];W(rt,xe,I(xe),P)}return rt}function vn(P,W){for(var I=-1,rt=P==null?0:P.length;++I<rt&&W(P[I],I,P)!==!1;);return P}function bv(P,W){for(var I=P==null?0:P.length;I--&&W(P[I],I,P)!==!1;);return P}function hf(P,W){for(var I=-1,rt=P==null?0:P.length;++I<rt;)if(!W(P[I],I,P))return!1;return!0}function br(P,W){for(var I=-1,rt=P==null?0:P.length,wt=0,zt=[];++I<rt;){var xe=P[I];W(xe,I,P)&&(zt[wt++]=xe)}return zt}function xo(P,W){var I=P==null?0:P.length;return!!I&&Ai(P,W,0)>-1}function xl(P,W,I){for(var rt=-1,wt=P==null?0:P.length;++rt<wt;)if(I(W,P[rt]))return!0;return!1}function ae(P,W){for(var I=-1,rt=P==null?0:P.length,wt=Array(rt);++I<rt;)wt[I]=W(P[I],I,P);return wt}function Tr(P,W){for(var I=-1,rt=W.length,wt=P.length;++I<rt;)P[wt+I]=W[I];return P}function wl(P,W,I,rt){var wt=-1,zt=P==null?0:P.length;for(rt&&zt&&(I=P[++wt]);++wt<zt;)I=W(I,P[wt],wt,P);return I}function Tv(P,W,I,rt){var wt=P==null?0:P.length;for(rt&&wt&&(I=P[--wt]);wt--;)I=W(I,P[wt],wt,P);return I}function Cl(P,W){for(var I=-1,rt=P==null?0:P.length;++I<rt;)if(W(P[I],I,P))return!0;return!1}var Ov=Sl("length");function Ev(P){return P.split("")}function Pv(P){return P.match(I_)||[]}function uf(P,W,I){var rt;return I(P,function(wt,zt,xe){if(W(wt,zt,xe))return rt=zt,!1}),rt}function wo(P,W,I,rt){for(var wt=P.length,zt=I+(rt?1:-1);rt?zt--:++zt<wt;)if(W(P[zt],zt,P))return zt;return-1}function Ai(P,W,I){return W===W?Xv(P,W,I):wo(P,ff,I)}function Dv(P,W,I,rt){for(var wt=I-1,zt=P.length;++wt<zt;)if(rt(P[wt],W))return wt;return-1}function ff(P){return P!==P}function df(P,W){var I=P==null?0:P.length;return I?Tl(P,W)/I:At}function Sl(P){return function(W){return W==null?e:W[P]}}function bl(P){return function(W){return P==null?e:P[W]}}function gf(P,W,I,rt,wt){return wt(P,function(zt,xe,Zt){I=rt?(rt=!1,zt):W(I,zt,xe,Zt)}),I}function Av(P,W){var I=P.length;for(P.sort(W);I--;)P[I]=P[I].value;return P}function Tl(P,W){for(var I,rt=-1,wt=P.length;++rt<wt;){var zt=W(P[rt]);zt!==e&&(I=I===e?zt:I+zt)}return I}function Ol(P,W){for(var I=-1,rt=Array(P);++I<P;)rt[I]=W(I);return rt}function Mv(P,W){return ae(W,function(I){return[I,P[I]]})}function pf(P){return P&&P.slice(0,yf(P)+1).replace(fl,"")}function ln(P){return function(W){return P(W)}}function El(P,W){return ae(W,function(I){return P[I]})}function ps(P,W){return P.has(W)}function mf(P,W){for(var I=-1,rt=P.length;++I<rt&&Ai(W,P[I],0)>-1;);return I}function _f(P,W){for(var I=P.length;I--&&Ai(W,P[I],0)>-1;);return I}function kv(P,W){for(var I=P.length,rt=0;I--;)P[I]===W&&++rt;return rt}var Lv=bl(mv),Rv=bl(_v);function Fv(P){return"\\"+yv[P]}function Iv(P,W){return P==null?e:P[W]}function Mi(P){return fv.test(P)}function Bv(P){return dv.test(P)}function jv(P){for(var W,I=[];!(W=P.next()).done;)I.push(W.value);return I}function Pl(P){var W=-1,I=Array(P.size);return P.forEach(function(rt,wt){I[++W]=[wt,rt]}),I}function vf(P,W){return function(I){return P(W(I))}}function Or(P,W){for(var I=-1,rt=P.length,wt=0,zt=[];++I<rt;){var xe=P[I];(xe===W||xe===d)&&(P[I]=d,zt[wt++]=I)}return zt}function Co(P){var W=-1,I=Array(P.size);return P.forEach(function(rt){I[++W]=rt}),I}function Wv(P){var W=-1,I=Array(P.size);return P.forEach(function(rt){I[++W]=[rt,rt]}),I}function Xv(P,W,I){for(var rt=I-1,wt=P.length;++rt<wt;)if(P[rt]===W)return rt;return-1}function Hv(P,W,I){for(var rt=I+1;rt--;)if(P[rt]===W)return rt;return rt}function ki(P){return Mi(P)?Uv(P):Ov(P)}function Pn(P){return Mi(P)?Nv(P):Ev(P)}function yf(P){for(var W=P.length;W--&&k_.test(P.charAt(W)););return W}var Yv=bl(vv);function Uv(P){for(var W=_l.lastIndex=0;_l.test(P);)++W;return W}function Nv(P){return P.match(_l)||[]}function zv(P){return P.match(uv)||[]}var Vv=function P(W){W=W==null?De:Li.defaults(De.Object(),W,Li.pick(De,gv));var I=W.Array,rt=W.Date,wt=W.Error,zt=W.Function,xe=W.Math,Zt=W.Object,Dl=W.RegExp,Gv=W.String,yn=W.TypeError,So=I.prototype,$v=zt.prototype,Ri=Zt.prototype,bo=W["__core-js_shared__"],To=$v.toString,$t=Ri.hasOwnProperty,Kv=0,xf=function(){var s=/[^.]+$/.exec(bo&&bo.keys&&bo.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Oo=Ri.toString,qv=To.call(Zt),Jv=De._,Zv=Dl("^"+To.call($t).replace(ul,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Eo=nf?W.Buffer:e,Er=W.Symbol,Po=W.Uint8Array,wf=Eo?Eo.allocUnsafe:e,Do=vf(Zt.getPrototypeOf,Zt),Cf=Zt.create,Sf=Ri.propertyIsEnumerable,Ao=So.splice,bf=Er?Er.isConcatSpreadable:e,ms=Er?Er.iterator:e,Jr=Er?Er.toStringTag:e,Mo=function(){try{var s=ni(Zt,"defineProperty");return s({},"",{}),s}catch{}}(),Qv=W.clearTimeout!==De.clearTimeout&&W.clearTimeout,ty=rt&&rt.now!==De.Date.now&&rt.now,ey=W.setTimeout!==De.setTimeout&&W.setTimeout,ko=xe.ceil,Lo=xe.floor,Al=Zt.getOwnPropertySymbols,ny=Eo?Eo.isBuffer:e,Tf=W.isFinite,ry=So.join,iy=vf(Zt.keys,Zt),we=xe.max,Le=xe.min,sy=rt.now,oy=W.parseInt,Of=xe.random,ay=So.reverse,Ml=ni(W,"DataView"),_s=ni(W,"Map"),kl=ni(W,"Promise"),Fi=ni(W,"Set"),vs=ni(W,"WeakMap"),ys=ni(Zt,"create"),Ro=vs&&new vs,Ii={},ly=ri(Ml),cy=ri(_s),hy=ri(kl),uy=ri(Fi),fy=ri(vs),Fo=Er?Er.prototype:e,xs=Fo?Fo.valueOf:e,Ef=Fo?Fo.toString:e;function y(s){if(ue(s)&&!Ct(s)&&!(s instanceof kt)){if(s instanceof xn)return s;if($t.call(s,"__wrapped__"))return Pd(s)}return new xn(s)}var Bi=function(){function s(){}return function(a){if(!ce(a))return{};if(Cf)return Cf(a);s.prototype=a;var u=new s;return s.prototype=e,u}}();function Io(){}function xn(s,a){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=e}y.templateSettings={escape:O_,evaluate:E_,interpolate:Fu,variable:"",imports:{_:y}},y.prototype=Io.prototype,y.prototype.constructor=y,xn.prototype=Bi(Io.prototype),xn.prototype.constructor=xn;function kt(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Jt,this.__views__=[]}function dy(){var s=new kt(this.__wrapped__);return s.__actions__=Je(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=Je(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=Je(this.__views__),s}function gy(){if(this.__filtered__){var s=new kt(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function py(){var s=this.__wrapped__.value(),a=this.__dir__,u=Ct(s),g=a<0,m=u?s.length:0,x=Ex(0,m,this.__views__),S=x.start,T=x.end,k=T-S,H=g?T:S-1,Y=this.__iteratees__,G=Y.length,Z=0,ht=Le(k,this.__takeCount__);if(!u||!g&&m==k&&ht==k)return Jf(s,this.__actions__);var vt=[];t:for(;k--&&Z<ht;){H+=a;for(var Tt=-1,yt=s[H];++Tt<G;){var Mt=Y[Tt],It=Mt.iteratee,un=Mt.type,Ye=It(yt);if(un==Nt)yt=Ye;else if(!Ye){if(un==jt)continue t;break t}}vt[Z++]=yt}return vt}kt.prototype=Bi(Io.prototype),kt.prototype.constructor=kt;function Zr(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var g=s[a];this.set(g[0],g[1])}}function my(){this.__data__=ys?ys(null):{},this.size=0}function _y(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}function vy(s){var a=this.__data__;if(ys){var u=a[s];return u===h?e:u}return $t.call(a,s)?a[s]:e}function yy(s){var a=this.__data__;return ys?a[s]!==e:$t.call(a,s)}function xy(s,a){var u=this.__data__;return this.size+=this.has(s)?0:1,u[s]=ys&&a===e?h:a,this}Zr.prototype.clear=my,Zr.prototype.delete=_y,Zr.prototype.get=vy,Zr.prototype.has=yy,Zr.prototype.set=xy;function tr(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var g=s[a];this.set(g[0],g[1])}}function wy(){this.__data__=[],this.size=0}function Cy(s){var a=this.__data__,u=Bo(a,s);if(u<0)return!1;var g=a.length-1;return u==g?a.pop():Ao.call(a,u,1),--this.size,!0}function Sy(s){var a=this.__data__,u=Bo(a,s);return u<0?e:a[u][1]}function by(s){return Bo(this.__data__,s)>-1}function Ty(s,a){var u=this.__data__,g=Bo(u,s);return g<0?(++this.size,u.push([s,a])):u[g][1]=a,this}tr.prototype.clear=wy,tr.prototype.delete=Cy,tr.prototype.get=Sy,tr.prototype.has=by,tr.prototype.set=Ty;function er(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var g=s[a];this.set(g[0],g[1])}}function Oy(){this.size=0,this.__data__={hash:new Zr,map:new(_s||tr),string:new Zr}}function Ey(s){var a=Ko(this,s).delete(s);return this.size-=a?1:0,a}function Py(s){return Ko(this,s).get(s)}function Dy(s){return Ko(this,s).has(s)}function Ay(s,a){var u=Ko(this,s),g=u.size;return u.set(s,a),this.size+=u.size==g?0:1,this}er.prototype.clear=Oy,er.prototype.delete=Ey,er.prototype.get=Py,er.prototype.has=Dy,er.prototype.set=Ay;function Qr(s){var a=-1,u=s==null?0:s.length;for(this.__data__=new er;++a<u;)this.add(s[a])}function My(s){return this.__data__.set(s,h),this}function ky(s){return this.__data__.has(s)}Qr.prototype.add=Qr.prototype.push=My,Qr.prototype.has=ky;function Dn(s){var a=this.__data__=new tr(s);this.size=a.size}function Ly(){this.__data__=new tr,this.size=0}function Ry(s){var a=this.__data__,u=a.delete(s);return this.size=a.size,u}function Fy(s){return this.__data__.get(s)}function Iy(s){return this.__data__.has(s)}function By(s,a){var u=this.__data__;if(u instanceof tr){var g=u.__data__;if(!_s||g.length<i-1)return g.push([s,a]),this.size=++u.size,this;u=this.__data__=new er(g)}return u.set(s,a),this.size=u.size,this}Dn.prototype.clear=Ly,Dn.prototype.delete=Ry,Dn.prototype.get=Fy,Dn.prototype.has=Iy,Dn.prototype.set=By;function Pf(s,a){var u=Ct(s),g=!u&&ii(s),m=!u&&!g&&kr(s),x=!u&&!g&&!m&&Hi(s),S=u||g||m||x,T=S?Ol(s.length,Gv):[],k=T.length;for(var H in s)(a||$t.call(s,H))&&!(S&&(H=="length"||m&&(H=="offset"||H=="parent")||x&&(H=="buffer"||H=="byteLength"||H=="byteOffset")||sr(H,k)))&&T.push(H);return T}function Df(s){var a=s.length;return a?s[Ul(0,a-1)]:e}function jy(s,a){return qo(Je(s),ti(a,0,s.length))}function Wy(s){return qo(Je(s))}function Ll(s,a,u){(u!==e&&!An(s[a],u)||u===e&&!(a in s))&&nr(s,a,u)}function ws(s,a,u){var g=s[a];(!($t.call(s,a)&&An(g,u))||u===e&&!(a in s))&&nr(s,a,u)}function Bo(s,a){for(var u=s.length;u--;)if(An(s[u][0],a))return u;return-1}function Xy(s,a,u,g){return Pr(s,function(m,x,S){a(g,m,u(m),S)}),g}function Af(s,a){return s&&zn(a,Te(a),s)}function Hy(s,a){return s&&zn(a,Qe(a),s)}function nr(s,a,u){a=="__proto__"&&Mo?Mo(s,a,{configurable:!0,enumerable:!0,value:u,writable:!0}):s[a]=u}function Rl(s,a){for(var u=-1,g=a.length,m=I(g),x=s==null;++u<g;)m[u]=x?e:gc(s,a[u]);return m}function ti(s,a,u){return s===s&&(u!==e&&(s=s<=u?s:u),a!==e&&(s=s>=a?s:a)),s}function wn(s,a,u,g,m,x){var S,T=a&p,k=a&_,H=a&v;if(u&&(S=m?u(s,g,m,x):u(s)),S!==e)return S;if(!ce(s))return s;var Y=Ct(s);if(Y){if(S=Dx(s),!T)return Je(s,S)}else{var G=Re(s),Z=G==C||G==b;if(kr(s))return td(s,T);if(G==z||G==En||Z&&!m){if(S=k||Z?{}:yd(s),!T)return k?vx(s,Hy(S,s)):_x(s,Af(S,s))}else{if(!re[G])return m?s:{};S=Ax(s,G,T)}}x||(x=new Dn);var ht=x.get(s);if(ht)return ht;x.set(s,S),$d(s)?s.forEach(function(yt){S.add(wn(yt,a,u,yt,s,x))}):Vd(s)&&s.forEach(function(yt,Mt){S.set(Mt,wn(yt,a,u,Mt,s,x))});var vt=H?k?tc:Ql:k?Qe:Te,Tt=Y?e:vt(s);return vn(Tt||s,function(yt,Mt){Tt&&(Mt=yt,yt=s[Mt]),ws(S,Mt,wn(yt,a,u,Mt,s,x))}),S}function Yy(s){var a=Te(s);return function(u){return Mf(u,s,a)}}function Mf(s,a,u){var g=u.length;if(s==null)return!g;for(s=Zt(s);g--;){var m=u[g],x=a[m],S=s[m];if(S===e&&!(m in s)||!x(S))return!1}return!0}function kf(s,a,u){if(typeof s!="function")throw new yn(l);return Ps(function(){s.apply(e,u)},a)}function Cs(s,a,u,g){var m=-1,x=xo,S=!0,T=s.length,k=[],H=a.length;if(!T)return k;u&&(a=ae(a,ln(u))),g?(x=xl,S=!1):a.length>=i&&(x=ps,S=!1,a=new Qr(a));t:for(;++m<T;){var Y=s[m],G=u==null?Y:u(Y);if(Y=g||Y!==0?Y:0,S&&G===G){for(var Z=H;Z--;)if(a[Z]===G)continue t;k.push(Y)}else x(a,G,g)||k.push(Y)}return k}var Pr=sd(Nn),Lf=sd(Il,!0);function Uy(s,a){var u=!0;return Pr(s,function(g,m,x){return u=!!a(g,m,x),u}),u}function jo(s,a,u){for(var g=-1,m=s.length;++g<m;){var x=s[g],S=a(x);if(S!=null&&(T===e?S===S&&!hn(S):u(S,T)))var T=S,k=x}return k}function Ny(s,a,u,g){var m=s.length;for(u=St(u),u<0&&(u=-u>m?0:m+u),g=g===e||g>m?m:St(g),g<0&&(g+=m),g=u>g?0:qd(g);u<g;)s[u++]=a;return s}function Rf(s,a){var u=[];return Pr(s,function(g,m,x){a(g,m,x)&&u.push(g)}),u}function Ae(s,a,u,g,m){var x=-1,S=s.length;for(u||(u=kx),m||(m=[]);++x<S;){var T=s[x];a>0&&u(T)?a>1?Ae(T,a-1,u,g,m):Tr(m,T):g||(m[m.length]=T)}return m}var Fl=od(),Ff=od(!0);function Nn(s,a){return s&&Fl(s,a,Te)}function Il(s,a){return s&&Ff(s,a,Te)}function Wo(s,a){return br(a,function(u){return or(s[u])})}function ei(s,a){a=Ar(a,s);for(var u=0,g=a.length;s!=null&&u<g;)s=s[Vn(a[u++])];return u&&u==g?s:e}function If(s,a,u){var g=a(s);return Ct(s)?g:Tr(g,u(s))}function Xe(s){return s==null?s===e?gt:N:Jr&&Jr in Zt(s)?Ox(s):Wx(s)}function Bl(s,a){return s>a}function zy(s,a){return s!=null&&$t.call(s,a)}function Vy(s,a){return s!=null&&a in Zt(s)}function Gy(s,a,u){return s>=Le(a,u)&&s<we(a,u)}function jl(s,a,u){for(var g=u?xl:xo,m=s[0].length,x=s.length,S=x,T=I(x),k=1/0,H=[];S--;){var Y=s[S];S&&a&&(Y=ae(Y,ln(a))),k=Le(Y.length,k),T[S]=!u&&(a||m>=120&&Y.length>=120)?new Qr(S&&Y):e}Y=s[0];var G=-1,Z=T[0];t:for(;++G<m&&H.length<k;){var ht=Y[G],vt=a?a(ht):ht;if(ht=u||ht!==0?ht:0,!(Z?ps(Z,vt):g(H,vt,u))){for(S=x;--S;){var Tt=T[S];if(!(Tt?ps(Tt,vt):g(s[S],vt,u)))continue t}Z&&Z.push(vt),H.push(ht)}}return H}function $y(s,a,u,g){return Nn(s,function(m,x,S){a(g,u(m),x,S)}),g}function Ss(s,a,u){a=Ar(a,s),s=Sd(s,a);var g=s==null?s:s[Vn(Sn(a))];return g==null?e:an(g,s,u)}function Bf(s){return ue(s)&&Xe(s)==En}function Ky(s){return ue(s)&&Xe(s)==Yt}function qy(s){return ue(s)&&Xe(s)==J}function bs(s,a,u,g,m){return s===a?!0:s==null||a==null||!ue(s)&&!ue(a)?s!==s&&a!==a:Jy(s,a,u,g,bs,m)}function Jy(s,a,u,g,m,x){var S=Ct(s),T=Ct(a),k=S?de:Re(s),H=T?de:Re(a);k=k==En?z:k,H=H==En?z:H;var Y=k==z,G=H==z,Z=k==H;if(Z&&kr(s)){if(!kr(a))return!1;S=!0,Y=!1}if(Z&&!Y)return x||(x=new Dn),S||Hi(s)?md(s,a,u,g,m,x):bx(s,a,k,u,g,m,x);if(!(u&w)){var ht=Y&&$t.call(s,"__wrapped__"),vt=G&&$t.call(a,"__wrapped__");if(ht||vt){var Tt=ht?s.value():s,yt=vt?a.value():a;return x||(x=new Dn),m(Tt,yt,u,g,x)}}return Z?(x||(x=new Dn),Tx(s,a,u,g,m,x)):!1}function Zy(s){return ue(s)&&Re(s)==L}function Wl(s,a,u,g){var m=u.length,x=m,S=!g;if(s==null)return!x;for(s=Zt(s);m--;){var T=u[m];if(S&&T[2]?T[1]!==s[T[0]]:!(T[0]in s))return!1}for(;++m<x;){T=u[m];var k=T[0],H=s[k],Y=T[1];if(S&&T[2]){if(H===e&&!(k in s))return!1}else{var G=new Dn;if(g)var Z=g(H,Y,k,s,a,G);if(!(Z===e?bs(Y,H,w|E,g,G):Z))return!1}}return!0}function jf(s){if(!ce(s)||Rx(s))return!1;var a=or(s)?Zv:Y_;return a.test(ri(s))}function Qy(s){return ue(s)&&Xe(s)==q}function tx(s){return ue(s)&&Re(s)==V}function ex(s){return ue(s)&&na(s.length)&&!!ie[Xe(s)]}function Wf(s){return typeof s=="function"?s:s==null?tn:typeof s=="object"?Ct(s)?Yf(s[0],s[1]):Hf(s):ag(s)}function Xl(s){if(!Es(s))return iy(s);var a=[];for(var u in Zt(s))$t.call(s,u)&&u!="constructor"&&a.push(u);return a}function nx(s){if(!ce(s))return jx(s);var a=Es(s),u=[];for(var g in s)g=="constructor"&&(a||!$t.call(s,g))||u.push(g);return u}function Hl(s,a){return s<a}function Xf(s,a){var u=-1,g=Ze(s)?I(s.length):[];return Pr(s,function(m,x,S){g[++u]=a(m,x,S)}),g}function Hf(s){var a=nc(s);return a.length==1&&a[0][2]?wd(a[0][0],a[0][1]):function(u){return u===s||Wl(u,s,a)}}function Yf(s,a){return ic(s)&&xd(a)?wd(Vn(s),a):function(u){var g=gc(u,s);return g===e&&g===a?pc(u,s):bs(a,g,w|E)}}function Xo(s,a,u,g,m){s!==a&&Fl(a,function(x,S){if(m||(m=new Dn),ce(x))rx(s,a,S,u,Xo,g,m);else{var T=g?g(oc(s,S),x,S+"",s,a,m):e;T===e&&(T=x),Ll(s,S,T)}},Qe)}function rx(s,a,u,g,m,x,S){var T=oc(s,u),k=oc(a,u),H=S.get(k);if(H){Ll(s,u,H);return}var Y=x?x(T,k,u+"",s,a,S):e,G=Y===e;if(G){var Z=Ct(k),ht=!Z&&kr(k),vt=!Z&&!ht&&Hi(k);Y=k,Z||ht||vt?Ct(T)?Y=T:ge(T)?Y=Je(T):ht?(G=!1,Y=td(k,!0)):vt?(G=!1,Y=ed(k,!0)):Y=[]:Ds(k)||ii(k)?(Y=T,ii(T)?Y=Jd(T):(!ce(T)||or(T))&&(Y=yd(k))):G=!1}G&&(S.set(k,Y),m(Y,k,g,x,S),S.delete(k)),Ll(s,u,Y)}function Uf(s,a){var u=s.length;if(u)return a+=a<0?u:0,sr(a,u)?s[a]:e}function Nf(s,a,u){a.length?a=ae(a,function(x){return Ct(x)?function(S){return ei(S,x.length===1?x[0]:x)}:x}):a=[tn];var g=-1;a=ae(a,ln(mt()));var m=Xf(s,function(x,S,T){var k=ae(a,function(H){return H(x)});return{criteria:k,index:++g,value:x}});return Av(m,function(x,S){return mx(x,S,u)})}function ix(s,a){return zf(s,a,function(u,g){return pc(s,g)})}function zf(s,a,u){for(var g=-1,m=a.length,x={};++g<m;){var S=a[g],T=ei(s,S);u(T,S)&&Ts(x,Ar(S,s),T)}return x}function sx(s){return function(a){return ei(a,s)}}function Yl(s,a,u,g){var m=g?Dv:Ai,x=-1,S=a.length,T=s;for(s===a&&(a=Je(a)),u&&(T=ae(s,ln(u)));++x<S;)for(var k=0,H=a[x],Y=u?u(H):H;(k=m(T,Y,k,g))>-1;)T!==s&&Ao.call(T,k,1),Ao.call(s,k,1);return s}function Vf(s,a){for(var u=s?a.length:0,g=u-1;u--;){var m=a[u];if(u==g||m!==x){var x=m;sr(m)?Ao.call(s,m,1):Vl(s,m)}}return s}function Ul(s,a){return s+Lo(Of()*(a-s+1))}function ox(s,a,u,g){for(var m=-1,x=we(ko((a-s)/(u||1)),0),S=I(x);x--;)S[g?x:++m]=s,s+=u;return S}function Nl(s,a){var u="";if(!s||a<1||a>ct)return u;do a%2&&(u+=s),a=Lo(a/2),a&&(s+=s);while(a);return u}function Et(s,a){return ac(Cd(s,a,tn),s+"")}function ax(s){return Df(Yi(s))}function lx(s,a){var u=Yi(s);return qo(u,ti(a,0,u.length))}function Ts(s,a,u,g){if(!ce(s))return s;a=Ar(a,s);for(var m=-1,x=a.length,S=x-1,T=s;T!=null&&++m<x;){var k=Vn(a[m]),H=u;if(k==="__proto__"||k==="constructor"||k==="prototype")return s;if(m!=S){var Y=T[k];H=g?g(Y,k,T):e,H===e&&(H=ce(Y)?Y:sr(a[m+1])?[]:{})}ws(T,k,H),T=T[k]}return s}var Gf=Ro?function(s,a){return Ro.set(s,a),s}:tn,cx=Mo?function(s,a){return Mo(s,"toString",{configurable:!0,enumerable:!1,value:_c(a),writable:!0})}:tn;function hx(s){return qo(Yi(s))}function Cn(s,a,u){var g=-1,m=s.length;a<0&&(a=-a>m?0:m+a),u=u>m?m:u,u<0&&(u+=m),m=a>u?0:u-a>>>0,a>>>=0;for(var x=I(m);++g<m;)x[g]=s[g+a];return x}function ux(s,a){var u;return Pr(s,function(g,m,x){return u=a(g,m,x),!u}),!!u}function Ho(s,a,u){var g=0,m=s==null?g:s.length;if(typeof a=="number"&&a===a&&m<=Yn){for(;g<m;){var x=g+m>>>1,S=s[x];S!==null&&!hn(S)&&(u?S<=a:S<a)?g=x+1:m=x}return m}return zl(s,a,tn,u)}function zl(s,a,u,g){var m=0,x=s==null?0:s.length;if(x===0)return 0;a=u(a);for(var S=a!==a,T=a===null,k=hn(a),H=a===e;m<x;){var Y=Lo((m+x)/2),G=u(s[Y]),Z=G!==e,ht=G===null,vt=G===G,Tt=hn(G);if(S)var yt=g||vt;else H?yt=vt&&(g||Z):T?yt=vt&&Z&&(g||!ht):k?yt=vt&&Z&&!ht&&(g||!Tt):ht||Tt?yt=!1:yt=g?G<=a:G<a;yt?m=Y+1:x=Y}return Le(x,ye)}function $f(s,a){for(var u=-1,g=s.length,m=0,x=[];++u<g;){var S=s[u],T=a?a(S):S;if(!u||!An(T,k)){var k=T;x[m++]=S===0?0:S}}return x}function Kf(s){return typeof s=="number"?s:hn(s)?At:+s}function cn(s){if(typeof s=="string")return s;if(Ct(s))return ae(s,cn)+"";if(hn(s))return Ef?Ef.call(s):"";var a=s+"";return a=="0"&&1/s==-at?"-0":a}function Dr(s,a,u){var g=-1,m=xo,x=s.length,S=!0,T=[],k=T;if(u)S=!1,m=xl;else if(x>=i){var H=a?null:Cx(s);if(H)return Co(H);S=!1,m=ps,k=new Qr}else k=a?[]:T;t:for(;++g<x;){var Y=s[g],G=a?a(Y):Y;if(Y=u||Y!==0?Y:0,S&&G===G){for(var Z=k.length;Z--;)if(k[Z]===G)continue t;a&&k.push(G),T.push(Y)}else m(k,G,u)||(k!==T&&k.push(G),T.push(Y))}return T}function Vl(s,a){return a=Ar(a,s),s=Sd(s,a),s==null||delete s[Vn(Sn(a))]}function qf(s,a,u,g){return Ts(s,a,u(ei(s,a)),g)}function Yo(s,a,u,g){for(var m=s.length,x=g?m:-1;(g?x--:++x<m)&&a(s[x],x,s););return u?Cn(s,g?0:x,g?x+1:m):Cn(s,g?x+1:0,g?m:x)}function Jf(s,a){var u=s;return u instanceof kt&&(u=u.value()),wl(a,function(g,m){return m.func.apply(m.thisArg,Tr([g],m.args))},u)}function Gl(s,a,u){var g=s.length;if(g<2)return g?Dr(s[0]):[];for(var m=-1,x=I(g);++m<g;)for(var S=s[m],T=-1;++T<g;)T!=m&&(x[m]=Cs(x[m]||S,s[T],a,u));return Dr(Ae(x,1),a,u)}function Zf(s,a,u){for(var g=-1,m=s.length,x=a.length,S={};++g<m;){var T=g<x?a[g]:e;u(S,s[g],T)}return S}function $l(s){return ge(s)?s:[]}function Kl(s){return typeof s=="function"?s:tn}function Ar(s,a){return Ct(s)?s:ic(s,a)?[s]:Ed(Gt(s))}var fx=Et;function Mr(s,a,u){var g=s.length;return u=u===e?g:u,!a&&u>=g?s:Cn(s,a,u)}var Qf=Qv||function(s){return De.clearTimeout(s)};function td(s,a){if(a)return s.slice();var u=s.length,g=wf?wf(u):new s.constructor(u);return s.copy(g),g}function ql(s){var a=new s.constructor(s.byteLength);return new Po(a).set(new Po(s)),a}function dx(s,a){var u=a?ql(s.buffer):s.buffer;return new s.constructor(u,s.byteOffset,s.byteLength)}function gx(s){var a=new s.constructor(s.source,Iu.exec(s));return a.lastIndex=s.lastIndex,a}function px(s){return xs?Zt(xs.call(s)):{}}function ed(s,a){var u=a?ql(s.buffer):s.buffer;return new s.constructor(u,s.byteOffset,s.length)}function nd(s,a){if(s!==a){var u=s!==e,g=s===null,m=s===s,x=hn(s),S=a!==e,T=a===null,k=a===a,H=hn(a);if(!T&&!H&&!x&&s>a||x&&S&&k&&!T&&!H||g&&S&&k||!u&&k||!m)return 1;if(!g&&!x&&!H&&s<a||H&&u&&m&&!g&&!x||T&&u&&m||!S&&m||!k)return-1}return 0}function mx(s,a,u){for(var g=-1,m=s.criteria,x=a.criteria,S=m.length,T=u.length;++g<S;){var k=nd(m[g],x[g]);if(k){if(g>=T)return k;var H=u[g];return k*(H=="desc"?-1:1)}}return s.index-a.index}function rd(s,a,u,g){for(var m=-1,x=s.length,S=u.length,T=-1,k=a.length,H=we(x-S,0),Y=I(k+H),G=!g;++T<k;)Y[T]=a[T];for(;++m<S;)(G||m<x)&&(Y[u[m]]=s[m]);for(;H--;)Y[T++]=s[m++];return Y}function id(s,a,u,g){for(var m=-1,x=s.length,S=-1,T=u.length,k=-1,H=a.length,Y=we(x-T,0),G=I(Y+H),Z=!g;++m<Y;)G[m]=s[m];for(var ht=m;++k<H;)G[ht+k]=a[k];for(;++S<T;)(Z||m<x)&&(G[ht+u[S]]=s[m++]);return G}function Je(s,a){var u=-1,g=s.length;for(a||(a=I(g));++u<g;)a[u]=s[u];return a}function zn(s,a,u,g){var m=!u;u||(u={});for(var x=-1,S=a.length;++x<S;){var T=a[x],k=g?g(u[T],s[T],T,u,s):e;k===e&&(k=s[T]),m?nr(u,T,k):ws(u,T,k)}return u}function _x(s,a){return zn(s,rc(s),a)}function vx(s,a){return zn(s,_d(s),a)}function Uo(s,a){return function(u,g){var m=Ct(u)?Sv:Xy,x=a?a():{};return m(u,s,mt(g,2),x)}}function ji(s){return Et(function(a,u){var g=-1,m=u.length,x=m>1?u[m-1]:e,S=m>2?u[2]:e;for(x=s.length>3&&typeof x=="function"?(m--,x):e,S&&He(u[0],u[1],S)&&(x=m<3?e:x,m=1),a=Zt(a);++g<m;){var T=u[g];T&&s(a,T,g,x)}return a})}function sd(s,a){return function(u,g){if(u==null)return u;if(!Ze(u))return s(u,g);for(var m=u.length,x=a?m:-1,S=Zt(u);(a?x--:++x<m)&&g(S[x],x,S)!==!1;);return u}}function od(s){return function(a,u,g){for(var m=-1,x=Zt(a),S=g(a),T=S.length;T--;){var k=S[s?T:++m];if(u(x[k],k,x)===!1)break}return a}}function yx(s,a,u){var g=a&O,m=Os(s);function x(){var S=this&&this!==De&&this instanceof x?m:s;return S.apply(g?u:this,arguments)}return x}function ad(s){return function(a){a=Gt(a);var u=Mi(a)?Pn(a):e,g=u?u[0]:a.charAt(0),m=u?Mr(u,1).join(""):a.slice(1);return g[s]()+m}}function Wi(s){return function(a){return wl(sg(ig(a).replace(cv,"")),s,"")}}function Os(s){return function(){var a=arguments;switch(a.length){case 0:return new s;case 1:return new s(a[0]);case 2:return new s(a[0],a[1]);case 3:return new s(a[0],a[1],a[2]);case 4:return new s(a[0],a[1],a[2],a[3]);case 5:return new s(a[0],a[1],a[2],a[3],a[4]);case 6:return new s(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new s(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var u=Bi(s.prototype),g=s.apply(u,a);return ce(g)?g:u}}function xx(s,a,u){var g=Os(s);function m(){for(var x=arguments.length,S=I(x),T=x,k=Xi(m);T--;)S[T]=arguments[T];var H=x<3&&S[0]!==k&&S[x-1]!==k?[]:Or(S,k);if(x-=H.length,x<u)return fd(s,a,No,m.placeholder,e,S,H,e,e,u-x);var Y=this&&this!==De&&this instanceof m?g:s;return an(Y,this,S)}return m}function ld(s){return function(a,u,g){var m=Zt(a);if(!Ze(a)){var x=mt(u,3);a=Te(a),u=function(T){return x(m[T],T,m)}}var S=s(a,u,g);return S>-1?m[x?a[S]:S]:e}}function cd(s){return ir(function(a){var u=a.length,g=u,m=xn.prototype.thru;for(s&&a.reverse();g--;){var x=a[g];if(typeof x!="function")throw new yn(l);if(m&&!S&&$o(x)=="wrapper")var S=new xn([],!0)}for(g=S?g:u;++g<u;){x=a[g];var T=$o(x),k=T=="wrapper"?ec(x):e;k&&sc(k[0])&&k[1]==(nt|X|$|ot)&&!k[4].length&&k[9]==1?S=S[$o(k[0])].apply(S,k[3]):S=x.length==1&&sc(x)?S[T]():S.thru(x)}return function(){var H=arguments,Y=H[0];if(S&&H.length==1&&Ct(Y))return S.plant(Y).value();for(var G=0,Z=u?a[G].apply(this,H):Y;++G<u;)Z=a[G].call(this,Z);return Z}})}function No(s,a,u,g,m,x,S,T,k,H){var Y=a&nt,G=a&O,Z=a&M,ht=a&(X|B),vt=a&it,Tt=Z?e:Os(s);function yt(){for(var Mt=arguments.length,It=I(Mt),un=Mt;un--;)It[un]=arguments[un];if(ht)var Ye=Xi(yt),fn=kv(It,Ye);if(g&&(It=rd(It,g,m,ht)),x&&(It=id(It,x,S,ht)),Mt-=fn,ht&&Mt<H){var pe=Or(It,Ye);return fd(s,a,No,yt.placeholder,u,It,pe,T,k,H-Mt)}var Mn=G?u:this,lr=Z?Mn[s]:s;return Mt=It.length,T?It=Xx(It,T):vt&&Mt>1&&It.reverse(),Y&&k<Mt&&(It.length=k),this&&this!==De&&this instanceof yt&&(lr=Tt||Os(lr)),lr.apply(Mn,It)}return yt}function hd(s,a){return function(u,g){return $y(u,s,a(g),{})}}function zo(s,a){return function(u,g){var m;if(u===e&&g===e)return a;if(u!==e&&(m=u),g!==e){if(m===e)return g;typeof u=="string"||typeof g=="string"?(u=cn(u),g=cn(g)):(u=Kf(u),g=Kf(g)),m=s(u,g)}return m}}function Jl(s){return ir(function(a){return a=ae(a,ln(mt())),Et(function(u){var g=this;return s(a,function(m){return an(m,g,u)})})})}function Vo(s,a){a=a===e?" ":cn(a);var u=a.length;if(u<2)return u?Nl(a,s):a;var g=Nl(a,ko(s/ki(a)));return Mi(a)?Mr(Pn(g),0,s).join(""):g.slice(0,s)}function wx(s,a,u,g){var m=a&O,x=Os(s);function S(){for(var T=-1,k=arguments.length,H=-1,Y=g.length,G=I(Y+k),Z=this&&this!==De&&this instanceof S?x:s;++H<Y;)G[H]=g[H];for(;k--;)G[H++]=arguments[++T];return an(Z,m?u:this,G)}return S}function ud(s){return function(a,u,g){return g&&typeof g!="number"&&He(a,u,g)&&(u=g=e),a=ar(a),u===e?(u=a,a=0):u=ar(u),g=g===e?a<u?1:-1:ar(g),ox(a,u,g,s)}}function Go(s){return function(a,u){return typeof a=="string"&&typeof u=="string"||(a=bn(a),u=bn(u)),s(a,u)}}function fd(s,a,u,g,m,x,S,T,k,H){var Y=a&X,G=Y?S:e,Z=Y?e:S,ht=Y?x:e,vt=Y?e:x;a|=Y?$:tt,a&=~(Y?tt:$),a&R||(a&=~(O|M));var Tt=[s,a,m,ht,G,vt,Z,T,k,H],yt=u.apply(e,Tt);return sc(s)&&bd(yt,Tt),yt.placeholder=g,Td(yt,s,a)}function Zl(s){var a=xe[s];return function(u,g){if(u=bn(u),g=g==null?0:Le(St(g),292),g&&Tf(u)){var m=(Gt(u)+"e").split("e"),x=a(m[0]+"e"+(+m[1]+g));return m=(Gt(x)+"e").split("e"),+(m[0]+"e"+(+m[1]-g))}return a(u)}}var Cx=Fi&&1/Co(new Fi([,-0]))[1]==at?function(s){return new Fi(s)}:xc;function dd(s){return function(a){var u=Re(a);return u==L?Pl(a):u==V?Wv(a):Mv(a,s(a))}}function rr(s,a,u,g,m,x,S,T){var k=a&M;if(!k&&typeof s!="function")throw new yn(l);var H=g?g.length:0;if(H||(a&=~($|tt),g=m=e),S=S===e?S:we(St(S),0),T=T===e?T:St(T),H-=m?m.length:0,a&tt){var Y=g,G=m;g=m=e}var Z=k?e:ec(s),ht=[s,a,u,g,m,Y,G,x,S,T];if(Z&&Bx(ht,Z),s=ht[0],a=ht[1],u=ht[2],g=ht[3],m=ht[4],T=ht[9]=ht[9]===e?k?0:s.length:we(ht[9]-H,0),!T&&a&(X|B)&&(a&=~(X|B)),!a||a==O)var vt=yx(s,a,u);else a==X||a==B?vt=xx(s,a,T):(a==$||a==(O|$))&&!m.length?vt=wx(s,a,u,g):vt=No.apply(e,ht);var Tt=Z?Gf:bd;return Td(Tt(vt,ht),s,a)}function gd(s,a,u,g){return s===e||An(s,Ri[u])&&!$t.call(g,u)?a:s}function pd(s,a,u,g,m,x){return ce(s)&&ce(a)&&(x.set(a,s),Xo(s,a,e,pd,x),x.delete(a)),s}function Sx(s){return Ds(s)?e:s}function md(s,a,u,g,m,x){var S=u&w,T=s.length,k=a.length;if(T!=k&&!(S&&k>T))return!1;var H=x.get(s),Y=x.get(a);if(H&&Y)return H==a&&Y==s;var G=-1,Z=!0,ht=u&E?new Qr:e;for(x.set(s,a),x.set(a,s);++G<T;){var vt=s[G],Tt=a[G];if(g)var yt=S?g(Tt,vt,G,a,s,x):g(vt,Tt,G,s,a,x);if(yt!==e){if(yt)continue;Z=!1;break}if(ht){if(!Cl(a,function(Mt,It){if(!ps(ht,It)&&(vt===Mt||m(vt,Mt,u,g,x)))return ht.push(It)})){Z=!1;break}}else if(!(vt===Tt||m(vt,Tt,u,g,x))){Z=!1;break}}return x.delete(s),x.delete(a),Z}function bx(s,a,u,g,m,x,S){switch(u){case Ft:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case Yt:return!(s.byteLength!=a.byteLength||!x(new Po(s),new Po(a)));case et:case J:case j:return An(+s,+a);case Rt:return s.name==a.name&&s.message==a.message;case q:case ut:return s==a+"";case L:var T=Pl;case V:var k=g&w;if(T||(T=Co),s.size!=a.size&&!k)return!1;var H=S.get(s);if(H)return H==a;g|=E,S.set(s,a);var Y=md(T(s),T(a),g,m,x,S);return S.delete(s),Y;case st:if(xs)return xs.call(s)==xs.call(a)}return!1}function Tx(s,a,u,g,m,x){var S=u&w,T=Ql(s),k=T.length,H=Ql(a),Y=H.length;if(k!=Y&&!S)return!1;for(var G=k;G--;){var Z=T[G];if(!(S?Z in a:$t.call(a,Z)))return!1}var ht=x.get(s),vt=x.get(a);if(ht&&vt)return ht==a&&vt==s;var Tt=!0;x.set(s,a),x.set(a,s);for(var yt=S;++G<k;){Z=T[G];var Mt=s[Z],It=a[Z];if(g)var un=S?g(It,Mt,Z,a,s,x):g(Mt,It,Z,s,a,x);if(!(un===e?Mt===It||m(Mt,It,u,g,x):un)){Tt=!1;break}yt||(yt=Z=="constructor")}if(Tt&&!yt){var Ye=s.constructor,fn=a.constructor;Ye!=fn&&"constructor"in s&&"constructor"in a&&!(typeof Ye=="function"&&Ye instanceof Ye&&typeof fn=="function"&&fn instanceof fn)&&(Tt=!1)}return x.delete(s),x.delete(a),Tt}function ir(s){return ac(Cd(s,e,Md),s+"")}function Ql(s){return If(s,Te,rc)}function tc(s){return If(s,Qe,_d)}var ec=Ro?function(s){return Ro.get(s)}:xc;function $o(s){for(var a=s.name+"",u=Ii[a],g=$t.call(Ii,a)?u.length:0;g--;){var m=u[g],x=m.func;if(x==null||x==s)return m.name}return a}function Xi(s){var a=$t.call(y,"placeholder")?y:s;return a.placeholder}function mt(){var s=y.iteratee||vc;return s=s===vc?Wf:s,arguments.length?s(arguments[0],arguments[1]):s}function Ko(s,a){var u=s.__data__;return Lx(a)?u[typeof a=="string"?"string":"hash"]:u.map}function nc(s){for(var a=Te(s),u=a.length;u--;){var g=a[u],m=s[g];a[u]=[g,m,xd(m)]}return a}function ni(s,a){var u=Iv(s,a);return jf(u)?u:e}function Ox(s){var a=$t.call(s,Jr),u=s[Jr];try{s[Jr]=e;var g=!0}catch{}var m=Oo.call(s);return g&&(a?s[Jr]=u:delete s[Jr]),m}var rc=Al?function(s){return s==null?[]:(s=Zt(s),br(Al(s),function(a){return Sf.call(s,a)}))}:wc,_d=Al?function(s){for(var a=[];s;)Tr(a,rc(s)),s=Do(s);return a}:wc,Re=Xe;(Ml&&Re(new Ml(new ArrayBuffer(1)))!=Ft||_s&&Re(new _s)!=L||kl&&Re(kl.resolve())!=Q||Fi&&Re(new Fi)!=V||vs&&Re(new vs)!=_t)&&(Re=function(s){var a=Xe(s),u=a==z?s.constructor:e,g=u?ri(u):"";if(g)switch(g){case ly:return Ft;case cy:return L;case hy:return Q;case uy:return V;case fy:return _t}return a});function Ex(s,a,u){for(var g=-1,m=u.length;++g<m;){var x=u[g],S=x.size;switch(x.type){case"drop":s+=S;break;case"dropRight":a-=S;break;case"take":a=Le(a,s+S);break;case"takeRight":s=we(s,a-S);break}}return{start:s,end:a}}function Px(s){var a=s.match(R_);return a?a[1].split(F_):[]}function vd(s,a,u){a=Ar(a,s);for(var g=-1,m=a.length,x=!1;++g<m;){var S=Vn(a[g]);if(!(x=s!=null&&u(s,S)))break;s=s[S]}return x||++g!=m?x:(m=s==null?0:s.length,!!m&&na(m)&&sr(S,m)&&(Ct(s)||ii(s)))}function Dx(s){var a=s.length,u=new s.constructor(a);return a&&typeof s[0]=="string"&&$t.call(s,"index")&&(u.index=s.index,u.input=s.input),u}function yd(s){return typeof s.constructor=="function"&&!Es(s)?Bi(Do(s)):{}}function Ax(s,a,u){var g=s.constructor;switch(a){case Yt:return ql(s);case et:case J:return new g(+s);case Ft:return dx(s,u);case oe:case We:case Un:case Oi:case Qn:case Ei:case Pe:case qe:case Pi:return ed(s,u);case L:return new g;case j:case ut:return new g(s);case q:return gx(s);case V:return new g;case st:return px(s)}}function Mx(s,a){var u=a.length;if(!u)return s;var g=u-1;return a[g]=(u>1?"& ":"")+a[g],a=a.join(u>2?", ":" "),s.replace(L_,`{
/* [wrapped with `+a+`] */
`)}function kx(s){return Ct(s)||ii(s)||!!(bf&&s&&s[bf])}function sr(s,a){var u=typeof s;return a=a??ct,!!a&&(u=="number"||u!="symbol"&&N_.test(s))&&s>-1&&s%1==0&&s<a}function He(s,a,u){if(!ce(u))return!1;var g=typeof a;return(g=="number"?Ze(u)&&sr(a,u.length):g=="string"&&a in u)?An(u[a],s):!1}function ic(s,a){if(Ct(s))return!1;var u=typeof s;return u=="number"||u=="symbol"||u=="boolean"||s==null||hn(s)?!0:D_.test(s)||!P_.test(s)||a!=null&&s in Zt(a)}function Lx(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}function sc(s){var a=$o(s),u=y[a];if(typeof u!="function"||!(a in kt.prototype))return!1;if(s===u)return!0;var g=ec(u);return!!g&&s===g[0]}function Rx(s){return!!xf&&xf in s}var Fx=bo?or:Cc;function Es(s){var a=s&&s.constructor,u=typeof a=="function"&&a.prototype||Ri;return s===u}function xd(s){return s===s&&!ce(s)}function wd(s,a){return function(u){return u==null?!1:u[s]===a&&(a!==e||s in Zt(u))}}function Ix(s){var a=ta(s,function(g){return u.size===f&&u.clear(),g}),u=a.cache;return a}function Bx(s,a){var u=s[1],g=a[1],m=u|g,x=m<(O|M|nt),S=g==nt&&u==X||g==nt&&u==ot&&s[7].length<=a[8]||g==(nt|ot)&&a[7].length<=a[8]&&u==X;if(!(x||S))return s;g&O&&(s[2]=a[2],m|=u&O?0:R);var T=a[3];if(T){var k=s[3];s[3]=k?rd(k,T,a[4]):T,s[4]=k?Or(s[3],d):a[4]}return T=a[5],T&&(k=s[5],s[5]=k?id(k,T,a[6]):T,s[6]=k?Or(s[5],d):a[6]),T=a[7],T&&(s[7]=T),g&nt&&(s[8]=s[8]==null?a[8]:Le(s[8],a[8])),s[9]==null&&(s[9]=a[9]),s[0]=a[0],s[1]=m,s}function jx(s){var a=[];if(s!=null)for(var u in Zt(s))a.push(u);return a}function Wx(s){return Oo.call(s)}function Cd(s,a,u){return a=we(a===e?s.length-1:a,0),function(){for(var g=arguments,m=-1,x=we(g.length-a,0),S=I(x);++m<x;)S[m]=g[a+m];m=-1;for(var T=I(a+1);++m<a;)T[m]=g[m];return T[a]=u(S),an(s,this,T)}}function Sd(s,a){return a.length<2?s:ei(s,Cn(a,0,-1))}function Xx(s,a){for(var u=s.length,g=Le(a.length,u),m=Je(s);g--;){var x=a[g];s[g]=sr(x,u)?m[x]:e}return s}function oc(s,a){if(!(a==="constructor"&&typeof s[a]=="function")&&a!="__proto__")return s[a]}var bd=Od(Gf),Ps=ey||function(s,a){return De.setTimeout(s,a)},ac=Od(cx);function Td(s,a,u){var g=a+"";return ac(s,Mx(g,Hx(Px(g),u)))}function Od(s){var a=0,u=0;return function(){var g=sy(),m=Wt-(g-u);if(u=g,m>0){if(++a>=Lt)return arguments[0]}else a=0;return s.apply(e,arguments)}}function qo(s,a){var u=-1,g=s.length,m=g-1;for(a=a===e?g:a;++u<a;){var x=Ul(u,m),S=s[x];s[x]=s[u],s[u]=S}return s.length=a,s}var Ed=Ix(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(A_,function(u,g,m,x){a.push(m?x.replace(j_,"$1"):g||u)}),a});function Vn(s){if(typeof s=="string"||hn(s))return s;var a=s+"";return a=="0"&&1/s==-at?"-0":a}function ri(s){if(s!=null){try{return To.call(s)}catch{}try{return s+""}catch{}}return""}function Hx(s,a){return vn(Sr,function(u){var g="_."+u[0];a&u[1]&&!xo(s,g)&&s.push(g)}),s.sort()}function Pd(s){if(s instanceof kt)return s.clone();var a=new xn(s.__wrapped__,s.__chain__);return a.__actions__=Je(s.__actions__),a.__index__=s.__index__,a.__values__=s.__values__,a}function Yx(s,a,u){(u?He(s,a,u):a===e)?a=1:a=we(St(a),0);var g=s==null?0:s.length;if(!g||a<1)return[];for(var m=0,x=0,S=I(ko(g/a));m<g;)S[x++]=Cn(s,m,m+=a);return S}function Ux(s){for(var a=-1,u=s==null?0:s.length,g=0,m=[];++a<u;){var x=s[a];x&&(m[g++]=x)}return m}function Nx(){var s=arguments.length;if(!s)return[];for(var a=I(s-1),u=arguments[0],g=s;g--;)a[g-1]=arguments[g];return Tr(Ct(u)?Je(u):[u],Ae(a,1))}var zx=Et(function(s,a){return ge(s)?Cs(s,Ae(a,1,ge,!0)):[]}),Vx=Et(function(s,a){var u=Sn(a);return ge(u)&&(u=e),ge(s)?Cs(s,Ae(a,1,ge,!0),mt(u,2)):[]}),Gx=Et(function(s,a){var u=Sn(a);return ge(u)&&(u=e),ge(s)?Cs(s,Ae(a,1,ge,!0),e,u):[]});function $x(s,a,u){var g=s==null?0:s.length;return g?(a=u||a===e?1:St(a),Cn(s,a<0?0:a,g)):[]}function Kx(s,a,u){var g=s==null?0:s.length;return g?(a=u||a===e?1:St(a),a=g-a,Cn(s,0,a<0?0:a)):[]}function qx(s,a){return s&&s.length?Yo(s,mt(a,3),!0,!0):[]}function Jx(s,a){return s&&s.length?Yo(s,mt(a,3),!0):[]}function Zx(s,a,u,g){var m=s==null?0:s.length;return m?(u&&typeof u!="number"&&He(s,a,u)&&(u=0,g=m),Ny(s,a,u,g)):[]}function Dd(s,a,u){var g=s==null?0:s.length;if(!g)return-1;var m=u==null?0:St(u);return m<0&&(m=we(g+m,0)),wo(s,mt(a,3),m)}function Ad(s,a,u){var g=s==null?0:s.length;if(!g)return-1;var m=g-1;return u!==e&&(m=St(u),m=u<0?we(g+m,0):Le(m,g-1)),wo(s,mt(a,3),m,!0)}function Md(s){var a=s==null?0:s.length;return a?Ae(s,1):[]}function Qx(s){var a=s==null?0:s.length;return a?Ae(s,at):[]}function tw(s,a){var u=s==null?0:s.length;return u?(a=a===e?1:St(a),Ae(s,a)):[]}function ew(s){for(var a=-1,u=s==null?0:s.length,g={};++a<u;){var m=s[a];g[m[0]]=m[1]}return g}function kd(s){return s&&s.length?s[0]:e}function nw(s,a,u){var g=s==null?0:s.length;if(!g)return-1;var m=u==null?0:St(u);return m<0&&(m=we(g+m,0)),Ai(s,a,m)}function rw(s){var a=s==null?0:s.length;return a?Cn(s,0,-1):[]}var iw=Et(function(s){var a=ae(s,$l);return a.length&&a[0]===s[0]?jl(a):[]}),sw=Et(function(s){var a=Sn(s),u=ae(s,$l);return a===Sn(u)?a=e:u.pop(),u.length&&u[0]===s[0]?jl(u,mt(a,2)):[]}),ow=Et(function(s){var a=Sn(s),u=ae(s,$l);return a=typeof a=="function"?a:e,a&&u.pop(),u.length&&u[0]===s[0]?jl(u,e,a):[]});function aw(s,a){return s==null?"":ry.call(s,a)}function Sn(s){var a=s==null?0:s.length;return a?s[a-1]:e}function lw(s,a,u){var g=s==null?0:s.length;if(!g)return-1;var m=g;return u!==e&&(m=St(u),m=m<0?we(g+m,0):Le(m,g-1)),a===a?Hv(s,a,m):wo(s,ff,m,!0)}function cw(s,a){return s&&s.length?Uf(s,St(a)):e}var hw=Et(Ld);function Ld(s,a){return s&&s.length&&a&&a.length?Yl(s,a):s}function uw(s,a,u){return s&&s.length&&a&&a.length?Yl(s,a,mt(u,2)):s}function fw(s,a,u){return s&&s.length&&a&&a.length?Yl(s,a,e,u):s}var dw=ir(function(s,a){var u=s==null?0:s.length,g=Rl(s,a);return Vf(s,ae(a,function(m){return sr(m,u)?+m:m}).sort(nd)),g});function gw(s,a){var u=[];if(!(s&&s.length))return u;var g=-1,m=[],x=s.length;for(a=mt(a,3);++g<x;){var S=s[g];a(S,g,s)&&(u.push(S),m.push(g))}return Vf(s,m),u}function lc(s){return s==null?s:ay.call(s)}function pw(s,a,u){var g=s==null?0:s.length;return g?(u&&typeof u!="number"&&He(s,a,u)?(a=0,u=g):(a=a==null?0:St(a),u=u===e?g:St(u)),Cn(s,a,u)):[]}function mw(s,a){return Ho(s,a)}function _w(s,a,u){return zl(s,a,mt(u,2))}function vw(s,a){var u=s==null?0:s.length;if(u){var g=Ho(s,a);if(g<u&&An(s[g],a))return g}return-1}function yw(s,a){return Ho(s,a,!0)}function xw(s,a,u){return zl(s,a,mt(u,2),!0)}function ww(s,a){var u=s==null?0:s.length;if(u){var g=Ho(s,a,!0)-1;if(An(s[g],a))return g}return-1}function Cw(s){return s&&s.length?$f(s):[]}function Sw(s,a){return s&&s.length?$f(s,mt(a,2)):[]}function bw(s){var a=s==null?0:s.length;return a?Cn(s,1,a):[]}function Tw(s,a,u){return s&&s.length?(a=u||a===e?1:St(a),Cn(s,0,a<0?0:a)):[]}function Ow(s,a,u){var g=s==null?0:s.length;return g?(a=u||a===e?1:St(a),a=g-a,Cn(s,a<0?0:a,g)):[]}function Ew(s,a){return s&&s.length?Yo(s,mt(a,3),!1,!0):[]}function Pw(s,a){return s&&s.length?Yo(s,mt(a,3)):[]}var Dw=Et(function(s){return Dr(Ae(s,1,ge,!0))}),Aw=Et(function(s){var a=Sn(s);return ge(a)&&(a=e),Dr(Ae(s,1,ge,!0),mt(a,2))}),Mw=Et(function(s){var a=Sn(s);return a=typeof a=="function"?a:e,Dr(Ae(s,1,ge,!0),e,a)});function kw(s){return s&&s.length?Dr(s):[]}function Lw(s,a){return s&&s.length?Dr(s,mt(a,2)):[]}function Rw(s,a){return a=typeof a=="function"?a:e,s&&s.length?Dr(s,e,a):[]}function cc(s){if(!(s&&s.length))return[];var a=0;return s=br(s,function(u){if(ge(u))return a=we(u.length,a),!0}),Ol(a,function(u){return ae(s,Sl(u))})}function Rd(s,a){if(!(s&&s.length))return[];var u=cc(s);return a==null?u:ae(u,function(g){return an(a,e,g)})}var Fw=Et(function(s,a){return ge(s)?Cs(s,a):[]}),Iw=Et(function(s){return Gl(br(s,ge))}),Bw=Et(function(s){var a=Sn(s);return ge(a)&&(a=e),Gl(br(s,ge),mt(a,2))}),jw=Et(function(s){var a=Sn(s);return a=typeof a=="function"?a:e,Gl(br(s,ge),e,a)}),Ww=Et(cc);function Xw(s,a){return Zf(s||[],a||[],ws)}function Hw(s,a){return Zf(s||[],a||[],Ts)}var Yw=Et(function(s){var a=s.length,u=a>1?s[a-1]:e;return u=typeof u=="function"?(s.pop(),u):e,Rd(s,u)});function Fd(s){var a=y(s);return a.__chain__=!0,a}function Uw(s,a){return a(s),s}function Jo(s,a){return a(s)}var Nw=ir(function(s){var a=s.length,u=a?s[0]:0,g=this.__wrapped__,m=function(x){return Rl(x,s)};return a>1||this.__actions__.length||!(g instanceof kt)||!sr(u)?this.thru(m):(g=g.slice(u,+u+(a?1:0)),g.__actions__.push({func:Jo,args:[m],thisArg:e}),new xn(g,this.__chain__).thru(function(x){return a&&!x.length&&x.push(e),x}))});function zw(){return Fd(this)}function Vw(){return new xn(this.value(),this.__chain__)}function Gw(){this.__values__===e&&(this.__values__=Kd(this.value()));var s=this.__index__>=this.__values__.length,a=s?e:this.__values__[this.__index__++];return{done:s,value:a}}function $w(){return this}function Kw(s){for(var a,u=this;u instanceof Io;){var g=Pd(u);g.__index__=0,g.__values__=e,a?m.__wrapped__=g:a=g;var m=g;u=u.__wrapped__}return m.__wrapped__=s,a}function qw(){var s=this.__wrapped__;if(s instanceof kt){var a=s;return this.__actions__.length&&(a=new kt(this)),a=a.reverse(),a.__actions__.push({func:Jo,args:[lc],thisArg:e}),new xn(a,this.__chain__)}return this.thru(lc)}function Jw(){return Jf(this.__wrapped__,this.__actions__)}var Zw=Uo(function(s,a,u){$t.call(s,u)?++s[u]:nr(s,u,1)});function Qw(s,a,u){var g=Ct(s)?hf:Uy;return u&&He(s,a,u)&&(a=e),g(s,mt(a,3))}function tC(s,a){var u=Ct(s)?br:Rf;return u(s,mt(a,3))}var eC=ld(Dd),nC=ld(Ad);function rC(s,a){return Ae(Zo(s,a),1)}function iC(s,a){return Ae(Zo(s,a),at)}function sC(s,a,u){return u=u===e?1:St(u),Ae(Zo(s,a),u)}function Id(s,a){var u=Ct(s)?vn:Pr;return u(s,mt(a,3))}function Bd(s,a){var u=Ct(s)?bv:Lf;return u(s,mt(a,3))}var oC=Uo(function(s,a,u){$t.call(s,u)?s[u].push(a):nr(s,u,[a])});function aC(s,a,u,g){s=Ze(s)?s:Yi(s),u=u&&!g?St(u):0;var m=s.length;return u<0&&(u=we(m+u,0)),ra(s)?u<=m&&s.indexOf(a,u)>-1:!!m&&Ai(s,a,u)>-1}var lC=Et(function(s,a,u){var g=-1,m=typeof a=="function",x=Ze(s)?I(s.length):[];return Pr(s,function(S){x[++g]=m?an(a,S,u):Ss(S,a,u)}),x}),cC=Uo(function(s,a,u){nr(s,u,a)});function Zo(s,a){var u=Ct(s)?ae:Xf;return u(s,mt(a,3))}function hC(s,a,u,g){return s==null?[]:(Ct(a)||(a=a==null?[]:[a]),u=g?e:u,Ct(u)||(u=u==null?[]:[u]),Nf(s,a,u))}var uC=Uo(function(s,a,u){s[u?0:1].push(a)},function(){return[[],[]]});function fC(s,a,u){var g=Ct(s)?wl:gf,m=arguments.length<3;return g(s,mt(a,4),u,m,Pr)}function dC(s,a,u){var g=Ct(s)?Tv:gf,m=arguments.length<3;return g(s,mt(a,4),u,m,Lf)}function gC(s,a){var u=Ct(s)?br:Rf;return u(s,ea(mt(a,3)))}function pC(s){var a=Ct(s)?Df:ax;return a(s)}function mC(s,a,u){(u?He(s,a,u):a===e)?a=1:a=St(a);var g=Ct(s)?jy:lx;return g(s,a)}function _C(s){var a=Ct(s)?Wy:hx;return a(s)}function vC(s){if(s==null)return 0;if(Ze(s))return ra(s)?ki(s):s.length;var a=Re(s);return a==L||a==V?s.size:Xl(s).length}function yC(s,a,u){var g=Ct(s)?Cl:ux;return u&&He(s,a,u)&&(a=e),g(s,mt(a,3))}var xC=Et(function(s,a){if(s==null)return[];var u=a.length;return u>1&&He(s,a[0],a[1])?a=[]:u>2&&He(a[0],a[1],a[2])&&(a=[a[0]]),Nf(s,Ae(a,1),[])}),Qo=ty||function(){return De.Date.now()};function wC(s,a){if(typeof a!="function")throw new yn(l);return s=St(s),function(){if(--s<1)return a.apply(this,arguments)}}function jd(s,a,u){return a=u?e:a,a=s&&a==null?s.length:a,rr(s,nt,e,e,e,e,a)}function Wd(s,a){var u;if(typeof a!="function")throw new yn(l);return s=St(s),function(){return--s>0&&(u=a.apply(this,arguments)),s<=1&&(a=e),u}}var hc=Et(function(s,a,u){var g=O;if(u.length){var m=Or(u,Xi(hc));g|=$}return rr(s,g,a,u,m)}),Xd=Et(function(s,a,u){var g=O|M;if(u.length){var m=Or(u,Xi(Xd));g|=$}return rr(a,g,s,u,m)});function Hd(s,a,u){a=u?e:a;var g=rr(s,X,e,e,e,e,e,a);return g.placeholder=Hd.placeholder,g}function Yd(s,a,u){a=u?e:a;var g=rr(s,B,e,e,e,e,e,a);return g.placeholder=Yd.placeholder,g}function Ud(s,a,u){var g,m,x,S,T,k,H=0,Y=!1,G=!1,Z=!0;if(typeof s!="function")throw new yn(l);a=bn(a)||0,ce(u)&&(Y=!!u.leading,G="maxWait"in u,x=G?we(bn(u.maxWait)||0,a):x,Z="trailing"in u?!!u.trailing:Z);function ht(pe){var Mn=g,lr=m;return g=m=e,H=pe,S=s.apply(lr,Mn),S}function vt(pe){return H=pe,T=Ps(Mt,a),Y?ht(pe):S}function Tt(pe){var Mn=pe-k,lr=pe-H,lg=a-Mn;return G?Le(lg,x-lr):lg}function yt(pe){var Mn=pe-k,lr=pe-H;return k===e||Mn>=a||Mn<0||G&&lr>=x}function Mt(){var pe=Qo();if(yt(pe))return It(pe);T=Ps(Mt,Tt(pe))}function It(pe){return T=e,Z&&g?ht(pe):(g=m=e,S)}function un(){T!==e&&Qf(T),H=0,g=k=m=T=e}function Ye(){return T===e?S:It(Qo())}function fn(){var pe=Qo(),Mn=yt(pe);if(g=arguments,m=this,k=pe,Mn){if(T===e)return vt(k);if(G)return Qf(T),T=Ps(Mt,a),ht(k)}return T===e&&(T=Ps(Mt,a)),S}return fn.cancel=un,fn.flush=Ye,fn}var CC=Et(function(s,a){return kf(s,1,a)}),SC=Et(function(s,a,u){return kf(s,bn(a)||0,u)});function bC(s){return rr(s,it)}function ta(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new yn(l);var u=function(){var g=arguments,m=a?a.apply(this,g):g[0],x=u.cache;if(x.has(m))return x.get(m);var S=s.apply(this,g);return u.cache=x.set(m,S)||x,S};return u.cache=new(ta.Cache||er),u}ta.Cache=er;function ea(s){if(typeof s!="function")throw new yn(l);return function(){var a=arguments;switch(a.length){case 0:return!s.call(this);case 1:return!s.call(this,a[0]);case 2:return!s.call(this,a[0],a[1]);case 3:return!s.call(this,a[0],a[1],a[2])}return!s.apply(this,a)}}function TC(s){return Wd(2,s)}var OC=fx(function(s,a){a=a.length==1&&Ct(a[0])?ae(a[0],ln(mt())):ae(Ae(a,1),ln(mt()));var u=a.length;return Et(function(g){for(var m=-1,x=Le(g.length,u);++m<x;)g[m]=a[m].call(this,g[m]);return an(s,this,g)})}),uc=Et(function(s,a){var u=Or(a,Xi(uc));return rr(s,$,e,a,u)}),Nd=Et(function(s,a){var u=Or(a,Xi(Nd));return rr(s,tt,e,a,u)}),EC=ir(function(s,a){return rr(s,ot,e,e,e,a)});function PC(s,a){if(typeof s!="function")throw new yn(l);return a=a===e?a:St(a),Et(s,a)}function DC(s,a){if(typeof s!="function")throw new yn(l);return a=a==null?0:we(St(a),0),Et(function(u){var g=u[a],m=Mr(u,0,a);return g&&Tr(m,g),an(s,this,m)})}function AC(s,a,u){var g=!0,m=!0;if(typeof s!="function")throw new yn(l);return ce(u)&&(g="leading"in u?!!u.leading:g,m="trailing"in u?!!u.trailing:m),Ud(s,a,{leading:g,maxWait:a,trailing:m})}function MC(s){return jd(s,1)}function kC(s,a){return uc(Kl(a),s)}function LC(){if(!arguments.length)return[];var s=arguments[0];return Ct(s)?s:[s]}function RC(s){return wn(s,v)}function FC(s,a){return a=typeof a=="function"?a:e,wn(s,v,a)}function IC(s){return wn(s,p|v)}function BC(s,a){return a=typeof a=="function"?a:e,wn(s,p|v,a)}function jC(s,a){return a==null||Mf(s,a,Te(a))}function An(s,a){return s===a||s!==s&&a!==a}var WC=Go(Bl),XC=Go(function(s,a){return s>=a}),ii=Bf(function(){return arguments}())?Bf:function(s){return ue(s)&&$t.call(s,"callee")&&!Sf.call(s,"callee")},Ct=I.isArray,HC=rf?ln(rf):Ky;function Ze(s){return s!=null&&na(s.length)&&!or(s)}function ge(s){return ue(s)&&Ze(s)}function YC(s){return s===!0||s===!1||ue(s)&&Xe(s)==et}var kr=ny||Cc,UC=sf?ln(sf):qy;function NC(s){return ue(s)&&s.nodeType===1&&!Ds(s)}function zC(s){if(s==null)return!0;if(Ze(s)&&(Ct(s)||typeof s=="string"||typeof s.splice=="function"||kr(s)||Hi(s)||ii(s)))return!s.length;var a=Re(s);if(a==L||a==V)return!s.size;if(Es(s))return!Xl(s).length;for(var u in s)if($t.call(s,u))return!1;return!0}function VC(s,a){return bs(s,a)}function GC(s,a,u){u=typeof u=="function"?u:e;var g=u?u(s,a):e;return g===e?bs(s,a,e,u):!!g}function fc(s){if(!ue(s))return!1;var a=Xe(s);return a==Rt||a==ft||typeof s.message=="string"&&typeof s.name=="string"&&!Ds(s)}function $C(s){return typeof s=="number"&&Tf(s)}function or(s){if(!ce(s))return!1;var a=Xe(s);return a==C||a==b||a==U||a==K}function zd(s){return typeof s=="number"&&s==St(s)}function na(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=ct}function ce(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}function ue(s){return s!=null&&typeof s=="object"}var Vd=of?ln(of):Zy;function KC(s,a){return s===a||Wl(s,a,nc(a))}function qC(s,a,u){return u=typeof u=="function"?u:e,Wl(s,a,nc(a),u)}function JC(s){return Gd(s)&&s!=+s}function ZC(s){if(Fx(s))throw new wt(o);return jf(s)}function QC(s){return s===null}function t1(s){return s==null}function Gd(s){return typeof s=="number"||ue(s)&&Xe(s)==j}function Ds(s){if(!ue(s)||Xe(s)!=z)return!1;var a=Do(s);if(a===null)return!0;var u=$t.call(a,"constructor")&&a.constructor;return typeof u=="function"&&u instanceof u&&To.call(u)==qv}var dc=af?ln(af):Qy;function e1(s){return zd(s)&&s>=-ct&&s<=ct}var $d=lf?ln(lf):tx;function ra(s){return typeof s=="string"||!Ct(s)&&ue(s)&&Xe(s)==ut}function hn(s){return typeof s=="symbol"||ue(s)&&Xe(s)==st}var Hi=cf?ln(cf):ex;function n1(s){return s===e}function r1(s){return ue(s)&&Re(s)==_t}function i1(s){return ue(s)&&Xe(s)==Pt}var s1=Go(Hl),o1=Go(function(s,a){return s<=a});function Kd(s){if(!s)return[];if(Ze(s))return ra(s)?Pn(s):Je(s);if(ms&&s[ms])return jv(s[ms]());var a=Re(s),u=a==L?Pl:a==V?Co:Yi;return u(s)}function ar(s){if(!s)return s===0?s:0;if(s=bn(s),s===at||s===-at){var a=s<0?-1:1;return a*ne}return s===s?s:0}function St(s){var a=ar(s),u=a%1;return a===a?u?a-u:a:0}function qd(s){return s?ti(St(s),0,Jt):0}function bn(s){if(typeof s=="number")return s;if(hn(s))return At;if(ce(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=ce(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=pf(s);var u=H_.test(s);return u||U_.test(s)?wv(s.slice(2),u?2:8):X_.test(s)?At:+s}function Jd(s){return zn(s,Qe(s))}function a1(s){return s?ti(St(s),-ct,ct):s===0?s:0}function Gt(s){return s==null?"":cn(s)}var l1=ji(function(s,a){if(Es(a)||Ze(a)){zn(a,Te(a),s);return}for(var u in a)$t.call(a,u)&&ws(s,u,a[u])}),Zd=ji(function(s,a){zn(a,Qe(a),s)}),ia=ji(function(s,a,u,g){zn(a,Qe(a),s,g)}),c1=ji(function(s,a,u,g){zn(a,Te(a),s,g)}),h1=ir(Rl);function u1(s,a){var u=Bi(s);return a==null?u:Af(u,a)}var f1=Et(function(s,a){s=Zt(s);var u=-1,g=a.length,m=g>2?a[2]:e;for(m&&He(a[0],a[1],m)&&(g=1);++u<g;)for(var x=a[u],S=Qe(x),T=-1,k=S.length;++T<k;){var H=S[T],Y=s[H];(Y===e||An(Y,Ri[H])&&!$t.call(s,H))&&(s[H]=x[H])}return s}),d1=Et(function(s){return s.push(e,pd),an(Qd,e,s)});function g1(s,a){return uf(s,mt(a,3),Nn)}function p1(s,a){return uf(s,mt(a,3),Il)}function m1(s,a){return s==null?s:Fl(s,mt(a,3),Qe)}function _1(s,a){return s==null?s:Ff(s,mt(a,3),Qe)}function v1(s,a){return s&&Nn(s,mt(a,3))}function y1(s,a){return s&&Il(s,mt(a,3))}function x1(s){return s==null?[]:Wo(s,Te(s))}function w1(s){return s==null?[]:Wo(s,Qe(s))}function gc(s,a,u){var g=s==null?e:ei(s,a);return g===e?u:g}function C1(s,a){return s!=null&&vd(s,a,zy)}function pc(s,a){return s!=null&&vd(s,a,Vy)}var S1=hd(function(s,a,u){a!=null&&typeof a.toString!="function"&&(a=Oo.call(a)),s[a]=u},_c(tn)),b1=hd(function(s,a,u){a!=null&&typeof a.toString!="function"&&(a=Oo.call(a)),$t.call(s,a)?s[a].push(u):s[a]=[u]},mt),T1=Et(Ss);function Te(s){return Ze(s)?Pf(s):Xl(s)}function Qe(s){return Ze(s)?Pf(s,!0):nx(s)}function O1(s,a){var u={};return a=mt(a,3),Nn(s,function(g,m,x){nr(u,a(g,m,x),g)}),u}function E1(s,a){var u={};return a=mt(a,3),Nn(s,function(g,m,x){nr(u,m,a(g,m,x))}),u}var P1=ji(function(s,a,u){Xo(s,a,u)}),Qd=ji(function(s,a,u,g){Xo(s,a,u,g)}),D1=ir(function(s,a){var u={};if(s==null)return u;var g=!1;a=ae(a,function(x){return x=Ar(x,s),g||(g=x.length>1),x}),zn(s,tc(s),u),g&&(u=wn(u,p|_|v,Sx));for(var m=a.length;m--;)Vl(u,a[m]);return u});function A1(s,a){return tg(s,ea(mt(a)))}var M1=ir(function(s,a){return s==null?{}:ix(s,a)});function tg(s,a){if(s==null)return{};var u=ae(tc(s),function(g){return[g]});return a=mt(a),zf(s,u,function(g,m){return a(g,m[0])})}function k1(s,a,u){a=Ar(a,s);var g=-1,m=a.length;for(m||(m=1,s=e);++g<m;){var x=s==null?e:s[Vn(a[g])];x===e&&(g=m,x=u),s=or(x)?x.call(s):x}return s}function L1(s,a,u){return s==null?s:Ts(s,a,u)}function R1(s,a,u,g){return g=typeof g=="function"?g:e,s==null?s:Ts(s,a,u,g)}var eg=dd(Te),ng=dd(Qe);function F1(s,a,u){var g=Ct(s),m=g||kr(s)||Hi(s);if(a=mt(a,4),u==null){var x=s&&s.constructor;m?u=g?new x:[]:ce(s)?u=or(x)?Bi(Do(s)):{}:u={}}return(m?vn:Nn)(s,function(S,T,k){return a(u,S,T,k)}),u}function I1(s,a){return s==null?!0:Vl(s,a)}function B1(s,a,u){return s==null?s:qf(s,a,Kl(u))}function j1(s,a,u,g){return g=typeof g=="function"?g:e,s==null?s:qf(s,a,Kl(u),g)}function Yi(s){return s==null?[]:El(s,Te(s))}function W1(s){return s==null?[]:El(s,Qe(s))}function X1(s,a,u){return u===e&&(u=a,a=e),u!==e&&(u=bn(u),u=u===u?u:0),a!==e&&(a=bn(a),a=a===a?a:0),ti(bn(s),a,u)}function H1(s,a,u){return a=ar(a),u===e?(u=a,a=0):u=ar(u),s=bn(s),Gy(s,a,u)}function Y1(s,a,u){if(u&&typeof u!="boolean"&&He(s,a,u)&&(a=u=e),u===e&&(typeof a=="boolean"?(u=a,a=e):typeof s=="boolean"&&(u=s,s=e)),s===e&&a===e?(s=0,a=1):(s=ar(s),a===e?(a=s,s=0):a=ar(a)),s>a){var g=s;s=a,a=g}if(u||s%1||a%1){var m=Of();return Le(s+m*(a-s+xv("1e-"+((m+"").length-1))),a)}return Ul(s,a)}var U1=Wi(function(s,a,u){return a=a.toLowerCase(),s+(u?rg(a):a)});function rg(s){return mc(Gt(s).toLowerCase())}function ig(s){return s=Gt(s),s&&s.replace(z_,Lv).replace(hv,"")}function N1(s,a,u){s=Gt(s),a=cn(a);var g=s.length;u=u===e?g:ti(St(u),0,g);var m=u;return u-=a.length,u>=0&&s.slice(u,m)==a}function z1(s){return s=Gt(s),s&&T_.test(s)?s.replace(Ru,Rv):s}function V1(s){return s=Gt(s),s&&M_.test(s)?s.replace(ul,"\\$&"):s}var G1=Wi(function(s,a,u){return s+(u?"-":"")+a.toLowerCase()}),$1=Wi(function(s,a,u){return s+(u?" ":"")+a.toLowerCase()}),K1=ad("toLowerCase");function q1(s,a,u){s=Gt(s),a=St(a);var g=a?ki(s):0;if(!a||g>=a)return s;var m=(a-g)/2;return Vo(Lo(m),u)+s+Vo(ko(m),u)}function J1(s,a,u){s=Gt(s),a=St(a);var g=a?ki(s):0;return a&&g<a?s+Vo(a-g,u):s}function Z1(s,a,u){s=Gt(s),a=St(a);var g=a?ki(s):0;return a&&g<a?Vo(a-g,u)+s:s}function Q1(s,a,u){return u||a==null?a=0:a&&(a=+a),oy(Gt(s).replace(fl,""),a||0)}function tS(s,a,u){return(u?He(s,a,u):a===e)?a=1:a=St(a),Nl(Gt(s),a)}function eS(){var s=arguments,a=Gt(s[0]);return s.length<3?a:a.replace(s[1],s[2])}var nS=Wi(function(s,a,u){return s+(u?"_":"")+a.toLowerCase()});function rS(s,a,u){return u&&typeof u!="number"&&He(s,a,u)&&(a=u=e),u=u===e?Jt:u>>>0,u?(s=Gt(s),s&&(typeof a=="string"||a!=null&&!dc(a))&&(a=cn(a),!a&&Mi(s))?Mr(Pn(s),0,u):s.split(a,u)):[]}var iS=Wi(function(s,a,u){return s+(u?" ":"")+mc(a)});function sS(s,a,u){return s=Gt(s),u=u==null?0:ti(St(u),0,s.length),a=cn(a),s.slice(u,u+a.length)==a}function oS(s,a,u){var g=y.templateSettings;u&&He(s,a,u)&&(a=e),s=Gt(s),a=ia({},a,g,gd);var m=ia({},a.imports,g.imports,gd),x=Te(m),S=El(m,x),T,k,H=0,Y=a.interpolate||_o,G="__p += '",Z=Dl((a.escape||_o).source+"|"+Y.source+"|"+(Y===Fu?W_:_o).source+"|"+(a.evaluate||_o).source+"|$","g"),ht="//# sourceURL="+($t.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++pv+"]")+`
`;s.replace(Z,function(yt,Mt,It,un,Ye,fn){return It||(It=un),G+=s.slice(H,fn).replace(V_,Fv),Mt&&(T=!0,G+=`' +
__e(`+Mt+`) +
'`),Ye&&(k=!0,G+=`';
`+Ye+`;
__p += '`),It&&(G+=`' +
((__t = (`+It+`)) == null ? '' : __t) +
'`),H=fn+yt.length,yt}),G+=`';
`;var vt=$t.call(a,"variable")&&a.variable;if(!vt)G=`with (obj) {
`+G+`
}
`;else if(B_.test(vt))throw new wt(c);G=(k?G.replace(w_,""):G).replace(C_,"$1").replace(S_,"$1;"),G="function("+(vt||"obj")+`) {
`+(vt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(T?", __e = _.escape":"")+(k?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+G+`return __p
}`;var Tt=og(function(){return zt(x,ht+"return "+G).apply(e,S)});if(Tt.source=G,fc(Tt))throw Tt;return Tt}function aS(s){return Gt(s).toLowerCase()}function lS(s){return Gt(s).toUpperCase()}function cS(s,a,u){if(s=Gt(s),s&&(u||a===e))return pf(s);if(!s||!(a=cn(a)))return s;var g=Pn(s),m=Pn(a),x=mf(g,m),S=_f(g,m)+1;return Mr(g,x,S).join("")}function hS(s,a,u){if(s=Gt(s),s&&(u||a===e))return s.slice(0,yf(s)+1);if(!s||!(a=cn(a)))return s;var g=Pn(s),m=_f(g,Pn(a))+1;return Mr(g,0,m).join("")}function uS(s,a,u){if(s=Gt(s),s&&(u||a===e))return s.replace(fl,"");if(!s||!(a=cn(a)))return s;var g=Pn(s),m=mf(g,Pn(a));return Mr(g,m).join("")}function fS(s,a){var u=lt,g=pt;if(ce(a)){var m="separator"in a?a.separator:m;u="length"in a?St(a.length):u,g="omission"in a?cn(a.omission):g}s=Gt(s);var x=s.length;if(Mi(s)){var S=Pn(s);x=S.length}if(u>=x)return s;var T=u-ki(g);if(T<1)return g;var k=S?Mr(S,0,T).join(""):s.slice(0,T);if(m===e)return k+g;if(S&&(T+=k.length-T),dc(m)){if(s.slice(T).search(m)){var H,Y=k;for(m.global||(m=Dl(m.source,Gt(Iu.exec(m))+"g")),m.lastIndex=0;H=m.exec(Y);)var G=H.index;k=k.slice(0,G===e?T:G)}}else if(s.indexOf(cn(m),T)!=T){var Z=k.lastIndexOf(m);Z>-1&&(k=k.slice(0,Z))}return k+g}function dS(s){return s=Gt(s),s&&b_.test(s)?s.replace(Lu,Yv):s}var gS=Wi(function(s,a,u){return s+(u?" ":"")+a.toUpperCase()}),mc=ad("toUpperCase");function sg(s,a,u){return s=Gt(s),a=u?e:a,a===e?Bv(s)?zv(s):Pv(s):s.match(a)||[]}var og=Et(function(s,a){try{return an(s,e,a)}catch(u){return fc(u)?u:new wt(u)}}),pS=ir(function(s,a){return vn(a,function(u){u=Vn(u),nr(s,u,hc(s[u],s))}),s});function mS(s){var a=s==null?0:s.length,u=mt();return s=a?ae(s,function(g){if(typeof g[1]!="function")throw new yn(l);return[u(g[0]),g[1]]}):[],Et(function(g){for(var m=-1;++m<a;){var x=s[m];if(an(x[0],this,g))return an(x[1],this,g)}})}function _S(s){return Yy(wn(s,p))}function _c(s){return function(){return s}}function vS(s,a){return s==null||s!==s?a:s}var yS=cd(),xS=cd(!0);function tn(s){return s}function vc(s){return Wf(typeof s=="function"?s:wn(s,p))}function wS(s){return Hf(wn(s,p))}function CS(s,a){return Yf(s,wn(a,p))}var SS=Et(function(s,a){return function(u){return Ss(u,s,a)}}),bS=Et(function(s,a){return function(u){return Ss(s,u,a)}});function yc(s,a,u){var g=Te(a),m=Wo(a,g);u==null&&!(ce(a)&&(m.length||!g.length))&&(u=a,a=s,s=this,m=Wo(a,Te(a)));var x=!(ce(u)&&"chain"in u)||!!u.chain,S=or(s);return vn(m,function(T){var k=a[T];s[T]=k,S&&(s.prototype[T]=function(){var H=this.__chain__;if(x||H){var Y=s(this.__wrapped__),G=Y.__actions__=Je(this.__actions__);return G.push({func:k,args:arguments,thisArg:s}),Y.__chain__=H,Y}return k.apply(s,Tr([this.value()],arguments))})}),s}function TS(){return De._===this&&(De._=Jv),this}function xc(){}function OS(s){return s=St(s),Et(function(a){return Uf(a,s)})}var ES=Jl(ae),PS=Jl(hf),DS=Jl(Cl);function ag(s){return ic(s)?Sl(Vn(s)):sx(s)}function AS(s){return function(a){return s==null?e:ei(s,a)}}var MS=ud(),kS=ud(!0);function wc(){return[]}function Cc(){return!1}function LS(){return{}}function RS(){return""}function FS(){return!0}function IS(s,a){if(s=St(s),s<1||s>ct)return[];var u=Jt,g=Le(s,Jt);a=mt(a),s-=Jt;for(var m=Ol(g,a);++u<s;)a(u);return m}function BS(s){return Ct(s)?ae(s,Vn):hn(s)?[s]:Je(Ed(Gt(s)))}function jS(s){var a=++Kv;return Gt(s)+a}var WS=zo(function(s,a){return s+a},0),XS=Zl("ceil"),HS=zo(function(s,a){return s/a},1),YS=Zl("floor");function US(s){return s&&s.length?jo(s,tn,Bl):e}function NS(s,a){return s&&s.length?jo(s,mt(a,2),Bl):e}function zS(s){return df(s,tn)}function VS(s,a){return df(s,mt(a,2))}function GS(s){return s&&s.length?jo(s,tn,Hl):e}function $S(s,a){return s&&s.length?jo(s,mt(a,2),Hl):e}var KS=zo(function(s,a){return s*a},1),qS=Zl("round"),JS=zo(function(s,a){return s-a},0);function ZS(s){return s&&s.length?Tl(s,tn):0}function QS(s,a){return s&&s.length?Tl(s,mt(a,2)):0}return y.after=wC,y.ary=jd,y.assign=l1,y.assignIn=Zd,y.assignInWith=ia,y.assignWith=c1,y.at=h1,y.before=Wd,y.bind=hc,y.bindAll=pS,y.bindKey=Xd,y.castArray=LC,y.chain=Fd,y.chunk=Yx,y.compact=Ux,y.concat=Nx,y.cond=mS,y.conforms=_S,y.constant=_c,y.countBy=Zw,y.create=u1,y.curry=Hd,y.curryRight=Yd,y.debounce=Ud,y.defaults=f1,y.defaultsDeep=d1,y.defer=CC,y.delay=SC,y.difference=zx,y.differenceBy=Vx,y.differenceWith=Gx,y.drop=$x,y.dropRight=Kx,y.dropRightWhile=qx,y.dropWhile=Jx,y.fill=Zx,y.filter=tC,y.flatMap=rC,y.flatMapDeep=iC,y.flatMapDepth=sC,y.flatten=Md,y.flattenDeep=Qx,y.flattenDepth=tw,y.flip=bC,y.flow=yS,y.flowRight=xS,y.fromPairs=ew,y.functions=x1,y.functionsIn=w1,y.groupBy=oC,y.initial=rw,y.intersection=iw,y.intersectionBy=sw,y.intersectionWith=ow,y.invert=S1,y.invertBy=b1,y.invokeMap=lC,y.iteratee=vc,y.keyBy=cC,y.keys=Te,y.keysIn=Qe,y.map=Zo,y.mapKeys=O1,y.mapValues=E1,y.matches=wS,y.matchesProperty=CS,y.memoize=ta,y.merge=P1,y.mergeWith=Qd,y.method=SS,y.methodOf=bS,y.mixin=yc,y.negate=ea,y.nthArg=OS,y.omit=D1,y.omitBy=A1,y.once=TC,y.orderBy=hC,y.over=ES,y.overArgs=OC,y.overEvery=PS,y.overSome=DS,y.partial=uc,y.partialRight=Nd,y.partition=uC,y.pick=M1,y.pickBy=tg,y.property=ag,y.propertyOf=AS,y.pull=hw,y.pullAll=Ld,y.pullAllBy=uw,y.pullAllWith=fw,y.pullAt=dw,y.range=MS,y.rangeRight=kS,y.rearg=EC,y.reject=gC,y.remove=gw,y.rest=PC,y.reverse=lc,y.sampleSize=mC,y.set=L1,y.setWith=R1,y.shuffle=_C,y.slice=pw,y.sortBy=xC,y.sortedUniq=Cw,y.sortedUniqBy=Sw,y.split=rS,y.spread=DC,y.tail=bw,y.take=Tw,y.takeRight=Ow,y.takeRightWhile=Ew,y.takeWhile=Pw,y.tap=Uw,y.throttle=AC,y.thru=Jo,y.toArray=Kd,y.toPairs=eg,y.toPairsIn=ng,y.toPath=BS,y.toPlainObject=Jd,y.transform=F1,y.unary=MC,y.union=Dw,y.unionBy=Aw,y.unionWith=Mw,y.uniq=kw,y.uniqBy=Lw,y.uniqWith=Rw,y.unset=I1,y.unzip=cc,y.unzipWith=Rd,y.update=B1,y.updateWith=j1,y.values=Yi,y.valuesIn=W1,y.without=Fw,y.words=sg,y.wrap=kC,y.xor=Iw,y.xorBy=Bw,y.xorWith=jw,y.zip=Ww,y.zipObject=Xw,y.zipObjectDeep=Hw,y.zipWith=Yw,y.entries=eg,y.entriesIn=ng,y.extend=Zd,y.extendWith=ia,yc(y,y),y.add=WS,y.attempt=og,y.camelCase=U1,y.capitalize=rg,y.ceil=XS,y.clamp=X1,y.clone=RC,y.cloneDeep=IC,y.cloneDeepWith=BC,y.cloneWith=FC,y.conformsTo=jC,y.deburr=ig,y.defaultTo=vS,y.divide=HS,y.endsWith=N1,y.eq=An,y.escape=z1,y.escapeRegExp=V1,y.every=Qw,y.find=eC,y.findIndex=Dd,y.findKey=g1,y.findLast=nC,y.findLastIndex=Ad,y.findLastKey=p1,y.floor=YS,y.forEach=Id,y.forEachRight=Bd,y.forIn=m1,y.forInRight=_1,y.forOwn=v1,y.forOwnRight=y1,y.get=gc,y.gt=WC,y.gte=XC,y.has=C1,y.hasIn=pc,y.head=kd,y.identity=tn,y.includes=aC,y.indexOf=nw,y.inRange=H1,y.invoke=T1,y.isArguments=ii,y.isArray=Ct,y.isArrayBuffer=HC,y.isArrayLike=Ze,y.isArrayLikeObject=ge,y.isBoolean=YC,y.isBuffer=kr,y.isDate=UC,y.isElement=NC,y.isEmpty=zC,y.isEqual=VC,y.isEqualWith=GC,y.isError=fc,y.isFinite=$C,y.isFunction=or,y.isInteger=zd,y.isLength=na,y.isMap=Vd,y.isMatch=KC,y.isMatchWith=qC,y.isNaN=JC,y.isNative=ZC,y.isNil=t1,y.isNull=QC,y.isNumber=Gd,y.isObject=ce,y.isObjectLike=ue,y.isPlainObject=Ds,y.isRegExp=dc,y.isSafeInteger=e1,y.isSet=$d,y.isString=ra,y.isSymbol=hn,y.isTypedArray=Hi,y.isUndefined=n1,y.isWeakMap=r1,y.isWeakSet=i1,y.join=aw,y.kebabCase=G1,y.last=Sn,y.lastIndexOf=lw,y.lowerCase=$1,y.lowerFirst=K1,y.lt=s1,y.lte=o1,y.max=US,y.maxBy=NS,y.mean=zS,y.meanBy=VS,y.min=GS,y.minBy=$S,y.stubArray=wc,y.stubFalse=Cc,y.stubObject=LS,y.stubString=RS,y.stubTrue=FS,y.multiply=KS,y.nth=cw,y.noConflict=TS,y.noop=xc,y.now=Qo,y.pad=q1,y.padEnd=J1,y.padStart=Z1,y.parseInt=Q1,y.random=Y1,y.reduce=fC,y.reduceRight=dC,y.repeat=tS,y.replace=eS,y.result=k1,y.round=qS,y.runInContext=P,y.sample=pC,y.size=vC,y.snakeCase=nS,y.some=yC,y.sortedIndex=mw,y.sortedIndexBy=_w,y.sortedIndexOf=vw,y.sortedLastIndex=yw,y.sortedLastIndexBy=xw,y.sortedLastIndexOf=ww,y.startCase=iS,y.startsWith=sS,y.subtract=JS,y.sum=ZS,y.sumBy=QS,y.template=oS,y.times=IS,y.toFinite=ar,y.toInteger=St,y.toLength=qd,y.toLower=aS,y.toNumber=bn,y.toSafeInteger=a1,y.toString=Gt,y.toUpper=lS,y.trim=cS,y.trimEnd=hS,y.trimStart=uS,y.truncate=fS,y.unescape=dS,y.uniqueId=jS,y.upperCase=gS,y.upperFirst=mc,y.each=Id,y.eachRight=Bd,y.first=kd,yc(y,function(){var s={};return Nn(y,function(a,u){$t.call(y.prototype,u)||(s[u]=a)}),s}(),{chain:!1}),y.VERSION=n,vn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){y[s].placeholder=y}),vn(["drop","take"],function(s,a){kt.prototype[s]=function(u){u=u===e?1:we(St(u),0);var g=this.__filtered__&&!a?new kt(this):this.clone();return g.__filtered__?g.__takeCount__=Le(u,g.__takeCount__):g.__views__.push({size:Le(u,Jt),type:s+(g.__dir__<0?"Right":"")}),g},kt.prototype[s+"Right"]=function(u){return this.reverse()[s](u).reverse()}}),vn(["filter","map","takeWhile"],function(s,a){var u=a+1,g=u==jt||u==Ht;kt.prototype[s]=function(m){var x=this.clone();return x.__iteratees__.push({iteratee:mt(m,3),type:u}),x.__filtered__=x.__filtered__||g,x}}),vn(["head","last"],function(s,a){var u="take"+(a?"Right":"");kt.prototype[s]=function(){return this[u](1).value()[0]}}),vn(["initial","tail"],function(s,a){var u="drop"+(a?"":"Right");kt.prototype[s]=function(){return this.__filtered__?new kt(this):this[u](1)}}),kt.prototype.compact=function(){return this.filter(tn)},kt.prototype.find=function(s){return this.filter(s).head()},kt.prototype.findLast=function(s){return this.reverse().find(s)},kt.prototype.invokeMap=Et(function(s,a){return typeof s=="function"?new kt(this):this.map(function(u){return Ss(u,s,a)})}),kt.prototype.reject=function(s){return this.filter(ea(mt(s)))},kt.prototype.slice=function(s,a){s=St(s);var u=this;return u.__filtered__&&(s>0||a<0)?new kt(u):(s<0?u=u.takeRight(-s):s&&(u=u.drop(s)),a!==e&&(a=St(a),u=a<0?u.dropRight(-a):u.take(a-s)),u)},kt.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},kt.prototype.toArray=function(){return this.take(Jt)},Nn(kt.prototype,function(s,a){var u=/^(?:filter|find|map|reject)|While$/.test(a),g=/^(?:head|last)$/.test(a),m=y[g?"take"+(a=="last"?"Right":""):a],x=g||/^find/.test(a);m&&(y.prototype[a]=function(){var S=this.__wrapped__,T=g?[1]:arguments,k=S instanceof kt,H=T[0],Y=k||Ct(S),G=function(Mt){var It=m.apply(y,Tr([Mt],T));return g&&Z?It[0]:It};Y&&u&&typeof H=="function"&&H.length!=1&&(k=Y=!1);var Z=this.__chain__,ht=!!this.__actions__.length,vt=x&&!Z,Tt=k&&!ht;if(!x&&Y){S=Tt?S:new kt(this);var yt=s.apply(S,T);return yt.__actions__.push({func:Jo,args:[G],thisArg:e}),new xn(yt,Z)}return vt&&Tt?s.apply(this,T):(yt=this.thru(G),vt?g?yt.value()[0]:yt.value():yt)})}),vn(["pop","push","shift","sort","splice","unshift"],function(s){var a=So[s],u=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",g=/^(?:pop|shift)$/.test(s);y.prototype[s]=function(){var m=arguments;if(g&&!this.__chain__){var x=this.value();return a.apply(Ct(x)?x:[],m)}return this[u](function(S){return a.apply(Ct(S)?S:[],m)})}}),Nn(kt.prototype,function(s,a){var u=y[a];if(u){var g=u.name+"";$t.call(Ii,g)||(Ii[g]=[]),Ii[g].push({name:a,func:u})}}),Ii[No(e,M).name]=[{name:"wrapper",func:e}],kt.prototype.clone=dy,kt.prototype.reverse=gy,kt.prototype.value=py,y.prototype.at=Nw,y.prototype.chain=zw,y.prototype.commit=Vw,y.prototype.next=Gw,y.prototype.plant=Kw,y.prototype.reverse=qw,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=Jw,y.prototype.first=y.prototype.head,ms&&(y.prototype[ms]=$w),y},Li=Vv();qr?((qr.exports=Li)._=Li,vl._=Li):De._=Li}).call(Rs)})(Xa,Xa.exports);var EM=Xa.exports;const PM={class:"flex gap-3 justify-between items-center p-3 fixed bottom-0 sm:top-0 sm:bottom-auto right-0 z-10"},DM=me("h1",{class:"font-bold text-xl header hidden sm:block"},"Olesheva Tattoo Builder",-1),AM={class:"flex flex-row gap-3 sm:gap-2 flex-wrap justify-end"},MM=me("div",{class:"flex gap-2 items-center"},[me("div",null,"Book a tattoo session"),me("img",{class:"h-4",src:F2})],-1),kM={class:"flex items-center gap-3 sm:gap-2"},LM={key:0,class:"fixed left-3 z-10 translate-y-1/2 bottom-1/2"},RM=me("svg",{xmlns:"http://www.w3.org/2000/svg",width:"9",height:"16",viewBox:"0 0 9 16",fill:"none",class:"text-gray-400"},[me("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.707077 15.9961L8.69926 8.00395L7.99216 7.29684L-2.97672e-05 15.289L0.707077 15.9961Z",fill:"currentColor"}),me("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.69929 7.99219L0.707107 7.7486e-07L0 0.707108L7.99219 8.69929L8.69929 7.99219Z",fill:"currentColor"})],-1),FM={class:"flex relative"},IM={class:"overflow-auto h-screen absolute offset-0 z-10 border border-r w-[200px] bg-white/90"},BM={class:"flex flex-wrap gap-2 p-2"},jM=["src"],WM=["onDragover"],XM=xi({__name:"TheConstructor",setup(r){const t=ai(null),e=ai(null),n=ai(!0),i=ai([]);let o;const l=ai([]),c="/tattoo-builder";console.log("constructor: is dev mode",!1);const f=Ve(()=>i.value.length?l.value.filter(it=>i.value.includes(it.category)):l.value);async function d(){const lt=await(await fetch("config.json")).json();lt.forEach(pt=>l.value.push({...pt,key:Symbol("image-key")})),l.value.concat(lt)}const p=Ve(()=>[...new Set(l.value.map(it=>it.category))]);d();let _,v,w=null;function E(){n.value=!1}function O(){if(o){const it=o==null?void 0:o.toDataURL({format:"jpeg",quality:90,multiplier:2}),lt=document.createElement("a");lt.download="tattoo.jpeg",lt.href=it,lt.click()}}function M(it){if("ontouchstart"in window){const pt=it.target;var lt=new mn(pt,{scaleX:pt.width/pt.naturalWidth,scaleY:pt.height/pt.naturalHeight,width:pt.naturalWidth,height:pt.naturalHeight,left:window.innerWidth/2-pt.width/2,top:window.innerHeight/2-pt.height/2});o==null||o.add(lt),n.value=!1}}function R(it){var pt;w=it.target;const lt=(pt=it.target)==null?void 0:pt.getBoundingClientRect();_=it.clientX-(lt.left+window.scrollX),v=it.clientY-(lt.top+window.scrollY)}function X(it){return it.dataTransfer&&(it.dataTransfer.dropEffect="copy"),!1}function B(){w=null}function $(it){if(it=it||window.event,it.preventDefault&&it.preventDefault(),it.stopPropagation&&it.stopPropagation(),!t.value||!w)return;const lt=t.value.getBoundingClientRect();if(v===void 0||_===void 0)return;const pt=it.clientX-(lt.left+window.scrollX+_),Lt=it.clientY-(lt.top+window.scrollY+v);var Wt=new mn(w,{scaleX:w.width/w.naturalWidth,scaleY:w.height/w.naturalHeight,width:w.naturalWidth,height:w.naturalHeight,left:pt,top:Lt});return o==null||o.add(Wt),n.value=!1,!1}const tt=EM.throttle(()=>{console.log("constructor: store data"),localStorage.setItem("canvas",JSON.stringify(o==null?void 0:o.toJSON()))},300,{leading:!1,trailing:!0});function nt(){localStorage.removeItem("canvas"),o&&(o.clear(),o.backgroundColor="#fff")}function ot(){if(!t.value||!e.value)return;o=new xh(t.value),o.backgroundColor="#fff";function it(){o==null||o.setDimensions({width:window.innerWidth,height:window.innerHeight})}o.on("after:render",tt),window.addEventListener("resize",()=>it());const lt=localStorage.getItem("canvas");if(lt){const at=JSON.parse(lt);o==null||o.loadFromJSON(at,()=>{o&&o.requestRenderAll()})}it();const pt="data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15.289 15.9961L-1.44839e-05 0.707107L0.707092 0L15.9961 15.289L15.289 15.9961Z' fill='%23B2CCFF'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M0.707107 15.9961L15.9961 0.707107L15.289 0L5.23321e-07 15.289L0.707107 15.9961Z' fill='%23B2CCFF'/%3E%3C/svg%3E%0A",Lt="data:image/svg+xml,%3Csvg width='17' height='10' viewBox='0 0 17 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M0.351549 1.35551L8.34374 9.3477L9.05084 8.64059L1.05866 0.648408L0.351549 1.35551Z' fill='%23B2CCFF'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M8.35551 9.34773L16.3477 1.35554L15.6406 0.648438L7.64841 8.64062L8.35551 9.34773Z' fill='%23B2CCFF'/%3E%3C/svg%3E%0A",Wt="data:image/svg+xml,%3Csvg width='17' height='10' viewBox='0 0 17 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M16.3477 8.64063L8.35551 0.648438L7.64841 1.35555L15.6406 9.34773L16.3477 8.64063Z' fill='%23B2CCFF'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M8.34374 0.648409L0.351548 8.6406L1.05865 9.3477L9.05084 1.35552L8.34374 0.648409Z' fill='%23B2CCFF'/%3E%3C/svg%3E%0A",jt=document.createElement("img");jt.src=pt;const Nt=document.createElement("img");Nt.src=Wt;const Ht=document.createElement("img");Ht.src=Lt,Se.ownDefaults.controls={...RA.createObjectDefaultControls(),forwardControl:new Ne({x:.5,y:-.5,offsetX:24,offsetY:48,cursorStyle:"pointer",mouseUpHandler:(at,ct)=>{const ne=ct.target,At=ne.canvas;At==null||At.bringObjectForward(ne),At==null||At.requestRenderAll()},render:(at,ct,ne,At,Jt)=>{at.save(),at.translate(ct,ne),at.rotate(jc.degreesToRadians(Jt.angle)),at.drawImage(Nt,-16/2,-10/2,16,10),at.restore()}}),backControl:new Ne({x:.5,y:-.5,offsetX:24,offsetY:96,cursorStyle:"pointer",mouseUpHandler:(at,ct)=>{const ne=ct.target,At=ne.canvas;At==null||At.sendObjectBackwards(ne),At==null||At.requestRenderAll()},render:(at,ct,ne,At,Jt)=>{at.save(),at.translate(ct,ne),at.rotate(jc.degreesToRadians(Jt.angle)),at.drawImage(Ht,-16/2,-10/2,16,10),at.restore()}}),deleteControl:new Ne({x:.5,y:-.5,offsetX:24,cursorStyle:"pointer",mouseUpHandler:(at,ct)=>{const ne=ct.target,At=ne.canvas;At==null||At.remove(ne),At==null||At.requestRenderAll()},render:(at,ct,ne,At,Jt)=>{at.save(),at.translate(ct,ne),at.rotate(jc.degreesToRadians(Jt.angle)),at.drawImage(jt,-16/2,-16/2,16,16),at.restore()}})}}return vm(()=>{ot()}),(it,lt)=>(gn(),ur(nn,null,[me("header",PM,[DM,me("div",AM,[Ce(pa,{look:"secondary",href:"https://www.instagram.com/oleshevatattoo"},{default:Is(()=>[MM]),_:1}),me("div",kM,[Ce(pa,{onClick:O},{default:Is(()=>[nh("Download")]),_:1}),Ce(pa,{onClick:nt},{default:Is(()=>[nh("Reset")]),_:1})])])]),n.value?XT("",!0):(gn(),ur("div",LM,[Ce(pa,{look:"secondary",class:"h-32 w-8 flex items-center justify-center",onClick:lt[0]||(lt[0]=pt=>n.value=!0)},{default:Is(()=>[RM]),_:1})])),me("div",FM,[aT(me("div",IM,[me("div",BM,[(gn(!0),ur(nn,null,yg(p.value,pt=>(gn(),qa(OM,{key:pt,modelValue:i.value,"onUpdate:modelValue":lt[1]||(lt[1]=Lt=>i.value=Lt),value:pt,name:pt,label:pt,class:"border px-2 rounded-sm py-0.5"},null,8,["modelValue","value","name","label"]))),128))]),(gn(!0),ur(nn,null,yg(f.value,pt=>(gn(),ur("img",{key:pt.key,draggable:"",src:`${Hr(c)||""}/tattoo/${pt.file}`,onDragstartPassive:R,onDragendPassive:B,onClick:M},null,40,jM))),128))],512),[[yO,n.value]]),me("div",{ref_key:"canvasContainer",ref:e,class:"canvas-container",onDragover:vO(X,["prevent"]),onDrop:$,onTouchstart:E,onClick:E},[me("canvas",{ref_key:"canvasElement",ref:t,class:"w-full"},null,512)],40,WM)])],64))}});const HM=xi({__name:"HomeView",setup(r){return(t,e)=>(gn(),ur("main",null,[Ce(XM)]))}}),YM=E2({history:NO("/tattoo-builder"),routes:[{path:"/",name:"home",component:HM},{path:"/about",name:"about",component:()=>R2(()=>import("./AboutView-d8869994.js"),["assets/AboutView-d8869994.js","assets/AboutView-4d995ba2.css"])}]}),ku=CO(M2);ku.use(OO());ku.use(YM);ku.mount("#app");export{A2 as _,me as a,ur as c,gn as o};
