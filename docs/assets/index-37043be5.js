(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();function wh(r,t){const e=Object.create(null),n=r.split(",");for(let i=0;i<n.length;i++)e[n[i]]=!0;return t?i=>!!e[i.toLowerCase()]:i=>!!e[i]}const ne={},Gi=[],Bn=()=>{},ZS=()=>!1,tb=/^on[^a-z]/,Ha=r=>tb.test(r),Ch=r=>r.startsWith("onUpdate:"),Se=Object.assign,Sh=(r,t)=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)},eb=Object.prototype.hasOwnProperty,Ht=(r,t)=>eb.call(r,t),yt=Array.isArray,$i=r=>Ya(r)==="[object Map]",Fp=r=>Ya(r)==="[object Set]",Et=r=>typeof r=="function",we=r=>typeof r=="string",bh=r=>typeof r=="symbol",se=r=>r!==null&&typeof r=="object",Ip=r=>se(r)&&Et(r.then)&&Et(r.catch),Bp=Object.prototype.toString,Ya=r=>Bp.call(r),nb=r=>Ya(r).slice(8,-1),jp=r=>Ya(r)==="[object Object]",Th=r=>we(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,ma=wh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ua=r=>{const t=Object.create(null);return e=>t[e]||(t[e]=r(e))},rb=/-(\w)/g,Zi=Ua(r=>r.replace(rb,(t,e)=>e?e.toUpperCase():"")),ib=/\B([A-Z])/g,ls=Ua(r=>r.replace(ib,"-$1").toLowerCase()),Wp=Ua(r=>r.charAt(0).toUpperCase()+r.slice(1)),Sc=Ua(r=>r?`on${Wp(r)}`:""),qs=(r,t)=>!Object.is(r,t),bc=(r,t)=>{for(let e=0;e<r.length;e++)r[e](t)},wa=(r,t,e)=>{Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value:e})},sb=r=>{const t=parseFloat(r);return isNaN(t)?r:t};let lg;const Nc=()=>lg||(lg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Oh(r){if(yt(r)){const t={};for(let e=0;e<r.length;e++){const n=r[e],i=we(n)?cb(n):Oh(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(we(r))return r;if(se(r))return r}}const ob=/;(?![^(]*\))/g,ab=/:([^]+)/,lb=/\/\*[^]*?\*\//g;function cb(r){const t={};return r.replace(lb,"").split(ob).forEach(e=>{if(e){const n=e.split(ab);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Js(r){let t="";if(we(r))t=r;else if(yt(r))for(let e=0;e<r.length;e++){const n=Js(r[e]);n&&(t+=n+" ")}else if(se(r))for(const e in r)r[e]&&(t+=e+" ");return t.trim()}const hb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ub=wh(hb);function Xp(r){return!!r||r===""}const fb=r=>we(r)?r:r==null?"":yt(r)||se(r)&&(r.toString===Bp||!Et(r.toString))?JSON.stringify(r,Hp,2):String(r),Hp=(r,t)=>t&&t.__v_isRef?Hp(r,t.value):$i(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[n,i])=>(e[`${n} =>`]=i,e),{})}:Fp(t)?{[`Set(${t.size})`]:[...t.values()]}:se(t)&&!yt(t)&&!jp(t)?String(t):t;let kn;class Yp{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=kn,!t&&kn&&(this.index=(kn.scopes||(kn.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=kn;try{return kn=this,t()}finally{kn=e}}}on(){kn=this}off(){kn=this.parent}stop(t){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function db(r){return new Yp(r)}function gb(r,t=kn){t&&t.active&&t.effects.push(r)}function pb(){return kn}const Eh=r=>{const t=new Set(r);return t.w=0,t.n=0,t},Up=r=>(r.w&Ur)>0,Np=r=>(r.n&Ur)>0,mb=({deps:r})=>{if(r.length)for(let t=0;t<r.length;t++)r[t].w|=Ur},_b=r=>{const{deps:t}=r;if(t.length){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Up(i)&&!Np(i)?i.delete(r):t[e++]=i,i.w&=~Ur,i.n&=~Ur}t.length=e}},zc=new WeakMap;let Fs=0,Ur=1;const Vc=30;let Rn;const gi=Symbol(""),Gc=Symbol("");class Ph{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,gb(this,n)}run(){if(!this.active)return this.fn();let t=Rn,e=Xr;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Rn,Rn=this,Xr=!0,Ur=1<<++Fs,Fs<=Vc?mb(this):cg(this),this.fn()}finally{Fs<=Vc&&_b(this),Ur=1<<--Fs,Rn=this.parent,Xr=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Rn===this?this.deferStop=!0:this.active&&(cg(this),this.onStop&&this.onStop(),this.active=!1)}}function cg(r){const{deps:t}=r;if(t.length){for(let e=0;e<t.length;e++)t[e].delete(r);t.length=0}}let Xr=!0;const zp=[];function cs(){zp.push(Xr),Xr=!1}function hs(){const r=zp.pop();Xr=r===void 0?!0:r}function nn(r,t,e){if(Xr&&Rn){let n=zc.get(r);n||zc.set(r,n=new Map);let i=n.get(e);i||n.set(e,i=Eh()),Vp(i)}}function Vp(r,t){let e=!1;Fs<=Vc?Np(r)||(r.n|=Ur,e=!Up(r)):e=!r.has(Rn),e&&(r.add(Rn),Rn.deps.push(r))}function gr(r,t,e,n,i,o){const l=zc.get(r);if(!l)return;let c=[];if(t==="clear")c=[...l.values()];else if(e==="length"&&yt(r)){const h=Number(n);l.forEach((f,d)=>{(d==="length"||d>=h)&&c.push(f)})}else switch(e!==void 0&&c.push(l.get(e)),t){case"add":yt(r)?Th(e)&&c.push(l.get("length")):(c.push(l.get(gi)),$i(r)&&c.push(l.get(Gc)));break;case"delete":yt(r)||(c.push(l.get(gi)),$i(r)&&c.push(l.get(Gc)));break;case"set":$i(r)&&c.push(l.get(gi));break}if(c.length===1)c[0]&&$c(c[0]);else{const h=[];for(const f of c)f&&h.push(...f);$c(Eh(h))}}function $c(r,t){const e=yt(r)?r:[...r];for(const n of e)n.computed&&hg(n);for(const n of e)n.computed||hg(n)}function hg(r,t){(r!==Rn||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const vb=wh("__proto__,__v_isRef,__isVue"),Gp=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(bh)),yb=Dh(),xb=Dh(!1,!0),wb=Dh(!0),ug=Cb();function Cb(){const r={};return["includes","indexOf","lastIndexOf"].forEach(t=>{r[t]=function(...e){const n=zt(this);for(let o=0,l=this.length;o<l;o++)nn(n,"get",o+"");const i=n[t](...e);return i===-1||i===!1?n[t](...e.map(zt)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{r[t]=function(...e){cs();const n=zt(this)[t].apply(this,e);return hs(),n}}),r}function Sb(r){const t=zt(this);return nn(t,"has",r),t.hasOwnProperty(r)}function Dh(r=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!r;if(i==="__v_isReadonly")return r;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(r?t?Wb:Qp:t?Jp:qp).get(n))return n;const l=yt(n);if(!r){if(l&&Ht(ug,i))return Reflect.get(ug,i,o);if(i==="hasOwnProperty")return Sb}const c=Reflect.get(n,i,o);return(bh(i)?Gp.has(i):vb(i))||(r||nn(n,"get",i),t)?c:Fe(c)?l&&Th(i)?c:c.value:se(c)?r?tm(c):za(c):c}}const bb=$p(),Tb=$p(!0);function $p(r=!1){return function(e,n,i,o){let l=e[n];if(ts(l)&&Fe(l)&&!Fe(i))return!1;if(!r&&(!Ca(i)&&!ts(i)&&(l=zt(l),i=zt(i)),!yt(e)&&Fe(l)&&!Fe(i)))return l.value=i,!0;const c=yt(e)&&Th(n)?Number(n)<e.length:Ht(e,n),h=Reflect.set(e,n,i,o);return e===zt(o)&&(c?qs(i,l)&&gr(e,"set",n,i):gr(e,"add",n,i)),h}}function Ob(r,t){const e=Ht(r,t);r[t];const n=Reflect.deleteProperty(r,t);return n&&e&&gr(r,"delete",t,void 0),n}function Eb(r,t){const e=Reflect.has(r,t);return(!bh(t)||!Gp.has(t))&&nn(r,"has",t),e}function Pb(r){return nn(r,"iterate",yt(r)?"length":gi),Reflect.ownKeys(r)}const Kp={get:yb,set:bb,deleteProperty:Ob,has:Eb,ownKeys:Pb},Db={get:wb,set(r,t){return!0},deleteProperty(r,t){return!0}},Ab=Se({},Kp,{get:xb,set:Tb}),Ah=r=>r,Na=r=>Reflect.getPrototypeOf(r);function sa(r,t,e=!1,n=!1){r=r.__v_raw;const i=zt(r),o=zt(t);e||(t!==o&&nn(i,"get",t),nn(i,"get",o));const{has:l}=Na(i),c=n?Ah:e?Rh:Qs;if(l.call(i,t))return c(r.get(t));if(l.call(i,o))return c(r.get(o));r!==i&&r.get(t)}function oa(r,t=!1){const e=this.__v_raw,n=zt(e),i=zt(r);return t||(r!==i&&nn(n,"has",r),nn(n,"has",i)),r===i?e.has(r):e.has(r)||e.has(i)}function aa(r,t=!1){return r=r.__v_raw,!t&&nn(zt(r),"iterate",gi),Reflect.get(r,"size",r)}function fg(r){r=zt(r);const t=zt(this);return Na(t).has.call(t,r)||(t.add(r),gr(t,"add",r,r)),this}function dg(r,t){t=zt(t);const e=zt(this),{has:n,get:i}=Na(e);let o=n.call(e,r);o||(r=zt(r),o=n.call(e,r));const l=i.call(e,r);return e.set(r,t),o?qs(t,l)&&gr(e,"set",r,t):gr(e,"add",r,t),this}function gg(r){const t=zt(this),{has:e,get:n}=Na(t);let i=e.call(t,r);i||(r=zt(r),i=e.call(t,r)),n&&n.call(t,r);const o=t.delete(r);return i&&gr(t,"delete",r,void 0),o}function pg(){const r=zt(this),t=r.size!==0,e=r.clear();return t&&gr(r,"clear",void 0,void 0),e}function la(r,t){return function(n,i){const o=this,l=o.__v_raw,c=zt(l),h=t?Ah:r?Rh:Qs;return!r&&nn(c,"iterate",gi),l.forEach((f,d)=>n.call(i,h(f),h(d),o))}}function ca(r,t,e){return function(...n){const i=this.__v_raw,o=zt(i),l=$i(o),c=r==="entries"||r===Symbol.iterator&&l,h=r==="keys"&&l,f=i[r](...n),d=e?Ah:t?Rh:Qs;return!t&&nn(o,"iterate",h?Gc:gi),{next(){const{value:p,done:_}=f.next();return _?{value:p,done:_}:{value:c?[d(p[0]),d(p[1])]:d(p),done:_}},[Symbol.iterator](){return this}}}}function Lr(r){return function(...t){return r==="delete"?!1:this}}function Mb(){const r={get(o){return sa(this,o)},get size(){return aa(this)},has:oa,add:fg,set:dg,delete:gg,clear:pg,forEach:la(!1,!1)},t={get(o){return sa(this,o,!1,!0)},get size(){return aa(this)},has:oa,add:fg,set:dg,delete:gg,clear:pg,forEach:la(!1,!0)},e={get(o){return sa(this,o,!0)},get size(){return aa(this,!0)},has(o){return oa.call(this,o,!0)},add:Lr("add"),set:Lr("set"),delete:Lr("delete"),clear:Lr("clear"),forEach:la(!0,!1)},n={get(o){return sa(this,o,!0,!0)},get size(){return aa(this,!0)},has(o){return oa.call(this,o,!0)},add:Lr("add"),set:Lr("set"),delete:Lr("delete"),clear:Lr("clear"),forEach:la(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{r[o]=ca(o,!1,!1),e[o]=ca(o,!0,!1),t[o]=ca(o,!1,!0),n[o]=ca(o,!0,!0)}),[r,e,t,n]}const[kb,Lb,Rb,Fb]=Mb();function Mh(r,t){const e=t?r?Fb:Rb:r?Lb:kb;return(n,i,o)=>i==="__v_isReactive"?!r:i==="__v_isReadonly"?r:i==="__v_raw"?n:Reflect.get(Ht(e,i)&&i in n?e:n,i,o)}const Ib={get:Mh(!1,!1)},Bb={get:Mh(!1,!0)},jb={get:Mh(!0,!1)},qp=new WeakMap,Jp=new WeakMap,Qp=new WeakMap,Wb=new WeakMap;function Xb(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Hb(r){return r.__v_skip||!Object.isExtensible(r)?0:Xb(nb(r))}function za(r){return ts(r)?r:kh(r,!1,Kp,Ib,qp)}function Zp(r){return kh(r,!1,Ab,Bb,Jp)}function tm(r){return kh(r,!0,Db,jb,Qp)}function kh(r,t,e,n,i){if(!se(r)||r.__v_raw&&!(t&&r.__v_isReactive))return r;const o=i.get(r);if(o)return o;const l=Hb(r);if(l===0)return r;const c=new Proxy(r,l===2?n:e);return i.set(r,c),c}function Ki(r){return ts(r)?Ki(r.__v_raw):!!(r&&r.__v_isReactive)}function ts(r){return!!(r&&r.__v_isReadonly)}function Ca(r){return!!(r&&r.__v_isShallow)}function em(r){return Ki(r)||ts(r)}function zt(r){const t=r&&r.__v_raw;return t?zt(t):r}function Lh(r){return wa(r,"__v_skip",!0),r}const Qs=r=>se(r)?za(r):r,Rh=r=>se(r)?tm(r):r;function nm(r){Xr&&Rn&&(r=zt(r),Vp(r.dep||(r.dep=Eh())))}function rm(r,t){r=zt(r);const e=r.dep;e&&$c(e)}function Fe(r){return!!(r&&r.__v_isRef===!0)}function ai(r){return im(r,!1)}function Yb(r){return im(r,!0)}function im(r,t){return Fe(r)?r:new Ub(r,t)}class Ub{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:zt(t),this._value=e?t:Qs(t)}get value(){return nm(this),this._value}set value(t){const e=this.__v_isShallow||Ca(t)||ts(t);t=e?t:zt(t),qs(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:Qs(t),rm(this))}}function Hr(r){return Fe(r)?r.value:r}const Nb={get:(r,t,e)=>Hr(Reflect.get(r,t,e)),set:(r,t,e,n)=>{const i=r[t];return Fe(i)&&!Fe(e)?(i.value=e,!0):Reflect.set(r,t,e,n)}};function sm(r){return Ki(r)?r:new Proxy(r,Nb)}class zb{constructor(t,e,n,i){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Ph(t,()=>{this._dirty||(this._dirty=!0,rm(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=zt(this);return nm(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Vb(r,t,e=!1){let n,i;const o=Et(r);return o?(n=r,i=Bn):(n=r.get,i=r.set),new zb(n,i,o||!i,e)}function Yr(r,t,e,n){let i;try{i=n?r(...n):r()}catch(o){Va(o,t,e)}return i}function jn(r,t,e,n){if(Et(r)){const o=Yr(r,t,e,n);return o&&Ip(o)&&o.catch(l=>{Va(l,t,e)}),o}const i=[];for(let o=0;o<r.length;o++)i.push(jn(r[o],t,e,n));return i}function Va(r,t,e,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const l=t.proxy,c=e;for(;o;){const f=o.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](r,l,c)===!1)return}o=o.parent}const h=t.appContext.config.errorHandler;if(h){Yr(h,null,10,[r,l,c]);return}}Gb(r,e,i,n)}function Gb(r,t,e,n=!0){console.error(r)}let Zs=!1,Kc=!1;const Le=[];let $n=0;const qi=[];let cr=null,li=0;const om=Promise.resolve();let Fh=null;function am(r){const t=Fh||om;return r?t.then(this?r.bind(this):r):t}function $b(r){let t=$n+1,e=Le.length;for(;t<e;){const n=t+e>>>1;to(Le[n])<r?t=n+1:e=n}return t}function Ih(r){(!Le.length||!Le.includes(r,Zs&&r.allowRecurse?$n+1:$n))&&(r.id==null?Le.push(r):Le.splice($b(r.id),0,r),lm())}function lm(){!Zs&&!Kc&&(Kc=!0,Fh=om.then(hm))}function Kb(r){const t=Le.indexOf(r);t>$n&&Le.splice(t,1)}function qb(r){yt(r)?qi.push(...r):(!cr||!cr.includes(r,r.allowRecurse?li+1:li))&&qi.push(r),lm()}function mg(r,t=Zs?$n+1:0){for(;t<Le.length;t++){const e=Le[t];e&&e.pre&&(Le.splice(t,1),t--,e())}}function cm(r){if(qi.length){const t=[...new Set(qi)];if(qi.length=0,cr){cr.push(...t);return}for(cr=t,cr.sort((e,n)=>to(e)-to(n)),li=0;li<cr.length;li++)cr[li]();cr=null,li=0}}const to=r=>r.id==null?1/0:r.id,Jb=(r,t)=>{const e=to(r)-to(t);if(e===0){if(r.pre&&!t.pre)return-1;if(t.pre&&!r.pre)return 1}return e};function hm(r){Kc=!1,Zs=!0,Le.sort(Jb);const t=Bn;try{for($n=0;$n<Le.length;$n++){const e=Le[$n];e&&e.active!==!1&&Yr(e,null,14)}}finally{$n=0,Le.length=0,cm(),Zs=!1,Fh=null,(Le.length||qi.length)&&hm()}}function Qb(r,t,...e){if(r.isUnmounted)return;const n=r.vnode.props||ne;let i=e;const o=t.startsWith("update:"),l=o&&t.slice(7);if(l&&l in n){const d=`${l==="modelValue"?"model":l}Modifiers`,{number:p,trim:_}=n[d]||ne;_&&(i=e.map(v=>we(v)?v.trim():v)),p&&(i=e.map(sb))}let c,h=n[c=Sc(t)]||n[c=Sc(Zi(t))];!h&&o&&(h=n[c=Sc(ls(t))]),h&&jn(h,r,6,i);const f=n[c+"Once"];if(f){if(!r.emitted)r.emitted={};else if(r.emitted[c])return;r.emitted[c]=!0,jn(f,r,6,i)}}function um(r,t,e=!1){const n=t.emitsCache,i=n.get(r);if(i!==void 0)return i;const o=r.emits;let l={},c=!1;if(!Et(r)){const h=f=>{const d=um(f,t,!0);d&&(c=!0,Se(l,d))};!e&&t.mixins.length&&t.mixins.forEach(h),r.extends&&h(r.extends),r.mixins&&r.mixins.forEach(h)}return!o&&!c?(se(r)&&n.set(r,null),null):(yt(o)?o.forEach(h=>l[h]=null):Se(l,o),se(r)&&n.set(r,l),l)}function Ga(r,t){return!r||!Ha(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ht(r,t[0].toLowerCase()+t.slice(1))||Ht(r,ls(t))||Ht(r,t))}let Ne=null,fm=null;function Sa(r){const t=Ne;return Ne=r,fm=r&&r.type.__scopeId||null,t}function Is(r,t=Ne,e){if(!t||r._n)return r;const n=(...i)=>{n._d&&Pg(-1);const o=Sa(t);let l;try{l=r(...i)}finally{Sa(o),n._d&&Pg(1)}return l};return n._n=!0,n._c=!0,n._d=!0,n}function Tc(r){const{type:t,vnode:e,proxy:n,withProxy:i,props:o,propsOptions:[l],slots:c,attrs:h,emit:f,render:d,renderCache:p,data:_,setupState:v,ctx:w,inheritAttrs:E}=r;let O,M;const R=Sa(r);try{if(e.shapeFlag&4){const B=i||n;O=Gn(d.call(B,B,p,o,v,_,w)),M=h}else{const B=t;O=Gn(B.length>1?B(o,{attrs:h,slots:c,emit:f}):B(o,null)),M=t.props?h:Zb(h)}}catch(B){Ys.length=0,Va(B,r,1),O=ye(Nr)}let X=O;if(M&&E!==!1){const B=Object.keys(M),{shapeFlag:$}=X;B.length&&$&7&&(l&&B.some(Ch)&&(M=tT(M,l)),X=es(X,M))}return e.dirs&&(X=es(X),X.dirs=X.dirs?X.dirs.concat(e.dirs):e.dirs),e.transition&&(X.transition=e.transition),O=X,Sa(R),O}const Zb=r=>{let t;for(const e in r)(e==="class"||e==="style"||Ha(e))&&((t||(t={}))[e]=r[e]);return t},tT=(r,t)=>{const e={};for(const n in r)(!Ch(n)||!(n.slice(9)in t))&&(e[n]=r[n]);return e};function eT(r,t,e){const{props:n,children:i,component:o}=r,{props:l,children:c,patchFlag:h}=t,f=o.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&h>=0){if(h&1024)return!0;if(h&16)return n?_g(n,l,f):!!l;if(h&8){const d=t.dynamicProps;for(let p=0;p<d.length;p++){const _=d[p];if(l[_]!==n[_]&&!Ga(f,_))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:n===l?!1:n?l?_g(n,l,f):!0:!!l;return!1}function _g(r,t,e){const n=Object.keys(t);if(n.length!==Object.keys(r).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==r[o]&&!Ga(e,o))return!0}return!1}function nT({vnode:r,parent:t},e){for(;t&&t.subTree===r;)(r=t.vnode).el=e,t=t.parent}const rT=r=>r.__isSuspense;function iT(r,t){t&&t.pendingBranch?yt(r)?t.effects.push(...r):t.effects.push(r):qb(r)}const ha={};function _a(r,t,e){return dm(r,t,e)}function dm(r,t,{immediate:e,deep:n,flush:i,onTrack:o,onTrigger:l}=ne){var c;const h=pb()===((c=Re)==null?void 0:c.scope)?Re:null;let f,d=!1,p=!1;if(Fe(r)?(f=()=>r.value,d=Ca(r)):Ki(r)?(f=()=>r,n=!0):yt(r)?(p=!0,d=r.some(B=>Ki(B)||Ca(B)),f=()=>r.map(B=>{if(Fe(B))return B.value;if(Ki(B))return ui(B);if(Et(B))return Yr(B,h,2)})):Et(r)?t?f=()=>Yr(r,h,2):f=()=>{if(!(h&&h.isUnmounted))return _&&_(),jn(r,h,3,[v])}:f=Bn,t&&n){const B=f;f=()=>ui(B())}let _,v=B=>{_=R.onStop=()=>{Yr(B,h,4)}},w;if(no)if(v=Bn,t?e&&jn(t,h,3,[f(),p?[]:void 0,v]):f(),i==="sync"){const B=qT();w=B.__watcherHandles||(B.__watcherHandles=[])}else return Bn;let E=p?new Array(r.length).fill(ha):ha;const O=()=>{if(R.active)if(t){const B=R.run();(n||d||(p?B.some(($,tt)=>qs($,E[tt])):qs(B,E)))&&(_&&_(),jn(t,h,3,[B,E===ha?void 0:p&&E[0]===ha?[]:E,v]),E=B)}else R.run()};O.allowRecurse=!!t;let M;i==="sync"?M=O:i==="post"?M=()=>Qe(O,h&&h.suspense):(O.pre=!0,h&&(O.id=h.uid),M=()=>Ih(O));const R=new Ph(f,M);t?e?O():E=R.run():i==="post"?Qe(R.run.bind(R),h&&h.suspense):R.run();const X=()=>{R.stop(),h&&h.scope&&Sh(h.scope.effects,R)};return w&&w.push(X),X}function sT(r,t,e){const n=this.proxy,i=we(r)?r.includes(".")?gm(n,r):()=>n[r]:r.bind(n,n);let o;Et(t)?o=t:(o=t.handler,e=t);const l=Re;ns(this);const c=dm(i,o.bind(n),e);return l?ns(l):pi(),c}function gm(r,t){const e=t.split(".");return()=>{let n=r;for(let i=0;i<e.length&&n;i++)n=n[e[i]];return n}}function ui(r,t){if(!se(r)||r.__v_skip||(t=t||new Set,t.has(r)))return r;if(t.add(r),Fe(r))ui(r.value,t);else if(yt(r))for(let e=0;e<r.length;e++)ui(r[e],t);else if(Fp(r)||$i(r))r.forEach(e=>{ui(e,t)});else if(jp(r))for(const e in r)ui(r[e],t);return r}function oT(r,t){const e=Ne;if(e===null)return r;const n=Qa(e)||e.proxy,i=r.dirs||(r.dirs=[]);for(let o=0;o<t.length;o++){let[l,c,h,f=ne]=t[o];l&&(Et(l)&&(l={mounted:l,updated:l}),l.deep&&ui(c),i.push({dir:l,instance:n,value:c,oldValue:void 0,arg:h,modifiers:f}))}return r}function si(r,t,e,n){const i=r.dirs,o=t&&t.dirs;for(let l=0;l<i.length;l++){const c=i[l];o&&(c.oldValue=o[l].value);let h=c.dir[n];h&&(cs(),jn(h,e,8,[r.el,c,r,t]),hs())}}function xi(r,t){return Et(r)?(()=>Se({name:r.name},t,{setup:r}))():r}const Xs=r=>!!r.type.__asyncLoader,pm=r=>r.type.__isKeepAlive;function aT(r,t){mm(r,"a",t)}function lT(r,t){mm(r,"da",t)}function mm(r,t,e=Re){const n=r.__wdc||(r.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return r()});if($a(t,n,e),e){let i=e.parent;for(;i&&i.parent;)pm(i.parent.vnode)&&cT(n,t,e,i),i=i.parent}}function cT(r,t,e,n){const i=$a(t,r,n,!0);vm(()=>{Sh(n[t],i)},e)}function $a(r,t,e=Re,n=!1){if(e){const i=e[r]||(e[r]=[]),o=t.__weh||(t.__weh=(...l)=>{if(e.isUnmounted)return;cs(),ns(e);const c=jn(t,e,r,l);return pi(),hs(),c});return n?i.unshift(o):i.push(o),o}}const mr=r=>(t,e=Re)=>(!no||r==="sp")&&$a(r,(...n)=>t(...n),e),hT=mr("bm"),_m=mr("m"),uT=mr("bu"),fT=mr("u"),dT=mr("bum"),vm=mr("um"),gT=mr("sp"),pT=mr("rtg"),mT=mr("rtc");function _T(r,t=Re){$a("ec",r,t)}const vT=Symbol.for("v-ndc");function vg(r,t,e,n){let i;const o=e&&e[n];if(yt(r)||we(r)){i=new Array(r.length);for(let l=0,c=r.length;l<c;l++)i[l]=t(r[l],l,void 0,o&&o[l])}else if(typeof r=="number"){i=new Array(r);for(let l=0;l<r;l++)i[l]=t(l+1,l,void 0,o&&o[l])}else if(se(r))if(r[Symbol.iterator])i=Array.from(r,(l,c)=>t(l,c,void 0,o&&o[c]));else{const l=Object.keys(r);i=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const f=l[c];i[c]=t(r[f],f,c,o&&o[c])}}else i=[];return e&&(e[n]=i),i}function yg(r,t,e={},n,i){if(Ne.isCE||Ne.parent&&Xs(Ne.parent)&&Ne.parent.isCE)return t!=="default"&&(e.name=t),ye("slot",e,n&&n());let o=r[t];o&&o._c&&(o._d=!1),dn();const l=o&&ym(o(e)),c=qa(Ze,{key:e.key||l&&l.key||`_${t}`},l||(n?n():[]),l&&r._===1?64:-2);return!i&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),o&&o._c&&(o._d=!0),c}function ym(r){return r.some(t=>Oa(t)?!(t.type===Nr||t.type===Ze&&!ym(t.children)):!0)?r:null}const qc=r=>r?Am(r)?Qa(r)||r.proxy:qc(r.parent):null,Hs=Se(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>qc(r.parent),$root:r=>qc(r.root),$emit:r=>r.emit,$options:r=>Bh(r),$forceUpdate:r=>r.f||(r.f=()=>Ih(r.update)),$nextTick:r=>r.n||(r.n=am.bind(r.proxy)),$watch:r=>sT.bind(r)}),Oc=(r,t)=>r!==ne&&!r.__isScriptSetup&&Ht(r,t),yT={get({_:r},t){const{ctx:e,setupState:n,data:i,props:o,accessCache:l,type:c,appContext:h}=r;let f;if(t[0]!=="$"){const v=l[t];if(v!==void 0)switch(v){case 1:return n[t];case 2:return i[t];case 4:return e[t];case 3:return o[t]}else{if(Oc(n,t))return l[t]=1,n[t];if(i!==ne&&Ht(i,t))return l[t]=2,i[t];if((f=r.propsOptions[0])&&Ht(f,t))return l[t]=3,o[t];if(e!==ne&&Ht(e,t))return l[t]=4,e[t];Jc&&(l[t]=0)}}const d=Hs[t];let p,_;if(d)return t==="$attrs"&&nn(r,"get",t),d(r);if((p=c.__cssModules)&&(p=p[t]))return p;if(e!==ne&&Ht(e,t))return l[t]=4,e[t];if(_=h.config.globalProperties,Ht(_,t))return _[t]},set({_:r},t,e){const{data:n,setupState:i,ctx:o}=r;return Oc(i,t)?(i[t]=e,!0):n!==ne&&Ht(n,t)?(n[t]=e,!0):Ht(r.props,t)||t[0]==="$"&&t.slice(1)in r?!1:(o[t]=e,!0)},has({_:{data:r,setupState:t,accessCache:e,ctx:n,appContext:i,propsOptions:o}},l){let c;return!!e[l]||r!==ne&&Ht(r,l)||Oc(t,l)||(c=o[0])&&Ht(c,l)||Ht(n,l)||Ht(Hs,l)||Ht(i.config.globalProperties,l)},defineProperty(r,t,e){return e.get!=null?r._.accessCache[t]=0:Ht(e,"value")&&this.set(r,t,e.value,null),Reflect.defineProperty(r,t,e)}};function xg(r){return yt(r)?r.reduce((t,e)=>(t[e]=null,t),{}):r}let Jc=!0;function xT(r){const t=Bh(r),e=r.proxy,n=r.ctx;Jc=!1,t.beforeCreate&&wg(t.beforeCreate,r,"bc");const{data:i,computed:o,methods:l,watch:c,provide:h,inject:f,created:d,beforeMount:p,mounted:_,beforeUpdate:v,updated:w,activated:E,deactivated:O,beforeDestroy:M,beforeUnmount:R,destroyed:X,unmounted:B,render:$,renderTracked:tt,renderTriggered:nt,errorCaptured:ot,serverPrefetch:it,expose:at,inheritAttrs:dt,components:Lt,directives:Tt,filters:Ft}=t;if(f&&wT(f,n,null),l)for(const Ct in l){const vt=l[Ct];Et(vt)&&(n[Ct]=vt.bind(e))}if(i){const Ct=i.call(e,e);se(Ct)&&(r.data=za(Ct))}if(Jc=!0,o)for(const Ct in o){const vt=o[Ct],On=Et(vt)?vt.bind(e,e):Et(vt.get)?vt.get.bind(e,e):Bn,rn=!Et(vt)&&Et(vt.set)?vt.set.bind(e):Bn,he=Ue({get:On,set:rn});Object.defineProperty(n,Ct,{enumerable:!0,configurable:!0,get:()=>he.value,set:Ae=>he.value=Ae})}if(c)for(const Ct in c)xm(c[Ct],n,e,Ct);if(h){const Ct=Et(h)?h.call(e):h;Reflect.ownKeys(Ct).forEach(vt=>{va(vt,Ct[vt])})}d&&wg(d,r,"c");function Mt(Ct,vt){yt(vt)?vt.forEach(On=>Ct(On.bind(e))):vt&&Ct(vt.bind(e))}if(Mt(hT,p),Mt(_m,_),Mt(uT,v),Mt(fT,w),Mt(aT,E),Mt(lT,O),Mt(_T,ot),Mt(mT,tt),Mt(pT,nt),Mt(dT,R),Mt(vm,B),Mt(gT,it),yt(at))if(at.length){const Ct=r.exposed||(r.exposed={});at.forEach(vt=>{Object.defineProperty(Ct,vt,{get:()=>e[vt],set:On=>e[vt]=On})})}else r.exposed||(r.exposed={});$&&r.render===Bn&&(r.render=$),dt!=null&&(r.inheritAttrs=dt),Lt&&(r.components=Lt),Tt&&(r.directives=Tt)}function wT(r,t,e=Bn){yt(r)&&(r=Qc(r));for(const n in r){const i=r[n];let o;se(i)?"default"in i?o=fr(i.from||n,i.default,!0):o=fr(i.from||n):o=fr(i),Fe(o)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:l=>o.value=l}):t[n]=o}}function wg(r,t,e){jn(yt(r)?r.map(n=>n.bind(t.proxy)):r.bind(t.proxy),t,e)}function xm(r,t,e,n){const i=n.includes(".")?gm(e,n):()=>e[n];if(we(r)){const o=t[r];Et(o)&&_a(i,o)}else if(Et(r))_a(i,r.bind(e));else if(se(r))if(yt(r))r.forEach(o=>xm(o,t,e,n));else{const o=Et(r.handler)?r.handler.bind(e):t[r.handler];Et(o)&&_a(i,o,r)}}function Bh(r){const t=r.type,{mixins:e,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:l}}=r.appContext,c=o.get(t);let h;return c?h=c:!i.length&&!e&&!n?h=t:(h={},i.length&&i.forEach(f=>ba(h,f,l,!0)),ba(h,t,l)),se(t)&&o.set(t,h),h}function ba(r,t,e,n=!1){const{mixins:i,extends:o}=t;o&&ba(r,o,e,!0),i&&i.forEach(l=>ba(r,l,e,!0));for(const l in t)if(!(n&&l==="expose")){const c=CT[l]||e&&e[l];r[l]=c?c(r[l],t[l]):t[l]}return r}const CT={data:Cg,props:Sg,emits:Sg,methods:Bs,computed:Bs,beforeCreate:He,created:He,beforeMount:He,mounted:He,beforeUpdate:He,updated:He,beforeDestroy:He,beforeUnmount:He,destroyed:He,unmounted:He,activated:He,deactivated:He,errorCaptured:He,serverPrefetch:He,components:Bs,directives:Bs,watch:bT,provide:Cg,inject:ST};function Cg(r,t){return t?r?function(){return Se(Et(r)?r.call(this,this):r,Et(t)?t.call(this,this):t)}:t:r}function ST(r,t){return Bs(Qc(r),Qc(t))}function Qc(r){if(yt(r)){const t={};for(let e=0;e<r.length;e++)t[r[e]]=r[e];return t}return r}function He(r,t){return r?[...new Set([].concat(r,t))]:t}function Bs(r,t){return r?Se(Object.create(null),r,t):t}function Sg(r,t){return r?yt(r)&&yt(t)?[...new Set([...r,...t])]:Se(Object.create(null),xg(r),xg(t??{})):t}function bT(r,t){if(!r)return t;if(!t)return r;const e=Se(Object.create(null),r);for(const n in t)e[n]=He(r[n],t[n]);return e}function wm(){return{app:null,config:{isNativeTag:ZS,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let TT=0;function OT(r,t){return function(n,i=null){Et(n)||(n=Se({},n)),i!=null&&!se(i)&&(i=null);const o=wm(),l=new Set;let c=!1;const h=o.app={_uid:TT++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:JT,get config(){return o.config},set config(f){},use(f,...d){return l.has(f)||(f&&Et(f.install)?(l.add(f),f.install(h,...d)):Et(f)&&(l.add(f),f(h,...d))),h},mixin(f){return o.mixins.includes(f)||o.mixins.push(f),h},component(f,d){return d?(o.components[f]=d,h):o.components[f]},directive(f,d){return d?(o.directives[f]=d,h):o.directives[f]},mount(f,d,p){if(!c){const _=ye(n,i);return _.appContext=o,d&&t?t(_,f):r(_,f,p),c=!0,h._container=f,f.__vue_app__=h,Qa(_.component)||_.component.proxy}},unmount(){c&&(r(null,h._container),delete h._container.__vue_app__)},provide(f,d){return o.provides[f]=d,h},runWithContext(f){Ta=h;try{return f()}finally{Ta=null}}};return h}}let Ta=null;function va(r,t){if(Re){let e=Re.provides;const n=Re.parent&&Re.parent.provides;n===e&&(e=Re.provides=Object.create(n)),e[r]=t}}function fr(r,t,e=!1){const n=Re||Ne;if(n||Ta){const i=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Ta._context.provides;if(i&&r in i)return i[r];if(arguments.length>1)return e&&Et(t)?t.call(n&&n.proxy):t}}function ET(r,t,e,n=!1){const i={},o={};wa(o,Ja,1),r.propsDefaults=Object.create(null),Cm(r,t,i,o);for(const l in r.propsOptions[0])l in i||(i[l]=void 0);e?r.props=n?i:Zp(i):r.type.props?r.props=i:r.props=o,r.attrs=o}function PT(r,t,e,n){const{props:i,attrs:o,vnode:{patchFlag:l}}=r,c=zt(i),[h]=r.propsOptions;let f=!1;if((n||l>0)&&!(l&16)){if(l&8){const d=r.vnode.dynamicProps;for(let p=0;p<d.length;p++){let _=d[p];if(Ga(r.emitsOptions,_))continue;const v=t[_];if(h)if(Ht(o,_))v!==o[_]&&(o[_]=v,f=!0);else{const w=Zi(_);i[w]=Zc(h,c,w,v,r,!1)}else v!==o[_]&&(o[_]=v,f=!0)}}}else{Cm(r,t,i,o)&&(f=!0);let d;for(const p in c)(!t||!Ht(t,p)&&((d=ls(p))===p||!Ht(t,d)))&&(h?e&&(e[p]!==void 0||e[d]!==void 0)&&(i[p]=Zc(h,c,p,void 0,r,!0)):delete i[p]);if(o!==c)for(const p in o)(!t||!Ht(t,p))&&(delete o[p],f=!0)}f&&gr(r,"set","$attrs")}function Cm(r,t,e,n){const[i,o]=r.propsOptions;let l=!1,c;if(t)for(let h in t){if(ma(h))continue;const f=t[h];let d;i&&Ht(i,d=Zi(h))?!o||!o.includes(d)?e[d]=f:(c||(c={}))[d]=f:Ga(r.emitsOptions,h)||(!(h in n)||f!==n[h])&&(n[h]=f,l=!0)}if(o){const h=zt(e),f=c||ne;for(let d=0;d<o.length;d++){const p=o[d];e[p]=Zc(i,h,p,f[p],r,!Ht(f,p))}}return l}function Zc(r,t,e,n,i,o){const l=r[e];if(l!=null){const c=Ht(l,"default");if(c&&n===void 0){const h=l.default;if(l.type!==Function&&!l.skipFactory&&Et(h)){const{propsDefaults:f}=i;e in f?n=f[e]:(ns(i),n=f[e]=h.call(null,t),pi())}else n=h}l[0]&&(o&&!c?n=!1:l[1]&&(n===""||n===ls(e))&&(n=!0))}return n}function Sm(r,t,e=!1){const n=t.propsCache,i=n.get(r);if(i)return i;const o=r.props,l={},c=[];let h=!1;if(!Et(r)){const d=p=>{h=!0;const[_,v]=Sm(p,t,!0);Se(l,_),v&&c.push(...v)};!e&&t.mixins.length&&t.mixins.forEach(d),r.extends&&d(r.extends),r.mixins&&r.mixins.forEach(d)}if(!o&&!h)return se(r)&&n.set(r,Gi),Gi;if(yt(o))for(let d=0;d<o.length;d++){const p=Zi(o[d]);bg(p)&&(l[p]=ne)}else if(o)for(const d in o){const p=Zi(d);if(bg(p)){const _=o[d],v=l[p]=yt(_)||Et(_)?{type:_}:Se({},_);if(v){const w=Eg(Boolean,v.type),E=Eg(String,v.type);v[0]=w>-1,v[1]=E<0||w<E,(w>-1||Ht(v,"default"))&&c.push(p)}}}const f=[l,c];return se(r)&&n.set(r,f),f}function bg(r){return r[0]!=="$"}function Tg(r){const t=r&&r.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:r===null?"null":""}function Og(r,t){return Tg(r)===Tg(t)}function Eg(r,t){return yt(t)?t.findIndex(e=>Og(e,r)):Et(t)&&Og(t,r)?0:-1}const bm=r=>r[0]==="_"||r==="$stable",jh=r=>yt(r)?r.map(Gn):[Gn(r)],DT=(r,t,e)=>{if(t._n)return t;const n=Is((...i)=>jh(t(...i)),e);return n._c=!1,n},Tm=(r,t,e)=>{const n=r._ctx;for(const i in r){if(bm(i))continue;const o=r[i];if(Et(o))t[i]=DT(i,o,n);else if(o!=null){const l=jh(o);t[i]=()=>l}}},Om=(r,t)=>{const e=jh(t);r.slots.default=()=>e},AT=(r,t)=>{if(r.vnode.shapeFlag&32){const e=t._;e?(r.slots=zt(t),wa(t,"_",e)):Tm(t,r.slots={})}else r.slots={},t&&Om(r,t);wa(r.slots,Ja,1)},MT=(r,t,e)=>{const{vnode:n,slots:i}=r;let o=!0,l=ne;if(n.shapeFlag&32){const c=t._;c?e&&c===1?o=!1:(Se(i,t),!e&&c===1&&delete i._):(o=!t.$stable,Tm(t,i)),l=t}else t&&(Om(r,t),l={default:1});if(o)for(const c in i)!bm(c)&&!(c in l)&&delete i[c]};function th(r,t,e,n,i=!1){if(yt(r)){r.forEach((_,v)=>th(_,t&&(yt(t)?t[v]:t),e,n,i));return}if(Xs(n)&&!i)return;const o=n.shapeFlag&4?Qa(n.component)||n.component.proxy:n.el,l=i?null:o,{i:c,r:h}=r,f=t&&t.r,d=c.refs===ne?c.refs={}:c.refs,p=c.setupState;if(f!=null&&f!==h&&(we(f)?(d[f]=null,Ht(p,f)&&(p[f]=null)):Fe(f)&&(f.value=null)),Et(h))Yr(h,c,12,[l,d]);else{const _=we(h),v=Fe(h);if(_||v){const w=()=>{if(r.f){const E=_?Ht(p,h)?p[h]:d[h]:h.value;i?yt(E)&&Sh(E,o):yt(E)?E.includes(o)||E.push(o):_?(d[h]=[o],Ht(p,h)&&(p[h]=d[h])):(h.value=[o],r.k&&(d[r.k]=h.value))}else _?(d[h]=l,Ht(p,h)&&(p[h]=l)):v&&(h.value=l,r.k&&(d[r.k]=l))};l?(w.id=-1,Qe(w,e)):w()}}}const Qe=iT;function kT(r){return LT(r)}function LT(r,t){const e=Nc();e.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:l,createText:c,createComment:h,setText:f,setElementText:d,parentNode:p,nextSibling:_,setScopeId:v=Bn,insertStaticContent:w}=r,E=(C,b,L,j=null,N=null,z=null,Z=!1,K=null,q=!!b.dynamicChildren)=>{if(C===b)return;C&&!As(C,b)&&(j=U(C),Ae(C,N,z,!0),C=null),b.patchFlag===-2&&(q=!1,b.dynamicChildren=null);const{type:V,ref:ct,shapeFlag:st}=b;switch(V){case Ka:O(C,b,L,j);break;case Nr:M(C,b,L,j);break;case Ec:C==null&&R(b,L,j,Z);break;case Ze:Lt(C,b,L,j,N,z,Z,K,q);break;default:st&1?$(C,b,L,j,N,z,Z,K,q):st&6?Tt(C,b,L,j,N,z,Z,K,q):(st&64||st&128)&&V.process(C,b,L,j,N,z,Z,K,q,J)}ct!=null&&N&&th(ct,C&&C.ref,z,b||C,!b)},O=(C,b,L,j)=>{if(C==null)n(b.el=c(b.children),L,j);else{const N=b.el=C.el;b.children!==C.children&&f(N,b.children)}},M=(C,b,L,j)=>{C==null?n(b.el=h(b.children||""),L,j):b.el=C.el},R=(C,b,L,j)=>{[C.el,C.anchor]=w(C.children,b,L,j,C.el,C.anchor)},X=({el:C,anchor:b},L,j)=>{let N;for(;C&&C!==b;)N=_(C),n(C,L,j),C=N;n(b,L,j)},B=({el:C,anchor:b})=>{let L;for(;C&&C!==b;)L=_(C),i(C),C=L;i(b)},$=(C,b,L,j,N,z,Z,K,q)=>{Z=Z||b.type==="svg",C==null?tt(b,L,j,N,z,Z,K,q):it(C,b,N,z,Z,K,q)},tt=(C,b,L,j,N,z,Z,K)=>{let q,V;const{type:ct,props:st,shapeFlag:ft,transition:pt,dirs:Dt}=C;if(q=C.el=l(C.type,z,st&&st.is,st),ft&8?d(q,C.children):ft&16&&ot(C.children,q,null,j,N,z&&ct!=="foreignObject",Z,K),Dt&&si(C,null,j,"created"),nt(q,C,C.scopeId,Z,j),st){for(const Bt in st)Bt!=="value"&&!ma(Bt)&&o(q,Bt,null,st[Bt],z,C.children,j,N,ue);"value"in st&&o(q,"value",null,st.value),(V=st.onVnodeBeforeMount)&&Vn(V,j,C)}Dt&&si(C,null,j,"beforeMount");const Yt=(!N||N&&!N.pendingBranch)&&pt&&!pt.persisted;Yt&&pt.beforeEnter(q),n(q,b,L),((V=st&&st.onVnodeMounted)||Yt||Dt)&&Qe(()=>{V&&Vn(V,j,C),Yt&&pt.enter(q),Dt&&si(C,null,j,"mounted")},N)},nt=(C,b,L,j,N)=>{if(L&&v(C,L),j)for(let z=0;z<j.length;z++)v(C,j[z]);if(N){let z=N.subTree;if(b===z){const Z=N.vnode;nt(C,Z,Z.scopeId,Z.slotScopeIds,N.parent)}}},ot=(C,b,L,j,N,z,Z,K,q=0)=>{for(let V=q;V<C.length;V++){const ct=C[V]=K?Br(C[V]):Gn(C[V]);E(null,ct,b,L,j,N,z,Z,K)}},it=(C,b,L,j,N,z,Z)=>{const K=b.el=C.el;let{patchFlag:q,dynamicChildren:V,dirs:ct}=b;q|=C.patchFlag&16;const st=C.props||ne,ft=b.props||ne;let pt;L&&oi(L,!1),(pt=ft.onVnodeBeforeUpdate)&&Vn(pt,L,b,C),ct&&si(b,C,L,"beforeUpdate"),L&&oi(L,!0);const Dt=N&&b.type!=="foreignObject";if(V?at(C.dynamicChildren,V,K,L,j,Dt,z):Z||vt(C,b,K,null,L,j,Dt,z,!1),q>0){if(q&16)dt(K,b,st,ft,L,j,N);else if(q&2&&st.class!==ft.class&&o(K,"class",null,ft.class,N),q&4&&o(K,"style",st.style,ft.style,N),q&8){const Yt=b.dynamicProps;for(let Bt=0;Bt<Yt.length;Bt++){const re=Yt[Bt],Be=st[re],Yn=ft[re];(Yn!==Be||re==="value")&&o(K,re,Be,Yn,N,C.children,L,j,ue)}}q&1&&C.children!==b.children&&d(K,b.children)}else!Z&&V==null&&dt(K,b,st,ft,L,j,N);((pt=ft.onVnodeUpdated)||ct)&&Qe(()=>{pt&&Vn(pt,L,b,C),ct&&si(b,C,L,"updated")},j)},at=(C,b,L,j,N,z,Z)=>{for(let K=0;K<b.length;K++){const q=C[K],V=b[K],ct=q.el&&(q.type===Ze||!As(q,V)||q.shapeFlag&70)?p(q.el):L;E(q,V,ct,null,j,N,z,Z,!0)}},dt=(C,b,L,j,N,z,Z)=>{if(L!==j){if(L!==ne)for(const K in L)!ma(K)&&!(K in j)&&o(C,K,L[K],null,Z,b.children,N,z,ue);for(const K in j){if(ma(K))continue;const q=j[K],V=L[K];q!==V&&K!=="value"&&o(C,K,V,q,Z,b.children,N,z,ue)}"value"in j&&o(C,"value",L.value,j.value)}},Lt=(C,b,L,j,N,z,Z,K,q)=>{const V=b.el=C?C.el:c(""),ct=b.anchor=C?C.anchor:c("");let{patchFlag:st,dynamicChildren:ft,slotScopeIds:pt}=b;pt&&(K=K?K.concat(pt):pt),C==null?(n(V,L,j),n(ct,L,j),ot(b.children,L,ct,N,z,Z,K,q)):st>0&&st&64&&ft&&C.dynamicChildren?(at(C.dynamicChildren,ft,L,N,z,Z,K),(b.key!=null||N&&b===N.subTree)&&Em(C,b,!0)):vt(C,b,L,ct,N,z,Z,K,q)},Tt=(C,b,L,j,N,z,Z,K,q)=>{b.slotScopeIds=K,C==null?b.shapeFlag&512?N.ctx.activate(b,L,j,Z,q):Ft(b,L,j,N,z,Z,q):Xt(C,b,q)},Ft=(C,b,L,j,N,z,Z)=>{const K=C.component=UT(C,j,N);if(pm(C)&&(K.ctx.renderer=J),NT(K),K.asyncDep){if(N&&N.registerDep(K,Mt),!C.el){const q=K.subTree=ye(Nr);M(null,q,b,L)}return}Mt(K,C,b,L,N,z,Z)},Xt=(C,b,L)=>{const j=b.component=C.component;if(eT(C,b,L))if(j.asyncDep&&!j.asyncResolved){Ct(j,b,L);return}else j.next=b,Kb(j.update),j.update();else b.el=C.el,j.vnode=b},Mt=(C,b,L,j,N,z,Z)=>{const K=()=>{if(C.isMounted){let{next:ct,bu:st,u:ft,parent:pt,vnode:Dt}=C,Yt=ct,Bt;oi(C,!1),ct?(ct.el=Dt.el,Ct(C,ct,Z)):ct=Dt,st&&bc(st),(Bt=ct.props&&ct.props.onVnodeBeforeUpdate)&&Vn(Bt,pt,ct,Dt),oi(C,!0);const re=Tc(C),Be=C.subTree;C.subTree=re,E(Be,re,p(Be.el),U(Be),C,N,z),ct.el=re.el,Yt===null&&nT(C,re.el),ft&&Qe(ft,N),(Bt=ct.props&&ct.props.onVnodeUpdated)&&Qe(()=>Vn(Bt,pt,ct,Dt),N)}else{let ct;const{el:st,props:ft}=b,{bm:pt,m:Dt,parent:Yt}=C,Bt=Xs(b);if(oi(C,!1),pt&&bc(pt),!Bt&&(ct=ft&&ft.onVnodeBeforeMount)&&Vn(ct,Yt,b),oi(C,!0),st&&It){const re=()=>{C.subTree=Tc(C),It(st,C.subTree,C,N,null)};Bt?b.type.__asyncLoader().then(()=>!C.isUnmounted&&re()):re()}else{const re=C.subTree=Tc(C);E(null,re,L,j,C,N,z),b.el=re.el}if(Dt&&Qe(Dt,N),!Bt&&(ct=ft&&ft.onVnodeMounted)){const re=b;Qe(()=>Vn(ct,Yt,re),N)}(b.shapeFlag&256||Yt&&Xs(Yt.vnode)&&Yt.vnode.shapeFlag&256)&&C.a&&Qe(C.a,N),C.isMounted=!0,b=L=j=null}},q=C.effect=new Ph(K,()=>Ih(V),C.scope),V=C.update=()=>q.run();V.id=C.uid,oi(C,!0),V()},Ct=(C,b,L)=>{b.component=C;const j=C.vnode.props;C.vnode=b,C.next=null,PT(C,b.props,j,L),MT(C,b.children,L),cs(),mg(),hs()},vt=(C,b,L,j,N,z,Z,K,q=!1)=>{const V=C&&C.children,ct=C?C.shapeFlag:0,st=b.children,{patchFlag:ft,shapeFlag:pt}=b;if(ft>0){if(ft&128){rn(V,st,L,j,N,z,Z,K,q);return}else if(ft&256){On(V,st,L,j,N,z,Z,K,q);return}}pt&8?(ct&16&&ue(V,N,z),st!==V&&d(L,st)):ct&16?pt&16?rn(V,st,L,j,N,z,Z,K,q):ue(V,N,z,!0):(ct&8&&d(L,""),pt&16&&ot(st,L,j,N,z,Z,K,q))},On=(C,b,L,j,N,z,Z,K,q)=>{C=C||Gi,b=b||Gi;const V=C.length,ct=b.length,st=Math.min(V,ct);let ft;for(ft=0;ft<st;ft++){const pt=b[ft]=q?Br(b[ft]):Gn(b[ft]);E(C[ft],pt,L,null,N,z,Z,K,q)}V>ct?ue(C,N,z,!0,!1,st):ot(b,L,j,N,z,Z,K,q,st)},rn=(C,b,L,j,N,z,Z,K,q)=>{let V=0;const ct=b.length;let st=C.length-1,ft=ct-1;for(;V<=st&&V<=ft;){const pt=C[V],Dt=b[V]=q?Br(b[V]):Gn(b[V]);if(As(pt,Dt))E(pt,Dt,L,null,N,z,Z,K,q);else break;V++}for(;V<=st&&V<=ft;){const pt=C[st],Dt=b[ft]=q?Br(b[ft]):Gn(b[ft]);if(As(pt,Dt))E(pt,Dt,L,null,N,z,Z,K,q);else break;st--,ft--}if(V>st){if(V<=ft){const pt=ft+1,Dt=pt<ct?b[pt].el:j;for(;V<=ft;)E(null,b[V]=q?Br(b[V]):Gn(b[V]),L,Dt,N,z,Z,K,q),V++}}else if(V>ft)for(;V<=st;)Ae(C[V],N,z,!0),V++;else{const pt=V,Dt=V,Yt=new Map;for(V=Dt;V<=ft;V++){const Te=b[V]=q?Br(b[V]):Gn(b[V]);Te.key!=null&&Yt.set(Te.key,V)}let Bt,re=0;const Be=ft-Dt+1;let Yn=!1,Oi=0;const Qn=new Array(Be);for(V=0;V<Be;V++)Qn[V]=0;for(V=pt;V<=st;V++){const Te=C[V];if(re>=Be){Ae(Te,N,z,!0);continue}let Ge;if(Te.key!=null)Ge=Yt.get(Te.key);else for(Bt=Dt;Bt<=ft;Bt++)if(Qn[Bt-Dt]===0&&As(Te,b[Bt])){Ge=Bt;break}Ge===void 0?Ae(Te,N,z,!0):(Qn[Ge-Dt]=V+1,Ge>=Oi?Oi=Ge:Yn=!0,E(Te,b[Ge],L,null,N,z,Z,K,q),re++)}const Ei=Yn?RT(Qn):Gi;for(Bt=Ei.length-1,V=Be-1;V>=0;V--){const Te=Dt+V,Ge=b[Te],Pi=Te+1<ct?b[Te+1].el:j;Qn[V]===0?E(null,Ge,L,Pi,N,z,Z,K,q):Yn&&(Bt<0||V!==Ei[Bt]?he(Ge,L,Pi,2):Bt--)}}},he=(C,b,L,j,N=null)=>{const{el:z,type:Z,transition:K,children:q,shapeFlag:V}=C;if(V&6){he(C.component.subTree,b,L,j);return}if(V&128){C.suspense.move(b,L,j);return}if(V&64){Z.move(C,b,L,J);return}if(Z===Ze){n(z,b,L);for(let st=0;st<q.length;st++)he(q[st],b,L,j);n(C.anchor,b,L);return}if(Z===Ec){X(C,b,L);return}if(j!==2&&V&1&&K)if(j===0)K.beforeEnter(z),n(z,b,L),Qe(()=>K.enter(z),N);else{const{leave:st,delayLeave:ft,afterLeave:pt}=K,Dt=()=>n(z,b,L),Yt=()=>{st(z,()=>{Dt(),pt&&pt()})};ft?ft(z,Dt,Yt):Yt()}else n(z,b,L)},Ae=(C,b,L,j=!1,N=!1)=>{const{type:z,props:Z,ref:K,children:q,dynamicChildren:V,shapeFlag:ct,patchFlag:st,dirs:ft}=C;if(K!=null&&th(K,null,L,C,!0),ct&256){b.ctx.deactivate(C);return}const pt=ct&1&&ft,Dt=!Xs(C);let Yt;if(Dt&&(Yt=Z&&Z.onVnodeBeforeUnmount)&&Vn(Yt,b,C),ct&6)En(C.component,L,j);else{if(ct&128){C.suspense.unmount(L,j);return}pt&&si(C,null,b,"beforeUnmount"),ct&64?C.type.remove(C,b,L,N,J,j):V&&(z!==Ze||st>0&&st&64)?ue(V,b,L,!1,!0):(z===Ze&&st&384||!N&&ct&16)&&ue(q,b,L),j&&Cr(C)}(Dt&&(Yt=Z&&Z.onVnodeUnmounted)||pt)&&Qe(()=>{Yt&&Vn(Yt,b,C),pt&&si(C,null,b,"unmounted")},L)},Cr=C=>{const{type:b,el:L,anchor:j,transition:N}=C;if(b===Ze){Sr(L,j);return}if(b===Ec){B(C);return}const z=()=>{i(L),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(C.shapeFlag&1&&N&&!N.persisted){const{leave:Z,delayLeave:K}=N,q=()=>Z(L,z);K?K(C.el,z,q):q()}else z()},Sr=(C,b)=>{let L;for(;C!==b;)L=_(C),i(C),C=L;i(b)},En=(C,b,L)=>{const{bum:j,scope:N,update:z,subTree:Z,um:K}=C;j&&bc(j),N.stop(),z&&(z.active=!1,Ae(Z,C,b,L)),K&&Qe(K,b),Qe(()=>{C.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},ue=(C,b,L,j=!1,N=!1,z=0)=>{for(let Z=z;Z<C.length;Z++)Ae(C[Z],b,L,j,N)},U=C=>C.shapeFlag&6?U(C.component.subTree):C.shapeFlag&128?C.suspense.next():_(C.anchor||C.el),et=(C,b,L)=>{C==null?b._vnode&&Ae(b._vnode,null,null,!0):E(b._vnode||null,C,b,null,null,null,L),mg(),cm(),b._vnode=C},J={p:E,um:Ae,m:he,r:Cr,mt:Ft,mc:ot,pc:vt,pbc:at,n:U,o:r};let ht,It;return t&&([ht,It]=t(J)),{render:et,hydrate:ht,createApp:OT(et,ht)}}function oi({effect:r,update:t},e){r.allowRecurse=t.allowRecurse=e}function Em(r,t,e=!1){const n=r.children,i=t.children;if(yt(n)&&yt(i))for(let o=0;o<n.length;o++){const l=n[o];let c=i[o];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[o]=Br(i[o]),c.el=l.el),e||Em(l,c)),c.type===Ka&&(c.el=l.el)}}function RT(r){const t=r.slice(),e=[0];let n,i,o,l,c;const h=r.length;for(n=0;n<h;n++){const f=r[n];if(f!==0){if(i=e[e.length-1],r[i]<f){t[n]=i,e.push(n);continue}for(o=0,l=e.length-1;o<l;)c=o+l>>1,r[e[c]]<f?o=c+1:l=c;f<r[e[o]]&&(o>0&&(t[n]=e[o-1]),e[o]=n)}}for(o=e.length,l=e[o-1];o-- >0;)e[o]=l,l=t[l];return e}const FT=r=>r.__isTeleport,Ze=Symbol.for("v-fgt"),Ka=Symbol.for("v-txt"),Nr=Symbol.for("v-cmt"),Ec=Symbol.for("v-stc"),Ys=[];let In=null;function dn(r=!1){Ys.push(In=r?null:[])}function IT(){Ys.pop(),In=Ys[Ys.length-1]||null}let eo=1;function Pg(r){eo+=r}function Pm(r){return r.dynamicChildren=eo>0?In||Gi:null,IT(),eo>0&&In&&In.push(r),r}function hr(r,t,e,n,i,o){return Pm(ge(r,t,e,n,i,o,!0))}function qa(r,t,e,n,i){return Pm(ye(r,t,e,n,i,!0))}function Oa(r){return r?r.__v_isVNode===!0:!1}function As(r,t){return r.type===t.type&&r.key===t.key}const Ja="__vInternal",Dm=({key:r})=>r??null,ya=({ref:r,ref_key:t,ref_for:e})=>(typeof r=="number"&&(r=""+r),r!=null?we(r)||Fe(r)||Et(r)?{i:Ne,r,k:t,f:!!e}:r:null);function ge(r,t=null,e=null,n=0,i=null,o=r===Ze?0:1,l=!1,c=!1){const h={__v_isVNode:!0,__v_skip:!0,type:r,props:t,key:t&&Dm(t),ref:t&&ya(t),scopeId:fm,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ne};return c?(Wh(h,e),o&128&&r.normalize(h)):e&&(h.shapeFlag|=we(e)?8:16),eo>0&&!l&&In&&(h.patchFlag>0||o&6)&&h.patchFlag!==32&&In.push(h),h}const ye=BT;function BT(r,t=null,e=null,n=0,i=null,o=!1){if((!r||r===vT)&&(r=Nr),Oa(r)){const c=es(r,t,!0);return e&&Wh(c,e),eo>0&&!o&&In&&(c.shapeFlag&6?In[In.indexOf(r)]=c:In.push(c)),c.patchFlag|=-2,c}if($T(r)&&(r=r.__vccOpts),t){t=jT(t);let{class:c,style:h}=t;c&&!we(c)&&(t.class=Js(c)),se(h)&&(em(h)&&!yt(h)&&(h=Se({},h)),t.style=Oh(h))}const l=we(r)?1:rT(r)?128:FT(r)?64:se(r)?4:Et(r)?2:0;return ge(r,t,e,n,i,l,o,!0)}function jT(r){return r?em(r)||Ja in r?Se({},r):r:null}function es(r,t,e=!1){const{props:n,ref:i,patchFlag:o,children:l}=r,c=t?XT(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:c,key:c&&Dm(c),ref:t&&t.ref?e&&i?yt(i)?i.concat(ya(t)):[i,ya(t)]:ya(t):i,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:l,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:t&&r.type!==Ze?o===-1?16:o|16:o,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&es(r.ssContent),ssFallback:r.ssFallback&&es(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce}}function eh(r=" ",t=0){return ye(Ka,null,r,t)}function WT(r="",t=!1){return t?(dn(),qa(Nr,null,r)):ye(Nr,null,r)}function Gn(r){return r==null||typeof r=="boolean"?ye(Nr):yt(r)?ye(Ze,null,r.slice()):typeof r=="object"?Br(r):ye(Ka,null,String(r))}function Br(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:es(r)}function Wh(r,t){let e=0;const{shapeFlag:n}=r;if(t==null)t=null;else if(yt(t))e=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Wh(r,i()),i._c&&(i._d=!0));return}else{e=32;const i=t._;!i&&!(Ja in t)?t._ctx=Ne:i===3&&Ne&&(Ne.slots._===1?t._=1:(t._=2,r.patchFlag|=1024))}else Et(t)?(t={default:t,_ctx:Ne},e=32):(t=String(t),n&64?(e=16,t=[eh(t)]):e=8);r.children=t,r.shapeFlag|=e}function XT(...r){const t={};for(let e=0;e<r.length;e++){const n=r[e];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Js([t.class,n.class]));else if(i==="style")t.style=Oh([t.style,n.style]);else if(Ha(i)){const o=t[i],l=n[i];l&&o!==l&&!(yt(o)&&o.includes(l))&&(t[i]=o?[].concat(o,l):l)}else i!==""&&(t[i]=n[i])}return t}function Vn(r,t,e,n=null){jn(r,t,7,[e,n])}const HT=wm();let YT=0;function UT(r,t,e){const n=r.type,i=(t?t.appContext:r.appContext)||HT,o={uid:YT++,vnode:r,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Yp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Sm(n,i),emitsOptions:um(n,i),emit:null,emitted:null,propsDefaults:ne,inheritAttrs:n.inheritAttrs,ctx:ne,data:ne,props:ne,attrs:ne,slots:ne,refs:ne,setupState:ne,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Qb.bind(null,o),r.ce&&r.ce(o),o}let Re=null,Xh,Ui,Dg="__VUE_INSTANCE_SETTERS__";(Ui=Nc()[Dg])||(Ui=Nc()[Dg]=[]),Ui.push(r=>Re=r),Xh=r=>{Ui.length>1?Ui.forEach(t=>t(r)):Ui[0](r)};const ns=r=>{Xh(r),r.scope.on()},pi=()=>{Re&&Re.scope.off(),Xh(null)};function Am(r){return r.vnode.shapeFlag&4}let no=!1;function NT(r,t=!1){no=t;const{props:e,children:n}=r.vnode,i=Am(r);ET(r,e,i,t),AT(r,n);const o=i?zT(r,t):void 0;return no=!1,o}function zT(r,t){const e=r.type;r.accessCache=Object.create(null),r.proxy=Lh(new Proxy(r.ctx,yT));const{setup:n}=e;if(n){const i=r.setupContext=n.length>1?GT(r):null;ns(r),cs();const o=Yr(n,r,0,[r.props,i]);if(hs(),pi(),Ip(o)){if(o.then(pi,pi),t)return o.then(l=>{Ag(r,l,t)}).catch(l=>{Va(l,r,0)});r.asyncDep=o}else Ag(r,o,t)}else Mm(r,t)}function Ag(r,t,e){Et(t)?r.type.__ssrInlineRender?r.ssrRender=t:r.render=t:se(t)&&(r.setupState=sm(t)),Mm(r,e)}let Mg;function Mm(r,t,e){const n=r.type;if(!r.render){if(!t&&Mg&&!n.render){const i=n.template||Bh(r).template;if(i){const{isCustomElement:o,compilerOptions:l}=r.appContext.config,{delimiters:c,compilerOptions:h}=n,f=Se(Se({isCustomElement:o,delimiters:c},l),h);n.render=Mg(i,f)}}r.render=n.render||Bn}ns(r),cs(),xT(r),hs(),pi()}function VT(r){return r.attrsProxy||(r.attrsProxy=new Proxy(r.attrs,{get(t,e){return nn(r,"get","$attrs"),t[e]}}))}function GT(r){const t=e=>{r.exposed=e||{}};return{get attrs(){return VT(r)},slots:r.slots,emit:r.emit,expose:t}}function Qa(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(sm(Lh(r.exposed)),{get(t,e){if(e in t)return t[e];if(e in Hs)return Hs[e](r)},has(t,e){return e in t||e in Hs}}))}function $T(r){return Et(r)&&"__vccOpts"in r}const Ue=(r,t)=>Vb(r,t,no);function km(r,t,e){const n=arguments.length;return n===2?se(t)&&!yt(t)?Oa(t)?ye(r,null,[t]):ye(r,t):ye(r,null,t):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&Oa(e)&&(e=[e]),ye(r,t,e))}const KT=Symbol.for("v-scx"),qT=()=>fr(KT),JT="3.3.4",QT="http://www.w3.org/2000/svg",ci=typeof document<"u"?document:null,kg=ci&&ci.createElement("template"),ZT={insert:(r,t,e)=>{t.insertBefore(r,e||null)},remove:r=>{const t=r.parentNode;t&&t.removeChild(r)},createElement:(r,t,e,n)=>{const i=t?ci.createElementNS(QT,r):ci.createElement(r,e?{is:e}:void 0);return r==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:r=>ci.createTextNode(r),createComment:r=>ci.createComment(r),setText:(r,t)=>{r.nodeValue=t},setElementText:(r,t)=>{r.textContent=t},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>ci.querySelector(r),setScopeId(r,t){r.setAttribute(t,"")},insertStaticContent(r,t,e,n,i,o){const l=e?e.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),e),!(i===o||!(i=i.nextSibling)););else{kg.innerHTML=n?`<svg>${r}</svg>`:r;const c=kg.content;if(n){const h=c.firstChild;for(;h.firstChild;)c.appendChild(h.firstChild);c.removeChild(h)}t.insertBefore(c,e)}return[l?l.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}};function tO(r,t,e){const n=r._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?r.removeAttribute("class"):e?r.setAttribute("class",t):r.className=t}function eO(r,t,e){const n=r.style,i=we(e);if(e&&!i){if(t&&!we(t))for(const o in t)e[o]==null&&nh(n,o,"");for(const o in e)nh(n,o,e[o])}else{const o=n.display;i?t!==e&&(n.cssText=e):t&&r.removeAttribute("style"),"_vod"in r&&(n.display=o)}}const Lg=/\s*!important$/;function nh(r,t,e){if(yt(e))e.forEach(n=>nh(r,t,n));else if(e==null&&(e=""),t.startsWith("--"))r.setProperty(t,e);else{const n=nO(r,t);Lg.test(e)?r.setProperty(ls(n),e.replace(Lg,""),"important"):r[n]=e}}const Rg=["Webkit","Moz","ms"],Pc={};function nO(r,t){const e=Pc[t];if(e)return e;let n=Zi(t);if(n!=="filter"&&n in r)return Pc[t]=n;n=Wp(n);for(let i=0;i<Rg.length;i++){const o=Rg[i]+n;if(o in r)return Pc[t]=o}return t}const Fg="http://www.w3.org/1999/xlink";function rO(r,t,e,n,i){if(n&&t.startsWith("xlink:"))e==null?r.removeAttributeNS(Fg,t.slice(6,t.length)):r.setAttributeNS(Fg,t,e);else{const o=ub(t);e==null||o&&!Xp(e)?r.removeAttribute(t):r.setAttribute(t,o?"":e)}}function iO(r,t,e,n,i,o,l){if(t==="innerHTML"||t==="textContent"){n&&l(n,i,o),r[t]=e??"";return}const c=r.tagName;if(t==="value"&&c!=="PROGRESS"&&!c.includes("-")){r._value=e;const f=c==="OPTION"?r.getAttribute("value"):r.value,d=e??"";f!==d&&(r.value=d),e==null&&r.removeAttribute(t);return}let h=!1;if(e===""||e==null){const f=typeof r[t];f==="boolean"?e=Xp(e):e==null&&f==="string"?(e="",h=!0):f==="number"&&(e=0,h=!0)}try{r[t]=e}catch{}h&&r.removeAttribute(t)}function sO(r,t,e,n){r.addEventListener(t,e,n)}function oO(r,t,e,n){r.removeEventListener(t,e,n)}function aO(r,t,e,n,i=null){const o=r._vei||(r._vei={}),l=o[t];if(n&&l)l.value=n;else{const[c,h]=lO(t);if(n){const f=o[t]=uO(n,i);sO(r,c,f,h)}else l&&(oO(r,c,l,h),o[t]=void 0)}}const Ig=/(?:Once|Passive|Capture)$/;function lO(r){let t;if(Ig.test(r)){t={};let n;for(;n=r.match(Ig);)r=r.slice(0,r.length-n[0].length),t[n[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):ls(r.slice(2)),t]}let Dc=0;const cO=Promise.resolve(),hO=()=>Dc||(cO.then(()=>Dc=0),Dc=Date.now());function uO(r,t){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;jn(fO(n,e.value),t,5,[n])};return e.value=r,e.attached=hO(),e}function fO(r,t){if(yt(t)){const e=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{e.call(r),r._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const Bg=/^on[a-z]/,dO=(r,t,e,n,i=!1,o,l,c,h)=>{t==="class"?tO(r,n,i):t==="style"?eO(r,e,n):Ha(t)?Ch(t)||aO(r,t,e,n,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):gO(r,t,n,i))?iO(r,t,n,o,l,c,h):(t==="true-value"?r._trueValue=n:t==="false-value"&&(r._falseValue=n),rO(r,t,n,i))};function gO(r,t,e,n){return n?!!(t==="innerHTML"||t==="textContent"||t in r&&Bg.test(t)&&Et(e)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&r.tagName==="INPUT"||t==="type"&&r.tagName==="TEXTAREA"||Bg.test(t)&&we(e)?!1:t in r}const pO=["ctrl","shift","alt","meta"],mO={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,t)=>pO.some(e=>r[`${e}Key`]&&!t.includes(e))},_O=(r,t)=>(e,...n)=>{for(let i=0;i<t.length;i++){const o=mO[t[i]];if(o&&o(e,t))return}return r(e,...n)},vO={beforeMount(r,{value:t},{transition:e}){r._vod=r.style.display==="none"?"":r.style.display,e&&t?e.beforeEnter(r):Ms(r,t)},mounted(r,{value:t},{transition:e}){e&&t&&e.enter(r)},updated(r,{value:t,oldValue:e},{transition:n}){!t!=!e&&(n?t?(n.beforeEnter(r),Ms(r,!0),n.enter(r)):n.leave(r,()=>{Ms(r,!1)}):Ms(r,t))},beforeUnmount(r,{value:t}){Ms(r,t)}};function Ms(r,t){r.style.display=t?r._vod:"none"}const yO=Se({patchProp:dO},ZT);let jg;function xO(){return jg||(jg=kT(yO))}const wO=(...r)=>{const t=xO().createApp(...r),{mount:e}=t;return t.mount=n=>{const i=CO(n);if(!i)return;const o=t._component;!Et(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const l=e(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),l},t};function CO(r){return we(r)?document.querySelector(r):r}var SO=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const bO=Symbol();var Wg;(function(r){r.direct="direct",r.patchObject="patch object",r.patchFunction="patch function"})(Wg||(Wg={}));function TO(){const r=db(!0),t=r.run(()=>ai({}));let e=[],n=[];const i=Lh({install(o){i._a=o,o.provide(bO,i),o.config.globalProperties.$pinia=i,n.forEach(l=>e.push(l)),n=[]},use(o){return!this._a&&!SO?n.push(o):e.push(o),this},_p:e,_a:null,_e:r,_s:new Map,state:t});return i}/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Ni=typeof window<"u";function OO(r){return r.__esModule||r[Symbol.toStringTag]==="Module"}const $t=Object.assign;function Ac(r,t){const e={};for(const n in t){const i=t[n];e[n]=Xn(i)?i.map(r):r(i)}return e}const Us=()=>{},Xn=Array.isArray,EO=/\/$/,PO=r=>r.replace(EO,"");function Mc(r,t,e="/"){let n,i={},o="",l="";const c=t.indexOf("#");let h=t.indexOf("?");return c<h&&c>=0&&(h=-1),h>-1&&(n=t.slice(0,h),o=t.slice(h+1,c>-1?c:t.length),i=r(o)),c>-1&&(n=n||t.slice(0,c),l=t.slice(c,t.length)),n=kO(n??t,e),{fullPath:n+(o&&"?")+o+l,path:n,query:i,hash:l}}function DO(r,t){const e=t.query?r(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function Xg(r,t){return!t||!r.toLowerCase().startsWith(t.toLowerCase())?r:r.slice(t.length)||"/"}function AO(r,t,e){const n=t.matched.length-1,i=e.matched.length-1;return n>-1&&n===i&&rs(t.matched[n],e.matched[i])&&Lm(t.params,e.params)&&r(t.query)===r(e.query)&&t.hash===e.hash}function rs(r,t){return(r.aliasOf||r)===(t.aliasOf||t)}function Lm(r,t){if(Object.keys(r).length!==Object.keys(t).length)return!1;for(const e in r)if(!MO(r[e],t[e]))return!1;return!0}function MO(r,t){return Xn(r)?Hg(r,t):Xn(t)?Hg(t,r):r===t}function Hg(r,t){return Xn(t)?r.length===t.length&&r.every((e,n)=>e===t[n]):r.length===1&&r[0]===t}function kO(r,t){if(r.startsWith("/"))return r;if(!r)return t;const e=t.split("/"),n=r.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let o=e.length-1,l,c;for(l=0;l<n.length;l++)if(c=n[l],c!==".")if(c==="..")o>1&&o--;else break;return e.slice(0,o).join("/")+"/"+n.slice(l-(l===n.length?1:0)).join("/")}var ro;(function(r){r.pop="pop",r.push="push"})(ro||(ro={}));var Ns;(function(r){r.back="back",r.forward="forward",r.unknown=""})(Ns||(Ns={}));function LO(r){if(!r)if(Ni){const t=document.querySelector("base");r=t&&t.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),PO(r)}const RO=/^[^#]+#/;function FO(r,t){return r.replace(RO,"#")+t}function IO(r,t){const e=document.documentElement.getBoundingClientRect(),n=r.getBoundingClientRect();return{behavior:t.behavior,left:n.left-e.left-(t.left||0),top:n.top-e.top-(t.top||0)}}const Za=()=>({left:window.pageXOffset,top:window.pageYOffset});function BO(r){let t;if("el"in r){const e=r.el,n=typeof e=="string"&&e.startsWith("#"),i=typeof e=="string"?n?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!i)return;t=IO(i,r)}else t=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Yg(r,t){return(history.state?history.state.position-t:-1)+r}const rh=new Map;function jO(r,t){rh.set(r,t)}function WO(r){const t=rh.get(r);return rh.delete(r),t}let XO=()=>location.protocol+"//"+location.host;function Rm(r,t){const{pathname:e,search:n,hash:i}=t,o=r.indexOf("#");if(o>-1){let c=i.includes(r.slice(o))?r.slice(o).length:1,h=i.slice(c);return h[0]!=="/"&&(h="/"+h),Xg(h,"")}return Xg(e,r)+n+i}function HO(r,t,e,n){let i=[],o=[],l=null;const c=({state:_})=>{const v=Rm(r,location),w=e.value,E=t.value;let O=0;if(_){if(e.value=v,t.value=_,l&&l===w){l=null;return}O=E?_.position-E.position:0}else n(v);i.forEach(M=>{M(e.value,w,{delta:O,type:ro.pop,direction:O?O>0?Ns.forward:Ns.back:Ns.unknown})})};function h(){l=e.value}function f(_){i.push(_);const v=()=>{const w=i.indexOf(_);w>-1&&i.splice(w,1)};return o.push(v),v}function d(){const{history:_}=window;_.state&&_.replaceState($t({},_.state,{scroll:Za()}),"")}function p(){for(const _ of o)_();o=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:h,listen:f,destroy:p}}function Ug(r,t,e,n=!1,i=!1){return{back:r,current:t,forward:e,replaced:n,position:window.history.length,scroll:i?Za():null}}function YO(r){const{history:t,location:e}=window,n={value:Rm(r,e)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(h,f,d){const p=r.indexOf("#"),_=p>-1?(e.host&&document.querySelector("base")?r:r.slice(p))+h:XO()+r+h;try{t[d?"replaceState":"pushState"](f,"",_),i.value=f}catch(v){console.error(v),e[d?"replace":"assign"](_)}}function l(h,f){const d=$t({},t.state,Ug(i.value.back,h,i.value.forward,!0),f,{position:i.value.position});o(h,d,!0),n.value=h}function c(h,f){const d=$t({},i.value,t.state,{forward:h,scroll:Za()});o(d.current,d,!0);const p=$t({},Ug(n.value,h,null),{position:d.position+1},f);o(h,p,!1),n.value=h}return{location:n,state:i,push:c,replace:l}}function UO(r){r=LO(r);const t=YO(r),e=HO(r,t.state,t.location,t.replace);function n(o,l=!0){l||e.pauseListeners(),history.go(o)}const i=$t({location:"",base:r,go:n,createHref:FO.bind(null,r)},t,e);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function NO(r){return typeof r=="string"||r&&typeof r=="object"}function Fm(r){return typeof r=="string"||typeof r=="symbol"}const Rr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Im=Symbol("");var Ng;(function(r){r[r.aborted=4]="aborted",r[r.cancelled=8]="cancelled",r[r.duplicated=16]="duplicated"})(Ng||(Ng={}));function is(r,t){return $t(new Error,{type:r,[Im]:!0},t)}function lr(r,t){return r instanceof Error&&Im in r&&(t==null||!!(r.type&t))}const zg="[^/]+?",zO={sensitive:!1,strict:!1,start:!0,end:!0},VO=/[.+*?^${}()[\]/\\]/g;function GO(r,t){const e=$t({},zO,t),n=[];let i=e.start?"^":"";const o=[];for(const f of r){const d=f.length?[]:[90];e.strict&&!f.length&&(i+="/");for(let p=0;p<f.length;p++){const _=f[p];let v=40+(e.sensitive?.25:0);if(_.type===0)p||(i+="/"),i+=_.value.replace(VO,"\\$&"),v+=40;else if(_.type===1){const{value:w,repeatable:E,optional:O,regexp:M}=_;o.push({name:w,repeatable:E,optional:O});const R=M||zg;if(R!==zg){v+=10;try{new RegExp(`(${R})`)}catch(B){throw new Error(`Invalid custom RegExp for param "${w}" (${R}): `+B.message)}}let X=E?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;p||(X=O&&f.length<2?`(?:/${X})`:"/"+X),O&&(X+="?"),i+=X,v+=20,O&&(v+=-8),E&&(v+=-20),R===".*"&&(v+=-50)}d.push(v)}n.push(d)}if(e.strict&&e.end){const f=n.length-1;n[f][n[f].length-1]+=.7000000000000001}e.strict||(i+="/?"),e.end?i+="$":e.strict&&(i+="(?:/|$)");const l=new RegExp(i,e.sensitive?"":"i");function c(f){const d=f.match(l),p={};if(!d)return null;for(let _=1;_<d.length;_++){const v=d[_]||"",w=o[_-1];p[w.name]=v&&w.repeatable?v.split("/"):v}return p}function h(f){let d="",p=!1;for(const _ of r){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const v of _)if(v.type===0)d+=v.value;else if(v.type===1){const{value:w,repeatable:E,optional:O}=v,M=w in f?f[w]:"";if(Xn(M)&&!E)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const R=Xn(M)?M.join("/"):M;if(!R)if(O)_.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${w}"`);d+=R}}return d||"/"}return{re:l,score:n,keys:o,parse:c,stringify:h}}function $O(r,t){let e=0;for(;e<r.length&&e<t.length;){const n=t[e]-r[e];if(n)return n;e++}return r.length<t.length?r.length===1&&r[0]===40+40?-1:1:r.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function KO(r,t){let e=0;const n=r.score,i=t.score;for(;e<n.length&&e<i.length;){const o=$O(n[e],i[e]);if(o)return o;e++}if(Math.abs(i.length-n.length)===1){if(Vg(n))return 1;if(Vg(i))return-1}return i.length-n.length}function Vg(r){const t=r[r.length-1];return r.length>0&&t[t.length-1]<0}const qO={type:0,value:""},JO=/[a-zA-Z0-9_]/;function QO(r){if(!r)return[[]];if(r==="/")return[[qO]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function t(v){throw new Error(`ERR (${e})/"${f}": ${v}`)}let e=0,n=e;const i=[];let o;function l(){o&&i.push(o),o=[]}let c=0,h,f="",d="";function p(){f&&(e===0?o.push({type:0,value:f}):e===1||e===2||e===3?(o.length>1&&(h==="*"||h==="+")&&t(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:f,regexp:d,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):t("Invalid state to consume buffer"),f="")}function _(){f+=h}for(;c<r.length;){if(h=r[c++],h==="\\"&&e!==2){n=e,e=4;continue}switch(e){case 0:h==="/"?(f&&p(),l()):h===":"?(p(),e=1):_();break;case 4:_(),e=n;break;case 1:h==="("?e=2:JO.test(h)?_():(p(),e=0,h!=="*"&&h!=="?"&&h!=="+"&&c--);break;case 2:h===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+h:e=3:d+=h;break;case 3:p(),e=0,h!=="*"&&h!=="?"&&h!=="+"&&c--,d="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${f}"`),p(),l(),i}function ZO(r,t,e){const n=GO(QO(r.path),e),i=$t(n,{record:r,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function t2(r,t){const e=[],n=new Map;t=Kg({strict:!1,end:!0,sensitive:!1},t);function i(d){return n.get(d)}function o(d,p,_){const v=!_,w=e2(d);w.aliasOf=_&&_.record;const E=Kg(t,d),O=[w];if("alias"in d){const X=typeof d.alias=="string"?[d.alias]:d.alias;for(const B of X)O.push($t({},w,{components:_?_.record.components:w.components,path:B,aliasOf:_?_.record:w}))}let M,R;for(const X of O){const{path:B}=X;if(p&&B[0]!=="/"){const $=p.record.path,tt=$[$.length-1]==="/"?"":"/";X.path=p.record.path+(B&&tt+B)}if(M=ZO(X,p,E),_?_.alias.push(M):(R=R||M,R!==M&&R.alias.push(M),v&&d.name&&!$g(M)&&l(d.name)),w.children){const $=w.children;for(let tt=0;tt<$.length;tt++)o($[tt],M,_&&_.children[tt])}_=_||M,(M.record.components&&Object.keys(M.record.components).length||M.record.name||M.record.redirect)&&h(M)}return R?()=>{l(R)}:Us}function l(d){if(Fm(d)){const p=n.get(d);p&&(n.delete(d),e.splice(e.indexOf(p),1),p.children.forEach(l),p.alias.forEach(l))}else{const p=e.indexOf(d);p>-1&&(e.splice(p,1),d.record.name&&n.delete(d.record.name),d.children.forEach(l),d.alias.forEach(l))}}function c(){return e}function h(d){let p=0;for(;p<e.length&&KO(d,e[p])>=0&&(d.record.path!==e[p].record.path||!Bm(d,e[p]));)p++;e.splice(p,0,d),d.record.name&&!$g(d)&&n.set(d.record.name,d)}function f(d,p){let _,v={},w,E;if("name"in d&&d.name){if(_=n.get(d.name),!_)throw is(1,{location:d});E=_.record.name,v=$t(Gg(p.params,_.keys.filter(R=>!R.optional).map(R=>R.name)),d.params&&Gg(d.params,_.keys.map(R=>R.name))),w=_.stringify(v)}else if("path"in d)w=d.path,_=e.find(R=>R.re.test(w)),_&&(v=_.parse(w),E=_.record.name);else{if(_=p.name?n.get(p.name):e.find(R=>R.re.test(p.path)),!_)throw is(1,{location:d,currentLocation:p});E=_.record.name,v=$t({},p.params,d.params),w=_.stringify(v)}const O=[];let M=_;for(;M;)O.unshift(M.record),M=M.parent;return{name:E,path:w,params:v,matched:O,meta:r2(O)}}return r.forEach(d=>o(d)),{addRoute:o,resolve:f,removeRoute:l,getRoutes:c,getRecordMatcher:i}}function Gg(r,t){const e={};for(const n of t)n in r&&(e[n]=r[n]);return e}function e2(r){return{path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:void 0,beforeEnter:r.beforeEnter,props:n2(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||null:r.component&&{default:r.component}}}function n2(r){const t={},e=r.props||!1;if("component"in r)t.default=e;else for(const n in r.components)t[n]=typeof e=="object"?e[n]:e;return t}function $g(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function r2(r){return r.reduce((t,e)=>$t(t,e.meta),{})}function Kg(r,t){const e={};for(const n in r)e[n]=n in t?t[n]:r[n];return e}function Bm(r,t){return t.children.some(e=>e===r||Bm(r,e))}const jm=/#/g,i2=/&/g,s2=/\//g,o2=/=/g,a2=/\?/g,Wm=/\+/g,l2=/%5B/g,c2=/%5D/g,Xm=/%5E/g,h2=/%60/g,Hm=/%7B/g,u2=/%7C/g,Ym=/%7D/g,f2=/%20/g;function Hh(r){return encodeURI(""+r).replace(u2,"|").replace(l2,"[").replace(c2,"]")}function d2(r){return Hh(r).replace(Hm,"{").replace(Ym,"}").replace(Xm,"^")}function ih(r){return Hh(r).replace(Wm,"%2B").replace(f2,"+").replace(jm,"%23").replace(i2,"%26").replace(h2,"`").replace(Hm,"{").replace(Ym,"}").replace(Xm,"^")}function g2(r){return ih(r).replace(o2,"%3D")}function p2(r){return Hh(r).replace(jm,"%23").replace(a2,"%3F")}function m2(r){return r==null?"":p2(r).replace(s2,"%2F")}function Ea(r){try{return decodeURIComponent(""+r)}catch{}return""+r}function _2(r){const t={};if(r===""||r==="?")return t;const n=(r[0]==="?"?r.slice(1):r).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(Wm," "),l=o.indexOf("="),c=Ea(l<0?o:o.slice(0,l)),h=l<0?null:Ea(o.slice(l+1));if(c in t){let f=t[c];Xn(f)||(f=t[c]=[f]),f.push(h)}else t[c]=h}return t}function qg(r){let t="";for(let e in r){const n=r[e];if(e=g2(e),n==null){n!==void 0&&(t+=(t.length?"&":"")+e);continue}(Xn(n)?n.map(o=>o&&ih(o)):[n&&ih(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+e,o!=null&&(t+="="+o))})}return t}function v2(r){const t={};for(const e in r){const n=r[e];n!==void 0&&(t[e]=Xn(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const y2=Symbol(""),Jg=Symbol(""),Yh=Symbol(""),Um=Symbol(""),sh=Symbol("");function ks(){let r=[];function t(n){return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}function e(){r=[]}return{add:t,list:()=>r.slice(),reset:e}}function jr(r,t,e,n,i){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((l,c)=>{const h=p=>{p===!1?c(is(4,{from:e,to:t})):p instanceof Error?c(p):NO(p)?c(is(2,{from:t,to:p})):(o&&n.enterCallbacks[i]===o&&typeof p=="function"&&o.push(p),l())},f=r.call(n&&n.instances[i],t,e,h);let d=Promise.resolve(f);r.length<3&&(d=d.then(h)),d.catch(p=>c(p))})}function kc(r,t,e,n){const i=[];for(const o of r)for(const l in o.components){let c=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(x2(c)){const f=(c.__vccOpts||c)[t];f&&i.push(jr(f,e,n,o,l))}else{let h=c();i.push(()=>h.then(f=>{if(!f)return Promise.reject(new Error(`Couldn't resolve component "${l}" at "${o.path}"`));const d=OO(f)?f.default:f;o.components[l]=d;const _=(d.__vccOpts||d)[t];return _&&jr(_,e,n,o,l)()}))}}return i}function x2(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function Qg(r){const t=fr(Yh),e=fr(Um),n=Ue(()=>t.resolve(Hr(r.to))),i=Ue(()=>{const{matched:h}=n.value,{length:f}=h,d=h[f-1],p=e.matched;if(!d||!p.length)return-1;const _=p.findIndex(rs.bind(null,d));if(_>-1)return _;const v=Zg(h[f-2]);return f>1&&Zg(d)===v&&p[p.length-1].path!==v?p.findIndex(rs.bind(null,h[f-2])):_}),o=Ue(()=>i.value>-1&&b2(e.params,n.value.params)),l=Ue(()=>i.value>-1&&i.value===e.matched.length-1&&Lm(e.params,n.value.params));function c(h={}){return S2(h)?t[Hr(r.replace)?"replace":"push"](Hr(r.to)).catch(Us):Promise.resolve()}return{route:n,href:Ue(()=>n.value.href),isActive:o,isExactActive:l,navigate:c}}const w2=xi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Qg,setup(r,{slots:t}){const e=za(Qg(r)),{options:n}=fr(Yh),i=Ue(()=>({[tp(r.activeClass,n.linkActiveClass,"router-link-active")]:e.isActive,[tp(r.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const o=t.default&&t.default(e);return r.custom?o:km("a",{"aria-current":e.isExactActive?r.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:i.value},o)}}}),C2=w2;function S2(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const t=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return r.preventDefault&&r.preventDefault(),!0}}function b2(r,t){for(const e in t){const n=t[e],i=r[e];if(typeof n=="string"){if(n!==i)return!1}else if(!Xn(i)||i.length!==n.length||n.some((o,l)=>o!==i[l]))return!1}return!0}function Zg(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const tp=(r,t,e)=>r??t??e,T2=xi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(r,{attrs:t,slots:e}){const n=fr(sh),i=Ue(()=>r.route||n.value),o=fr(Jg,0),l=Ue(()=>{let f=Hr(o);const{matched:d}=i.value;let p;for(;(p=d[f])&&!p.components;)f++;return f}),c=Ue(()=>i.value.matched[l.value]);va(Jg,Ue(()=>l.value+1)),va(y2,c),va(sh,i);const h=ai();return _a(()=>[h.value,c.value,r.name],([f,d,p],[_,v,w])=>{d&&(d.instances[p]=f,v&&v!==d&&f&&f===_&&(d.leaveGuards.size||(d.leaveGuards=v.leaveGuards),d.updateGuards.size||(d.updateGuards=v.updateGuards))),f&&d&&(!v||!rs(d,v)||!_)&&(d.enterCallbacks[p]||[]).forEach(E=>E(f))},{flush:"post"}),()=>{const f=i.value,d=r.name,p=c.value,_=p&&p.components[d];if(!_)return ep(e.default,{Component:_,route:f});const v=p.props[d],w=v?v===!0?f.params:typeof v=="function"?v(f):v:null,O=km(_,$t({},w,t,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(p.instances[d]=null)},ref:h}));return ep(e.default,{Component:O,route:f})||O}}});function ep(r,t){if(!r)return null;const e=r(t);return e.length===1?e[0]:e}const Nm=T2;function O2(r){const t=t2(r.routes,r),e=r.parseQuery||_2,n=r.stringifyQuery||qg,i=r.history,o=ks(),l=ks(),c=ks(),h=Yb(Rr);let f=Rr;Ni&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Ac.bind(null,U=>""+U),p=Ac.bind(null,m2),_=Ac.bind(null,Ea);function v(U,et){let J,ht;return Fm(U)?(J=t.getRecordMatcher(U),ht=et):ht=U,t.addRoute(ht,J)}function w(U){const et=t.getRecordMatcher(U);et&&t.removeRoute(et)}function E(){return t.getRoutes().map(U=>U.record)}function O(U){return!!t.getRecordMatcher(U)}function M(U,et){if(et=$t({},et||h.value),typeof U=="string"){const L=Mc(e,U,et.path),j=t.resolve({path:L.path},et),N=i.createHref(L.fullPath);return $t(L,j,{params:_(j.params),hash:Ea(L.hash),redirectedFrom:void 0,href:N})}let J;if("path"in U)J=$t({},U,{path:Mc(e,U.path,et.path).path});else{const L=$t({},U.params);for(const j in L)L[j]==null&&delete L[j];J=$t({},U,{params:p(L)}),et.params=p(et.params)}const ht=t.resolve(J,et),It=U.hash||"";ht.params=d(_(ht.params));const C=DO(n,$t({},U,{hash:d2(It),path:ht.path})),b=i.createHref(C);return $t({fullPath:C,hash:It,query:n===qg?v2(U.query):U.query||{}},ht,{redirectedFrom:void 0,href:b})}function R(U){return typeof U=="string"?Mc(e,U,h.value.path):$t({},U)}function X(U,et){if(f!==U)return is(8,{from:et,to:U})}function B(U){return nt(U)}function $(U){return B($t(R(U),{replace:!0}))}function tt(U){const et=U.matched[U.matched.length-1];if(et&&et.redirect){const{redirect:J}=et;let ht=typeof J=="function"?J(U):J;return typeof ht=="string"&&(ht=ht.includes("?")||ht.includes("#")?ht=R(ht):{path:ht},ht.params={}),$t({query:U.query,hash:U.hash,params:"path"in ht?{}:U.params},ht)}}function nt(U,et){const J=f=M(U),ht=h.value,It=U.state,C=U.force,b=U.replace===!0,L=tt(J);if(L)return nt($t(R(L),{state:typeof L=="object"?$t({},It,L.state):It,force:C,replace:b}),et||J);const j=J;j.redirectedFrom=et;let N;return!C&&AO(n,ht,J)&&(N=is(16,{to:j,from:ht}),he(ht,ht,!0,!1)),(N?Promise.resolve(N):at(j,ht)).catch(z=>lr(z)?lr(z,2)?z:rn(z):vt(z,j,ht)).then(z=>{if(z){if(lr(z,2))return nt($t({replace:b},R(z.to),{state:typeof z.to=="object"?$t({},It,z.to.state):It,force:C}),et||j)}else z=Lt(j,ht,!0,b,It);return dt(j,ht,z),z})}function ot(U,et){const J=X(U,et);return J?Promise.reject(J):Promise.resolve()}function it(U){const et=Sr.values().next().value;return et&&typeof et.runWithContext=="function"?et.runWithContext(U):U()}function at(U,et){let J;const[ht,It,C]=E2(U,et);J=kc(ht.reverse(),"beforeRouteLeave",U,et);for(const L of ht)L.leaveGuards.forEach(j=>{J.push(jr(j,U,et))});const b=ot.bind(null,U,et);return J.push(b),ue(J).then(()=>{J=[];for(const L of o.list())J.push(jr(L,U,et));return J.push(b),ue(J)}).then(()=>{J=kc(It,"beforeRouteUpdate",U,et);for(const L of It)L.updateGuards.forEach(j=>{J.push(jr(j,U,et))});return J.push(b),ue(J)}).then(()=>{J=[];for(const L of C)if(L.beforeEnter)if(Xn(L.beforeEnter))for(const j of L.beforeEnter)J.push(jr(j,U,et));else J.push(jr(L.beforeEnter,U,et));return J.push(b),ue(J)}).then(()=>(U.matched.forEach(L=>L.enterCallbacks={}),J=kc(C,"beforeRouteEnter",U,et),J.push(b),ue(J))).then(()=>{J=[];for(const L of l.list())J.push(jr(L,U,et));return J.push(b),ue(J)}).catch(L=>lr(L,8)?L:Promise.reject(L))}function dt(U,et,J){c.list().forEach(ht=>it(()=>ht(U,et,J)))}function Lt(U,et,J,ht,It){const C=X(U,et);if(C)return C;const b=et===Rr,L=Ni?history.state:{};J&&(ht||b?i.replace(U.fullPath,$t({scroll:b&&L&&L.scroll},It)):i.push(U.fullPath,It)),h.value=U,he(U,et,J,b),rn()}let Tt;function Ft(){Tt||(Tt=i.listen((U,et,J)=>{if(!En.listening)return;const ht=M(U),It=tt(ht);if(It){nt($t(It,{replace:!0}),ht).catch(Us);return}f=ht;const C=h.value;Ni&&jO(Yg(C.fullPath,J.delta),Za()),at(ht,C).catch(b=>lr(b,12)?b:lr(b,2)?(nt(b.to,ht).then(L=>{lr(L,20)&&!J.delta&&J.type===ro.pop&&i.go(-1,!1)}).catch(Us),Promise.reject()):(J.delta&&i.go(-J.delta,!1),vt(b,ht,C))).then(b=>{b=b||Lt(ht,C,!1),b&&(J.delta&&!lr(b,8)?i.go(-J.delta,!1):J.type===ro.pop&&lr(b,20)&&i.go(-1,!1)),dt(ht,C,b)}).catch(Us)}))}let Xt=ks(),Mt=ks(),Ct;function vt(U,et,J){rn(U);const ht=Mt.list();return ht.length?ht.forEach(It=>It(U,et,J)):console.error(U),Promise.reject(U)}function On(){return Ct&&h.value!==Rr?Promise.resolve():new Promise((U,et)=>{Xt.add([U,et])})}function rn(U){return Ct||(Ct=!U,Ft(),Xt.list().forEach(([et,J])=>U?J(U):et()),Xt.reset()),U}function he(U,et,J,ht){const{scrollBehavior:It}=r;if(!Ni||!It)return Promise.resolve();const C=!J&&WO(Yg(U.fullPath,0))||(ht||!J)&&history.state&&history.state.scroll||null;return am().then(()=>It(U,et,C)).then(b=>b&&BO(b)).catch(b=>vt(b,U,et))}const Ae=U=>i.go(U);let Cr;const Sr=new Set,En={currentRoute:h,listening:!0,addRoute:v,removeRoute:w,hasRoute:O,getRoutes:E,resolve:M,options:r,push:B,replace:$,go:Ae,back:()=>Ae(-1),forward:()=>Ae(1),beforeEach:o.add,beforeResolve:l.add,afterEach:c.add,onError:Mt.add,isReady:On,install(U){const et=this;U.component("RouterLink",C2),U.component("RouterView",Nm),U.config.globalProperties.$router=et,Object.defineProperty(U.config.globalProperties,"$route",{enumerable:!0,get:()=>Hr(h)}),Ni&&!Cr&&h.value===Rr&&(Cr=!0,B(i.location).catch(It=>{}));const J={};for(const It in Rr)Object.defineProperty(J,It,{get:()=>h.value[It],enumerable:!0});U.provide(Yh,et),U.provide(Um,Zp(J)),U.provide(sh,h);const ht=U.unmount;Sr.add(U),U.unmount=function(){Sr.delete(U),Sr.size<1&&(f=Rr,Tt&&Tt(),Tt=null,h.value=Rr,Cr=!1,Ct=!1),ht()}}};function ue(U){return U.reduce((et,J)=>et.then(()=>it(J)),Promise.resolve())}return En}function E2(r,t){const e=[],n=[],i=[],o=Math.max(t.matched.length,r.matched.length);for(let l=0;l<o;l++){const c=t.matched[l];c&&(r.matched.find(f=>rs(f,c))?n.push(c):e.push(c));const h=r.matched[l];h&&(t.matched.find(f=>rs(f,h))||i.push(h))}return[e,n,i]}const P2=xi({__name:"App",setup(r){return(t,e)=>(dn(),qa(Hr(Nm)))}});const D2=(r,t)=>{const e=r.__vccOpts||r;for(const[n,i]of t)e[n]=i;return e},A2=D2(P2,[["__scopeId","data-v-651df105"]]),M2="modulepreload",k2=function(r){return"/tattoo-builder/"+r},np={},L2=function(t,e,n){if(!e||e.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(e.map(o=>{if(o=k2(o),o in np)return;np[o]=!0;const l=o.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(!!n)for(let d=i.length-1;d>=0;d--){const p=i[d];if(p.href===o&&(!l||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":M2,l||(f.as="script",f.crossOrigin=""),f.href=o,document.head.appendChild(f),l)return new Promise((d,p)=>{f.addEventListener("load",d),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})},R2="/tattoo-builder/assets/ig-logo-96f41ae6.png";function rp(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function D(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?rp(Object(e),!0).forEach(function(n){A(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):rp(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function A(r,t,e){return t=zm(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function F2(r,t){if(r==null)return{};var e={},n=Object.keys(r),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(e[i]=r[i]);return e}function Zt(r,t){if(r==null)return{};var e=F2(r,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function Jn(r,t){return t||(t=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(t)}}))}function I2(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function zm(r){var t=I2(r,"string");return typeof t=="symbol"?t:String(t)}class ip{constructor(){A(this,"browserShadowBlurConstant",1),A(this,"DPI",96),A(this,"devicePixelRatio",1),A(this,"perfLimitSizeTotal",2097152),A(this,"maxCacheSideLimit",4096),A(this,"minCacheSideLimit",256),A(this,"disableStyleCopyPaste",!1),A(this,"enableGLFiltering",!0),A(this,"textureSize",4096),A(this,"forceGLPutImageData",!1),A(this,"cachesBoundsOfCurve",!0),A(this,"fontPaths",{}),A(this,"NUM_FRACTION_DIGITS",4)}}class B2 extends ip{constructor(t){super(),this.configure(t)}configure(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,t)}addFonts(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=D(D({},this.fontPaths),t)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(e=>{delete this.fontPaths[e]})}clearFonts(){this.fontPaths={}}restoreDefaults(t){const e=new ip,n=(t==null?void 0:t.reduce((i,o)=>(i[o]=e[o],i),{}))||e;this.configure(n)}}const At=new B2;class j2{}class W2 extends j2{testPrecision(t,e){const n="precision ".concat(e,` float;
void main(){}`),i=t.createShader(t.FRAGMENT_SHADER);return i?(t.shaderSource(i,n),t.compileShader(i),!!t.getShaderParameter(i,t.COMPILE_STATUS)):!1}queryWebGL(t){const e=t.getContext("webgl");e&&(this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(n=>this.testPrecision(e,n)),console.log("fabric: max texture size ".concat(this.maxTextureSize)))}isSupported(t){return!!this.maxTextureSize&&this.maxTextureSize>=t}}const X2={};let sp=!1,op;const H2=()=>(sp||(At.configure({devicePixelRatio:window.devicePixelRatio||1}),op="ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,sp=!0),{document,window,isTouchSupported:op,WebGLProbe:new W2,dispose(){},copyPasteData:X2}),qn=()=>H2(),us=()=>qn().document,fi=()=>qn().window;class Y2{constructor(){A(this,"charWidthsCache",{}),A(this,"boundsOfCurveCache",{})}getFontCache(t){let{fontFamily:e,fontStyle:n,fontWeight:i}=t;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const o=this.charWidthsCache[e],l="".concat(n.toLowerCase(),"_").concat((i+"").toLowerCase());return o[l]||(o[l]={}),o[l]}clearFontCache(t){t=(t||"").toLowerCase(),t?this.charWidthsCache[t]&&delete this.charWidthsCache[t]:this.charWidthsCache={}}limitDimsByArea(t){const{perfLimitSizeTotal:e}=At,n=Math.sqrt(e*t);return[Math.floor(n),Math.floor(e/n)]}}const zs=new Y2;var U2="6.0.0-beta13";const oh=U2;function mi(){}const _r=Math.PI/2,pr=Math.PI*2,Uh=Math.PI/180,gn=Object.freeze([1,0,0,1,0,0]),Nh=16,ap=2,Fr=1-.5522847498,lp=1,ua=2,fa=3,bt="center",Ut="left",Ie="top",ah="bottom",pe="right",tn="none",zh=/\r?\n/,Ls="json",Lc="svg";class N2{constructor(){this[Ls]=new Map,this[Lc]=new Map}getClass(t){const e=this[Ls].get(t);if(!e)throw new Error("No class registered for ".concat(t));return e}setClass(t,e){e?this[Ls].set(e,t):(this[Ls].set(t.type,t),this[Ls].set(t.type.toLowerCase(),t))}getSVGClass(t){return this[Lc].get(t)}setSVGClass(t,e){this[Lc].set(e??t.type.toLowerCase(),t)}}const ut=new N2;class z2 extends Array{remove(t){const e=this.indexOf(t);e>-1&&this.splice(e,1)}cancelAll(){const t=this.splice(0);return t.forEach(e=>e.abort()),t}cancelByCanvas(t){if(!t)return[];const e=this.filter(n=>{var i;return typeof n.target=="object"&&((i=n.target)===null||i===void 0?void 0:i.canvas)===t});return e.forEach(n=>n.abort()),e}cancelByTarget(t){if(!t)return[];const e=this.filter(n=>n.target===t);return e.forEach(n=>n.abort()),e}}const lh=new z2;class V2{constructor(){A(this,"__eventListeners",{})}on(t,e){if(this.__eventListeners||(this.__eventListeners={}),typeof t=="object")return Object.entries(t).forEach(n=>{let[i,o]=n;this.on(i,o)}),()=>this.off(t);if(e){const n=t;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(e),()=>this.off(n,e)}else return()=>!1}once(t,e){if(typeof t=="object"){const n=[];return Object.entries(t).forEach(i=>{let[o,l]=i;n.push(this.once(o,l))}),()=>n.forEach(i=>i())}else if(e){const n=this.on(t,function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];e.call(this,...l),n()});return n}else return()=>!1}_removeEventListener(t,e){if(this.__eventListeners[t])if(e){const n=this.__eventListeners[t],i=n.indexOf(e);i>-1&&n.splice(i,1)}else this.__eventListeners[t]=[]}off(t,e){if(this.__eventListeners)if(typeof t>"u")for(const n in this.__eventListeners)this._removeEventListener(n);else typeof t=="object"?Object.entries(t).forEach(n=>{let[i,o]=n;this._removeEventListener(i,o)}):this._removeEventListener(t,e)}fire(t,e){var n;if(!this.__eventListeners)return;const i=(n=this.__eventListeners[t])===null||n===void 0?void 0:n.concat();if(i)for(let o=0;o<i.length;o++)i[o].call(this,e||{})}}const G2=(r,t)=>{for(let e=r.length-1;e>=0;e--)if(t(r[e],e,r))return e;return-1},$2=(r,t)=>Math.floor(Math.random()*(t-r+1))+r,zi=(r,t)=>isNaN(r)&&typeof t=="number"?t:r,hi=(r,t)=>{const e=r.indexOf(t);return e!==-1&&r.splice(e,1),r},ze=r=>{if(r===0)return 1;switch(Math.abs(r)/_r){case 1:case 3:return 0;case 2:return-1}return Math.cos(r)},Ve=r=>{if(r===0)return 0;const t=r/_r,e=Math.sign(r);switch(t){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(r)};class F{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof t=="object"?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}add(t){return new F(this.x+t.x,this.y+t.y)}addEquals(t){return this.x+=t.x,this.y+=t.y,this}scalarAdd(t){return new F(this.x+t,this.y+t)}scalarAddEquals(t){return this.x+=t,this.y+=t,this}subtract(t){return new F(this.x-t.x,this.y-t.y)}subtractEquals(t){return this.x-=t.x,this.y-=t.y,this}scalarSubtract(t){return new F(this.x-t,this.y-t)}scalarSubtractEquals(t){return this.x-=t,this.y-=t,this}multiply(t){return new F(this.x*t.x,this.y*t.y)}scalarMultiply(t){return new F(this.x*t,this.y*t)}scalarMultiplyEquals(t){return this.x*=t,this.y*=t,this}divide(t){return new F(this.x/t.x,this.y/t.y)}scalarDivide(t){return new F(this.x/t,this.y/t)}scalarDivideEquals(t){return this.x/=t,this.y/=t,this}eq(t){return this.x===t.x&&this.y===t.y}lt(t){return this.x<t.x&&this.y<t.y}lte(t){return this.x<=t.x&&this.y<=t.y}gt(t){return this.x>t.x&&this.y>t.y}gte(t){return this.x>=t.x&&this.y>=t.y}lerp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return e=Math.max(Math.min(1,e),0),new F(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)}distanceFrom(t){const e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}midPointFrom(t){return this.lerp(t)}min(t){return new F(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new F(Math.max(this.x,t.x),Math.max(this.y,t.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPoint(t){return this.x=t.x,this.y=t.y,this}swap(t){const e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n}clone(){return new F(this.x,this.y)}rotate(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:K2;const n=Ve(t),i=ze(t),o=this.subtract(e);return new F(o.x*i-o.y*n,o.x*n+o.y*i).add(e)}transform(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new F(t[0]*this.x+t[2]*this.y+(e?0:t[4]),t[1]*this.x+t[3]*this.y+(e?0:t[5]))}}const K2=new F(0,0);function Vm(r){class t extends r{constructor(){super(...arguments),A(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];const l=this._objects.push(...i);return i.forEach(c=>this._onObjectAdded(c)),l}insertAt(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return this._objects.splice(n,0,...o),o.forEach(c=>this._onObjectAdded(c)),this._objects.length}remove(){const n=this._objects,i=[];for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return l.forEach(h=>{const f=n.indexOf(h);f!==-1&&(n.splice(f,1),i.push(h),this._onObjectRemoved(h))}),i}forEachObject(n){this.getObjects().forEach((i,o,l)=>n(i,o,l))}getObjects(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return i.length===0?[...this._objects]:this._objects.filter(l=>l.isType(...i))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,i){return this._objects.includes(n)?!0:i?this._objects.some(o=>o instanceof t&&o.contains(n,!0)):!1}complexity(){return this._objects.reduce((n,i)=>(n+=i.complexity?i.complexity():0,n),0)}sendObjectToBack(n){return!n||n===this._objects[0]?!1:(hi(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!n||n===this._objects[this._objects.length-1]?!1:(hi(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,i){if(!n)return!1;const o=this._objects.indexOf(n);if(o!==0){const l=this.findNewLowerIndex(n,o,i);return hi(this._objects,n),this._objects.splice(l,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,i){if(!n)return!1;const o=this._objects.indexOf(n);if(o!==this._objects.length-1){const l=this.findNewUpperIndex(n,o,i);return hi(this._objects,n),this._objects.splice(l,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,i){return n===this._objects[i]?!1:(hi(this._objects,n),this._objects.splice(i,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,i,o){let l;if(o){l=i;for(let c=i-1;c>=0;--c)if(n.isOverlapping(this._objects[c])){l=c;break}}else l=i-1;return l}findNewUpperIndex(n,i,o){let l;if(o){l=i;for(let c=i+1;c<this._objects.length;++c)if(n.isOverlapping(this._objects[c])){l=c;break}}else l=i+1;return l}collectObjects(n){let{left:i,top:o,width:l,height:c}=n,{includeIntersecting:h=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const f=[],d=new F(i,o),p=d.add(new F(l,c));for(let _=this._objects.length-1;_>=0;_--){const v=this._objects[_];v.selectable&&v.visible&&(h&&v.intersectsWithRect(d,p,!0)||v.isContainedWithinRect(d,p,!0)||h&&v.containsPoint(d,void 0,!0)||h&&v.containsPoint(p,void 0,!0))&&f.push(v)}return f}}return t}class Gm extends V2{_setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const e in t)this.set(e,t[e])}_setObject(t){for(const e in t)this._set(e,t[e])}set(t,e){return typeof t=="object"?this._setObject(t):this._set(t,e),this}_set(t,e){this[t]=e}toggle(t){const e=this.get(t);return typeof e=="boolean"&&this.set(t,!e),this}get(t){return this[t]}}function Vs(r){return fi().requestAnimationFrame(r)}function $m(r){return fi().cancelAnimationFrame(r)}let q2=0;const zr=()=>q2++,ce=()=>{const r=us().createElement("canvas");if(!r||typeof r.getContext>"u")throw new Error("Failed to create `canvas` element");return r},Km=()=>us().createElement("img"),J2=r=>{var t;const e=ce();return e.width=r.width,e.height=r.height,(t=e.getContext("2d"))===null||t===void 0||t.drawImage(r,0,0),e},Vh=(r,t,e)=>r.toDataURL("image/".concat(t),e),Q2=r=>!!r&&r.getContext!==void 0,Qt=r=>r*Uh,ss=r=>r/Uh,Z2=["translateX","translateY","angle"],tE=r=>r.every((t,e)=>t===gn[e]),ae=(r,t,e)=>new F(r).transform(t,e),Pe=r=>{const t=1/(r[0]*r[3]-r[1]*r[2]),e=[t*r[3],-t*r[1],-t*r[2],t*r[0],0,0],{x:n,y:i}=new F(r[4],r[5]).transform(e,!0);return e[4]=-n,e[5]=-i,e},De=(r,t,e)=>[r[0]*t[0]+r[2]*t[1],r[1]*t[0]+r[3]*t[1],r[0]*t[2]+r[2]*t[3],r[1]*t[2]+r[3]*t[3],e?0:r[0]*t[4]+r[2]*t[5]+r[4],e?0:r[1]*t[4]+r[3]*t[5]+r[5]],tl=(r,t)=>r.reduceRight((e,n)=>n?De(n,e,t):e,gn),vi=r=>{const t=Math.atan2(r[1],r[0]),e=Math.pow(r[0],2)+Math.pow(r[1],2),n=Math.sqrt(e),i=(r[0]*r[3]-r[2]*r[1])/n,o=Math.atan2(r[0]*r[2]+r[1]*r[3],e);return{angle:ss(t),scaleX:n,scaleY:i,skewX:ss(o),skewY:0,translateX:r[4]||0,translateY:r[5]||0}},lo=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return[1,0,0,1,r,t]};function co(){let{angle:r=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:t=0,y:e=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=Qt(r),i=ze(n),o=Ve(n);return[i,o,-o,i,t?t-(i*t-o*e):0,e?e-(o*t+i*e):0]}const Gh=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r;return[r,0,0,t,0,0]},qm=r=>Math.tan(Qt(r)),$h=r=>[1,0,qm(r),1,0,0],Kh=r=>[1,qm(r),0,1,0,0],el=r=>{let{scaleX:t=1,scaleY:e=1,flipX:n=!1,flipY:i=!1,skewX:o=0,skewY:l=0}=r;return tl([Gh(n?-t:t,i?-e:e),o&&$h(o),l&&Kh(l)],!0)},Jm=r=>{let{translateX:t=0,translateY:e=0,angle:n=0}=r,i=Zt(r,Z2);return tl([lo(t,e),n&&co({angle:n}),el(i)])},Gs=function(r){let{signal:t,crossOrigin:e=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,i){if(t&&t.aborted)return i(new Error("`options.signal` is in `aborted` state"));const o=Km();let l;t&&(l=function(h){o.src="",i(h)},t.addEventListener("abort",l,{once:!0}));const c=function(){o.onload=o.onerror=null,l&&(t==null||t.removeEventListener("abort",l)),n(o)};if(!r){c();return}o.onload=c,o.onerror=function(){l&&(t==null||t.removeEventListener("abort",l)),i(new Error("Error loading "+o.src))},e&&(o.crossOrigin=e),o.src=r})},os=function(r){let{signal:t,reviver:e=mi}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,i)=>{const o=[];t&&t.addEventListener("abort",i,{once:!0}),Promise.all(r.map(l=>ut.getClass(l.type).fromObject(l,{signal:t,reviver:e}).then(c=>(e(l,c),o.push(c),c)))).then(n).catch(l=>{o.forEach(c=>{c.dispose&&c.dispose()}),i(l)}).finally(()=>{t&&t.removeEventListener("abort",i)})})},ho=function(r){let{signal:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((e,n)=>{const i=[];t&&t.addEventListener("abort",n,{once:!0});const o=Object.values(r).map(c=>c&&(c.colorStops?new(ut.getClass("gradient"))(c):c.type?os([c],{signal:t}).then(h=>{let[f]=h;return i.push(f),f}):c.source?ut.getClass("pattern").fromObject(c,{signal:t}).then(h=>(i.push(h),h)):c)),l=Object.keys(r);Promise.all(o).then(c=>c.reduce((h,f,d)=>(h[l[d]]=f,h),{})).then(e).catch(c=>{i.forEach(h=>{h.dispose&&h.dispose()}),n(c)}).finally(()=>{t&&t.removeEventListener("abort",n)})})},wi=function(r){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,n)=>(n in r&&(e[n]=r[n]),e),{})},Qm=(r,t)=>Object.keys(r).reduce((e,n)=>(t(r[n],n,r)&&(e[n]=r[n]),e),{}),cp={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},eE=()=>/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i,nE=()=>/^hsla?\(\s*([+-]?\d{1,3})\s*[\s|,]\s*(\d{1,3}%)\s*[\s|,]\s*(\d{1,3}%)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i,rE=()=>/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i,Rc=(r,t,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+(t-r)*6*e:e<1/2?t:e<2/3?r+(t-r)*(2/3-e)*6:r),hp=(r,t,e,n)=>{r/=255,t/=255,e/=255;const i=Math.max(r,t,e),o=Math.min(r,t,e);let l,c;const h=(i+o)/2;if(i===o)l=c=0;else{const f=i-o;switch(c=h>.5?f/(2-i-o):f/(i+o),i){case r:l=(t-e)/f+(t<e?6:0);break;case t:l=(e-r)/f+2;break;case e:l=(r-t)/f+4;break}l/=6}return[Math.round(l*360),Math.round(c*100),Math.round(h*100),n]},up=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(r)/(r.endsWith("%")?100:1)},da=r=>Math.min(Math.round(r),255).toString(16).toUpperCase().padStart(2,"0"),fp=r=>{let[t,e,n,i=1]=r;const o=Math.round(t*.3+e*.59+n*.11);return[o,o,o,i]};class Kt{constructor(t){if(!t)this.setSource([0,0,0,1]);else if(t instanceof Kt)this.setSource([...t._source]);else if(Array.isArray(t)){const[e,n,i,o=1]=t;this.setSource([e,n,i,o])}else this.setSource(this._tryParsingColor(t))}_tryParsingColor(t){return t in cp&&(t=cp[t]),t==="transparent"?[255,255,255,0]:Kt.sourceFromHex(t)||Kt.sourceFromRgb(t)||Kt.sourceFromHsl(t)||[0,0,0,1]}getSource(){return this._source}setSource(t){this._source=t}toRgb(){const[t,e,n]=this.getSource();return"rgb(".concat(t,",").concat(e,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[t,e,n]=hp(...this.getSource());return"hsl(".concat(t,",").concat(e,"%,").concat(n,"%)")}toHsla(){const[t,e,n,i]=hp(...this.getSource());return"hsla(".concat(t,",").concat(e,"%,").concat(n,"%,").concat(i,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[t,e,n,i]=this.getSource();return"".concat(da(t)).concat(da(e)).concat(da(n)).concat(da(Math.round(i*255)))}getAlpha(){return this.getSource()[3]}setAlpha(t){return this._source[3]=t,this}toGrayscale(){return this.setSource(fp(this.getSource())),this}toBlackWhite(t){const[e,,,n]=fp(this.getSource()),i=e<(t||127)?0:255;return this.setSource([i,i,i,n]),this}overlayWith(t){t instanceof Kt||(t=new Kt(t));const e=this.getSource(),n=.5,i=t.getSource(),[o,l,c]=e.map((h,f)=>Math.round(h*(1-n)+i[f]*n));return this.setSource([o,l,c,e[3]]),this}static fromRgb(t){return Kt.fromRgba(t)}static fromRgba(t){return new Kt(Kt.sourceFromRgb(t))}static sourceFromRgb(t){const e=t.match(eE());if(e){const[n,i,o]=e.slice(1,4).map(l=>{const c=parseFloat(l);return l.endsWith("%")?Math.round(c*2.55):c});return[n,i,o,up(e[4])]}}static fromHsl(t){return Kt.fromHsla(t)}static fromHsla(t){return new Kt(Kt.sourceFromHsl(t))}static sourceFromHsl(t){const e=t.match(nE());if(!e)return;const n=(parseFloat(e[1])%360+360)%360/360,i=parseFloat(e[2])/100,o=parseFloat(e[3])/100;let l,c,h;if(i===0)l=c=h=o;else{const f=o<=.5?o*(i+1):o+i-o*i,d=o*2-f;l=Rc(d,f,n+1/3),c=Rc(d,f,n),h=Rc(d,f,n-1/3)}return[Math.round(l*255),Math.round(c*255),Math.round(h*255),up(e[4])]}static fromHex(t){return new Kt(Kt.sourceFromHex(t))}static sourceFromHex(t){if(t.match(rE())){const e=t.slice(t.indexOf("#")+1),n=e.length<=4;let i;n?i=e.split("").map(f=>f+f):i=e.match(/.{2}/g);const[o,l,c,h=255]=i.map(f=>parseInt(f,16));return[o,l,c,h/255]}}}const Wt=(r,t)=>parseFloat(Number(r).toFixed(t)),iE=r=>{const t=["instantiated_by_use","style","id","class"];switch(r){case"linearGradient":return t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return t.concat(["offset","stop-color","stop-opacity"])}return t},_i=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nh;const e=/\D{0,2}$/.exec(r),n=parseFloat(r),i=At.DPI;switch(e==null?void 0:e[0]){case"mm":return n*i/25.4;case"cm":return n*i/2.54;case"in":return n*i;case"pt":return n*i/72;case"pc":return n*i/72*12;case"em":return n*t;default:return n}},sE=r=>r&&r!==tn?[r.slice(1,4),r.slice(5,8)]:r===tn?[r,r]:["Mid","Mid"],Zm=r=>{const[t,e]=r.trim().split(" "),[n,i]=sE(t);return{meetOrSlice:e||"meet",alignX:n,alignY:i}},io=r=>"matrix("+r.map(t=>Wt(t,At.NUM_FRACTION_DIGITS)).join(" ")+")",so=(r,t)=>{if(t){if(t.toLive)return"".concat(r,": url(#SVGID_").concat(t.id,"); ");{const e=new Kt(t),n=e.getAlpha();let i="".concat(r,": ").concat(e.toRgb(),"; ");return n!==1&&(i+="".concat(r,"-opacity: ").concat(n.toString(),"; ")),i}}else return"".concat(r,": none; ")},oE=function(r,t){let{left:e,top:n,width:i,height:o}=t,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:At.NUM_FRACTION_DIGITS;const c=so("fill",r),[h,f,d,p]=[e,n,i,o].map(_=>Wt(_,l));return"<rect ".concat(c,' x="').concat(h,'" y="').concat(f,'" width="').concat(d,'" height="').concat(p,'"></rect>')},Tn=r=>!!r&&r.toLive!==void 0,dp=r=>!!r&&typeof r.toObject=="function",gp=r=>!!r&&r.offsetX!==void 0&&r.source!==void 0,ch=r=>!!r&&Array.isArray(r._objects),aE=r=>!!r&&r.isType("ActiveSelection"),t0=r=>!!r&&r.isType("Text","IText","Textbox"),lE=r=>!!r&&r.isType("Path"),xa=r=>!!r&&r.isType("IText","Textbox"),pp=r=>!!r&&typeof r.onDragStart=="function"&&typeof r.shouldStartDragging=="function";function e0(r){const t=r&&Fn(r);let e=0,n=0;if(!r||!t)return{left:e,top:n};const i=t.documentElement,o=t.body||{scrollLeft:0,scrollTop:0};for(;r&&(r.parentNode||r.host)&&(r=r.parentNode||r.host,r===t?(e=o.scrollLeft||i.scrollLeft||0,n=o.scrollTop||i.scrollTop||0):(e+=r.scrollLeft||0,n+=r.scrollTop||0),!(r.nodeType===1&&r.style.position==="fixed")););return{left:e,top:n}}const Fn=r=>r.ownerDocument||null,n0=r=>{var t;return((t=r.ownerDocument)===null||t===void 0?void 0:t.defaultView)||null};function oo(r,t){const e=r.style;if(e)typeof t=="string"?r.style.cssText+=";"+t:Object.entries(t).forEach(n=>{let[i,o]=n;return e.setProperty(i,o)});else return}const r0=function(r,t,e){let{width:n,height:i}=e,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;r.width=n,r.height=i,o>1&&(r.setAttribute("width",(n*o).toString()),r.setAttribute("height",(i*o).toString()),t.scale(o,o))};function cE(r,t){const e=t?"manipulation":tn;oo(r,{"touch-action":e,"-ms-touch-action":e})}const hh=(r,t)=>{let{width:e,height:n}=t;e&&(r.style.width=typeof e=="number"?"".concat(e,"px"):e),n&&(r.style.height=typeof n=="number"?"".concat(n,"px"):n)};function hE(r){var t;let e={left:0,top:0};const n=r&&Fn(r),i={left:0,top:0},o={borderLeftWidth:Ut,borderTopWidth:Ie,paddingLeft:Ut,paddingTop:Ie};if(!n)return i;const l=((t=n0(r))===null||t===void 0?void 0:t.getComputedStyle(r,null))||{};for(const f in o)i[o[f]]+=parseInt(l[f],10)||0;const c=n.documentElement;typeof r.getBoundingClientRect<"u"&&(e=r.getBoundingClientRect());const h=e0(r);return{left:e.left+h.left-(c.clientLeft||0)+i.left,top:e.top+h.top-(c.clientTop||0)+i.top}}function mp(r){return typeof r.onselectstart<"u"&&(r.onselectstart=()=>!1),r.style.userSelect=tn,r}class i0{constructor(t){A(this,"_originalCanvasStyle",void 0),A(this,"lower",void 0);const e=this.createLowerCanvas(t);this.lower={el:e,ctx:e.getContext("2d")}}createLowerCanvas(t){const e=Q2(t)?t:us().getElementById(t)||ce();if(e.hasAttribute("data-fabric"))throw new Error("fabric.js: trying to initialize a canvas that has already been initialized");return this._originalCanvasStyle=e.style.cssText,e.setAttribute("data-fabric","main"),e.classList.add("lower-canvas"),e}cleanupDOM(t){let{width:e,height:n}=t;const{el:i}=this.lower;i.classList.remove("lower-canvas"),i.removeAttribute("data-fabric"),i.setAttribute("width","".concat(e)),i.setAttribute("height","".concat(n)),i.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(t,e){const{el:n,ctx:i}=this.lower;r0(n,i,t,e)}setCSSDimensions(t){hh(this.lower.el,t)}calcOffset(){return hE(this.lower.el)}dispose(){qn().dispose(this.lower.el),delete this.lower}}const uE={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...gn]};class uo extends Vm(Gm){get lowerCanvasEl(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.el}get contextContainer(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.ctx}static getDefaults(){return uo.ownDefaults}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(e),this.initElements(t),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(t){this.elements=new i0(t)}add(){const t=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}insertAt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const o=super.insertAt(t,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),o}remove(){const t=super.remove(...arguments);return t.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}_onObjectAdded(t){t.canvas&&t.canvas!==this&&(console.warn(`fabric.Canvas: trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t){t._set("canvas",void 0),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}_isRetinaScaling(){return At.devicePixelRatio>1&&this.enableRetinaScaling}getRetinaScaling(){return this._isRetinaScaling()?Math.max(1,At.devicePixelRatio):1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setDimensions({width:t},e)}setHeight(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setDimensions({height:t},e)}_setDimensionsImpl(t){let{cssOnly:e=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e){const i=D({width:this.width,height:this.height},t);this.elements.setDimensions(i,this.getRetinaScaling()),this.hasLostContext=!0,this.width=i.width,this.height=i.height}n||this.elements.setCSSDimensions(t),this.calcOffset()}setDimensions(t){let{cssOnly:e=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._setDimensionsImpl(t,{cssOnly:e,backstoreOnly:n}),e||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(t){const e=this.backgroundImage,n=this.overlayImage,i=this._objects.length;this.viewportTransform=t;for(let o=0;o<i;o++){const l=this._objects[o];l.group||l.setCoords()}e&&e.setCoords(),n&&n.setCoords(),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(t,e){const n=t,i=[...this.viewportTransform],o=ae(t,Pe(i));i[0]=e,i[3]=e;const l=ae(o,i);i[4]+=n.x-l.x,i[5]+=n.y-l.y,this.setViewportTransform(i)}setZoom(t){this.zoomToPoint(new F(0,0),t)}absolutePan(t){const e=[...this.viewportTransform];return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)}relativePan(t){return this.absolutePan(new F(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(t){t.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),!this.destroyed&&this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){!this.nextRenderHandle&&!this.disposed&&!this.destroyed&&(this.nextRenderHandle=Vs(()=>this.renderAndReset()))}calcViewportBoundaries(){const t=this.width,e=this.height,n=Pe(this.viewportTransform),i=ae({x:0,y:0},n),o=ae({x:t,y:e},n),l=i.min(o),c=i.max(o);return this.vptCoords={tl:l,tr:new F(c.x,l.y),bl:new F(l.x,c.y),br:c}}cancelRequestedRender(){this.nextRenderHandle&&($m(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(t){}renderCanvas(t,e){if(this.destroyed)return;const n=this.viewportTransform,i=this.clipPath;this.calcViewportBoundaries(),this.clearContext(t),t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.patternQuality="best",this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(t,e),t.restore(),this.controlsAboveOverlay||this.drawControls(t),i&&(i._set("canvas",this),i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t,i)),this._renderOverlay(t),this.controlsAboveOverlay&&this.drawControls(t),this.fire("after:render",{ctx:t}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(t,e){const n=this.viewportTransform;t.save(),t.transform(...n),t.globalCompositeOperation="destination-in",e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}_renderObjects(t,e){for(let n=0,i=e.length;n<i;++n)e[n]&&e[n].render(t)}_renderBackgroundOrOverlay(t,e){const n=this["".concat(e,"Color")],i=this["".concat(e,"Image")],o=this.viewportTransform,l=this["".concat(e,"Vpt")];if(!n&&!i)return;const c=Tn(n);if(n){if(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=c?n.toLive(t):n,l&&t.transform(...o),c){t.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const h=n.gradientTransform||n.patternTransform;h&&t.transform(...h)}t.fill(),t.restore()}if(i){t.save();const{skipOffscreen:h}=this;this.skipOffscreen=l,l&&t.transform(...o),i.render(t),this.skipOffscreen=h,t.restore()}}_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")}_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new F(this.width/2,this.height/2)}centerObjectH(t){return this._centerObject(t,new F(this.getCenterPoint().x,t.getCenterPoint().y))}centerObjectV(t){return this._centerObject(t,new F(t.getCenterPoint().x,this.getCenterPoint().y))}centerObject(t){return this._centerObject(t,this.getCenterPoint())}viewportCenterObject(t){return this._centerObject(t,this.getVpCenter())}viewportCenterObjectH(t){return this._centerObject(t,new F(this.getVpCenter().x,t.getCenterPoint().y))}viewportCenterObjectV(t){return this._centerObject(t,new F(t.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return ae(this.getCenterPoint(),Pe(this.viewportTransform))}_centerObject(t,e){t.setXY(e,bt,bt),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(t){return this.toDatalessObject(t)}toObject(t){return this._toObjectMethod("toObject",t)}toJSON(){return this.toObject()}toDatalessObject(t){return this._toObjectMethod("toDatalessObject",t)}_toObjectMethod(t,e){const n=this.clipPath,i=n&&!n.excludeFromExport?this._toObject(n,t,e):null;return D(D(D({version:oh},wi(this,e)),{},{objects:this._objects.filter(o=>!o.excludeFromExport).map(o=>this._toObject(o,t,e))},this.__serializeBgOverlay(t,e)),i?{clipPath:i}:null)}_toObject(t,e,n){let i;this.includeDefaultValues||(i=t.includeDefaultValues,t.includeDefaultValues=!1);const o=t[e](n);return this.includeDefaultValues||(t.includeDefaultValues=!!i),o}__serializeBgOverlay(t,e){const n={},i=this.backgroundImage,o=this.overlayImage,l=this.backgroundColor,c=this.overlayColor;return Tn(l)?l.excludeFromExport||(n.background=l.toObject(e)):l&&(n.background=l),Tn(c)?c.excludeFromExport||(n.overlay=c.toObject(e)):c&&(n.overlay=c),i&&!i.excludeFromExport&&(n.backgroundImage=this._toObject(i,t,e)),o&&!o.excludeFromExport&&(n.overlayImage=this._toObject(o,t,e)),n}toSVG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;t.reviver=e;const n=[];return this._setSVGPreamble(n,t),this._setSVGHeader(n,t),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",e),this._setSVGObjects(n,e),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",e),n.push("</svg>"),n.join("")}_setSVGPreamble(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(t,e){const n=e.width||"".concat(this.width),i=e.height||"".concat(this.height),o=At.NUM_FRACTION_DIGITS,l=e.viewBox;let c;if(l)c='viewBox="'.concat(l.x," ").concat(l.y," ").concat(l.width," ").concat(l.height,'" ');else if(this.svgViewportTransformation){const h=this.viewportTransform;c='viewBox="'.concat(Wt(-h[4]/h[0],o)," ").concat(Wt(-h[5]/h[3],o)," ").concat(Wt(this.width/h[0],o)," ").concat(Wt(this.height/h[3],o),'" ')}else c='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',i,'" ',c,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",oh,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),`</defs>
`)}createSVGClipPathMarkup(t){const e=this.clipPath;return e?(e.clipPathId="CLIPPATH_".concat(zr()),'<clipPath id="'.concat(e.clipPathId,`" >
`).concat(e.toClipPathSVG(t.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(t=>{const e=this["".concat(t,"Color")];if(Tn(e)){const n=this["".concat(t,"Vpt")],i=this.viewportTransform,o={isType:()=>!1,width:this.width/(n?i[0]:1),height:this.height/(n?i[3]:1)};return e.toSVG(o,{additionalTransform:n?io(i):""})}}).join("")}createSVGFontFacesMarkup(){const t=[],e={},n=At.fontPaths;this._objects.forEach(function o(l){t.push(l),ch(l)&&l._objects.forEach(o)}),t.forEach(o=>{if(!t0(o))return;const{styles:l,fontFamily:c}=o;e[c]||!n[c]||(e[c]=!0,l&&Object.values(l).forEach(h=>{Object.values(h).forEach(f=>{let{fontFamily:d=""}=f;!e[d]&&n[d]&&(e[d]=!0)})}))});const i=Object.keys(e).map(o=>`		@font-face {
			font-family: '`.concat(o,`';
			src: url('`).concat(n[o],`');
		}
`)).join("");return i?`	<style type="text/css"><![CDATA[
`.concat(i,`]]></style>
`):""}_setSVGObjects(t,e){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(t,n,e)})}_setSVGObject(t,e,n){t.push(e.toSVG(n))}_setSVGBgOverlayImage(t,e,n){const i=this[e];i&&!i.excludeFromExport&&i.toSVG&&t.push(i.toSVG(n))}_setSVGBgOverlayColor(t,e){const n=this["".concat(e,"Color")];if(n)if(Tn(n)){const i=n.repeat||"",o=this.width,l=this.height,c=this["".concat(e,"Vpt")],h=c?io(Pe(this.viewportTransform)):"";t.push('<rect transform="'.concat(h," translate(").concat(o/2,",").concat(l/2,')" x="').concat(n.offsetX-o/2,'" y="').concat(n.offsetY-l/2,'" width="').concat((i==="repeat-y"||i==="no-repeat")&&gp(n)?n.source.width:o,'" height="').concat((i==="repeat-x"||i==="no-repeat")&&gp(n)?n.source.height:l,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(t,e){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return Promise.reject(new Error("fabric.js: `json` is undefined"));const i=typeof t=="string"?JSON.parse(t):t,{objects:o=[],backgroundImage:l,background:c,overlayImage:h,overlay:f,clipPath:d}=i,p=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([os(o,{reviver:e,signal:n}),ho({backgroundImage:l,backgroundColor:c,overlayImage:h,overlayColor:f,clipPath:d},{signal:n})]).then(_=>{let[v,w]=_;return this.clear(),this.add(...v),this.set(i),this.set(w),this.renderOnAddRemove=p,this})}clone(t){const e=this.toObject(t);return this.cloneWithoutData().loadFromJSON(e)}cloneWithoutData(){const t=ce();return t.width=this.width,t.height=this.height,new this.constructor(t)}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:n=1,multiplier:i=1,enableRetinaScaling:o=!1}=t,l=i*(o?this.getRetinaScaling():1);return Vh(this.toCanvasElement(l,t),e,n)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:e,height:n,left:i,top:o,filter:l}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=(e||this.width)*t,h=(n||this.height)*t,f=this.getZoom(),d=this.width,p=this.height,_=f*t,v=this.viewportTransform,w=(v[4]-(i||0))*t,E=(v[5]-(o||0))*t,O=[_,0,0,_,w,E],M=this.enableRetinaScaling,R=ce(),X=l?this._objects.filter(B=>l(B)):this._objects;return R.width=c,R.height=h,this.enableRetinaScaling=!1,this.viewportTransform=O,this.width=c,this.height=h,this.calcViewportBoundaries(),this.renderCanvas(R.getContext("2d"),X),this.viewportTransform=v,this.width=d,this.height=p,this.calcViewportBoundaries(),this.enableRetinaScaling=M,R}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),this.disposed=!0,new Promise((t,e)=>{const n=()=>{this.destroy(),t(!0)};n.kill=e,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?t(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(t=>t.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}A(uo,"ownDefaults",uE);const fE=["touchstart","touchmove","touchend"];function dE(r){const t=r.changedTouches;return t&&t[0]?t[0]:r}const s0=r=>{const t=r.target,e=e0(t),n=dE(r);return new F(n.clientX+e.left,n.clientY+e.top)},Pa=r=>fE.includes(r.type)||r.pointerType==="touch",uh=r=>{r.preventDefault(),r.stopPropagation()},dr=r=>{if(r.length===0)return{left:0,top:0,width:0,height:0};const{min:t,max:e}=r.reduce((i,o)=>{let{min:l,max:c}=i;return{min:l.min(o),max:c.max(o)}},{min:new F(r[0]),max:new F(r[0])}),n=e.subtract(t);return{left:t.x,top:t.y,width:n.x,height:n.y}},gE=["translateX","translateY","scaleX","scaleY"],pE=(r,t)=>{const e=Pe(t),n=De(e,r.calcOwnMatrix());as(r,n)},o0=(r,t)=>as(r,De(t,r.calcOwnMatrix())),as=(r,t)=>{const e=vi(t),{translateX:n,translateY:i,scaleX:o,scaleY:l}=e,c=Zt(e,gE),h=new F(n,i);r.flipX=!1,r.flipY=!1,Object.assign(r,c),r.set({scaleX:o,scaleY:l}),r.setPositionByOrigin(h,bt,bt)},qh=r=>{r.scaleX=1,r.scaleY=1,r.skewX=0,r.skewY=0,r.flipX=!1,r.flipY=!1,r.rotate(0)},Jh=r=>({scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,angle:r.angle,left:r.left,flipX:r.flipX,flipY:r.flipY,top:r.top}),Qh=(r,t,e)=>{const n=r/2,i=t/2,o=el(e),l=[new F(-n,-i),new F(n,-i),new F(-n,i),new F(n,i)].map(h=>h.transform(o)),c=dr(l);return new F(c.width,c.height)},Zh=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gn,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gn;return De(Pe(t),r)},tu=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gn,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gn;return r.transform(Zh(t,e))},mE=(r,t,e,n)=>{if(e!=="child"&&e!=="sibling")throw new Error("fabric.js: received bad argument ".concat(e));if(n!=="child"&&n!=="sibling")throw new Error("fabric.js: received bad argument ".concat(n));if(e===n)return r;const i=t.viewportTransform;return r.transform(n==="child"?Pe(i):i)},eu=(r,t,e)=>{const n=Zh(t,e);return as(r,De(n,r.calcOwnMatrix())),n},a0=(r,t)=>{var e;const{transform:{target:n}}=t;(e=n.canvas)===null||e===void 0||e.fire("object:".concat(r),D(D({},t),{},{target:n})),n.fire(r,t)},_E={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Wr=r=>typeof r=="string"?_E[r]:r-.5,Da="not-allowed",vE=(r,t,e,n)=>{if(!t||!r)return"drag";const i=n.controls[t];return i.getActionName(e,i,n)};function l0(r){return r.originX===bt&&r.originY===bt}function _p(r){return-Wr(r)+.5}const Wn=(r,t)=>r[t],c0=(r,t,e,n)=>({e:r,transform:t,pointer:new F(e,n)});function h0(r,t){const e=r.getTotalAngle(),n=e+ss(Math.atan2(t.y,t.x))+360;return Math.round(n%360/45)}function yE(r,t,e,n){const i=r.getRelativeCenterPoint(),o=typeof e<"u"&&typeof n<"u"?r.translateToGivenOrigin(i,bt,bt,e,n):new F(r.left,r.top);return(r.angle?t.rotate(-Qt(r.angle),i):t).subtract(o)}function fo(r,t,e,n,i){var o;let{target:l,corner:c}=r;const h=l.controls[c],f=((o=l.canvas)===null||o===void 0?void 0:o.getZoom())||1,d=l.padding/f,p=yE(l,new F(n,i),t,e);return p.x>=d&&(p.x-=d),p.x<=-d&&(p.x+=d),p.y>=d&&(p.y-=d),p.y<=d&&(p.y+=d),p.x-=h.offsetX,p.y-=h.offsetY,p}const u0=(r,t,e,n)=>{const{target:i,offsetX:o,offsetY:l}=t,c=e-o,h=n-l,f=!Wn(i,"lockMovementX")&&i.left!==c,d=!Wn(i,"lockMovementY")&&i.top!==h;return f&&i.set(Ut,c),d&&i.set(Ie,h),(f||d)&&a0("moving",c0(r,t,e,n)),f||d};class f0{getSvgStyles(t){const e=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):tn,o=this.strokeDashOffset?this.strokeDashOffset:"0",l=this.strokeLineCap?this.strokeLineCap:"butt",c=this.strokeLineJoin?this.strokeLineJoin:"miter",h=this.strokeMiterLimit?this.strokeMiterLimit:"4",f=typeof this.opacity<"u"?this.opacity:"1",d=this.visible?"":" visibility: hidden;",p=t?"":this.getSvgFilter(),_=so("fill",this.fill);return[so("stroke",this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",l,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",c,"; ","stroke-miterlimit: ",h,"; ",_,"fill-rule: ",e,"; ","opacity: ",f,";",p,d].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=t?this.calcTransformMatrix():this.calcOwnMatrix(),i='transform="'.concat(io(n));return"".concat(i).concat(e,'" ')}_toSVG(t){return[""]}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:e,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),o=t.indexOf("COMMON_PARTS");return t[o]=i,e?e(t.join("")):t.join("")}_createBaseSVGMarkup(t){let{noStyle:e,reviver:n,withShadow:i,additionalTransform:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=e?"":'style="'.concat(this.getSvgStyles(),'" '),c=i?'style="'.concat(this.getSvgFilter(),'" '):"",h=this.clipPath,f=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",d=h&&h.absolutePositioned,p=this.stroke,_=this.fill,v=this.shadow,w=[],E=t.indexOf("COMMON_PARTS");let O;h&&(h.clipPathId="CLIPPATH_".concat(zr()),O='<clipPath id="'.concat(h.clipPathId,`" >
`).concat(h.toClipPathSVG(n),`</clipPath>
`)),d&&w.push("<g ",c,this.getSvgCommons(),` >
`),w.push("<g ",this.getSvgTransform(!1),d?"":c+this.getSvgCommons(),` >
`);const M=[l,f,e?"":this.addPaintOrder()," ",o?'transform="'.concat(o,'" '):""].join("");return t[E]=M,Tn(_)&&w.push(_.toSVG(this)),Tn(p)&&w.push(p.toSVG(this)),v&&w.push(v.toSVG(this)),h&&w.push(O),w.push(t.join("")),w.push(`</g>
`),d&&w.push(`</g>
`),n?n(w.join("")):w.join("")}addPaintOrder(){return this.paintFirst!=="fill"?' paint-order="'.concat(this.paintFirst,'" '):""}}const nu=(r,t,e,n)=>(r<Math.abs(t)?(r=t,n=e/4):t===0&&r===0?n=e/pr*Math.asin(1):n=e/pr*Math.asin(t/r),{a:r,c:t,p:e,s:n}),d0=(r,t,e,n,i)=>r*Math.pow(2,10*(n-=1))*Math.sin((n*i-t)*pr/e),g0=(r,t,e,n)=>-e*Math.cos(r/n*_r)+e+t,xE=(r,t,e,n)=>e*(r/n)**3+t,wE=(r,t,e,n)=>e*((r/n-1)**3+1)+t,CE=(r,t,e,n)=>(r/=n/2,r<1?e/2*r**3+t:e/2*((r-2)**3+2)+t),SE=(r,t,e,n)=>e*(r/=n)*r**3+t,bE=(r,t,e,n)=>-e*((r=r/n-1)*r**3-1)+t,TE=(r,t,e,n)=>(r/=n/2,r<1?e/2*r**4+t:-e/2*((r-=2)*r**3-2)+t),OE=(r,t,e,n)=>e*(r/n)**5+t,EE=(r,t,e,n)=>e*((r/n-1)**5+1)+t,PE=(r,t,e,n)=>(r/=n/2,r<1?e/2*r**5+t:e/2*((r-2)**5+2)+t),DE=(r,t,e,n)=>-e*Math.cos(r/n*_r)+e+t,AE=(r,t,e,n)=>e*Math.sin(r/n*_r)+t,ME=(r,t,e,n)=>-e/2*(Math.cos(Math.PI*r/n)-1)+t,kE=(r,t,e,n)=>r===0?t:e*2**(10*(r/n-1))+t,LE=(r,t,e,n)=>r===n?t+e:e*-(2**(-10*r/n)+1)+t,RE=(r,t,e,n)=>r===0?t:r===n?t+e:(r/=n/2,r<1?e/2*2**(10*(r-1))+t:e/2*-(2**(-10*--r)+2)+t),FE=(r,t,e,n)=>-e*(Math.sqrt(1-(r/=n)*r)-1)+t,IE=(r,t,e,n)=>e*Math.sqrt(1-(r=r/n-1)*r)+t,BE=(r,t,e,n)=>(r/=n/2,r<1?-e/2*(Math.sqrt(1-r**2)-1)+t:e/2*(Math.sqrt(1-(r-=2)*r)+1)+t),jE=(r,t,e,n)=>{const o=e;let l=0;if(r===0)return t;if(r/=n,r===1)return t+e;l||(l=n*.3);const{a:c,s:h,p:f}=nu(o,e,l,1.70158);return-d0(c,h,f,r,n)+t},WE=(r,t,e,n)=>{const o=e;let l=0;if(r===0)return t;if(r/=n,r===1)return t+e;l||(l=n*.3);const{a:c,s:h,p:f,c:d}=nu(o,e,l,1.70158);return c*2**(-10*r)*Math.sin((r*n-h)*pr/f)+d+t},XE=(r,t,e,n)=>{const o=e;let l=0;if(r===0)return t;if(r/=n/2,r===2)return t+e;l||(l=n*(.3*1.5));const{a:c,s:h,p:f,c:d}=nu(o,e,l,1.70158);return r<1?-.5*d0(c,h,f,r,n)+t:c*Math.pow(2,-10*(r-=1))*Math.sin((r*n-h)*pr/f)*.5+d+t},HE=function(r,t,e,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return e*(r/=n)*r*((i+1)*r-i)+t},YE=function(r,t,e,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return e*((r=r/n-1)*r*((i+1)*r+i)+1)+t},UE=function(r,t,e,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return r/=n/2,r<1?e/2*(r*r*(((i*=1.525)+1)*r-i))+t:e/2*((r-=2)*r*(((i*=1.525)+1)*r+i)+2)+t},ru=(r,t,e,n)=>(r/=n)<1/2.75?e*(7.5625*r*r)+t:r<2/2.75?e*(7.5625*(r-=1.5/2.75)*r+.75)+t:r<2.5/2.75?e*(7.5625*(r-=2.25/2.75)*r+.9375)+t:e*(7.5625*(r-=2.625/2.75)*r+.984375)+t,p0=(r,t,e,n)=>e-ru(n-r,0,e,n)+t,NE=(r,t,e,n)=>r<n/2?p0(r*2,0,e,n)*.5+t:ru(r*2-n,0,e,n)*.5+e*.5+t,zE=(r,t,e,n)=>e*(r/=n)*r+t,VE=(r,t,e,n)=>-e*(r/=n)*(r-2)+t,GE=(r,t,e,n)=>(r/=n/2,r<1?e/2*r**2+t:-e/2*(--r*(r-2)-1)+t);var $E=Object.freeze({__proto__:null,defaultEasing:g0,easeInBack:HE,easeInBounce:p0,easeInCirc:FE,easeInCubic:xE,easeInElastic:jE,easeInExpo:kE,easeInOutBack:UE,easeInOutBounce:NE,easeInOutCirc:BE,easeInOutCubic:CE,easeInOutElastic:XE,easeInOutExpo:RE,easeInOutQuad:GE,easeInOutQuart:TE,easeInOutQuint:PE,easeInOutSine:ME,easeInQuad:zE,easeInQuart:SE,easeInQuint:OE,easeInSine:DE,easeOutBack:YE,easeOutBounce:ru,easeOutCirc:IE,easeOutCubic:wE,easeOutElastic:WE,easeOutExpo:LE,easeOutQuad:VE,easeOutQuart:bE,easeOutQuint:EE,easeOutSine:AE});const KE=()=>!1;class iu{constructor(t){let{startValue:e,byValue:n,duration:i=500,delay:o=0,easing:l=g0,onStart:c=mi,onChange:h=mi,onComplete:f=mi,abort:d=KE,target:p}=t;A(this,"_state","pending"),A(this,"durationProgress",0),A(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=i,this.delay=o,this.easing=l,this._onStart=c,this._onChange=h,this._onComplete=f,this._abort=d,this.target=p,this.startValue=e,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const t=e=>{this._state==="pending"&&(this.startTime=e||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Vs(t),this.delay):Vs(t)}tick(t){const e=(t||+new Date)-this.startTime,n=Math.min(e,this.duration);this.durationProgress=n/this.duration;const{value:i,valueProgress:o}=this.calculate(n);this.value=Object.freeze(i),this.valueProgress=o,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):e>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Vs(this.tick)))}register(){lh.push(this)}unregister(){lh.remove(this)}abort(){this._state="aborted",this.unregister()}}const qE=["startValue","endValue"];class JE extends iu{constructor(t){let{startValue:e=0,endValue:n=100}=t,i=Zt(t,qE);super(D(D({},i),{},{startValue:e,byValue:n-e}))}calculate(t){const e=this.easing(t,this.startValue,this.byValue,this.duration);return{value:e,valueProgress:Math.abs((e-this.startValue)/this.byValue)}}}const QE=["startValue","endValue"];class ZE extends iu{constructor(t){let{startValue:e=[0],endValue:n=[100]}=t,i=Zt(t,QE);super(D(D({},i),{},{startValue:e,byValue:n.map((o,l)=>o-e[l])}))}calculate(t){const e=this.startValue.map((n,i)=>this.easing(t,n,this.byValue[i],this.duration,i));return{value:e,valueProgress:Math.abs((e[0]-this.startValue[0])/this.byValue[0])}}}const yi=(r,t,e)=>Math.max(r,Math.min(t,e)),tP=["startValue","endValue","easing","onChange","onComplete","abort"],eP=(r,t,e,n)=>{const i=1-Math.cos(r/n*_r);return t+e*i},Fc=r=>r&&((t,e,n)=>r(new Kt(t).toRgba(),e,n));class nP extends iu{constructor(t){let{startValue:e,endValue:n,easing:i=eP,onChange:o,onComplete:l,abort:c}=t,h=Zt(t,tP);const f=new Kt(e).getSource(),d=new Kt(n).getSource();super(D(D({},h),{},{startValue:f,byValue:d.map((p,_)=>p-f[_]),easing:i,onChange:Fc(o),onComplete:Fc(l),abort:Fc(c)}))}calculate(t){const[e,n,i,o]=this.startValue.map((c,h)=>this.easing(t,c,this.byValue[h],this.duration,h)),l=[...[e,n,i].map(Math.round),yi(0,o,1)];return{value:l,valueProgress:l.map((c,h)=>this.byValue[h]!==0?Math.abs((c-this.startValue[h])/this.byValue[h]):0).find(c=>c!==0)||0}}}const rP=r=>Array.isArray(r.startValue)||Array.isArray(r.endValue);function su(r){const t=rP(r)?new ZE(r):new JE(r);return t.start(),t}function m0(r){const t=new nP(r);return t.start(),t}const iP=new F(1,0),_0=new F,ou=(r,t)=>r.rotate(t),Aa=(r,t)=>new F(t).subtract(r),Ma=r=>r.distanceFrom(_0),ka=(r,t)=>Math.atan2(Ji(r,t),y0(r,t)),v0=r=>ka(iP,r),nl=r=>r.eq(_0)?r:r.scalarDivide(Ma(r)),au=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return nl(new F(-r.y,r.x).scalarMultiply(t?1:-1))},Ji=(r,t)=>r.x*t.y-r.y*t.x,y0=(r,t)=>r.x*t.x+r.y*t.y,fh=(r,t,e)=>{if(r.eq(t)||r.eq(e))return!0;const n=Ji(t,e),i=Ji(t,r),o=Ji(e,r);return n>=0?i>=0&&o<=0:!(i<=0&&o>=0)};class me{constructor(t){this.status=t,this.points=[]}includes(t){return this.points.some(e=>e.eq(t))}append(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.points=this.points.concat(e.filter(i=>!this.includes(i))),this}static isPointContained(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.eq(n))return t.eq(e);if(e.x===n.x)return t.x===e.x&&(i||t.y>=Math.min(e.y,n.y)&&t.y<=Math.max(e.y,n.y));if(e.y===n.y)return t.y===e.y&&(i||t.x>=Math.min(e.x,n.x)&&t.x<=Math.max(e.x,n.x));{const o=Aa(e,n),c=Aa(e,t).divide(o);return i?Math.abs(c.x)===Math.abs(c.y):c.x===c.y&&c.x>=0&&c.x<=1}}static intersectLineLine(t,e,n,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;const c=e.x-t.x,h=e.y-t.y,f=i.x-n.x,d=i.y-n.y,p=t.x-n.x,_=t.y-n.y,v=f*_-d*p,w=c*_-h*p,E=d*c-f*h;if(E!==0){const O=v/E,M=w/E;return(o||0<=O&&O<=1)&&(l||0<=M&&M<=1)?new me("Intersection").append(new F(t.x+O*c,t.y+O*h)):new me}else if(v===0||w===0){const O=o||l||me.isPointContained(t,n,i)||me.isPointContained(e,n,i)||me.isPointContained(n,t,e)||me.isPointContained(i,t,e);return new me(O?"Coincident":void 0)}else return new me("Parallel")}static intersectSegmentLine(t,e,n,i){return me.intersectLineLine(t,e,n,i,!1,!0)}static intersectSegmentSegment(t,e,n,i){return me.intersectLineLine(t,e,n,i,!1,!1)}static intersectLinePolygon(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const o=new me,l=n.length;for(let c=0,h,f,d;c<l;c++){if(h=n[c],f=n[(c+1)%l],d=me.intersectLineLine(t,e,h,f,i,!1),d.status==="Coincident")return d;o.append(...d.points)}return o.points.length>0&&(o.status="Intersection"),o}static intersectSegmentPolygon(t,e,n){return me.intersectLinePolygon(t,e,n,!1)}static intersectPolygonPolygon(t,e){const n=new me,i=t.length,o=[];for(let l=0;l<i;l++){const c=t[l],h=t[(l+1)%i],f=me.intersectSegmentPolygon(c,h,e);f.status==="Coincident"?(o.push(f),n.append(c,h)):n.append(...f.points)}return o.length>0&&o.length===t.length?new me("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(t,e,n){const i=e.min(n),o=e.max(n),l=new F(o.x,i.y),c=new F(i.x,o.y);return me.intersectPolygonPolygon(t,[i,l,o,c])}}class sP extends Gm{_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=D({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},t),n=e.strokeWidth;let i=n,o=0;this.strokeUniform&&(i=0,o=n);const l=e.width+i,c=e.height+i,h=e.skewX===0&&e.skewY===0;let f;return h?f=new F(l*e.scaleX,c*e.scaleY):f=Qh(l,c,e),f.scalarAdd(o)}translateToGivenOrigin(t,e,n,i,o){let l=t.x,c=t.y;const h=Wr(i)-Wr(e),f=Wr(o)-Wr(n);if(h||f){const d=this._getTransformedDimensions();l+=h*d.x,c+=f*d.y}return new F(l,c)}translateToCenterPoint(t,e,n){const i=this.translateToGivenOrigin(t,e,n,bt,bt);return this.angle?i.rotate(Qt(this.angle),t):i}translateToOriginPoint(t,e,n){const i=this.translateToGivenOrigin(t,bt,bt,e,n);return this.angle?i.rotate(Qt(this.angle),t):i}getCenterPoint(){const t=this.getRelativeCenterPoint();return this.group?ae(t,this.group.calcTransformMatrix()):t}getRelativeCenterPoint(){return this.translateToCenterPoint(new F(this.left,this.top),this.originX,this.originY)}getPointByOrigin(t,e){return this.translateToOriginPoint(this.getRelativeCenterPoint(),t,e)}setPositionByOrigin(t,e,n){const i=this.translateToCenterPoint(t,e,n),o=this.translateToOriginPoint(i,this.originX,this.originY);this.set({left:o.x,top:o.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Ut,Ie)}}class oP extends sP{getX(){return this.getXY().x}setX(t){this.setXY(this.getXY().setX(t))}getY(){return this.getXY().y}setY(t){this.setXY(this.getXY().setY(t))}getRelativeX(){return this.left}setRelativeX(t){this.left=t}getRelativeY(){return this.top}setRelativeY(t){this.top=t}getXY(){const t=this.getRelativeXY();return this.group?ae(t,this.group.calcTransformMatrix()):t}setXY(t,e,n){this.group&&(t=ae(t,Pe(this.group.calcTransformMatrix()))),this.setRelativeXY(t,e,n)}getRelativeXY(){return new F(this.left,this.top)}setRelativeXY(t,e,n){this.setPositionByOrigin(t,e||this.originX,n||this.originY)}_getCoords(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?t?this.calcACoords():this.calcLineCoords():(this.aCoords||(this.aCoords=this.calcACoords()),this.lineCoords||(this.lineCoords=this.calcLineCoords()),t?this.aCoords:this.lineCoords)}getCoords(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{tl:n,tr:i,br:o,bl:l}=this._getCoords(t,e),c=[n,i,o,l];if(this.group){const h=this.group.calcTransformMatrix();return c.map(f=>ae(f,h))}return c}intersectsWithRect(t,e,n,i){const o=this.getCoords(n,i);return me.intersectPolygonRectangle(o,t,e).status==="Intersection"}intersectsWithObject(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=me.intersectPolygonPolygon(this.getCoords(e,n),t.getCoords(e,n));return i.status==="Intersection"||i.status==="Coincident"||t.isContainedWithinObject(this,e,n)||this.isContainedWithinObject(t,e,n)}isContainedWithinObject(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=this.getCoords(e,n),o=e?t.aCoords:t.lineCoords,l=t._getImageLines(o);for(let c=0;c<4;c++)if(!t.containsPoint(i[c],l))return!1;return!0}isContainedWithinRect(t,e,n,i){const o=this.getBoundingRect(n,i);return o.left>=t.x&&o.left+o.width<=e.x&&o.top>=t.y&&o.top+o.height<=e.y}isOverlapping(t){return this.intersectsWithObject(t)||this.isContainedWithinObject(t)||t.isContainedWithinObject(this)}containsPoint(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const o=this._getCoords(n,i),l=e||this._getImageLines(o),c=this._findCrossPoints(t,l);return c!==0&&c%2===1}isOnScreen(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.canvas)return!1;const{tl:e,br:n}=this.canvas.vptCoords;return this.getCoords(!0,t).some(o=>o.x<=n.x&&o.x>=e.x&&o.y<=n.y&&o.y>=e.y)||this.intersectsWithRect(e,n,!0,t)?!0:this._containsCenterOfCanvas(e,n,t)}_containsCenterOfCanvas(t,e,n){const i=t.midPointFrom(e);return this.containsPoint(i,void 0,!0,n)}isPartiallyOnScreen(t){if(!this.canvas)return!1;const{tl:e,br:n}=this.canvas.vptCoords;return this.intersectsWithRect(e,n,!0,t)?!0:this.getCoords(!0,t).every(o=>(o.x>=n.x||o.x<=e.x)&&(o.y>=n.y||o.y<=e.y))&&this._containsCenterOfCanvas(e,n,t)}_getImageLines(t){let{tl:e,tr:n,bl:i,br:o}=t;return{topline:{o:e,d:n},rightline:{o:n,d:o},bottomline:{o,d:i},leftline:{o:i,d:e}}}_findCrossPoints(t,e){let n=0;for(const i in e){let o;const l=e[i];if(!(l.o.y<t.y&&l.d.y<t.y)&&!(l.o.y>=t.y&&l.d.y>=t.y)){if(l.o.x===l.d.x&&l.o.x>=t.x)o=l.o.x;else{const h=(l.d.y-l.o.y)/(l.d.x-l.o.x),f=t.y-0*t.x,d=l.o.y-h*l.o.x;o=-(f-d)/(0-h)}if(o>=t.x&&(n+=1),n===2)break}}return n}getBoundingRect(t,e){return dr(this.getCoords(t,e))}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(t){this._set("scaleX",t),this._set("scaleY",t),this.setCoords()}scaleToWidth(t,e){const n=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/n)}scaleToHeight(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/n)}getCanvasRetinaScaling(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.getRetinaScaling())||1}getTotalAngle(){return this.group?vi(this.calcTransformMatrix()).angle:this.angle}calcLineCoords(){const t=this.getViewportTransform(),e=this.padding,n=Qt(this.getTotalAngle()),i=ze(n)*e,o=Ve(n)*e,l=i+o,c=i-o,{tl:h,tr:f,bl:d,br:p}=this.calcACoords(),_={tl:ae(h,t),tr:ae(f,t),bl:ae(d,t),br:ae(p,t)};return e&&(_.tl.x-=c,_.tl.y-=l,_.tr.x+=l,_.tr.y-=c,_.bl.x-=l,_.bl.y+=c,_.br.x+=c,_.br.y+=l),_}getViewportTransform(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.viewportTransform)||gn.concat()}calcACoords(){const t=co({angle:this.angle}),{x:e,y:n}=this.getRelativeCenterPoint(),i=lo(e,n),o=De(i,t),l=this._getTransformedDimensions(),c=l.x/2,h=l.y/2;return{tl:ae({x:-c,y:-h},o),tr:ae({x:c,y:-h},o),bl:ae({x:-c,y:h},o),br:ae({x:c,y:h},o)}}setCoords(){this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords()}transformMatrixKey(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const e="_";let n="";return!t&&this.group&&(n=this.group.transformMatrixKey(t)+e),n+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY}calcTransformMatrix(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.calcOwnMatrix();if(t||!this.group)return e;const n=this.transformMatrixKey(t),i=this.matrixCache;return i&&i.key===n?i.value:(this.group&&(e=De(this.group.calcTransformMatrix(!1),e)),this.matrixCache={key:n,value:e},e)}calcOwnMatrix(){const t=this.transformMatrixKey(!0),e=this.ownMatrixCache;if(e&&e.key===t)return e.value;const n=this.getRelativeCenterPoint(),i={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},o=Jm(i);return this.ownMatrixCache={key:t,value:o},o}_getNonTransformedDimensions(){return new F(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(t){return this._getTransformedDimensions(t).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}}class lu extends oP{getParent(t){return(aE(this.group)?this.__owningGroup:this.group)||(t?void 0:this.canvas)}isDescendantOf(t){return this.__owningGroup===t||this.group===t||this.canvas===t||!!this.__owningGroup&&this.__owningGroup.isDescendantOf(t)||!!this.group&&this.group.isDescendantOf(t)}getAncestors(t){const e=[];let n=this;do n=n instanceof lu?n.getParent(t):void 0,n&&e.push(n);while(n);return e}findCommonAncestors(t,e){if(this===t)return{fork:[],otherFork:[],common:[this,...this.getAncestors(e)]};const n=this.getAncestors(e),i=t.getAncestors(e);if(n.length===0&&i.length>0&&this===i[i.length-1])return{fork:[],otherFork:[t,...i.slice(0,i.length-1)],common:[this]};for(let o=0,l;o<n.length;o++){if(l=n[o],l===t)return{fork:[this,...n.slice(0,o)],otherFork:[],common:n.slice(o)};for(let c=0;c<i.length;c++){if(this===i[c])return{fork:[],otherFork:[t,...i.slice(0,c)],common:[this,...n]};if(l===i[c])return{fork:[this,...n.slice(0,o)],otherFork:[t,...i.slice(0,c)],common:n.slice(o)}}}return{fork:[this,...n],otherFork:[t,...i],common:[]}}hasCommonAncestors(t,e){const n=this.findCommonAncestors(t,e);return n&&!!n.common.length}isInFrontOf(t){if(this===t)return;const e=this.findCommonAncestors(t);if(!e)return;if(e.fork.includes(t))return!0;if(e.otherFork.includes(this))return!1;const n=e.common[0];if(!n)return;const i=e.fork.pop(),o=e.otherFork.pop(),l=n._objects.indexOf(i),c=n._objects.indexOf(o);return l>-1&&l>c}}class aP extends lu{animate(t,e){return Object.entries(t).reduce((n,i)=>{let[o,l]=i;return n[o]=this._animate(o,l,e),n},{})}_animate(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=t.split("."),o=this.colorProperties.includes(i[i.length-1]),{easing:l,duration:c,abort:h,startValue:f,onChange:d,onComplete:p}=n,_={target:this,startValue:f??i.reduce((v,w)=>v[w],this),endValue:e,easing:l,duration:c,abort:h==null?void 0:h.bind(this),onChange:(v,w,E)=>{i.reduce((O,M,R)=>(R===i.length-1&&(O[M]=v),O[M]),this),d&&d(v,w,E)},onComplete:(v,w,E)=>{this.setCoords(),p&&p(v,w,E)}};return o?m0(_):su(_)}}const lP={color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1};class ur{constructor(t){const e=typeof t=="string"?ur.parseShadow(t):t;Object.assign(this,this.constructor.ownDefaults);for(const n in e)this[n]=e[n];this.id=zr()}static parseShadow(t){const e=t.trim(),[n,i=0,o=0,l=0]=(ur.reOffsetsAndBlur.exec(e)||[]).map(h=>parseFloat(h)||0);return{color:(e.replace(ur.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:i,offsetY:o,blur:l}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(t){const e=ou(new F(this.offsetX,this.offsetY),Qt(-t.angle)),n=20,i=new Kt(this.color);let o=40,l=40;return t.width&&t.height&&(o=Wt((Math.abs(e.x)+this.blur)/t.width,At.NUM_FRACTION_DIGITS)*100+n,l=Wt((Math.abs(e.y)+this.blur)/t.height,At.NUM_FRACTION_DIGITS)*100+n),t.flipX&&(e.x*=-1),t.flipY&&(e.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(l,'%" height="').concat(100+2*l,'%" x="-').concat(o,'%" width="').concat(100+2*o,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Wt(this.blur?this.blur/2:0,At.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Wt(e.x,At.NUM_FRACTION_DIGITS),'" dy="').concat(Wt(e.y,At.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(i.toRgb(),'" flood-opacity="').concat(i.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const t={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling},e=ur.ownDefaults;return this.includeDefaultValues?t:Qm(t,(n,i)=>n!==e[i])}}A(ur,"ownDefaults",lP);A(ur,"reOffsetsAndBlur",/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/);const fs=r=>JSON.parse(JSON.stringify(r)),cP=[Ie,Ut,"scaleX","scaleY","flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible","skewX","skewY"],vr=["fill","stroke","strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],hP={originX:Ut,originY:Ie,top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!0,noScaleCache:!0,strokeUniform:!1,dirty:!0,paintFirst:"fill",activeOn:"down",colorProperties:["fill","stroke","backgroundColor"],clipPath:void 0,inverted:!1,absolutePositioned:!1,FX_DURATION:500},uP=["extraParam"];let Ci=class x0 extends aP{static getDefaults(){return D({},x0.ownDefaults)}get type(){const t=this.constructor.type;return t==="FabricObject"?"object":t.toLowerCase()}set type(t){console.warn("Setting type has no effect",t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),A(this,"_cacheContext",null),Object.assign(this,this.constructor.getDefaults()),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=ce(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(t){const e=t.width,n=t.height,i=At.maxCacheSideLimit,o=At.minCacheSideLimit;if(e<=i&&n<=i&&e*n<=At.perfLimitSizeTotal)return e<o&&(t.width=o),n<o&&(t.height=o),t;const l=e/n,[c,h]=zs.limitDimsByArea(l),f=yi(o,c,i),d=yi(o,h,i);return e>f&&(t.zoomX/=e/f,t.width=f,t.capped=!0),n>d&&(t.zoomY/=n/d,t.height=d,t.capped=!0),t}_getCacheCanvasDimensions(){const t=this.getTotalObjectScaling(),e=this._getTransformedDimensions({skewX:0,skewY:0}),n=e.x*t.x/this.scaleX,i=e.y*t.y/this.scaleY;return{width:n+ap,height:i+ap,zoomX:t.x,zoomY:t.y,x:n,y:i}}_updateCacheCanvas(){const t=this._cacheCanvas,e=this._cacheContext,n=this._limitCacheSize(this._getCacheCanvasDimensions()),i=At.minCacheSideLimit,o=n.width,l=n.height,c=n.zoomX,h=n.zoomY,f=o!==this.cacheWidth||l!==this.cacheHeight,d=this.zoomX!==c||this.zoomY!==h;if(!t||!e)return!1;let p,_,v=f||d,w=0,E=0,O=!1;if(f){const M=this._cacheCanvas.width,R=this._cacheCanvas.height,X=o>M||l>R,B=(o<M*.9||l<R*.9)&&M>i&&R>i;O=X||B,X&&!n.capped&&(o>i||l>i)&&(w=o*.1,E=l*.1)}return t0(this)&&this.path&&(v=!0,O=!0,w+=this.getHeightOfLine(0)*this.zoomX,E+=this.getHeightOfLine(0)*this.zoomY),v?(O?(t.width=Math.ceil(o+w),t.height=Math.ceil(l+E)):(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height)),p=n.x/2,_=n.y/2,this.cacheTranslationX=Math.round(t.width/2-p)+p,this.cacheTranslationY=Math.round(t.height/2-_)+_,this.cacheWidth=o,this.cacheHeight=l,e.translate(this.cacheTranslationX,this.cacheTranslationY),e.scale(c,h),this.zoomX=c,this.zoomY=h,!0):!1}setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(t)}transform(t){const e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,n=this.calcTransformMatrix(!e);t.transform(n[0],n[1],n[2],n[3],n[4],n[5])}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=At.NUM_FRACTION_DIGITS,n=this.clipPath&&!this.clipPath.excludeFromExport?D(D({},this.clipPath.toObject(t)),{},{inverted:this.clipPath.inverted,absolutePositioned:this.clipPath.absolutePositioned}):null,i=D(D({},wi(this,t)),{},{type:this.constructor.type,version:oh,originX:this.originX,originY:this.originY,left:Wt(this.left,e),top:Wt(this.top,e),width:Wt(this.width,e),height:Wt(this.height,e),fill:dp(this.fill)?this.fill.toObject():this.fill,stroke:dp(this.stroke)?this.stroke.toObject():this.stroke,strokeWidth:Wt(this.strokeWidth,e),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:Wt(this.strokeMiterLimit,e),scaleX:Wt(this.scaleX,e),scaleY:Wt(this.scaleY,e),angle:Wt(this.angle,e),flipX:this.flipX,flipY:this.flipY,opacity:Wt(this.opacity,e),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:Wt(this.skewX,e),skewY:Wt(this.skewY,e)},n?{clipPath:n}:null);return this.includeDefaultValues?i:this._removeDefaultValues(i)}toDatalessObject(t){return this.toObject(t)}_removeDefaultValues(t){const e=this.constructor.getDefaults(),i=Object.keys(e).length>0?e:Object.getPrototypeOf(this);return Qm(t,(o,l)=>{if(l===Ut||l===Ie||l==="type")return!0;const c=i[l];return o!==c&&!(Array.isArray(o)&&Array.isArray(c)&&o.length===0&&c.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}getObjectScaling(){if(!this.group)return new F(Math.abs(this.scaleX),Math.abs(this.scaleY));const t=vi(this.calcTransformMatrix());return new F(Math.abs(t.scaleX),Math.abs(t.scaleY))}getTotalObjectScaling(){const t=this.getObjectScaling();if(this.canvas){const e=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return t.scalarMultiply(e*n)}return t}getObjectOpacity(){let t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t}_constrainScale(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t===0?1e-4:t}_set(t,e){const n=this[t]!==e;if((t==="scaleX"||t==="scaleY")&&(e=this._constrainScale(e)),t==="scaleX"&&e<0?(this.flipX=!this.flipX,e*=-1):t==="scaleY"&&e<0?(this.flipY=!this.flipY,e*=-1):t==="shadow"&&e&&!(e instanceof ur)?e=new ur(e):t==="dirty"&&this.group&&this.group.set("dirty",e),this[t]=e,n){const i=this.group&&this.group.isOnACache();this.constructor.cacheProperties.includes(t)?(this.dirty=!0,i&&this.group.set("dirty",!0)):i&&this.constructor.stateProperties.includes(t)&&this.group.set("dirty",!0)}return this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.drawObject(t),this.dirty=!1),t.restore())}drawSelectionBackground(t){}renderCache(t){t=t||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext&&(this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)}shouldCache(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(t,e){if(t.save(),e.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",e.absolutePositioned){const n=Pe(this.calcTransformMatrix());t.transform(n[0],n[1],n[2],n[3],n[4],n[5])}e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}drawObject(t,e){const n=this.fill,i=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath),this.fill=n,this.stroke=i}_drawClipPath(t,e){e&&(e._set("canvas",this.canvas),e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t,e))}drawCacheOnCanvas(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned){if(this._cacheCanvas&&this._cacheContext&&!t){const e=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-n/2,e,n)}return!0}return!1}_renderBackground(t){if(!this.backgroundColor)return;const e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity}_setStrokeStyles(t,e){const n=e.stroke;n&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,Tn(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(t,n):(t.strokeStyle=n.toLive(t),this._applyPatternGradientTransform(t,n)):t.strokeStyle=e.stroke)}_setFillStyles(t,e){let{fill:n}=e;n&&(Tn(n)?(t.fillStyle=n.toLive(t),this._applyPatternGradientTransform(t,n)):t.fillStyle=n)}_setClippingProperties(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"}_setLineDash(t,e){!e||e.length===0||(1&e.length&&e.push(...e),t.setLineDash(e))}_setShadow(t){if(!this.shadow)return;const e=this.shadow,n=this.canvas,i=this.getCanvasRetinaScaling(),[o,,,l]=(n==null?void 0:n.viewportTransform)||gn,c=o*i,h=l*i,f=e.nonScaling?new F(1,1):this.getObjectScaling();t.shadowColor=e.color,t.shadowBlur=e.blur*At.browserShadowBlurConstant*(c+h)*(f.x+f.y)/4,t.shadowOffsetX=e.offsetX*c*f.x,t.shadowOffsetY=e.offsetY*h*f.y}_removeShadow(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)}_applyPatternGradientTransform(t,e){if(!Tn(e))return{offsetX:0,offsetY:0};const n=e.gradientTransform||e.patternTransform,i=-this.width/2+e.offsetX||0,o=-this.height/2+e.offsetY||0;return e.gradientUnits==="percentage"?t.transform(this.width,0,0,this.height,i,o):t.transform(1,0,0,1,i,o),n&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:i,offsetY:o}}_renderPaintInOrder(t){this.paintFirst==="stroke"?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))}_render(t){}_renderFill(t){this.fill&&(t.save(),this._setFillStyles(t,this),this.fillRule==="evenodd"?t.fill("evenodd"):t.fill(),t.restore())}_renderStroke(t){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform){const e=this.getObjectScaling();t.scale(1/e.x,1/e.y)}this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}}_applyPatternForTransformedGradient(t,e){var n;const i=this._limitCacheSize(this._getCacheCanvasDimensions()),o=ce(),l=this.getCanvasRetinaScaling(),c=i.x/this.scaleX/l,h=i.y/this.scaleY/l;o.width=Math.ceil(c),o.height=Math.ceil(h);const f=o.getContext("2d");f&&(f.beginPath(),f.moveTo(0,0),f.lineTo(c,0),f.lineTo(c,h),f.lineTo(0,h),f.closePath(),f.translate(c/2,h/2),f.scale(i.zoomX/this.scaleX/l,i.zoomY/this.scaleY/l),this._applyPatternGradientTransform(f,e),f.fillStyle=e.toLive(t),f.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(l*this.scaleX/i.zoomX,l*this.scaleY/i.zoomY),t.strokeStyle=(n=f.createPattern(o,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new F(this.left+this.width/2,this.top+this.height/2)}clone(t){const e=this.toObject(t);return this.constructor.fromObject(e)}cloneAsImage(t){const e=this.toCanvasElement(t),n=ut.getClass("image");return new n(e)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=Jh(this),n=this.group,i=this.shadow,o=Math.abs,l=t.enableRetinaScaling?Math.max(At.devicePixelRatio,1):1,c=(t.multiplier||1)*l;delete this.group,t.withoutTransform&&qh(this),t.withoutShadow&&(this.shadow=null),t.viewportTransform&&eu(this,this.getViewportTransform());const h=ce(),f=this.getBoundingRect(!0,!0),d=this.shadow,p=new F;if(d){const M=d.blur,R=d.nonScaling?new F(1,1):this.getObjectScaling();p.x=2*Math.round(o(d.offsetX)+M)*o(R.x),p.y=2*Math.round(o(d.offsetY)+M)*o(R.y)}const _=f.width+p.x,v=f.height+p.y;h.width=Math.ceil(_),h.height=Math.ceil(v);const w=new uo(h,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});t.format==="jpeg"&&(w.backgroundColor="#fff"),this.setPositionByOrigin(new F(w.width/2,w.height/2),bt,bt);const E=this.canvas;w._objects=[this],this.set("canvas",w),this.setCoords();const O=w.toCanvasElement(c||1,t);return this.set("canvas",E),this.shadow=i,n&&(this.group=n),this.set(e),this.setCoords(),w._objects=[],w.destroy(),O}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Vh(this.toCanvasElement(t),t.format||"png",t.quality||1)}isType(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.includes(this.constructor.type)||e.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(t){const{centeredRotation:e,originX:n,originY:i}=this;if(e){const{x:o,y:l}=this.getRelativeCenterPoint();this.originX=bt,this.originY=bt,this.left=o,this.top=l}if(this.set("angle",t),e){const{x:o,y:l}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,i);this.left=o,this.top=l,this.originX=n,this.originY=i}}setOnGroup(){}_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}dispose(){lh.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&qn().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}static _fromObject(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:n}=e,i=Zt(e,uP);return ho(fs(t),i).then(o=>{const l=D(D({},i),o);if(n){const{[n]:c,type:h}=l,f=Zt(l,[n,"type"].map(zm));return new this(c,f)}else return new this(l)})}static fromObject(t,e){return this._fromObject(t,e)}};A(Ci,"stateProperties",cP);A(Ci,"cacheProperties",vr);A(Ci,"ownDefaults",hP);A(Ci,"type","FabricObject");ut.setClass(Ci);ut.setClass(Ci,"object");const Si=(r,t)=>(e,n,i,o)=>{const l=t(e,n,i,o);return l&&a0(r,c0(e,n,i,o)),l};function bi(r){return(t,e,n,i)=>{const{target:o,originX:l,originY:c}=e,h=o.getRelativeCenterPoint(),f=o.translateToOriginPoint(h,l,c),d=r(t,e,n,i);return o.setPositionByOrigin(f,e.originX,e.originY),d}}const fP=(r,t,e,n)=>{const i=fo(t,t.originX,t.originY,e,n);if(t.originX===bt||t.originX===pe&&i.x<0||t.originX===Ut&&i.x>0){const{target:o}=t,l=o.strokeWidth/(o.strokeUniform?o.scaleX:1),c=l0(t)?2:1,h=o.width,f=Math.ceil(Math.abs(i.x*c/o.scaleX)-l);return o.set("width",Math.max(f,0)),h!==o.width}return!1},dh=Si("resizing",bi(fP));function w0(r,t,e,n,i){n=n||{};const o=this.sizeX||n.cornerSize||i.cornerSize,l=this.sizeY||n.cornerSize||i.cornerSize,c=typeof n.transparentCorners<"u"?n.transparentCorners:i.transparentCorners,h=c?"stroke":"fill",f=!c&&(n.cornerStrokeColor||i.cornerStrokeColor);let d=t,p=e,_;r.save(),r.fillStyle=n.cornerColor||i.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||i.cornerStrokeColor||"",o>l?(_=o,r.scale(1,l/o),p=e*o/l):l>o?(_=l,r.scale(o/l,1),d=t*l/o):_=o,r.lineWidth=1,r.beginPath(),r.arc(d,p,_/2,0,pr,!1),r[h](),f&&r.stroke(),r.restore()}function C0(r,t,e,n,i){n=n||{};const o=this.sizeX||n.cornerSize||i.cornerSize,l=this.sizeY||n.cornerSize||i.cornerSize,c=typeof n.transparentCorners<"u"?n.transparentCorners:i.transparentCorners,h=c?"stroke":"fill",f=!c&&(n.cornerStrokeColor||i.cornerStrokeColor),d=o/2,p=l/2;r.save(),r.fillStyle=n.cornerColor||i.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||i.cornerStrokeColor||"",r.lineWidth=1,r.translate(t,e);const _=i.getTotalAngle();r.rotate(Qt(_)),r["".concat(h,"Rect")](-d,-p,o,l),f&&r.strokeRect(-d,-p,o,l),r.restore()}class fn{constructor(t){A(this,"visible",!0),A(this,"actionName","scale"),A(this,"angle",0),A(this,"x",0),A(this,"y",0),A(this,"offsetX",0),A(this,"offsetY",0),A(this,"sizeX",null),A(this,"sizeY",null),A(this,"touchSizeX",null),A(this,"touchSizeY",null),A(this,"cursorStyle","crosshair"),A(this,"withConnection",!1),Object.assign(this,t)}shouldActivate(t,e){var n;return((n=e.canvas)===null||n===void 0?void 0:n.getActiveObject())===e&&e.isControlVisible(t)}getActionHandler(t,e,n){return this.actionHandler}getMouseDownHandler(t,e,n){return this.mouseDownHandler}getMouseUpHandler(t,e,n){return this.mouseUpHandler}cursorStyleHandler(t,e,n){return e.cursorStyle}getActionName(t,e,n){return e.actionName}getVisibility(t,e){var n,i;return(n=(i=t._controlsVisibility)===null||i===void 0?void 0:i[e])!==null&&n!==void 0?n:this.visible}setVisibility(t,e,n){this.visible=t}positionHandler(t,e,n,i){return new F(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(e)}calcCornerCoords(t,e,n,i,o){let l,c,h,f;const d=o?this.touchSizeX:this.sizeX,p=o?this.touchSizeY:this.sizeY;if(d&&p&&d!==p){const _=Math.atan2(p,d),v=Math.sqrt(d*d+p*p)/2,w=_-Qt(t),E=_r-_-Qt(t);l=v*ze(w),c=v*Ve(w),h=v*ze(E),f=v*Ve(E)}else{const v=(d&&p?d:e)*Math.SQRT1_2,w=Qt(45-t);l=h=v*ze(w),c=f=v*Ve(w)}return{tl:new F(n-f,i-h),tr:new F(n+l,i-c),bl:new F(n-l,i+c),br:new F(n+f,i+h)}}render(t,e,n,i,o){switch(i=i||{},i.cornerStyle||o.cornerStyle){case"circle":w0.call(this,t,e,n,i,o);break;default:C0.call(this,t,e,n,i,o)}}}const S0=(r,t,e)=>e.lockRotation?Da:t.cursorStyle,dP=(r,t,e,n)=>{let{target:i,ex:o,ey:l,theta:c,originX:h,originY:f}=t;const d=i.translateToOriginPoint(i.getRelativeCenterPoint(),h,f);if(Wn(i,"lockRotation"))return!1;const p=Math.atan2(l-d.y,o-d.x),_=Math.atan2(n-d.y,e-d.x);let v=ss(_-p+c);if(i.snapAngle&&i.snapAngle>0){const E=i.snapAngle,O=i.snapThreshold||E,M=Math.ceil(v/E)*E,R=Math.floor(v/E)*E;Math.abs(v-R)<O?v=R:Math.abs(v-M)<O&&(v=M)}v<0&&(v=360+v),v%=360;const w=i.angle!==v;return i.angle=v,w},b0=Si("rotating",bi(dP));function T0(r,t){const e=t.canvas,n=r[e.uniScaleKey];return e.uniformScaling&&!n||!e.uniformScaling&&n}function O0(r,t,e){const n=Wn(r,"lockScalingX"),i=Wn(r,"lockScalingY");return!!(n&&i||!t&&(n||i)&&e||n&&t==="x"||i&&t==="y")}const gP=["e","se","s","sw","w","nw","n","ne","e"],Vi=(r,t,e)=>{const n=T0(r,e),i=t.x!==0&&t.y===0?"x":t.x===0&&t.y!==0?"y":"";if(O0(e,i,n))return Da;const o=h0(e,t);return"".concat(gP[o],"-resize")};function cu(r,t,e,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o=t.target,l=i.by,c=T0(r,o),h=O0(o,l,c);let f,d,p,_,v,w;if(h)return!1;if(t.gestureScale)d=t.scaleX*t.gestureScale,p=t.scaleY*t.gestureScale;else{if(f=fo(t,t.originX,t.originY,e,n),v=l!=="y"?Math.sign(f.x||t.signX||1):1,w=l!=="x"?Math.sign(f.y||t.signY||1):1,t.signX||(t.signX=v),t.signY||(t.signY=w),Wn(o,"lockScalingFlip")&&(t.signX!==v||t.signY!==w))return!1;if(_=o._getTransformedDimensions(),c&&!l){const M=Math.abs(f.x)+Math.abs(f.y),{original:R}=t,X=Math.abs(_.x*R.scaleX/o.scaleX)+Math.abs(_.y*R.scaleY/o.scaleY),B=M/X;d=R.scaleX*B,p=R.scaleY*B}else d=Math.abs(f.x*o.scaleX/_.x),p=Math.abs(f.y*o.scaleY/_.y);l0(t)&&(d*=2,p*=2),t.signX!==v&&l!=="y"&&(t.originX=_p(t.originX),d*=-1,t.signX=v),t.signY!==w&&l!=="x"&&(t.originY=_p(t.originY),p*=-1,t.signY=w)}const E=o.scaleX,O=o.scaleY;return l?(l==="x"&&o.set("scaleX",d),l==="y"&&o.set("scaleY",p)):(!Wn(o,"lockScalingX")&&o.set("scaleX",d),!Wn(o,"lockScalingY")&&o.set("scaleY",p)),E!==o.scaleX||O!==o.scaleY}const pP=(r,t,e,n)=>cu(r,t,e,n),mP=(r,t,e,n)=>cu(r,t,e,n,{by:"x"}),_P=(r,t,e,n)=>cu(r,t,e,n,{by:"y"}),js=Si("scaling",bi(pP)),E0=Si("scaling",bi(mP)),P0=Si("scaling",bi(_P)),vP=["target","ex","ey","skewingSide"],gh={x:{counterAxis:"y",scale:"scaleX",skew:"skewX",lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:"scaleY",skew:"skewY",lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},yP=["ns","nesw","ew","nwse"],D0=(r,t,e)=>{if(t.x!==0&&Wn(e,"lockSkewingY")||t.y!==0&&Wn(e,"lockSkewingX"))return Da;const n=h0(e,t)%4;return"".concat(yP[n],"-resize")};function xP(r,t,e){let{target:n,ex:i,ey:o,skewingSide:l}=t,c=Zt(t,vP);const{skew:h}=gh[r],f=e.subtract(new F(i,o)).divide(new F(n.scaleX,n.scaleY))[r],d=n[h],p=c[h],_=Math.tan(Qt(p)),v=r==="y"?n._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:n._getTransformedDimensions({scaleX:1,scaleY:1}).y,w=2*f*l/Math.max(v,1)+_,E=ss(Math.atan(w));n.set(h,E);const O=d!==n[h];if(O&&r==="y"){const{skewX:M,scaleX:R}=n,X=n._getTransformedDimensions({skewY:d}),B=n._getTransformedDimensions(),$=M!==0?X.x/B.x:1;$!==1&&n.set("scaleX",$*R)}return O}function A0(r,t,e,n,i){const{target:o}=e,{counterAxis:l,origin:c,lockSkewing:h,skew:f,flip:d}=gh[r];if(Wn(o,h))return!1;const{origin:p,flip:_}=gh[l],v=Wr(e[p])*(o[_]?-1:1),w=-Math.sign(v)*(o[d]?-1:1),E=(o[f]===0&&fo(e,bt,bt,n,i)[r]>0||o[f]>0?1:-1)*w,O=-E*.5+.5;return Si("skewing",bi((R,X,B,$)=>xP(r,X,new F(B,$))))(t,D(D({},e),{},{[c]:O,skewingSide:w}),n,i)}const M0=(r,t,e,n)=>A0("x",r,t,e,n),k0=(r,t,e,n)=>A0("y",r,t,e,n);function rl(r,t){return r[t.canvas.altActionKey]}const Ws=(r,t,e)=>{const n=rl(r,e);return t.x===0?n?"skewX":"scaleY":t.y===0?n?"skewY":"scaleX":""},di=(r,t,e)=>rl(r,e)?D0(r,t,e):Vi(r,t,e),ph=(r,t,e,n)=>rl(r,t.target)?k0(r,t,e,n):E0(r,t,e,n),mh=(r,t,e,n)=>rl(r,t.target)?M0(r,t,e,n):P0(r,t,e,n),hu=()=>({ml:new fn({x:-.5,y:0,cursorStyleHandler:di,actionHandler:ph,getActionName:Ws}),mr:new fn({x:.5,y:0,cursorStyleHandler:di,actionHandler:ph,getActionName:Ws}),mb:new fn({x:0,y:.5,cursorStyleHandler:di,actionHandler:mh,getActionName:Ws}),mt:new fn({x:0,y:-.5,cursorStyleHandler:di,actionHandler:mh,getActionName:Ws}),tl:new fn({x:-.5,y:-.5,cursorStyleHandler:Vi,actionHandler:js}),tr:new fn({x:.5,y:-.5,cursorStyleHandler:Vi,actionHandler:js}),bl:new fn({x:-.5,y:.5,cursorStyleHandler:Vi,actionHandler:js}),br:new fn({x:.5,y:.5,cursorStyleHandler:Vi,actionHandler:js}),mtr:new fn({x:0,y:-.5,actionHandler:b0,cursorStyleHandler:S0,offsetY:-40,withConnection:!0,actionName:"rotate"})}),L0=()=>({mr:new fn({x:.5,y:0,actionHandler:dh,cursorStyleHandler:di,actionName:"resizing"}),ml:new fn({x:-.5,y:0,actionHandler:dh,cursorStyleHandler:di,actionName:"resizing"})}),R0=()=>D(D({},hu()),L0()),wP={};class il extends Ci{static getDefaults(){return D(D({},super.getDefaults()),{},{controls:hu()},il.ownDefaults)}_updateCacheCanvas(){const t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){const e=t._currentTransform.target,n=t._currentTransform.action;if(this===e&&n.startsWith("scale"))return!1}return super._updateCacheCanvas()}getActiveControl(){return this.__corner}_findTargetCorner(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasControls||!this.canvas)return"";this.__corner=void 0;const n=Object.entries(this.oCoords);for(let i=n.length-1;i>=0;i--){const[o,l]=n[i];if(this.controls[o].shouldActivate(o,this)){const c=this._getImageLines(e?l.touchCorner:l.corner),h=this._findCrossPoints(t,c);if(h!==0&&h%2===1)return this.__corner=o,o}}return""}calcOCoords(){const t=this.getViewportTransform(),e=this.getCenterPoint(),n=lo(e.x,e.y),i=co({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),o=De(n,i),l=De(t,o),c=De(l,[1/t[0],0,0,1/t[3],0,0]),h=this.group?vi(this.calcTransformMatrix()):void 0,f=this._calculateCurrentDimensions(h),d={};return this.forEachControl((p,_)=>{const v=p.positionHandler(f,c,this,p);d[_]=Object.assign(v,this._calcCornerCoords(p,v))}),d}_calcCornerCoords(t,e){const n=t.calcCornerCoords(this.angle,this.cornerSize,e.x,e.y,!1),i=t.calcCornerCoords(this.angle,this.touchCornerSize,e.x,e.y,!0);return{corner:n,touchCorner:i}}setCoords(){super.setCoords(),this.oCoords=this.calcOCoords()}forEachControl(t){for(const e in this.controls)t(this.controls[e],e,this)}drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;t.save();const e=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),i=this.getViewportTransform();t.translate(e.x,e.y),t.scale(1/i[0],1/i[3]),t.rotate(Qt(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-n.x/2,-n.y/2,n.x,n.y),t.restore()}strokeBorders(t,e){t.strokeRect(-e.x/2,-e.y/2,e.x,e.y)}_drawBorders(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=D({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);t.save(),t.strokeStyle=i.borderColor,this._setLineDash(t,i.borderDashArray),this.strokeBorders(t,e),i.hasControls&&this.drawControlsConnectingLines(t,e),t.restore()}_renderControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:n,hasControls:i}=this,o=D({hasBorders:n,hasControls:i},e),l=this.getViewportTransform(),c=o.hasBorders,h=o.hasControls,f=De(l,this.calcTransformMatrix()),d=vi(f);t.save(),t.translate(d.translateX,d.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(d.angle-=180),t.rotate(Qt(this.group?d.angle:this.angle)),c&&this.drawBorders(t,d,e),h&&this.drawControls(t,e),t.restore()}drawBorders(t,e,n){let i;if(n&&n.forActiveSelection||this.group){const o=Qh(this.width,this.height,e),l=(this.strokeUniform?new F().scalarAdd(this.canvas?this.canvas.getZoom():1):new F(e.scaleX,e.scaleY)).scalarMultiply(this.strokeWidth);i=o.add(l).scalarAdd(this.borderScaleFactor).scalarAdd(this.padding*2)}else i=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(t,i,n)}drawControlsConnectingLines(t,e){let n=!1;t.beginPath(),this.forEachControl((i,o)=>{i.withConnection&&i.getVisibility(this,o)&&(n=!0,t.moveTo(i.x*e.x,i.y*e.y),t.lineTo(i.x*e.x+i.offsetX,i.y*e.y+i.offsetY))}),n&&t.stroke()}drawControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:i,cornerDashArray:o,cornerColor:l}=this,c=D({cornerStrokeColor:i,cornerDashArray:o,cornerColor:l},e);t.setTransform(n,0,0,n,0,0),t.strokeStyle=t.fillStyle=c.cornerColor,this.transparentCorners||(t.strokeStyle=c.cornerStrokeColor),this._setLineDash(t,c.cornerDashArray),this.setCoords(),this.forEachControl((h,f)=>{if(h.getVisibility(this,f)){const d=this.oCoords[f];h.render(t,d.x,d.y,c,this)}}),t.restore()}isControlVisible(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)}setControlVisible(t,e){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e}setControlsVisibility(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(t).forEach(e=>{let[n,i]=e;return this.setControlVisible(n,i)})}clearContextTop(t){if(!this.canvas)return;const e=this.canvas.contextTop;if(!e)return;const n=this.canvas.viewportTransform;e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(e);const i=this.width+4,o=this.height+4;return e.clearRect(-i/2,-o/2,i,o),t||e.restore(),e}onDeselect(t){return!1}onSelect(t){return!1}canDrop(t){return!1}renderDragSourceEffect(t){}renderDropTargetEffect(t){}}A(il,"ownDefaults",wP);function F0(r,t){return t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(e.prototype,n)||Object.create(null))})}),r}class xe extends il{}F0(xe,[f0]);ut.setClass(xe);ut.setClass(xe,"object");const I0=(r,t,e,n)=>{n=Math.round(n);const i=n*2+1,{data:o}=r.getImageData(t-n,e-n,i,i);for(let l=3;l<o.length;l+=4)if(o[l]>0)return!1;return!0},Vr=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function sl(r){return new RegExp("^("+r.join("|")+")\\b","i")}var vp,yp;const ao=String.raw(vp||(vp=Jn(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"])));String.raw(yp||(yp=Jn(["(?:s+,?s*|,s*|$)"],["(?:\\s+,?\\s*|,\\s*|$)"])));const CP=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+ao+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+ao+"))?\\s+(.*)"),SP=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],bP=["symbol","image","marker","pattern","view","svg"],TP=["pattern","defs","symbol","metadata","clipPath","mask","desc"],OP=["symbol","g","a","svg","clipPath","defs"],EP={cx:Ut,x:Ut,r:"radius",cy:Ie,y:Ie,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},Ic="font-size",Bc="clip-path";sl(SP);sl(bP);const xp=sl(OP);function B0(r,t){const e=r.nodeName,n=r.getAttribute("class"),i=r.getAttribute("id");let o;if(o=new RegExp("^"+e,"i"),t=t.replace(o,""),i&&t.length&&(o=new RegExp("#"+i+"(?![a-zA-Z\\-]+)","i"),t=t.replace(o,"")),n&&t.length){const l=n.split(" ");for(let c=l.length;c--;)o=new RegExp("\\."+l[c]+"(?![a-zA-Z\\-]+)","i"),t=t.replace(o,"")}return t.length===0}function PP(r,t){let e,n=!0;for(;r.parentElement&&r.parentElement.nodeType===1&&t.length;)n&&(e=t.pop()),r=r.parentElement,n=B0(r,e);return t.length===0}function DP(r,t){let e=!0;const n=B0(r,t.pop());return n&&t.length&&(e=PP(r,t)),n&&e&&t.length===0}function AP(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e={};for(const n in t)DP(r,n.split(" "))&&(e=D(D({},e),t[n]));return e}const MP=r=>{var t;return(t=EP[r])!==null&&t!==void 0?t:r},j0=r=>r.replace(new RegExp("(".concat(ao,")"),"gi")," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var wp,Cp,Sp,bp,Tp,Op,Ep;const Ye="(".concat(ao,")"),kP=String.raw(wp||(wp=Jn(["(skewX)(",")"],["(skewX)\\(","\\)"])),Ye),LP=String.raw(Cp||(Cp=Jn(["(skewY)(",")"],["(skewY)\\(","\\)"])),Ye),RP=String.raw(Sp||(Sp=Jn(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Ye,Ye,Ye),FP=String.raw(bp||(bp=Jn(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Ye,Ye),IP=String.raw(Tp||(Tp=Jn(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Ye,Ye),BP=String.raw(Op||(Op=Jn(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Ye,Ye,Ye,Ye,Ye,Ye),uu="(?:".concat(BP,"|").concat(IP,"|").concat(RP,"|").concat(FP,"|").concat(kP,"|").concat(LP,")"),jP="(?:".concat(uu,"*)"),WP=String.raw(Ep||(Ep=Jn(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),jP),XP=new RegExp(WP),HP=new RegExp(uu,"g");function _h(r){r=j0(r).replace(/\s*([()])\s*/gi,"$1");const t=[];if(!r||r&&!XP.test(r))return[...gn];for(const e of r.matchAll(HP)){const n=new RegExp(uu).exec(e[0]);if(!n)continue;let i=gn;const o=n.filter(w=>!!w),[,l,...c]=o,[h,f,d,p,_,v]=c.map(w=>parseFloat(w));switch(l){case"translate":i=lo(h,f);break;case"rotate":i=co({angle:h},{x:f,y:d});break;case"scale":i=Gh(h,f);break;case"skewX":i=$h(h);break;case"skewY":i=Kh(h);break;case"matrix":i=[h,f,d,p,_,v];break}t.push(i)}return tl(t)}function YP(r,t,e,n){const i=Array.isArray(t);let o,l=t;if((r==="fill"||r==="stroke")&&t===tn)l="";else{if(r==="strokeUniform")return t==="non-scaling-stroke";if(r==="strokeDashArray")t===tn?l=null:l=t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(r==="transformMatrix")e&&e.transformMatrix?l=De(e.transformMatrix,_h(t)):l=_h(t);else if(r==="visible")l=t!==tn&&t!=="hidden",e&&e.visible===!1&&(l=!1);else if(r==="opacity")l=parseFloat(t),e&&typeof e.opacity<"u"&&(l*=e.opacity);else if(r==="textAnchor")l=t==="start"?Ut:t==="end"?pe:bt;else if(r==="charSpacing")o=_i(t,n)/n*1e3;else if(r==="paintFirst"){const c=t.indexOf("fill"),h=t.indexOf("stroke");l="fill",(c>-1&&h>-1&&h<c||c===-1&&h>-1)&&(l="stroke")}else{if(r==="href"||r==="xlink:href"||r==="font")return t;if(r==="imageSmoothing")return t==="optimizeQuality";o=i?t.map(_i):_i(t,n)}}return!i&&isNaN(o)?l:o}function UP(r,t){const e=r.match(CP);if(!e)return;const n=e[1],i=e[3],o=e[4],l=e[5],c=e[6];n&&(t.fontStyle=n),i&&(t.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),o&&(t.fontSize=_i(o)),c&&(t.fontFamily=c),l&&(t.lineHeight=l==="normal"?1:l)}function NP(r,t){Object.entries(r).forEach(e=>{let[n,i]=e;i!==void 0&&(t[n.toLowerCase()]=i)})}function zP(r,t){r.replace(/;\s*$/,"").split(";").forEach(e=>{const[n,i]=e.split(":");t[n.trim().toLowerCase()]=i.trim()})}function VP(r){const t={},e=r.getAttribute("style");return e&&(typeof e=="string"?zP(e,t):NP(e,t)),t}const GP={stroke:"strokeOpacity",fill:"fillOpacity"};function $P(r){const t=xe.getDefaults();return Object.entries(GP).forEach(e=>{let[n,i]=e;if(typeof r[i]>"u"||r[n]==="")return;if(typeof r[n]>"u"){if(!t[n])return;r[n]=t[n]}if(r[n].indexOf("url(")===0)return;const o=new Kt(r[n]);r[n]=o.setAlpha(Wt(o.getAlpha()*r[i],2)).toRgba()}),r}function yr(r,t,e){if(!r)return{};let n={},i,o=Nh;r.parentNode&&xp.test(r.parentNode.nodeName)&&(n=yr(r.parentElement,t,e),n.fontSize&&(i=o=_i(n.fontSize)));const l=D(D(D({},t.reduce((f,d)=>{const p=r.getAttribute(d);return p&&(f[d]=p),f},{})),AP(r,e)),VP(r));l[Bc]&&r.setAttribute(Bc,l[Bc]),l[Ic]&&(i=_i(l[Ic],o),l[Ic]="".concat(i));const c={};for(const f in l){const d=MP(f),p=YP(d,l[f],n,i);c[d]=p}c&&c.font&&UP(c.font,c);const h=D(D({},n),c);return xp.test(r.nodeName)?h:$P(h)}const KP=["left","top","width","height","visible"],qP={rx:0,ry:0},W0=["rx","ry"];class xr extends xe{static getDefaults(){return D(D({},super.getDefaults()),xr.ownDefaults)}constructor(t){super(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:e}=this;t&&!e?this.ry=t:e&&!t&&(this.rx=e)}_render(t){const{width:e,height:n}=this,i=-e/2,o=-n/2,l=this.rx?Math.min(this.rx,e/2):0,c=this.ry?Math.min(this.ry,n/2):0,h=l!==0||c!==0;t.beginPath(),t.moveTo(i+l,o),t.lineTo(i+e-l,o),h&&t.bezierCurveTo(i+e-Fr*l,o,i+e,o+Fr*c,i+e,o+c),t.lineTo(i+e,o+n-c),h&&t.bezierCurveTo(i+e,o+n-Fr*c,i+e-Fr*l,o+n,i+e-l,o+n),t.lineTo(i+l,o+n),h&&t.bezierCurveTo(i+Fr*l,o+n,i,o+n-Fr*c,i,o+n-c),t.lineTo(i,o+c),h&&t.bezierCurveTo(i,o+Fr*c,i+Fr*l,o,i+l,o),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...W0,...t])}_toSVG(){const{width:t,height:e,rx:n,ry:i}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-t/2,'" y="').concat(-e/2,'" rx="').concat(n,'" ry="').concat(i,'" width="').concat(t,'" height="').concat(e,`" />
`)]}static async fromElement(t,e,n){const i=yr(t,this.ATTRIBUTE_NAMES,n),{left:o=0,top:l=0,width:c=0,height:h=0,visible:f=!0}=i,d=Zt(i,KP);return new this(D(D(D({},e),d),{},{left:o,top:l,width:c,height:h,visible:!!(f&&c&&h)}))}}A(xr,"type","Rect");A(xr,"cacheProperties",[...vr,...W0]);A(xr,"ownDefaults",qP);A(xr,"ATTRIBUTE_NAMES",[...Vr,"x","y","rx","ry","width","height"]);ut.setClass(xr);ut.setSVGClass(xr);const JP=["objects"],QP={layout:"fit-content",strokeWidth:0,subTargetCheck:!1,interactive:!1};class wr extends Vm(xe){static getDefaults(){return D(D({},super.getDefaults()),wr.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;super(),A(this,"_activeObjects",[]),A(this,"__objectSelectionTracker",void 0),A(this,"__objectSelectionDisposer",void 0),A(this,"_firstLayoutDone",!1),this._objects=t.slice(),this.__objectMonitor=this.__objectMonitor.bind(this),this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.set(D(D({},e),{},{angle:0,skewX:0,skewY:0})),this.forEachObject(i=>{this.enterGroup(i,!1)}),this._applyLayoutStrategy({type:"initialization",options:e,objectsRelativeToGroup:n})}canEnterGroup(t){return t===this||this.isDescendantOf(t)?(console.error("fabric.Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(t)!==-1?(console.error("fabric.Group: duplicate objects are not supported inside group, this call has no effect"),!1):!0}_filterObjectsBeforeEnteringGroup(t){return t.filter((e,n,i)=>this.canEnterGroup(e)&&i.indexOf(e)===n)}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=this._filterObjectsBeforeEnteringGroup(e),o=super.add(...i);return this._onAfterObjectsChange("added",i),o}insertAt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const o=this._filterObjectsBeforeEnteringGroup(n),l=super.insertAt(t,...o);return this._onAfterObjectsChange("added",o),l}remove(){const t=super.remove(...arguments);return this._onAfterObjectsChange("removed",t),t}_onObjectAdded(t){this.enterGroup(t,!0),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onRelativeObjectAdded(t){this.enterGroup(t,!1),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t,e){this.exitGroup(t,e),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onAfterObjectsChange(t,e){this._applyLayoutStrategy({type:t,targets:e}),this._set("dirty",!0)}_onStackOrderChanged(){this._set("dirty",!0)}_set(t,e){const n=this[t];return super._set(t,e),t==="canvas"&&n!==e&&this.forEachObject(i=>{i._set(t,e)}),t==="layout"&&n!==e&&this._applyLayoutStrategy({type:"layout_change",layout:e,prevLayout:n}),t==="interactive"&&this.forEachObject(i=>this._watchObject(e,i)),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectMonitor(t){this._applyLayoutStrategy(D(D({},t),{},{type:"object_modified"})),this._set("dirty",!0)}__objectSelectionMonitor(t,e){let{target:n}=e;if(t)this._activeObjects.push(n),this._set("dirty",!0);else if(this._activeObjects.length>0){const i=this._activeObjects.indexOf(n);i>-1&&(this._activeObjects.splice(i,1),this._set("dirty",!0))}}_watchObject(t,e){const n=t?"on":"off";t&&this._watchObject(!1,e),e[n]("changed",this.__objectMonitor),e[n]("modified",this.__objectMonitor),e[n]("selected",this.__objectSelectionTracker),e[n]("deselected",this.__objectSelectionDisposer)}enterGroup(t,e){return t.group&&t.group.remove(t),this._enterGroup(t,e),!0}_enterGroup(t,e){e&&as(t,De(Pe(this.calcTransformMatrix()),t.calcTransformMatrix())),this._shouldSetNestedCoords()&&t.setCoords(),t._set("group",this),t._set("canvas",this.canvas),this.interactive&&this._watchObject(!0,t);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===t||t.isDescendantOf(n))&&this._activeObjects.push(t)}exitGroup(t,e){this._exitGroup(t,e),t._set("canvas",void 0)}_exitGroup(t,e){t._set("group",void 0),e||(as(t,De(this.calcTransformMatrix(),t.calcTransformMatrix())),t.setCoords()),this._watchObject(!1,t);const n=this._activeObjects.length>0?this._activeObjects.indexOf(t):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const t=xe.prototype.shouldCache.call(this);if(t){for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1,!1}return t}willDrawShadow(){if(xe.prototype.willDrawShadow.call(this))return!0;for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.group&&this.group.isOnACache()}drawObject(t){this._renderBackground(t);for(let n=0;n<this._objects.length;n++){var e;(e=this.canvas)!==null&&e!==void 0&&e.preserveObjectStacking&&this._objects[n].group!==this?(t.save(),t.transform(...Pe(this.calcTransformMatrix())),this._objects[n].render(t),t.restore()):this._objects[n].group===this&&this._objects[n].render(t)}this._drawClipPath(t,this.clipPath)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(t=>t.setCoords())}render(t){this._transformDone=!0,super.render(t),this._transformDone=!1}triggerLayout(t){t&&t.layout&&(t.prevLayout=this.layout,this.layout=t.layout),this._applyLayoutStrategy({type:"imperative",context:t})}_adjustObjectPosition(t,e){t.set({left:t.left+e.x,top:t.top+e.y})}_applyLayoutStrategy(t){const e=t.type==="initialization";if(!e&&!this._firstLayoutDone)return;const n=e&&t.options,i=n&&{angle:n.angle||0,skewX:n.skewX||0,skewY:n.skewY||0},o=this.getRelativeCenterPoint();let l=this.getLayoutStrategyResult(this.layout,[...this._objects],t),c;if(l){const h=new F(l.centerX,l.centerY);c=o.subtract(h).add(new F(l.correctionX||0,l.correctionY||0)).transform(Pe(this.calcOwnMatrix()),!0),this.set({width:l.width,height:l.height}),!t.objectsRelativeToGroup&&this.forEachObject(d=>{d.group===this&&this._adjustObjectPosition(d,c)}),!e&&this.layout!=="clip-path"&&this.clipPath&&!this.clipPath.absolutePositioned&&this._adjustObjectPosition(this.clipPath,c),(!h.eq(o)||i)&&(this.setPositionByOrigin(h,bt,bt),i&&this.set(i),this.setCoords())}else if(e)l={centerX:o.x,centerY:o.y,width:this.width,height:this.height},i&&this.set(i),c=new F;else return;this._firstLayoutDone=!0,this.onLayout(t,l),this.fire("layout",{context:t,result:l,diff:c}),this.group&&this.group._applyLayoutStrategy&&(t.path||(t.path=[]),t.path.push(this),this.group._applyLayoutStrategy(t))}getLayoutStrategyResult(t,e,n){if(t==="fit-content-lazy"&&n.type==="added"&&e.length>n.targets.length){const i=n.targets.concat(this);return this.prepareBoundingBox(t,i,n)}else{if(t==="fit-content"||t==="fit-content-lazy"||t==="fixed"&&(n.type==="initialization"||n.type==="imperative"))return this.prepareBoundingBox(t,e,n);if(t==="clip-path"&&this.clipPath){const i=this.clipPath,o=i._getTransformedDimensions();if(i.absolutePositioned&&(n.type==="initialization"||n.type==="layout_change")){let l=i.getCenterPoint();if(this.group){const c=Pe(this.group.calcTransformMatrix());l=ae(l,c)}return{centerX:l.x,centerY:l.y,width:o.x,height:o.y}}else if(!i.absolutePositioned){let l;const c=i.getRelativeCenterPoint(),h=ae(c,this.calcOwnMatrix(),!0);if(n.type==="initialization"||n.type==="layout_change"){const f=this.prepareBoundingBox(t,e,n)||{};return l=new F(f.centerX||0,f.centerY||0),{centerX:l.x+h.x,centerY:l.y+h.y,correctionX:f.correctionX-h.x,correctionY:f.correctionY-h.y,width:i.width,height:i.height}}else return l=this.getRelativeCenterPoint(),{centerX:l.x+h.x,centerY:l.y+h.y,width:o.x,height:o.y}}}}}prepareBoundingBox(t,e,n){return n.type==="initialization"?this.prepareInitialBoundingBox(t,e,n):n.type==="imperative"&&n.context?D(D({},this.getObjectsBoundingBox(e)||{}),n.context):this.getObjectsBoundingBox(e)}prepareInitialBoundingBox(t,e,n){const i=n.options||{},o=typeof i.left=="number",l=typeof i.top=="number",c=typeof i.width=="number",h=typeof i.height=="number";if(o&&l&&c&&h&&n.objectsRelativeToGroup||e.length===0)return;const f=this.getObjectsBoundingBox(e)||{},{centerX:d=0,centerY:p=0,width:_=0,height:v=0}=f,w=c?this.width:_,E=h?this.height:v,O=new F(d,p),M=new F(Wr(this.originX),Wr(this.originY)),R=new F(w,E),X=this._getTransformedDimensions({width:0,height:0}),B=this._getTransformedDimensions({width:w,height:E,strokeWidth:0}),$=this._getTransformedDimensions({width:f.width,height:f.height,strokeWidth:0}),tt=new F(0,0),nt=M.scalarAdd(.5),ot=B.multiply(nt),it=new F(c?$.x/2:ot.x,h?$.y/2:ot.y),at=new F(o?this.left-(B.x+X.x)*M.x:O.x-it.x,l?this.top-(B.y+X.y)*M.y:O.y-it.y),dt=new F(o?at.x-O.x+$.x*(c?.5:0):-(c?(B.x-X.x)*.5:B.x*nt.x),l?at.y-O.y+$.y*(h?.5:0):-(h?(B.y-X.y)*.5:B.y*nt.y)).add(tt),Lt=new F(c?-B.x/2:0,h?-B.y/2:0).add(dt);return{centerX:at.x,centerY:at.y,correctionX:Lt.x,correctionY:Lt.y,width:R.x,height:R.y}}getObjectsBoundingBox(t,e){if(t.length===0)return null;const n=[];t.forEach(p=>{const _=p.getRelativeCenterPoint();let v=p._getTransformedDimensions().scalarDivide(2);if(p.angle){const w=Qt(p.angle),E=Math.abs(Ve(w)),O=Math.abs(ze(w)),M=v.x*O+v.y*E,R=v.x*E+v.y*O;v=new F(M,R)}n.push(_.subtract(v),_.add(v))});const{left:i,top:o,width:l,height:c}=dr(n),h=new F(l,c),f=(e?new F:new F(i,o)).add(h.scalarDivide(2)),d=f.transform(this.calcOwnMatrix());return{centerX:d.x,centerY:d.y,width:h.x,height:h.y}}onLayout(t,e){}__serializeObjects(t,e){const n=this.includeDefaultValues;return this._objects.filter(function(i){return!i.excludeFromExport}).map(function(i){const o=i.includeDefaultValues;i.includeDefaultValues=n;const l=i[t||"toObject"](e);return i.includeDefaultValues=o,l})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(["layout","subTargetCheck","interactive",...t])),{},{objects:this.__serializeObjects("toObject",t)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this._activeObjects=[],this.forEachObject(t=>{this._watchObject(!1,t),t.dispose()}),super.dispose()}_createSVGBgRect(t){if(!this.backgroundColor)return"";const e=xr.prototype._toSVG.call(this),n=e.indexOf("COMMON_PARTS");e[n]='for="group" ';const i=e.join("");return t?t(i):i}_toSVG(t){const e=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(t);n&&e.push("		",n);for(let i=0;i<this._objects.length;i++)e.push("		",this._objects[i].toSVG(t));return e.push(`</g>
`),e}getSvgStyles(){const t=typeof this.opacity<"u"&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")}toClipPathSVG(t){const e=[],n=this._createSVGBgRect(t);n&&e.push("	",n);for(let i=0;i<this._objects.length;i++)e.push("	",this._objects[i].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}static fromObject(t){let{objects:e=[]}=t,n=Zt(t,JP);return Promise.all([os(e),ho(n)]).then(i=>{let[o,l]=i;return new this(o,D(D({},n),l),!0)})}}A(wr,"stateProperties",[...xe.stateProperties,"layout"]);A(wr,"type","Group");A(wr,"ownDefaults",QP);ut.setClass(wr);class ol extends wr{constructor(){super(...arguments),A(this,"multiSelectionStacking","canvas-stacking")}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...e):e.forEach(i=>{const o=this._objects.findIndex(c=>c.isInFrontOf(i)),l=o===-1?this.size():o;this.insertAt(l,i)})}enterGroup(t,e){if(t.group){const n=t.group;n._exitGroup(t),t.__owningGroup=n}return this._enterGroup(t,e),!0}exitGroup(t,e){this._exitGroup(t,e);const n=t.__owningGroup;n&&(n._enterGroup(t,!0),delete t.__owningGroup)}_onAfterObjectsChange(t,e){super._onAfterObjectsChange(t,e);const n=[];e.forEach(i=>{i.group&&!n.includes(i.group)&&n.push(i.group)}),t==="removed"?n.forEach(i=>{i._onAfterObjectsChange("added",e)}):n.forEach(i=>{i._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}_applyLayoutStrategy(t){super._applyLayoutStrategy(t),this._objects.length===0&&Object.assign(this,{left:0,top:0,angle:0,scaleX:1,scaleY:1,skewX:0,skewY:0,flipX:!1,flipY:!1})}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(t,e,n){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,super._renderControls(t,e);const i=D(D({hasControls:!1},n),{},{forActiveSelection:!0});for(let o=0;o<this._objects.length;o++)this._objects[o]._renderControls(t,i);t.restore()}}A(ol,"type","ActiveSelection");ut.setClass(ol);ut.setClass(ol,"activeSelection");const ZP=(r,t,e)=>r.rotate(e,t);class X0{constructor(t){this.options=t,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new F(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new F(1/this.options.scaleX,1/this.options.scaleY):new F(1,1)}createSideVector(t,e){const n=Aa(t,e);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(t,e,n){return this.applySkew(t.add(this.calcOrthogonalProjection(t,e,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(t){const e=new F(t);return e.y+=e.x*Math.tan(Qt(this.options.skewY)),e.x+=e.y*Math.tan(Qt(this.options.skewX)),e}scaleUnitVector(t,e){return t.multiply(this.strokeUniformScalar).scalarMultiply(e)}}const tD=new F;class Qi extends X0{static getOrthogonalRotationFactor(t,e){const n=e?ka(t,e):v0(t);return Math.abs(n)<_r?-1:1}constructor(t,e,n,i){super(i),A(this,"AB",void 0),A(this,"AC",void 0),A(this,"alpha",void 0),A(this,"bisector",void 0),this.A=new F(t),this.B=new F(e),this.C=new F(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=ka(this.AB,this.AC),this.bisector=nl(ou(this.AB.eq(tD)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(t,e),o=au(i),l=Qi.getOrthogonalRotationFactor(o,this.bisector);return this.scaleUnitVector(o,n*l)}projectBevel(){const t=[];return(this.alpha%pr===0?[this.B]:[this.B,this.C]).forEach(e=>{t.push(this.projectOrthogonally(this.A,e)),t.push(this.projectOrthogonally(this.A,e,-this.strokeProjectionMagnitude))}),t}projectMiter(){const t=[],e=Math.abs(this.alpha),n=1/Math.sin(e/2),i=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),o=this.options.strokeUniform?Ma(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return Ma(i)/this.strokeProjectionMagnitude<=o&&t.push(this.applySkew(this.A.add(i))),t.push(...this.projectBevel()),t}projectRoundNoSkew(t,e){const n=[],i=new F(Qi.getOrthogonalRotationFactor(this.bisector),Qi.getOrthogonalRotationFactor(new F(this.bisector.y,this.bisector.x))),o=new F(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i),l=new F(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i);return[o,l].forEach(c=>{fh(c,t,e)&&n.push(this.A.add(c))}),n}projectRoundWithSkew(t,e){const n=[],{skewX:i,skewY:o,scaleX:l,scaleY:c,strokeUniform:h}=this.options,f=new F(Math.tan(Qt(i)),Math.tan(Qt(o))),d=this.strokeProjectionMagnitude,p=h?d/c/Math.sqrt(1/c**2+1/l**2*f.y**2):d/Math.sqrt(1+f.y**2),_=new F(Math.sqrt(Math.max(d**2-p**2,0)),p),v=h?d/Math.sqrt(1+f.x**2*(1/c)**2/(1/l+1/l*f.x*f.y)**2):d/Math.sqrt(1+f.x**2/(1+f.x*f.y)**2),w=new F(v,Math.sqrt(Math.max(d**2-v**2,0)));return[w,w.scalarMultiply(-1),_,_.scalarMultiply(-1)].map(E=>this.applySkew(h?E.multiply(this.strokeUniformScalar):E)).forEach(E=>{fh(E,t,e)&&n.push(this.applySkew(this.A).add(E))}),n}projectRound(){const t=[];t.push(...this.projectBevel());const e=this.alpha%pr===0,n=this.applySkew(this.A),i=t[e?0:2].subtract(n),o=t[e?1:0].subtract(n),l=e?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),c=Ji(i,l)>0,h=c?i:o,f=c?o:i;return this.isSkewed()?t.push(...this.projectRoundWithSkew(h,f)):t.push(...this.projectRoundNoSkew(h,f)),t}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t,angle:this.alpha,bisector:this.bisector}))}}class Pp extends X0{constructor(t,e,n){super(n),this.A=new F(t),this.T=new F(e)}calcOrthogonalProjection(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(t,e);return this.scaleUnitVector(au(i),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const t=[];if(!this.isSkewed()&&this.A.eq(this.T)){const e=new F(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.applySkew(this.A.add(e)),this.applySkew(this.A.subtract(e)))}else t.push(...new Qi(this.A,this.T,this.T,this.options).projectRound());return t}projectSquare(){const t=[];if(this.A.eq(this.T)){const e=new F(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.A.add(e),this.A.subtract(e))}else{const e=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(nl(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),i=this.A.add(n);t.push(i.add(e),i.subtract(e))}return t.map(e=>this.applySkew(e))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t}))}}const H0=function(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const n=[];if(r.length===0)return n;const i=r.reduce((o,l)=>(o[o.length-1].eq(l)||o.push(new F(l)),o),[new F(r[0])]);if(i.length===1)e=!0;else if(!e){const o=i[0],l=G2(i,c=>!c.eq(o));i.splice(l+1)}return i.forEach((o,l,c)=>{let h,f;l===0?(f=c[1],h=e?o:c[c.length-1]):l===c.length-1?(h=c[l-1],f=e?o:c[0]):(h=c[l-1],f=c[l+1]),e&&c.length===1?n.push(...new Pp(o,o,t).project()):e&&(l===0||l===c.length-1)?n.push(...new Pp(o,l===0?f:h,t).project()):n.push(...new Qi(o,h,f,t).project())}),n},al=function(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return r.fill!==t.fill||r.stroke!==t.stroke||r.strokeWidth!==t.strokeWidth||r.fontSize!==t.fontSize||r.fontFamily!==t.fontFamily||r.fontWeight!==t.fontWeight||r.fontStyle!==t.fontStyle||r.textBackgroundColor!==t.textBackgroundColor||r.deltaY!==t.deltaY||e&&(r.overline!==t.overline||r.underline!==t.underline||r.linethrough!==t.linethrough)},Y0=(r,t)=>{const e=t.split(`
`),n=[];let i=-1,o={};r=fs(r);for(let l=0;l<e.length;l++){if(!r[l]){i+=e[l].length,o={};continue}for(let c=0;c<e[l].length;c++){i++;const h=r[l][c];h&&Object.keys(h).length>0&&(al(o,h,!0)?n.push({start:i,end:i+1,style:h}):n[n.length-1].end++),o=h||{}}}return n},U0=(r,t)=>{if(!Array.isArray(r))return fs(r);const e=t.split(zh),n={};let i=-1,o=0;for(let l=0;l<e.length;l++)for(let c=0;c<e[l].length;c++)i++,r[o]&&r[o].start<=i&&i<r[o].end&&(n[l]=n[l]||{},n[l][c]=D({},r[o].style),i===r[o].end-1&&o++);return n},eD=r=>r&&r.length===1?r[0]:new wr(r),N0=(r,t)=>Math.min(t.width/r.width,t.height/r.height),z0=(r,t)=>Math.max(t.width/r.width,t.height/r.height),nD=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return"".concat(r.charAt(0).toUpperCase()).concat(t?r.slice(1):r.slice(1).toLowerCase())},V0=r=>r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),G0=r=>{const t=[];for(let e=0,n;e<r.length;e++)(n=rD(r,e))!==!1&&t.push(n);return t},rD=(r,t)=>{const e=r.charCodeAt(t);if(isNaN(e))return"";if(e<55296||e>57343)return r.charAt(t);if(55296<=e&&e<=56319){if(r.length<=t+1)throw"High surrogate without following low surrogate";const i=r.charCodeAt(t+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return r.charAt(t)+r.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";const n=r.charCodeAt(t-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1};var iD=Object.freeze({__proto__:null,capitalize:nD,escapeXml:V0,graphemeSplit:G0}),Dp;const Jt="(".concat(ao,")"),sD="(M) (?:".concat(Jt," ").concat(Jt," ?)+"),oD="(L) (?:".concat(Jt," ").concat(Jt," ?)+"),aD="(H) (?:".concat(Jt," ?)+"),lD="(V) (?:".concat(Jt," ?)+"),cD=String.raw(Dp||(Dp=Jn(["(Z)s*"],["(Z)\\s*"]))),hD="(C) (?:".concat(Jt," ").concat(Jt," ").concat(Jt," ").concat(Jt," ").concat(Jt," ").concat(Jt," ?)+"),uD="(S) (?:".concat(Jt," ").concat(Jt," ").concat(Jt," ").concat(Jt," ?)+"),fD="(Q) (?:".concat(Jt," ").concat(Jt," ").concat(Jt," ").concat(Jt," ?)+"),dD="(T) (?:".concat(Jt," ").concat(Jt," ?)+"),gD="(A) (?:".concat(Jt," ").concat(Jt," ").concat(Jt," ([01]) ?([01]) ").concat(Jt," ").concat(Jt," ?)+"),Ap="(?:(?:".concat(sD,")")+"|(?:".concat(oD,")")+"|(?:".concat(aD,")")+"|(?:".concat(lD,")")+"|(?:".concat(cD,")")+"|(?:".concat(hD,")")+"|(?:".concat(uD,")")+"|(?:".concat(fD,")")+"|(?:".concat(dD,")")+"|(?:".concat(gD,"))"),pD={m:"l",M:"L"},mD=(r,t,e,n,i,o,l,c,h,f,d)=>{const p=ze(r),_=Ve(r),v=ze(t),w=Ve(t),E=e*i*v-n*o*w+l,O=n*i*v+e*o*w+c,M=f+h*(-e*i*_-n*o*p),R=d+h*(-n*i*_+e*o*p),X=E+h*(e*i*w+n*o*v),B=O+h*(n*i*w-e*o*v);return["C",M,R,X,B,E,O]},_D=(r,t,e,n,i,o,l)=>{if(e===0||n===0)return[];let c=0,h=0,f=0;const d=Math.PI,p=l*Uh,_=Ve(p),v=ze(p),w=.5*(-v*r-_*t),E=.5*(-v*t+_*r),O=e**2,M=n**2,R=E**2,X=w**2,B=O*M-O*R-M*X;let $=Math.abs(e),tt=Math.abs(n);if(B<0){const vt=Math.sqrt(1-B/(O*M));$*=vt,tt*=vt}else f=(i===o?-1:1)*Math.sqrt(B/(O*R+M*X));const nt=f*$*E/tt,ot=-f*tt*w/$,it=v*nt-_*ot+r*.5,at=_*nt+v*ot+t*.5;let dt=Mp(1,0,(w-nt)/$,(E-ot)/tt),Lt=Mp((w-nt)/$,(E-ot)/tt,(-w-nt)/$,(-E-ot)/tt);o===0&&Lt>0?Lt-=2*d:o===1&&Lt<0&&(Lt+=2*d);const Tt=Math.ceil(Math.abs(Lt/d*2)),Ft=new Array(Tt),Xt=Lt/Tt,Mt=8/3*Math.sin(Xt/4)*Math.sin(Xt/4)/Math.sin(Xt/2);let Ct=dt+Xt;for(let vt=0;vt<Tt;vt++)Ft[vt]=mD(dt,Ct,v,_,$,tt,it,at,Mt,c,h),c=Ft[vt][5],h=Ft[vt][6],dt=Ct,Ct+=Xt;return Ft},Mp=(r,t,e,n)=>{const i=Math.atan2(t,r),o=Math.atan2(n,e);return o>=i?o-i:2*Math.PI-(i-o)},vD=r=>r**3,yD=r=>3*r**2*(1-r),xD=r=>3*r*(1-r)**2,wD=r=>(1-r)**3;function vh(r,t,e,n,i,o,l,c){let h;if(At.cachesBoundsOfCurve&&(h=[...arguments].join(),zs.boundsOfCurveCache[h]))return zs.boundsOfCurveCache[h];const f=Math.sqrt,d=Math.abs,p=[],_=[[0,0],[0,0]];let v=6*r-12*e+6*i,w=-3*r+9*e-9*i+3*l,E=3*e-3*r;for(let B=0;B<2;++B){if(B>0&&(v=6*t-12*n+6*o,w=-3*t+9*n-9*o+3*c,E=3*n-3*t),d(w)<1e-12){if(d(v)<1e-12)continue;const it=-E/v;0<it&&it<1&&p.push(it);continue}const $=v*v-4*E*w;if($<0)continue;const tt=f($),nt=(-v+tt)/(2*w);0<nt&&nt<1&&p.push(nt);const ot=(-v-tt)/(2*w);0<ot&&ot<1&&p.push(ot)}let O=p.length;const M=O,R=K0(r,t,e,n,i,o,l,c);for(;O--;){const{x:B,y:$}=R(p[O]);_[0][O]=B,_[1][O]=$}_[0][M]=r,_[1][M]=t,_[0][M+1]=l,_[1][M+1]=c;const X=[new F(Math.min(..._[0]),Math.min(..._[1])),new F(Math.max(..._[0]),Math.max(..._[1]))];return At.cachesBoundsOfCurve&&(zs.boundsOfCurveCache[h]=X),X}const CD=(r,t,e)=>{let[n,i,o,l,c,h,f,d]=e;const p=_D(f-r,d-t,i,o,c,h,l);for(let _=0,v=p.length;_<v;_++)p[_][1]+=r,p[_][2]+=t,p[_][3]+=r,p[_][4]+=t,p[_][5]+=r,p[_][6]+=t;return p},$0=r=>{let t=0,e=0,n=0,i=0;const o=[];let l,c=0,h=0;for(const f of r){const d=[...f];let p;switch(d[0]){case"l":d[1]+=t,d[2]+=e;case"L":t=d[1],e=d[2],p=["L",t,e];break;case"h":d[1]+=t;case"H":t=d[1],p=["L",t,e];break;case"v":d[1]+=e;case"V":e=d[1],p=["L",t,e];break;case"m":d[1]+=t,d[2]+=e;case"M":t=d[1],e=d[2],n=d[1],i=d[2],p=["M",t,e];break;case"c":d[1]+=t,d[2]+=e,d[3]+=t,d[4]+=e,d[5]+=t,d[6]+=e;case"C":c=d[3],h=d[4],t=d[5],e=d[6],p=["C",d[1],d[2],c,h,t,e];break;case"s":d[1]+=t,d[2]+=e,d[3]+=t,d[4]+=e;case"S":l==="C"?(c=2*t-c,h=2*e-h):(c=t,h=e),t=d[3],e=d[4],p=["C",c,h,d[1],d[2],t,e],c=p[3],h=p[4];break;case"q":d[1]+=t,d[2]+=e,d[3]+=t,d[4]+=e;case"Q":c=d[1],h=d[2],t=d[3],e=d[4],p=["Q",c,h,t,e];break;case"t":d[1]+=t,d[2]+=e;case"T":l==="Q"?(c=2*t-c,h=2*e-h):(c=t,h=e),t=d[1],e=d[2],p=["Q",c,h,t,e];break;case"a":d[6]+=t,d[7]+=e;case"A":CD(t,e,d).forEach(_=>o.push(_)),t=d[6],e=d[7];break;case"z":case"Z":t=n,e=i,p=["Z"];break}p?(o.push(p),l=p[0]):l=""}return o},La=(r,t,e,n)=>Math.sqrt((e-r)**2+(n-t)**2),K0=(r,t,e,n,i,o,l,c)=>h=>{const f=vD(h),d=yD(h),p=xD(h),_=wD(h);return new F(l*f+i*d+e*p+r*_,c*f+o*d+n*p+t*_)},q0=r=>r**2,J0=r=>2*r*(1-r),Q0=r=>(1-r)**2,SD=(r,t,e,n,i,o,l,c)=>h=>{const f=q0(h),d=J0(h),p=Q0(h),_=3*(p*(e-r)+d*(i-e)+f*(l-i)),v=3*(p*(n-t)+d*(o-n)+f*(c-o));return Math.atan2(v,_)},bD=(r,t,e,n,i,o)=>l=>{const c=q0(l),h=J0(l),f=Q0(l);return new F(i*c+e*h+r*f,o*c+n*h+t*f)},TD=(r,t,e,n,i,o)=>l=>{const c=1-l,h=2*(c*(e-r)+l*(i-e)),f=2*(c*(n-t)+l*(o-n));return Math.atan2(f,h)},kp=(r,t,e)=>{let n=new F(t,e),i=0;for(let o=1;o<=100;o+=1){const l=r(o/100);i+=La(n.x,n.y,l.x,l.y),n=l}return i},Lp=(r,t)=>{let e=0,n=0,i={x:r.x,y:r.y},o=D({},i),l,c=.01,h=0;const f=r.iterator,d=r.angleFinder;for(;n<t&&c>1e-4;)o=f(e),h=e,l=La(i.x,i.y,o.x,o.y),l+n>t?(e-=c,c/=2):(i=o,e+=c,n+=l);return D(D({},o),{},{angle:d(h)})},fu=r=>{let t=0,e=0,n=0,i=0,o=0,l,c;const h=[];for(const f of r){const d={x:e,y:n,command:f[0],length:0};switch(f[0]){case"M":c=d,c.x=i=e=f[1],c.y=o=n=f[2];break;case"L":c=d,c.length=La(e,n,f[1],f[2]),e=f[1],n=f[2];break;case"C":l=K0(e,n,f[1],f[2],f[3],f[4],f[5],f[6]),c=d,c.iterator=l,c.angleFinder=SD(e,n,f[1],f[2],f[3],f[4],f[5],f[6]),c.length=kp(l,e,n),e=f[5],n=f[6];break;case"Q":l=bD(e,n,f[1],f[2],f[3],f[4]),c=d,c.iterator=l,c.angleFinder=TD(e,n,f[1],f[2],f[3],f[4]),c.length=kp(l,e,n),e=f[3],n=f[4];break;case"Z":c=d,c.destX=i,c.destY=o,c.length=La(e,n,i,o),e=i,n=o;break}t+=c.length,h.push(c)}return h.push({length:t,x:e,y:n}),h},Z0=function(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fu(r),n=0;for(;t-e[n].length>0&&n<e.length-2;)t-=e[n].length,n++;const i=e[n],o=t/i.length,l=r[n];switch(i.command){case"M":return{x:i.x,y:i.y,angle:0};case"Z":return D(D({},new F(i.x,i.y).lerp(new F(i.destX,i.destY),o)),{},{angle:Math.atan2(i.destY-i.y,i.destX-i.x)});case"L":return D(D({},new F(i.x,i.y).lerp(new F(l[1],l[2]),o)),{},{angle:Math.atan2(l[2]-i.y,l[1]-i.x)});case"C":return Lp(i,t);case"Q":return Lp(i,t)}},t_=r=>{r=j0(r);const t=[];for(const e of r.matchAll(new RegExp(Ap,"gi"))){let n=e[0];const i=[];let o;do{if(o=new RegExp(Ap,"i").exec(n),!o)break;const l=o.filter(h=>h);l.shift();const c=l.map(h=>{const f=Number.parseFloat(h);return Number.isNaN(f)?h:f});if(i.push(c),l.length<=1)break;l.shift(),n=n.replace(new RegExp("".concat(l.join(" ?")," ?$")),"")}while(o);i.reverse().forEach((l,c)=>{const h=pD[l[0]];c>0&&(h=="l"||h=="L")&&(l[0]=h),t.push(l)})}return t},OD=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=new F(r[0]),n=new F(r[1]),i=1,o=0;const l=[],c=r.length,h=c>2;h&&(i=r[2].x<n.x?-1:r[2].x===n.x?0:1,o=r[2].y<n.y?-1:r[2].y===n.y?0:1),l.push(["M",e.x-i*t,e.y-o*t]);let f;for(f=1;f<c;f++){if(!e.eq(n)){const d=e.midPointFrom(n);l.push(["Q",e.x,e.y,d.x,d.y])}e=r[f],f+1<r.length&&(n=r[f+1])}return h&&(i=e.x>r[f-2].x?1:e.x===r[f-2].x?0:-1,o=e.y>r[f-2].y?1:e.y===r[f-2].y?0:-1),l.push(["L",e.x+i*t,e.y+o*t]),l},ED=(r,t,e)=>(e&&(t=De(t,[1,0,0,1,-e.x,-e.y])),r.map(n=>{const i=[...n];for(let o=1;o<n.length-1;o+=2){const{x:l,y:c}=ae({x:n[o],y:n[o+1]},t);i[o]=l,i[o+1]=c}return i})),PD=(r,t)=>{const e=Math.PI*2/r;let n=-_r;r%2===0&&(n+=e/2);const i=new Array(r+1);for(let o=0;o<r;o++){const l=o*e+n,{x:c,y:h}=new F(ze(l),Ve(l)).scalarMultiply(t);i[o]=[o===0?"M":"L",c,h]}return i[r]=["Z"],i},e_=(r,t)=>r.map(e=>e.map((n,i)=>i===0||t===void 0?n:Wt(n,t)).join(" ")).join(" "),DD=(r,t)=>{var e;let n=r,i=t;n.inverted&&!i.inverted&&(n=t,i=r),eu(i,(e=i.group)===null||e===void 0?void 0:e.calcTransformMatrix(),n.calcTransformMatrix());const o=n.inverted&&i.inverted;return o&&(n.inverted=i.inverted=!1),new wr([n],{clipPath:i,inverted:o})};function AD(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e=t.onComplete||mi,n=new(fi()).XMLHttpRequest,i=t.signal,o=function(){n.abort()},l=function(){i&&i.removeEventListener("abort",o),n.onerror=n.ontimeout=mi};if(i&&i.aborted)throw new Error("`options.signal` is in `aborted` state");return i&&i.addEventListener("abort",o,{once:!0}),n.onreadystatechange=function(){n.readyState===4&&(l(),e(n),n.onreadystatechange=mi)},n.onerror=n.ontimeout=l,n.open("get",r,!0),n.send(),n}const MD=r=>{if(r.transformMatrix){const{scaleX:t,scaleY:e,angle:n,skewX:i}=vi(r.transformMatrix);r.flipX=!1,r.flipY=!1,r.set("scaleX",t),r.set("scaleY",e),r.angle=n,r.skewX=i,r.skewY=0}},kD=(r,t)=>{let e=r._findCenterFromElement();r.transformMatrix&&(MD(r),e=e.transform(r.transformMatrix)),delete r.transformMatrix,t&&(r.scaleX*=t.scaleX,r.scaleY*=t.scaleY,r.cropX=t.cropX,r.cropY=t.cropY,e.x+=t.offsetLeft,e.y+=t.offsetTop,r.width=t.width,r.height=t.height),r.setPositionByOrigin(e,bt,bt)};var LD=Object.freeze({__proto__:null,addTransformToObject:o0,animate:su,animateColor:m0,applyTransformToObject:as,calcAngleBetweenVectors:ka,calcDimensionsMatrix:el,calcPlaneChangeMatrix:Zh,calcVectorRotation:v0,cancelAnimFrame:$m,capValue:yi,composeMatrix:Jm,copyCanvasElement:J2,cos:ze,createCanvasElement:ce,createImage:Km,createRotateMatrix:co,createScaleMatrix:Gh,createSkewXMatrix:$h,createSkewYMatrix:Kh,createTranslateMatrix:lo,createVector:Aa,crossProduct:Ji,degreesToRadians:Qt,dotProduct:y0,ease:$E,enlivenObjectEnlivables:ho,enlivenObjects:os,findScaleToCover:z0,findScaleToFit:N0,getBoundsOfCurve:vh,getOrthonormalVector:au,getPathSegmentsInfo:fu,getPointOnPath:Z0,getPointer:s0,getRandomInt:$2,getRegularPolygonPath:PD,getSmoothPathFromPoints:OD,getSvgAttributes:iE,getUnitVector:nl,groupSVGElements:eD,hasStyleChanged:al,invertTransform:Pe,isBetweenVectors:fh,isIdentityMatrix:tE,isTouchEvent:Pa,isTransparent:I0,joinPath:e_,loadImage:Gs,magnitude:Ma,makeBoundingBoxFromPoints:dr,makePathSimpler:$0,matrixToSVG:io,mergeClipPaths:DD,multiplyTransformMatrices:De,multiplyTransformMatrixArray:tl,parsePath:t_,parsePreserveAspectRatioAttribute:Zm,parseUnit:_i,pick:wi,projectStrokeOnPoints:H0,qrDecompose:vi,radiansToDegrees:ss,removeFromArray:hi,removeTransformFromObject:pE,removeTransformMatrixForSvgParsing:kD,request:AD,requestAnimFrame:Vs,resetObjectTransform:qh,rotatePoint:ZP,rotateVector:ou,saveObjectTransform:Jh,sendObjectToPlane:eu,sendPointToPlane:tu,setStyle:oo,sin:Ve,sizeAfterTransform:Qh,string:iD,stylesFromArray:U0,stylesToArray:Y0,toDataURL:Vh,toFixed:Wt,transformPath:ED,transformPoint:ae,transformPointRelativeToCanvas:mE});class RD extends i0{constructor(t){let{allowTouchScrolling:e=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t),A(this,"upper",void 0),A(this,"container",void 0);const{el:i}=this.lower,o=this.createUpperCanvas();this.upper={el:o,ctx:o.getContext("2d")},this.applyCanvasStyle(i,{allowTouchScrolling:e}),this.applyCanvasStyle(o,{allowTouchScrolling:e});const l=this.createContainerElement();l.classList.add(n),i.parentNode&&i.parentNode.replaceChild(l,i),l.append(i,o),this.container=l}createUpperCanvas(){const{el:t}=this.lower,e=ce();return e.className=t.className,e.classList.remove("lower-canvas"),e.classList.add("upper-canvas"),e.setAttribute("data-fabric","top"),e.style.cssText=t.style.cssText,e.setAttribute("draggable","true"),e}createContainerElement(){const t=us().createElement("div");return t.setAttribute("data-fabric","wrapper"),oo(t,{position:"relative"}),mp(t),t}applyCanvasStyle(t,e){let{allowTouchScrolling:n}=e;oo(t,{position:"absolute",left:"0",top:"0"}),cE(t,n),mp(t)}setDimensions(t,e){super.setDimensions(t,e);const{el:n,ctx:i}=this.upper;r0(n,i,t,e)}setCSSDimensions(t){super.setCSSDimensions(t),hh(this.upper.el,t),hh(this.container,t)}cleanupDOM(t){const e=this.container,{el:n}=this.lower,{el:i}=this.upper;super.cleanupDOM(t),e.removeChild(i),e.removeChild(n),e.parentNode&&e.parentNode.replaceChild(n,e)}dispose(){super.dispose(),qn().dispose(this.upper.el),delete this.upper,delete this.container}}const FD={uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1},ID=["activeSelection"];class ll extends uo{static getDefaults(){return D(D({},super.getDefaults()),ll.ownDefaults)}get upperCanvasEl(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.el}get contextTop(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.ctx}get wrapperEl(){return this.elements.container}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{activeSelection:n=new ol}=e,i=Zt(e,ID);super(t,i),A(this,"targets",[]),A(this,"_hoveredTargets",[]),A(this,"_objectsToRender",[]),A(this,"_currentTransform",null),A(this,"_groupSelector",null),A(this,"contextTopDirty",!1),A(this,"_activeSelection",void 0),this._activeSelection=n,this._activeSelection.set("canvas",this),this._activeSelection.setCoords()}initElements(t){this.elements=new RD(t,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(t){this._objectsToRender=void 0,super._onObjectAdded(t)}_onObjectRemoved(t){this._objectsToRender=void 0,t===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[t]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[t]}),t.fire("deselected",{target:t})),t===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(t)}_chooseObjectsToRender(){const t=this._activeObject;return!this.preserveObjectStacking&&t?this._objects.filter(e=>!e.group&&e!==t).concat(t):this._objects}renderAll(){this.cancelRequestedRender(),!this.destroyed&&(this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()}renderTop(){const t=this.contextTop;this.clearContext(t),this.renderTopLayer(t),this.fire("after:render",{ctx:t})}_normalizePointer(t,e){return ae(this.restorePointerVpt(e),Pe(t.calcTransformMatrix()))}setTargetFindTolerance(t){t=Math.round(t),this.targetFindTolerance=t;const e=this.getRetinaScaling(),n=Math.ceil((t*2+1)*e);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(e,e)}isTargetTransparent(t,e,n){const i=this.targetFindTolerance,o=this.pixelFindContext;this.clearContext(o),o.save(),o.translate(-e+i,-n+i),o.transform(...this.viewportTransform);const l=t.selectionBackgroundColor;t.selectionBackgroundColor="",t.render(o),t.selectionBackgroundColor=l,o.restore();const c=Math.round(i*this.getRetinaScaling());return I0(o,c,c,c)}_isSelectionKeyPressed(t){const e=this.selectionKey;return e?Array.isArray(e)?!!e.find(n=>!!n&&t[n]===!0):t[e]:!1}_shouldClearSelection(t,e){const n=this.getActiveObjects(),i=this._activeObject;return!!(!e||e&&i&&n.length>1&&n.indexOf(e)===-1&&i!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&i&&i!==e)}_shouldCenterTransform(t,e,n){if(!t)return;let i;return e==="scale"||e==="scaleX"||e==="scaleY"||e==="resizing"?i=this.centeredScaling||t.centeredScaling:e==="rotate"&&(i=this.centeredRotation||t.centeredRotation),i?!n:n}_getOriginFromCorner(t,e){const n={x:t.originX,y:t.originY};return["ml","tl","bl"].includes(e)?n.x=pe:["mr","tr","br"].includes(e)&&(n.x=Ut),["tl","mt","tr"].includes(e)?n.y=ah:["bl","mb","br"].includes(e)&&(n.y=Ie),n}_setupCurrentTransform(t,e,n){if(!e)return;const i=e.group?tu(this.getPointer(t),void 0,e.group.calcTransformMatrix()):this.getPointer(t),o=e.getActiveControl()||"",l=!!o&&e.controls[o],c=n&&l?l.getActionHandler(t,e,l):u0,h=vE(n,o,t,e),f=this._getOriginFromCorner(e,o),d=t[this.centeredKey],p={target:e,action:h,actionHandler:c,actionPerformed:!1,corner:o,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:i.x-e.left,offsetY:i.y-e.top,originX:f.x,originY:f.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,theta:Qt(e.angle),width:e.width,height:e.height,shiftKey:t.shiftKey,altKey:d,original:D(D({},Jh(e)),{},{originX:f.x,originY:f.y})};this._shouldCenterTransform(e,h,d)&&(p.originX=bt,p.originY=bt),this._currentTransform=p,this._beforeTransform(t)}setCursor(t){this.upperCanvasEl.style.cursor=t}_drawSelection(t){const{x:e,y:n,deltaX:i,deltaY:o}=this._groupSelector,l=new F(e,n).transform(this.viewportTransform),c=new F(e+i,n+o).transform(this.viewportTransform),h=this.selectionLineWidth/2;let f=Math.min(l.x,c.x),d=Math.min(l.y,c.y),p=Math.max(l.x,c.x),_=Math.max(l.y,c.y);this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(f,d,p-f,_-d)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,f+=h,d+=h,p-=h,_-=h,xe.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(f,d,p-f,_-d))}findTarget(t){if(this.skipTargetFind)return;const e=this.getPointer(t,!0),n=this._activeObject,i=this.getActiveObjects();if(this.targets=[],n&&i.length>=1){if(n._findTargetCorner(e,Pa(t)))return n;if(i.length>1&&this.searchPossibleTargets([n],e))return n;if(n===this.searchPossibleTargets([n],e))if(this.preserveObjectStacking){const o=this.targets;this.targets=[];const l=this.searchPossibleTargets(this._objects,e);return t[this.altSelectionKey]&&l&&l!==n?(this.targets=o,n):l}else return n}return this.searchPossibleTargets(this._objects,e)}_checkTarget(t,e,n){if(e&&e.visible&&e.evented&&e.containsPoint(t))if((this.perPixelTargetFind||e.perPixelTargetFind)&&!e.isEditing){if(!this.isTargetTransparent(e,n.x,n.y))return!0}else return!0;return!1}_searchPossibleTargets(t,e){let n,i=t.length;for(;i--;){const o=t[i],l=o.group?this._normalizePointer(o.group,e):e;if(this._checkTarget(l,o,e)){if(n=t[i],ch(n)&&n.subTargetCheck){const c=this._searchPossibleTargets(n._objects,e);c&&this.targets.push(c)}break}}return n}searchPossibleTargets(t,e){const n=this._searchPossibleTargets(t,e);return n&&ch(n)&&n.interactive&&this.targets[0]?this.targets[0]:n}restorePointerVpt(t){return t.transform(Pe(this.viewportTransform))}getPointer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this._absolutePointer&&!e)return this._absolutePointer;if(this._pointer&&e)return this._pointer;const n=this.upperCanvasEl,i=n.getBoundingClientRect();let o=s0(t),l=i.width||0,c=i.height||0;(!l||!c)&&(Ie in i&&ah in i&&(c=Math.abs(i.top-i.bottom)),pe in i&&Ut in i&&(l=Math.abs(i.right-i.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,e||(o=this.restorePointerVpt(o));const h=this.getRetinaScaling();h!==1&&(o.x/=h,o.y/=h);const f=l===0||c===0?new F(1,1):new F(n.width/l,n.height/c);return o.multiply(f)}_setDimensionsImpl(t,e){this._resetTransformEventData(),super._setDimensionsImpl(t,e),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=ce(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveSelection(){return this._activeSelection}getActiveObjects(){const t=this._activeObject;return t?t===this._activeSelection?[...t._objects]:[t]:[]}_fireSelectionEvents(t,e){let n=!1,i=!1;const o=this.getActiveObjects(),l=[],c=[];t.forEach(h=>{o.includes(h)||(n=!0,h.fire("deselected",{e,target:h}),c.push(h))}),o.forEach(h=>{t.includes(h)||(n=!0,h.fire("selected",{e,target:h}),l.push(h))}),t.length>0&&o.length>0?(i=!0,n&&this.fire("selection:updated",{e,selected:l,deselected:c})):o.length>0?(i=!0,this.fire("selection:created",{e,selected:l})):t.length>0&&(i=!0,this.fire("selection:cleared",{e,deselected:c})),i&&(this._objectsToRender=void 0)}setActiveObject(t,e){const n=this.getActiveObjects(),i=this._setActiveObject(t,e);return this._fireSelectionEvents(n,e),i}_setActiveObject(t,e){return this._activeObject===t||!this._discardActiveObject(e,t)&&this._activeObject||t.onSelect({e})?!1:(this._activeObject=t,!0)}_discardActiveObject(t,e){const n=this._activeObject;return n?n.onDeselect({e:t,object:e})?!1:(n===this._activeSelection&&(this._activeSelection.removeAll(),qh(this._activeSelection)),this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(t),this._activeObject=void 0,!0):!1}discardActiveObject(t){const e=this.getActiveObjects(),n=this.getActiveObject();e.length&&this.fire("before:selection:cleared",{e:t,deselected:[n]});const i=this._discardActiveObject(t);return this._fireSelectionEvents(e,t),i}setViewportTransform(t){super.setViewportTransform(t);const e=this._activeObject;e&&e.setCoords()}destroy(){const t=this._activeSelection;t.removeAll(),this._activeSelection=void 0,t.dispose(),super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(t){const e=this._activeObject;e&&e._renderControls(t)}_toObject(t,e,n){const i=this._realizeGroupTransformOnObject(t),o=super._toObject(t,e,n);return t.set(i),o}_realizeGroupTransformOnObject(t){if(t.group&&t.group===this._activeSelection&&this._activeObject===t.group){const n=wi(t,["angle","flipX","flipY",Ut,"scaleX","scaleY","skewX","skewY",Ie]);return o0(t,this._activeObject.calcOwnMatrix()),n}else return{}}_setSVGObject(t,e,n){const i=this._realizeGroupTransformOnObject(e);super._setSVGObject(t,e,n),e.set(i)}}A(ll,"ownDefaults",FD);class BD{constructor(t){A(this,"targets",[]),A(this,"__disposer",void 0);const e=()=>{const i=t.getActiveObject();xa(i)&&i.hiddenTextarea&&i.hiddenTextarea.focus()},n=t.upperCanvasEl;n.addEventListener("click",e),this.__disposer=()=>n.removeEventListener("click",e)}exitTextEditing(){this.target=void 0,this.targets.forEach(t=>{t.isEditing&&t.exitEditing()})}add(t){this.targets.push(t)}remove(t){this.unregister(t),hi(this.targets,t)}register(t){this.target=t}unregister(t){t===this.target&&(this.target=void 0)}onMouseMove(t){var e;!((e=this.target)===null||e===void 0)&&e.isEditing&&this.target.updateSelectionOnMouseMove(t)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const jD=["target","oldTarget","fireCanvas","e"],un={passive:!1};function ga(r,t){return!!r.button&&r.button===t-1}const Ir=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return r.addEventListener(...e)},bn=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return r.removeEventListener(...e)},WD={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class yh extends ll{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,e),A(this,"_isClick",void 0),A(this,"textEditingManager",new BD(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(n=>{this[n]=this[n].bind(this)}),this.addOrRemove(Ir,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(t,e){const n=this.upperCanvasEl,i=this._getEventPrefix();t(n0(n),"resize",this._onResize),t(n,i+"down",this._onMouseDown),t(n,"".concat(i,"move"),this._onMouseMove,un),t(n,"".concat(i,"out"),this._onMouseOut),t(n,"".concat(i,"enter"),this._onMouseEnter),t(n,"wheel",this._onMouseWheel),t(n,"contextmenu",this._onContextMenu),t(n,"dblclick",this._onDoubleClick),t(n,"dragstart",this._onDragStart),t(n,"dragend",this._onDragEnd),t(n,"dragover",this._onDragOver),t(n,"dragenter",this._onDragEnter),t(n,"dragleave",this._onDragLeave),t(n,"drop",this._onDrop),this.enablePointerEvents||t(n,"touchstart",this._onTouchStart,un)}removeListeners(){this.addOrRemove(bn,"remove");const t=this._getEventPrefix(),e=Fn(this.upperCanvasEl);bn(e,"".concat(t,"up"),this._onMouseUp),bn(e,"touchend",this._onTouchEnd,un),bn(e,"".concat(t,"move"),this._onMouseMove,un),bn(e,"touchmove",this._onMouseMove,un)}_onMouseWheel(t){this.__onMouseWheel(t)}_onMouseOut(t){const e=this._hoveredTarget,n={e:t,isClick:!1,pointer:this.getPointer(t,!0),absolutePointer:this.getPointer(t)};this.fire("mouse:out",D(D({},n),{},{target:e})),this._hoveredTarget=void 0,e&&e.fire("mouseout",D({},n)),this._hoveredTargets.forEach(i=>{this.fire("mouse:out",D(D({},n),{},{target:i})),i&&i.fire("mouseout",D({},n))}),this._hoveredTargets=[]}_onMouseEnter(t){!this._currentTransform&&!this.findTarget(t)&&(this.fire("mouse:over",{e:t,isClick:!1,pointer:this.getPointer(t,!0),absolutePointer:this.getPointer(t)}),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(t){this._isClick=!1;const e=this.getActiveObject();if(pp(e)&&e.onDragStart(t)){this._dragSource=e;const n={e:t,target:e};this.fire("dragstart",n),e.fire("dragstart",n),Ir(this.upperCanvasEl,"drag",this._onDragProgress);return}uh(t)}_renderDragEffects(t,e,n){let i=!1;const o=this._dropTarget;o&&o!==e&&o!==n&&(o.clearContextTop(),i=!0),e==null||e.clearContextTop(),n!==e&&(n==null||n.clearContextTop());const l=this.contextTop;l.save(),l.transform(...this.viewportTransform),e&&(l.save(),e.transform(l),e.renderDragSourceEffect(t),l.restore(),i=!0),n&&(l.save(),n.transform(l),n.renderDropTargetEffect(t),l.restore(),i=!0),l.restore(),i&&(this.contextTopDirty=!0)}_onDragEnd(t){const e=!!t.dataTransfer&&t.dataTransfer.dropEffect!==tn,n=e?this._activeObject:void 0,i={e:t,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:e,dropTarget:n};bn(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",i),this._dragSource&&this._dragSource.fire("dragend",i),delete this._dragSource,this._onMouseUp(t)}_onDragProgress(t){const e={e:t,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",e),this._dragSource&&this._dragSource.fire("drag",e)}findDragTargets(t){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getPointer(t,!0)),targets:[...this.targets]}}_onDragOver(t){const e="dragover",{target:n,targets:i}=this.findDragTargets(t),o=this._dragSource,l={e:t,target:n,subTargets:i,dragSource:o,canDrop:!1,dropTarget:void 0};let c;this.fire(e,l),this._fireEnterLeaveEvents(n,l),n&&(n.canDrop(t)&&(c=n),n.fire(e,l));for(let h=0;h<i.length;h++){const f=i[h];f.canDrop(t)&&(c=f),f.fire(e,l)}this._renderDragEffects(t,o,c),this._dropTarget=c}_onDragEnter(t){const{target:e,targets:n}=this.findDragTargets(t),i={e:t,target:e,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",i),this._fireEnterLeaveEvents(e,i)}_onDragLeave(t){const e={e:t,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",e),this._fireEnterLeaveEvents(void 0,e),this._renderDragEffects(t,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(t){const{target:e,targets:n}=this.findDragTargets(t),i=this._basicEventHandler("drop:before",{e:t,target:e,subTargets:n,dragSource:this._dragSource,pointer:this.getPointer(t,!0),absolutePointer:this.getPointer(t)});i.didDrop=!1,i.dropTarget=void 0,this._basicEventHandler("drop",i),this.fire("drop:after",i)}_onContextMenu(t){const e=this.findTarget(t),n=this.targets||[],i=this._basicEventHandler("contextmenu:before",{e:t,target:e,subTargets:n});return this.stopContextMenu&&uh(t),this._basicEventHandler("contextmenu",i),!1}_onDoubleClick(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData()}getPointerId(t){const e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1}_isMainEvent(t){return t.isPrimary===!0?!0:t.isPrimary===!1?!1:t.type==="touchend"&&t.touches.length===0?!0:t.changedTouches?t.changedTouches[0].identifier===this.mainTouchId:!0}_onTouchStart(t){t.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,n=this._getEventPrefix(),i=Fn(e);Ir(i,"touchend",this._onTouchEnd,un),Ir(i,"touchmove",this._onMouseMove,un),bn(e,"".concat(n,"down"),this._onMouseDown)}_onMouseDown(t){this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,n=this._getEventPrefix();bn(e,"".concat(n,"move"),this._onMouseMove,un);const i=Fn(e);Ir(i,"".concat(n,"up"),this._onMouseUp),Ir(i,"".concat(n,"move"),this._onMouseMove,un)}_onTouchEnd(t){if(t.touches.length>0)return;this.__onMouseUp(t),this._resetTransformEventData(),this.mainTouchId=null;const e=this._getEventPrefix(),n=Fn(this.upperCanvasEl);bn(n,"touchend",this._onTouchEnd,un),bn(n,"touchmove",this._onMouseMove,un),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Ir(this.upperCanvasEl,"".concat(e,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(t){this.__onMouseUp(t),this._resetTransformEventData();const e=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(t)){const i=Fn(this.upperCanvasEl);bn(i,"".concat(n,"up"),this._onMouseUp),bn(i,"".concat(n,"move"),this._onMouseMove,un),Ir(e,"".concat(n,"move"),this._onMouseMove,un)}}_onMouseMove(t){const e=this.getActiveObject();!this.allowTouchScrolling&&(!e||pp(e)&&!e.shouldStartDragging())&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(t){const e=this.getActiveObject();return!!e!=!!t||e&&t&&e!==t?!0:(xa(e),!1)}__onMouseUp(t){const e=this._currentTransform;this._cacheTransformEventData(t);const n=this._target,i=this._isClick;if(this._handleEvent(t,"up:before"),ga(t,fa)){this.fireRightClick&&this._handleEvent(t,"up",fa,i);return}if(ga(t,ua)){this.fireMiddleClick&&this._handleEvent(t,"up",ua,i),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(t);return}if(!this._isMainEvent(t))return;let o=!1;if(e&&(this._finalizeCurrentTransform(t),o=e.actionPerformed),!i){const h=n===this._activeObject;this.handleSelection(t),o||(o=this._shouldRender(n)||!h&&n===this._activeObject)}let l,c;if(n){if(c=n._findTargetCorner(this.getPointer(t,!0),Pa(t)),n.selectable&&n!==this._activeObject&&n.activeOn==="up")this.setActiveObject(n,t),o=!0;else{const h=n.controls[c],f=h&&h.getMouseUpHandler(t,n,h);f&&(l=this.getPointer(t),f(t,e,l.x,l.y))}n.isMoving=!1}if(e&&(e.target!==n||e.corner!==c)){const h=e.target&&e.target.controls[e.corner],f=h&&h.getMouseUpHandler(t,e.target,h);l=l||this.getPointer(t),f&&f(t,e,l.x,l.y)}this._setCursorFromEvent(t,n),this._handleEvent(t,"up",lp,i),this._groupSelector=null,this._currentTransform=null,n&&(n.__corner=void 0),o?this.requestRenderAll():!i&&!(xa(this._activeObject)&&this._activeObject.isEditing)&&this.renderTop()}_basicEventHandler(t,e){const{target:n,subTargets:i=[]}=e;this.fire(t,e),n&&n.fire(t,e);for(let o=0;o<i.length;o++)i[o].fire(t,e);return e}_handleEvent(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:lp,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const o=this._target,l=this.targets||[],c={e:t,target:o,subTargets:l,button:n,isClick:i,pointer:this.getPointer(t,!0),absolutePointer:this.getPointer(t),transform:this._currentTransform};e==="up"&&(c.currentTarget=this.findTarget(t),c.currentSubTargets=this.targets),this.fire("mouse:".concat(e),c),o&&o.fire("mouse".concat(e),c);for(let h=0;h<l.length;h++)l[h].fire("mouse".concat(e),c)}endCurrentTransform(t){const e=this._currentTransform;this._finalizeCurrentTransform(t),e&&e.target&&(e.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(t){const e=this._currentTransform,n=e.target,i={e:t,target:n,transform:e,action:e.action};n._scaling&&(n._scaling=!1),n.setCoords(),e.actionPerformed&&(this.fire("object:modified",i),n.fire("modified",i))}_onMouseDownInDrawingMode(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(t),this.requestRenderAll());const e=this.getPointer(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")}_onMouseMoveInDrawingMode(t){if(this._isCurrentlyDrawing){const e=this.getPointer(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")}_onMouseUpInDrawingMode(t){const e=this.getPointer(t);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:t,pointer:e}):this._isCurrentlyDrawing=!1,this._handleEvent(t,"up")}__onMouseDown(t){this._isClick=!0,this._cacheTransformEventData(t),this._handleEvent(t,"down:before");let e=this._target;if(ga(t,fa)){this.fireRightClick&&this._handleEvent(t,"down",fa);return}if(ga(t,ua)){this.fireMiddleClick&&this._handleEvent(t,"down",ua);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(t);return}if(!this._isMainEvent(t)||this._currentTransform)return;let n=this._shouldRender(e),i=!1;if(this.handleMultiSelection(t,e)?(e=this._activeObject,i=!0,n=!0):this._shouldClearSelection(t,e)&&this.discardActiveObject(t),this.selection&&(!e||!e.selectable&&!e.isEditing&&e!==this._activeObject)){const o=this.getPointer(t);this._groupSelector={x:o.x,y:o.y,deltaY:0,deltaX:0}}if(e){const o=e===this._activeObject;e.selectable&&e.activeOn==="down"&&this.setActiveObject(e,t);const l=e._findTargetCorner(this.getPointer(t,!0),Pa(t));if(e===this._activeObject&&(l||!i)){this._setupCurrentTransform(t,e,o);const c=e.controls[l],h=this.getPointer(t),f=c&&c.getMouseDownHandler(t,e,c);f&&f(t,this._currentTransform,h.x,h.y)}}n&&(this._objectsToRender=void 0),this._handleEvent(t,"down"),n&&this.requestRenderAll()}_resetTransformEventData(){this._target=void 0,this._pointer=void 0,this._absolutePointer=void 0}_cacheTransformEventData(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)}_beforeTransform(t){const e=this._currentTransform;this.fire("before:transform",{e:t,transform:e})}__onMouseMove(t){if(this._isClick=!1,this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode){this._onMouseMoveInDrawingMode(t);return}if(!this._isMainEvent(t))return;const e=this._groupSelector;if(e){const n=this.getPointer(t);e.deltaX=n.x-e.x,e.deltaY=n.y-e.y,this.renderTop()}else if(this._currentTransform)this._transformObject(t);else{const n=this.findTarget(t);this._setCursorFromEvent(t,n),this._fireOverOutEvents(t,n)}this.textEditingManager.onMouseMove(t),this._handleEvent(t,"move"),this._resetTransformEventData()}_fireOverOutEvents(t,e){const n=this._hoveredTarget,i=this._hoveredTargets,o=this.targets,l=Math.max(i.length,o.length);this.fireSyntheticInOutEvents("mouse",{e:t,target:e,oldTarget:n,fireCanvas:!0});for(let c=0;c<l;c++)this.fireSyntheticInOutEvents("mouse",{e:t,target:o[c],oldTarget:i[c]});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(t,e){const n=this._draggedoverTarget,i=this._hoveredTargets,o=this.targets,l=Math.max(i.length,o.length);this.fireSyntheticInOutEvents("drag",D(D({},e),{},{target:t,oldTarget:n,fireCanvas:!0}));for(let c=0;c<l;c++)this.fireSyntheticInOutEvents("drag",D(D({},e),{},{target:o[c],oldTarget:i[c]}));this._draggedoverTarget=t}fireSyntheticInOutEvents(t,e){let{target:n,oldTarget:i,fireCanvas:o,e:l}=e,c=Zt(e,jD);const{targetIn:h,targetOut:f,canvasIn:d,canvasOut:p}=WD[t],_=i!==n;if(i&&_){const v=D(D({},c),{},{e:l,target:i,nextTarget:n,isClick:!1,pointer:this.getPointer(l,!0),absolutePointer:this.getPointer(l)});o&&this.fire(d,v),i.fire(f,v)}if(n&&_){const v=D(D({},c),{},{e:l,target:n,previousTarget:i,isClick:!1,pointer:this.getPointer(l,!0),absolutePointer:this.getPointer(l)});o&&this.fire(p,v),n.fire(h,v)}}__onMouseWheel(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()}_transformObject(t){const e=this.getPointer(t),n=this._currentTransform,i=n.target,o=i.group?tu(e,void 0,i.group.calcTransformMatrix()):e;n.reset=!1,n.shiftKey=t.shiftKey,n.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,n,o),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(t,e,n){const i=n.x,o=n.y,l=e.action,c=e.actionHandler;let h=!1;c&&(h=c(t,e,i,o)),l==="drag"&&h&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||h}_setCursorFromEvent(t,e){if(!e){this.setCursor(this.defaultCursor);return}let n=e.hoverCursor||this.hoverCursor;const i=this._activeObject===this._activeSelection?this._activeObject:null,o=(!i||e.group!==i)&&e._findTargetCorner(this.getPointer(t,!0));if(!o)e.subTargetCheck&&this.targets.concat().reverse().map(l=>{n=l.hoverCursor||n}),this.setCursor(n);else{const l=e.controls[o];this.setCursor(l.cursorStyleHandler(t,l,e))}}handleMultiSelection(t,e){const n=this._activeObject,i=this._activeSelection,o=n===i;if(n&&this._isSelectionKeyPressed(t)&&this.selection&&e&&e.selectable&&(n!==e||o)&&(o||!e.isDescendantOf(n)&&!n.isDescendantOf(e))&&!e.onSelect({e:t})&&!n.getActiveControl()){if(o){const l=i.getObjects();if(e===i){const c=this.getPointer(t,!0);if(e=this.searchPossibleTargets(l,c)||this.searchPossibleTargets(this._objects,c),!e||!e.selectable)return!1}e.group===i?(i.remove(e),this._hoveredTarget=e,this._hoveredTargets=[...this.targets],i.size()===1&&this._setActiveObject(i.item(0),t)):(i.multiSelectAdd(e),this._hoveredTarget=i,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(l,t)}else xa(n)&&n.exitEditing(),i.multiSelectAdd(n,e),this._hoveredTarget=i,this._setActiveObject(i,t),this._fireSelectionEvents([n],t);return!0}return!1}handleSelection(t){if(!this.selection||!this._groupSelector)return!1;const{x:e,y:n,deltaX:i,deltaY:o}=this._groupSelector,l=new F(e,n),c=l.add(new F(i,o)),h=l.min(c),f=l.max(c),d=f.subtract(h),p=l.eq(c),_=this.collectObjects({left:h.x,top:h.y,width:d.x,height:d.y},{includeIntersecting:!this.selectionFullyContained}),v=p?_[0]?[_[0]]:[]:_.length>1?_.filter(w=>!w.onSelect({e:t})).reverse():_;return v.length===1?this.setActiveObject(v[0],t):v.length>1&&(this._activeSelection.add(...v),this.setActiveObject(this._activeSelection,t)),this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const n_={x1:0,y1:0,x2:0,y2:0},XD=D(D({},n_),{},{r1:0,r2:0}),HD=/^(\d+\.\d+)%|(\d+)%$/;function r_(r){return r&&HD.test(r)}function i_(r,t){const e=typeof r=="number"?r:typeof r=="string"?parseFloat(r)/(r_(r)?100:1):NaN;return yi(0,zi(e,t),1)}const YD=/\s*;\s*/,UD=/\s*:\s*/;function ND(r,t){let e,n;const i=r.getAttribute("style");if(i){const l=i.split(YD);l[l.length-1]===""&&l.pop();for(let c=l.length;c--;){const[h,f]=l[c].split(UD).map(d=>d.trim());h==="stop-color"?e=f:h==="stop-opacity"&&(n=f)}}const o=new Kt(e||r.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:i_(r.getAttribute("offset"),0),color:o.toRgb(),opacity:zi(parseFloat(n||r.getAttribute("stop-opacity")||""),1)*o.getAlpha()*t}}function zD(r,t){const e=[],n=r.getElementsByTagName("stop"),i=i_(t,1);for(let o=n.length;o--;)e.push(ND(n[o],i));return e}function s_(r){return r.nodeName==="linearGradient"||r.nodeName==="LINEARGRADIENT"?"linear":"radial"}function o_(r){return r.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function VD(r,t){let{width:e,height:n,gradientUnits:i}=t,o;return Object.keys(r).reduce((l,c)=>{const h=r[c];return h==="Infinity"?o=1:h==="-Infinity"?o=0:(o=typeof h=="string"?parseFloat(h):h,typeof h=="string"&&r_(h)&&(o*=.01,i==="pixels"&&((c==="x1"||c==="x2"||c==="r2")&&(o*=e),(c==="y1"||c==="y2")&&(o*=n)))),l[c]=o,l},{})}function Ln(r,t){return r.getAttribute(t)}function GD(r){return{x1:Ln(r,"x1")||0,y1:Ln(r,"y1")||0,x2:Ln(r,"x2")||"100%",y2:Ln(r,"y2")||0}}function $D(r){return{x1:Ln(r,"fx")||Ln(r,"cx")||"50%",y1:Ln(r,"fy")||Ln(r,"cy")||"50%",r1:0,x2:Ln(r,"cx")||"50%",y2:Ln(r,"cy")||"50%",r2:Ln(r,"r")||"50%"}}function KD(r,t){return VD(s_(r)==="linear"?GD(r):$D(r),D(D({},t),{},{gradientUnits:o_(r)}))}class a_{constructor(t){let{type:e="linear",gradientUnits:n="pixels",coords:i,colorStops:o=[],offsetX:l=0,offsetY:c=0,gradientTransform:h,id:f}=t;this.id=f?"".concat(f,"_").concat(zr()):zr(),this.type=e,this.gradientUnits=n,this.gradientTransform=h,this.offsetX=l,this.offsetY=c,this.coords=D(D({},this.type==="radial"?XD:n_),i),this.colorStops=o.slice()}addColorStop(t){for(const e in t){const n=new Kt(t[e]);this.colorStops.push({offset:parseFloat(e),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(t){return D(D({},wi(this,t)),{},{type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(t){let{additionalTransform:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[],i=this.gradientTransform?this.gradientTransform.concat():gn.concat(),o=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",l=this.colorStops.map(d=>D({},d)).sort((d,p)=>d.offset-p.offset);let c=-this.offsetX,h=-this.offsetY;o==="objectBoundingBox"?(c/=t.width,h/=t.height):(c+=t.width/2,h+=t.height/2),lE(t)&&this.gradientUnits!=="percentage"&&(c-=t.pathOffset.x,h-=t.pathOffset.y),i[4]-=c,i[5]-=h;const f=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(o,'"'),'gradientTransform="'.concat(e?e+" ":"").concat(io(i),'"'),""].join(" ");if(this.type==="linear"){const{x1:d,y1:p,x2:_,y2:v}=this.coords;n.push("<linearGradient ",f,' x1="',d,'" y1="',p,'" x2="',_,'" y2="',v,`">
`)}else if(this.type==="radial"){const{x1:d,y1:p,x2:_,y2:v,r1:w,r2:E}=this.coords,O=w>E;n.push("<radialGradient ",f,' cx="',O?d:_,'" cy="',O?p:v,'" r="',O?w:E,'" fx="',O?_:d,'" fy="',O?v:p,`">
`),O&&(l.reverse(),l.forEach(R=>{R.offset=1-R.offset}));const M=Math.min(w,E);if(M>0){const R=Math.max(w,E),X=M/R;l.forEach(B=>{B.offset+=X*(1-B.offset)})}}return l.forEach(d=>{let{color:p,offset:_,opacity:v}=d;n.push("<stop ",'offset="',_*100+"%",'" style="stop-color:',p,typeof v<"u"?";stop-opacity: "+v:";",`"/>
`)}),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(t){const e=this.coords,n=this.type==="linear"?t.createLinearGradient(e.x1,e.y1,e.x2,e.y2):t.createRadialGradient(e.x1,e.y1,e.r1,e.x2,e.y2,e.r2);return this.colorStops.forEach(i=>{let{color:o,opacity:l,offset:c}=i;n.addColorStop(c,typeof l<"u"?new Kt(o).setAlpha(l).toRgba():o)}),n}static fromElement(t,e,n){const i=o_(t),o=e._findCenterFromElement();return new this(D({id:t.getAttribute("id")||void 0,type:s_(t),coords:KD(t,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:zD(t,n.opacity),gradientUnits:i,gradientTransform:_h(t.getAttribute("gradientTransform")||"")},i==="pixels"?{offsetX:e.width/2-o.x,offsetY:e.height/2-o.y}:{offsetX:0,offsetY:0}))}}A(a_,"type","Gradient");ut.setClass(a_,"gradient");const qD=["source"];class du{get type(){return"pattern"}set type(t){console.warn("Setting type has no effect",t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};A(this,"repeat","repeat"),A(this,"offsetX",0),A(this,"offsetY",0),A(this,"crossOrigin",""),A(this,"patternTransform",null),this.id=zr(),Object.assign(this,t)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(t){return!this.source||this.isImageSource()&&(!this.source.complete||this.source.naturalWidth===0||this.source.naturalHeight===0)?null:t.createPattern(this.source,this.repeat)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:e,crossOrigin:n}=this;return D(D({},wi(this,t)),{},{type:"pattern",source:this.sourceToString(),repeat:e,crossOrigin:n,offsetX:Wt(this.offsetX,At.NUM_FRACTION_DIGITS),offsetY:Wt(this.offsetY,At.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(t){let{width:e,height:n}=t;const{source:i,repeat:o,id:l}=this,c=zi(this.offsetX/e,0),h=zi(this.offsetY/n,0),f=o==="repeat-y"||o==="no-repeat"?1+Math.abs(c||0):zi(i.width/e,0),d=o==="repeat-x"||o==="no-repeat"?1+Math.abs(h||0):zi(i.height/n,0);return['<pattern id="SVGID_'.concat(l,'" x="').concat(c,'" y="').concat(h,'" width="').concat(f,'" height="').concat(d,'">'),'<image x="0" y="0" width="'.concat(i.width,'" height="').concat(i.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(t,e){let{source:n}=t,i=Zt(t,qD);const o=await Gs(n,D(D({},e),{},{crossOrigin:i.crossOrigin}));return new this(D(D({},i),{},{source:o}))}}A(du,"type","Pattern");ut.setClass(du);ut.setClass(du,"pattern");const JD=["path","left","top"],QD=["d"];class go extends xe{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:i,top:o}=e,l=Zt(e,JD);super(l),this._setPath(t||[],!0),typeof i=="number"&&this.set(Ut,i),typeof o=="number"&&this.set(Ie,o)}_setPath(t,e){this.path=$0(Array.isArray(t)?t:t_(t)),this.setBoundingBox(e)}_findCenterFromElement(){const t=this._calcBoundsFromPath();return new F(t.left+t.width/2,t.top+t.height/2)}_renderPathCommands(t){let e=0,n=0,i=0,o=0,l=0,c=0;const h=-this.pathOffset.x,f=-this.pathOffset.y;t.beginPath();for(const d of this.path)switch(d[0]){case"L":i=d[1],o=d[2],t.lineTo(i+h,o+f);break;case"M":i=d[1],o=d[2],e=i,n=o,t.moveTo(i+h,o+f);break;case"C":i=d[5],o=d[6],l=d[3],c=d[4],t.bezierCurveTo(d[1]+h,d[2]+f,l+h,c+f,i+h,o+f);break;case"Q":t.quadraticCurveTo(d[1]+h,d[2]+f,d[3]+h,d[4]+f),i=d[3],o=d[4],l=d[1],c=d[2];break;case"Z":i=e,o=n,t.closePath();break}}_render(t){this._renderPathCommands(t),this._renderPaintInOrder(t)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(t)),{},{path:fs(this.path)})}toDatalessObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.toObject(t);return this.sourcePath&&(delete e.path,e.sourcePath=this.sourcePath),e}_toSVG(){const t=e_(this.path,At.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(t,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const t=At.NUM_FRACTION_DIGITS;return" translate(".concat(Wt(-this.pathOffset.x,t),", ").concat(Wt(-this.pathOffset.y,t),")")}toClipPathSVG(t){const e=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}toSVG(t){const e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{width:e,height:n,pathOffset:i}=this._calcDimensions();this.set({width:e,height:n,pathOffset:i}),t&&this.setPositionByOrigin(i,bt,bt)}_calcBoundsFromPath(){const t=[];let e=0,n=0,i=0,o=0;for(const l of this.path)switch(l[0]){case"L":i=l[1],o=l[2],t.push(new F(e,n),new F(i,o));break;case"M":i=l[1],o=l[2],e=i,n=o;break;case"C":t.push(...vh(i,o,l[1],l[2],l[3],l[4],l[5],l[6])),i=l[5],o=l[6];break;case"Q":t.push(...vh(i,o,l[1],l[2],l[1],l[2],l[3],l[4])),i=l[3],o=l[4];break;case"Z":i=e,o=n;break}return dr(t)}_calcDimensions(){const t=this._calcBoundsFromPath();return D(D({},t),{},{pathOffset:new F(t.left+t.width/2,t.top+t.height/2)})}static fromObject(t){return this._fromObject(t,{extraParam:"path"})}static async fromElement(t,e,n){const i=yr(t,this.ATTRIBUTE_NAMES,n),{d:o}=i,l=Zt(i,QD);return new this(o,D(D(D({},l),e),{},{left:void 0,top:void 0}))}}A(go,"type","Path");A(go,"cacheProperties",[...vr,"path","fillRule"]);A(go,"ATTRIBUTE_NAMES",[...Vr,"d"]);ut.setClass(go);ut.setSVGClass(go);const ZD=["left","top","radius"],l_=["radius","startAngle","endAngle"],tA={radius:0,startAngle:0,endAngle:360};class Gr extends xe{static getDefaults(){return D(D({},super.getDefaults()),Gr.ownDefaults)}_set(t,e){return super._set(t,e),t==="radius"&&this.setRadius(e),this}_render(t){t.beginPath(),t.arc(0,0,this.radius,Qt(this.startAngle),Qt(this.endAngle),!1),this._renderPaintInOrder(t)}getRadiusX(){return this.get("radius")*this.get("scaleX")}getRadiusY(){return this.get("radius")*this.get("scaleY")}setRadius(t){this.radius=t,this.set({width:t*2,height:t*2})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...l_,...t])}_toSVG(){const t=(this.endAngle-this.startAngle)%360;if(t===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:e}=this,n=Qt(this.startAngle),i=Qt(this.endAngle),o=ze(n)*e,l=Ve(n)*e,c=ze(i)*e,h=Ve(i)*e,f=t>180?"1":"0";return['<path d="M '.concat(o," ").concat(l)," A ".concat(e," ").concat(e)," 0 ","".concat(f," 1")," ".concat(c," ").concat(h),'" ',"COMMON_PARTS",` />
`]}}static async fromElement(t,e,n){const i=yr(t,this.ATTRIBUTE_NAMES,n),{left:o=0,top:l=0,radius:c=0}=i,h=Zt(i,ZD);return new this(D(D({},h),{},{radius:c,left:o-c,top:l-c}))}static fromObject(t){return super._fromObject(t)}}A(Gr,"type","Circle");A(Gr,"cacheProperties",[...vr,...l_]);A(Gr,"ownDefaults",tA);A(Gr,"ATTRIBUTE_NAMES",["cx","cy","r",...Vr]);ut.setClass(Gr);ut.setSVGClass(Gr);const eA=["x1","y1","x2","y2"],nA=["x1","y1","x2","y2"],gu=["x1","x2","y1","y2"];class po extends xe{constructor(){let[t,e,n,i]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(D(D({},o),{},{x1:t,y1:e,x2:n,y2:i})),this._setWidthHeight();const{left:l,top:c}=o;typeof l=="number"&&this.set(Ut,l),typeof c=="number"&&this.set(Ie,c)}_setWidthHeight(){const{x1:t,y1:e,x2:n,y2:i}=this;this.width=Math.abs(n-t),this.height=Math.abs(i-e);const{left:o,top:l,width:c,height:h}=dr([{x:t,y:e},{x:n,y:i}]),f=new F(o+c/2,l+h/2);this.setPositionByOrigin(f,bt,bt)}_set(t,e){return super._set(t,e),gu.includes(t)&&this._setWidthHeight(),this}_render(t){t.beginPath();const e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;const n=t.strokeStyle;if(Tn(this.stroke))t.strokeStyle=this.stroke.toLive(t);else{var i;t.strokeStyle=(i=this.stroke)!==null&&i!==void 0?i:t.fillStyle}this.stroke&&this._renderStroke(t),t.strokeStyle=n}_findCenterFromElement(){return new F((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(t)),this.calcLinePoints())}_getNonTransformedDimensions(){const t=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t}calcLinePoints(){const{x1:t,x2:e,y1:n,y2:i,width:o,height:l}=this,c=t<=e?-1:1,h=n<=i?-1:1,f=c*o/2,d=h*l/2,p=c*-o/2,_=h*-l/2;return{x1:f,x2:p,y1:d,y2:_}}_toSVG(){const{x1:t,x2:e,y1:n,y2:i}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(t,'" y1="').concat(n,'" x2="').concat(e,'" y2="').concat(i,`" />
`)]}static async fromElement(t,e,n){const i=yr(t,this.ATTRIBUTE_NAMES,n),{x1:o=0,y1:l=0,x2:c=0,y2:h=0}=i,f=Zt(i,eA);return new this([o,l,c,h],f)}static fromObject(t){let{x1:e,y1:n,x2:i,y2:o}=t,l=Zt(t,nA);return this._fromObject(D(D({},l),{},{points:[e,n,i,o]}),{extraParam:"points"})}}A(po,"type","Line");A(po,"cacheProperties",[...vr,...gu]);A(po,"ATTRIBUTE_NAMES",Vr.concat(gu));ut.setClass(po);ut.setSVGClass(po);const rA={width:100,height:100};class ds extends xe{static getDefaults(){return D(D({},super.getDefaults()),ds.ownDefaults)}_render(t){const e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,n),t.lineTo(0,-n),t.lineTo(e,n),t.closePath(),this._renderPaintInOrder(t)}_toSVG(){const t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-t," ").concat(e,",0 ").concat(-e,",").concat(t," ").concat(e),'" />']}}A(ds,"type","Triangle");A(ds,"ownDefaults",rA);ut.setClass(ds);ut.setSVGClass(ds);const iA={rx:0,ry:0},c_=["rx","ry"];class $r extends xe{static getDefaults(){return D(D({},super.getDefaults()),$r.ownDefaults)}_set(t,e){switch(super._set(t,e),t){case"rx":this.rx=e,this.set("width",e*2);break;case"ry":this.ry=e,this.set("height",e*2);break}return this}getRx(){return this.get("rx")*this.get("scaleX")}getRy(){return this.get("ry")*this.get("scaleY")}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...c_,...t])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,pr,!1),t.restore(),this._renderPaintInOrder(t)}static async fromElement(t,e,n){const i=yr(t,this.ATTRIBUTE_NAMES,n);return i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,new this(i)}}A($r,"type","Ellipse");A($r,"cacheProperties",[...vr,...c_]);A($r,"ownDefaults",iA);A($r,"ATTRIBUTE_NAMES",[...Vr,"cx","cy","rx","ry"]);ut.setClass($r);ut.setSVGClass($r);function sA(r){if(!r)return[];const t=r.replace(/,/g," ").trim().split(/\s+/),e=[];for(let n=0;n<t.length;n+=2)e.push({x:parseFloat(t[n]),y:parseFloat(t[n+1])});return e}const oA=["left","top"],h_={exactBoundingBox:!1};class Hn extends xe{static getDefaults(){return D(D({},super.getDefaults()),Hn.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(D({points:t},e)),A(this,"strokeDiff",void 0);const{left:n,top:i}=e;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(Ut,n),typeof i=="number"&&this.set(Ie,i)}isOpen(){return!0}_projectStrokeOnPoints(t){return H0(this.points,t,this.isOpen())}_calcDimensions(t){t=D({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},t||{});const e=this.exactBoundingBox?this._projectStrokeOnPoints(t).map(p=>p.projectedPoint):this.points;if(e.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new F,strokeOffset:new F,strokeDiff:new F};const n=dr(e),i=el(D(D({},t),{},{scaleX:1,scaleY:1})),o=dr(this.points.map(p=>ae(p,i,!0))),l=n.left+n.width/2,c=n.top+n.height/2,h=l-c*Math.tan(Qt(this.skewX)),f=c-h*Math.tan(Qt(this.skewY)),d=new F(this.scaleX,this.scaleY);return D(D({},n),{},{pathOffset:new F(h,f),strokeOffset:new F(o.left,o.top).subtract(new F(n.left,n.top)).multiply(d),strokeDiff:new F(n.width,n.height).subtract(new F(o.width,o.height)).multiply(d)})}_findCenterFromElement(){const t=dr(this.points);return new F(t.left+t.width/2,t.top+t.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{left:e,top:n,width:i,height:o,pathOffset:l,strokeOffset:c,strokeDiff:h}=this._calcDimensions();this.set({width:i,height:o,pathOffset:l,strokeOffset:c,strokeDiff:h}),t&&this.setPositionByOrigin(new F(e+i/2,n+o/2),bt,bt)}_getNonTransformedDimensions(){return this.exactBoundingBox?new F(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let l;if(Object.keys(t).some(c=>this.strokeUniform||this.constructor.layoutProperties.includes(c))){var e,n;const{width:c,height:h}=this._calcDimensions(t);l=new F((e=t.width)!==null&&e!==void 0?e:c,(n=t.height)!==null&&n!==void 0?n:h)}else{var i,o;l=new F((i=t.width)!==null&&i!==void 0?i:this.width,(o=t.height)!==null&&o!==void 0?o:this.height)}return l.multiply(new F(t.scaleX||this.scaleX,t.scaleY||this.scaleY))}else return super._getTransformedDimensions(t)}_set(t,e){const n=this.initialized&&this[t]!==e,i=super._set(t,e);return this.exactBoundingBox&&n&&((t==="scaleX"||t==="scaleY")&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(t))&&this.setDimensions(),i}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(t)),{},{points:fs(this.points)})}_toSVG(){const t=[],e=this.pathOffset.x,n=this.pathOffset.y,i=At.NUM_FRACTION_DIGITS;for(let o=0,l=this.points.length;o<l;o++)t.push(Wt(this.points[o].x-e,i),",",Wt(this.points[o].y-n,i)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(t.join(""),`" />
`)]}_render(t){const e=this.points.length,n=this.pathOffset.x,i=this.pathOffset.y;if(!(!e||isNaN(this.points[e-1].y))){t.beginPath(),t.moveTo(this.points[0].x-n,this.points[0].y-i);for(let o=0;o<e;o++){const l=this.points[o];t.lineTo(l.x-n,l.y-i)}!this.isOpen()&&t.closePath(),this._renderPaintInOrder(t)}}complexity(){return this.points.length}static async fromElement(t,e,n){const i=sA(t.getAttribute("points")),o=yr(t,this.ATTRIBUTE_NAMES,n),l=Zt(o,oA);return new this(i,D(D({},l),e))}static fromObject(t){return this._fromObject(t,{extraParam:"points"})}}A(Hn,"ownDefaults",h_);A(Hn,"type","Polyline");A(Hn,"layoutProperties",["skewX","skewY","strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]);A(Hn,"cacheProperties",[...vr,"points"]);A(Hn,"ATTRIBUTE_NAMES",[...Vr]);ut.setClass(Hn);ut.setSVGClass(Hn);class cl extends Hn{static getDefaults(){return D(D({},super.getDefaults()),Hn.ownDefaults)}isOpen(){return!1}}A(cl,"ownDefaults",h_);A(cl,"type","Polygon");ut.setClass(cl);ut.setSVGClass(cl);const u_=["fontSize","fontWeight","fontFamily","fontStyle"],f_=["underline","overline","linethrough"],d_=[...u_,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],g_=[...d_,...f_,"textBackgroundColor","direction"],aA=[...u_,...f_,"stroke","strokeWidth","fill","deltaY","textBackgroundColor"],lA={_reNewline:zh,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Ut,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Ut,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},Kn="justify",Ra="justify-left",$s="justify-right",Ks="justify-center";class p_ extends xe{isEmptyStyles(t){if(!this.styles||typeof t<"u"&&!this.styles[t])return!0;const e=typeof t>"u"?this.styles:{line:this.styles[t]};for(const n in e)for(const i in e[n])for(const o in e[n][i])return!1;return!0}styleHas(t,e){if(!this.styles||typeof e<"u"&&!this.styles[e])return!1;const n=typeof e>"u"?this.styles:{0:this.styles[e]};for(const i in n)for(const o in n[i])if(typeof n[i][o][t]<"u")return!0;return!1}cleanStyle(t){if(!this.styles)return!1;const e=this.styles;let n=0,i,o,l=!0,c=0;for(const h in e){i=0;for(const f in e[h]){const d=e[h][f]||{},p=d[t]!==void 0;n++,p?(o?d[t]!==o&&(l=!1):o=d[t],d[t]===this[t]&&delete d[t]):l=!1,Object.keys(d).length!==0?i++:delete e[h][f]}i===0&&delete e[h]}for(let h=0;h<this._textLines.length;h++)c+=this._textLines[h].length;l&&n===c&&(this[t]=o,this.removeStyle(t))}removeStyle(t){if(!this.styles)return;const e=this.styles;let n,i,o;for(i in e){n=e[i];for(o in n)delete n[o][t],Object.keys(n[o]).length===0&&delete n[o];Object.keys(n).length===0&&delete e[i]}}_extendStyles(t,e){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(t);this._getLineStyle(n)||this._setLineStyle(n),Object.keys(this._getStyleDeclaration(n,i)).length||this._setStyleDeclaration(n,i,{}),Object.assign(this._getStyleDeclaration(n,i),e)}getSelectionStyles(t,e,n){const i=[];for(let o=t;o<(e||t);o++)i.push(this.getStyleAtPosition(o,n));return i}getStyleAtPosition(t,e){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(t);return e?this.getCompleteStyleDeclaration(n,i):this._getStyleDeclaration(n,i)}setSelectionStyles(t,e,n){for(let i=e;i<(n||e);i++)this._extendStyles(i,t);this._forceClearCache=!0}_getStyleDeclaration(t,e){var n;const i=this.styles&&this.styles[t];return i?(n=i[e])!==null&&n!==void 0?n:{}:{}}getCompleteStyleDeclaration(t,e){return D(D({},wi(this,this.constructor._styleProperties)),this._getStyleDeclaration(t,e))}_setStyleDeclaration(t,e,n){this.styles[t][e]=n}_deleteStyleDeclaration(t,e){delete this.styles[t][e]}_getLineStyle(t){return!!this.styles[t]}_setLineStyle(t){this.styles[t]={}}_deleteLineStyle(t){delete this.styles[t]}}A(p_,"_styleProperties",aA);const cA=/  +/g,hA=/"/g;function jc(r,t,e,n,i){return"		".concat(oE(r,{left:t,top:e,width:n,height:i}),`
`)}class uA extends f0{_toSVG(){const t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(t){let{textBgRects:e,textSpans:n}=t;const i=!0,o=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(hA,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",o?'text-decoration="'.concat(o,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(i),'"',this.addPaintOrder()," >",n.join(""),`</text>
`]}_getSVGTextAndBg(t,e){const n=[],i=[];let o=t,l;this.backgroundColor&&i.push(...jc(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let c=0,h=this._textLines.length;c<h;c++)l=this._getLineLeftOffset(c),this.direction==="rtl"&&(l+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",c))&&this._setSVGTextLineBg(i,c,e+l,o),this._setSVGTextLineText(n,c,e+l,o),o+=this.getHeightOfLine(c);return{textSpans:n,textBgRects:i}}_createTextCharSpan(t,e,n,i){const o=this.getSvgSpanStyles(e,t!==t.trim()||!!t.match(cA)),l=o?'style="'.concat(o,'"'):"",c=e.deltaY,h=c?' dy="'.concat(Wt(c,At.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(Wt(n,At.NUM_FRACTION_DIGITS),'" y="').concat(Wt(i,At.NUM_FRACTION_DIGITS),'" ').concat(h).concat(l,">").concat(V0(t),"</tspan>")}_setSVGTextLineText(t,e,n,i){const o=this.getHeightOfLine(e),l=this.textAlign.includes(Kn),c=this._textLines[e];let h,f,d="",p,_,v=0,w;i+=o*(1-this._fontSizeFraction)/this.lineHeight;for(let E=0,O=c.length-1;E<=O;E++)w=E===O||this.charSpacing,d+=c[E],p=this.__charBounds[e][E],v===0?(n+=p.kernedWidth-p.width,v+=p.width):v+=p.kernedWidth,l&&!w&&this._reSpaceAndTab.test(c[E])&&(w=!0),w||(h=h||this.getCompleteStyleDeclaration(e,E),f=this.getCompleteStyleDeclaration(e,E+1),w=al(h,f,!0)),w&&(_=this._getStyleDeclaration(e,E),t.push(this._createTextCharSpan(d,_,n,i)),d="",h=f,this.direction==="rtl"?n-=v:n+=v,v=0)}_setSVGTextLineBg(t,e,n,i){const o=this._textLines[e],l=this.getHeightOfLine(e)/this.lineHeight;let c=0,h=0,f,d=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let p=0;p<o.length;p++){const{left:_,width:v,kernedWidth:w}=this.__charBounds[e][p];f=this.getValueOfPropertyAt(e,p,"textBackgroundColor"),f!==d?(d&&t.push(...jc(d,n+h,i,c,l)),h=_,c=v,d=f):c+=w}f&&t.push(...jc(d,n+h,i,c,l))}_getSVGLineTopOffset(t){let e=0,n;for(n=0;n<t;n++)e+=this.getHeightOfLine(n);const i=this.getHeightOfLine(n);return{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(t){return"".concat(super.getSvgStyles(t)," white-space: pre;")}getSvgSpanStyles(t,e){const{fontFamily:n,strokeWidth:i,stroke:o,fill:l,fontSize:c,fontStyle:h,fontWeight:f,deltaY:d}=t,p=this.getSvgTextDecoration(t);return[o?so("stroke",o):"",i?"stroke-width: ".concat(i,"; "):"",n?"font-family: ".concat(!n.includes("'")&&!n.includes('"')?"'".concat(n,"'"):n,"; "):"",c?"font-size: ".concat(c,"px; "):"",h?"font-style: ".concat(h,"; "):"",f?"font-weight: ".concat(f,"; "):"",p&&"text-decoration: ".concat(p,"; "),l?so("fill",l):"",d?"baseline-shift: ".concat(-d,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(t){return["overline","underline","line-through"].filter(e=>t[e.replace("-","")]).join(" ")}}const fA=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Wc;function dA(){return Wc||(Wc=ce().getContext("2d")),Wc}class en extends p_{static getDefaults(){return D(D({},super.getDefaults()),en.ownDefaults)}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(D(D({},e),{},{text:t,styles:(e==null?void 0:e.styles)||{}})),A(this,"__charBounds",[]),this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const t=this.path;t&&(t.segmentsInfo=fu(t.path))}_splitText(){const t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Kn)&&this.enlargeSpaces()}enlargeSpaces(){let t,e,n,i,o,l,c;for(let h=0,f=this._textLines.length;h<f;h++)if(!(this.textAlign!==Kn&&(h===f-1||this.isEndOfWrapping(h)))&&(i=0,o=this._textLines[h],e=this.getLineWidth(h),e<this.width&&(c=this.textLines[h].match(this._reSpacesAndTabs)))){n=c.length,t=(this.width-e)/n;for(let d=0;d<=o.length;d++)l=this.__charBounds[h][d],this._reSpaceAndTab.test(o[d])?(l.width+=t,l.kernedWidth+=t,l.left+=i,i+=t):l.left+=i}}isEndOfWrapping(t){return t===this._textLines.length-1}missingNewlineOffset(t){return 1}get2DCursorLocation(t,e){const n=e?this._unwrappedTextLines:this._textLines;let i;for(i=0;i<n.length;i++){if(t<=n[i].length)return{lineIndex:i,charIndex:t};t-=n[i].length+this.missingNewlineOffset(i,e)}return{lineIndex:i-1,charIndex:n[i-1].length<t?n[i-1].length:t}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const t=super._getCacheCanvasDimensions(),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t}_render(t){const e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")}_renderText(t){this.paintFirst==="stroke"?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))}_setTextStyles(t,e,n){if(t.textBaseline="alphabetic",this.path)switch(this.pathAlign){case bt:t.textBaseline="middle";break;case"ascender":t.textBaseline=Ie;break;case"descender":t.textBaseline=ah;break}t.font=this._getFontDeclaration(e,n)}calcTextWidth(){let t=this.getLineWidth(0);for(let e=1,n=this._textLines.length;e<n;e++){const i=this.getLineWidth(e);i>t&&(t=i)}return t}_renderTextLine(t,e,n,i,o,l){this._renderChars(t,e,n,i,o,l)}_renderTextLinesBackground(t){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const e=t.fillStyle,n=this._getLeftOffset();let i=this._getTopOffset();for(let o=0,l=this._textLines.length;o<l;o++){const c=this.getHeightOfLine(o);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",o)){i+=c;continue}const h=this._textLines[o].length,f=this._getLineLeftOffset(o);let d=0,p=0,_,v,w=this.getValueOfPropertyAt(o,0,"textBackgroundColor");for(let E=0;E<h;E++){const O=this.__charBounds[o][E];v=this.getValueOfPropertyAt(o,E,"textBackgroundColor"),this.path?(t.save(),t.translate(O.renderLeft,O.renderTop),t.rotate(O.angle),t.fillStyle=v,v&&t.fillRect(-O.width/2,-c/this.lineHeight*(1-this._fontSizeFraction),O.width,c/this.lineHeight),t.restore()):v!==w?(_=n+f+p,this.direction==="rtl"&&(_=this.width-_-d),t.fillStyle=w,w&&t.fillRect(_,i,d,c/this.lineHeight),p=O.left,d=O.width,w=v):d+=O.kernedWidth}v&&!this.path&&(_=n+f+p,this.direction==="rtl"&&(_=this.width-_-d),t.fillStyle=v,t.fillRect(_,i,d,c/this.lineHeight)),i+=c}t.fillStyle=e,this._removeShadow(t)}_measureChar(t,e,n,i){const o=zs.getFontCache(e),l=this._getFontDeclaration(e),c=n+t,h=n&&l===this._getFontDeclaration(i),f=e.fontSize/this.CACHE_FONT_SIZE;let d,p,_,v;if(n&&o[n]!==void 0&&(_=o[n]),o[t]!==void 0&&(v=d=o[t]),h&&o[c]!==void 0&&(p=o[c],v=p-_),d===void 0||_===void 0||p===void 0){const w=dA();this._setTextStyles(w,e,!0),d===void 0&&(v=d=w.measureText(t).width,o[t]=d),_===void 0&&h&&n&&(_=w.measureText(n).width,o[n]=_),h&&p===void 0&&(p=w.measureText(c).width,o[c]=p,v=p-_)}return{width:d*f,kernedWidth:v*f}}getHeightOfChar(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")}measureLine(t){const e=this._measureLine(t);return this.charSpacing!==0&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e}_measureLine(t){let e=0,n,i;const o=this.pathSide===pe,l=this.path,c=this._textLines[t],h=c.length,f=new Array(h);this.__charBounds[t]=f;for(let d=0;d<h;d++){const p=c[d];i=this._getGraphemeBox(p,t,d,n),f[d]=i,e+=i.kernedWidth,n=p}if(f[h]={left:i?i.left+i.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},l&&l.segmentsInfo){let d=0;const p=l.segmentsInfo[l.segmentsInfo.length-1].length;switch(this.textAlign){case Ut:d=o?p-e:0;break;case bt:d=(p-e)/2;break;case pe:d=o?0:p-e;break}d+=this.pathStartOffset*(o?-1:1);for(let _=o?h-1:0;o?_>=0:_<h;o?_--:_++)i=f[_],d>p?d%=p:d<0&&(d+=p),this._setGraphemeOnPath(d,i),d+=i.kernedWidth}return{width:e,numOfSpaces:0}}_setGraphemeOnPath(t,e){const n=t+e.kernedWidth/2,i=this.path,o=Z0(i.path,n,i.segmentsInfo);e.renderLeft=o.x-i.pathOffset.x,e.renderTop=o.y-i.pathOffset.y,e.angle=o.angle+(this.pathSide===pe?Math.PI:0)}_getGraphemeBox(t,e,n,i,o){const l=this.getCompleteStyleDeclaration(e,n),c=i?this.getCompleteStyleDeclaration(e,n-1):{},h=this._measureChar(t,l,i,c);let f=h.kernedWidth,d=h.width,p;this.charSpacing!==0&&(p=this._getWidthOfCharSpacing(),d+=p,f+=p);const _={width:d,left:0,height:l.fontSize,kernedWidth:f,deltaY:l.deltaY};if(n>0&&!o){const v=this.__charBounds[e][n-1];_.left=v.left+v.width+h.kernedWidth-h.width}return _}getHeightOfLine(t){if(this.__lineHeights[t])return this.__lineHeights[t];let e=this.getHeightOfChar(t,0);for(let n=1,i=this._textLines[t].length;n<i;n++)e=Math.max(this.getHeightOfChar(t,n),e);return this.__lineHeights[t]=e*this.lineHeight*this._fontSizeMult}calcTextHeight(){let t,e=0;for(let n=0,i=this._textLines.length;n<i;n++)t=this.getHeightOfLine(n),e+=n===i-1?t/this.lineHeight:t;return e}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(t,e){t.save();let n=0;const i=this._getLeftOffset(),o=this._getTopOffset();for(let l=0,c=this._textLines.length;l<c;l++){const h=this.getHeightOfLine(l),f=h/this.lineHeight,d=this._getLineLeftOffset(l);this._renderTextLine(e,t,this._textLines[l],i+d,o+n+f,l),n+=h}t.restore()}_renderTextFill(t){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(t,"fillText")}_renderTextStroke(t){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())}_renderChars(t,e,n,i,o,l){const c=this.getHeightOfLine(l),h=this.textAlign.includes(Kn),f=this.path,d=!h&&this.charSpacing===0&&this.isEmptyStyles(l)&&!f,p=this.direction==="ltr",_=this.direction==="ltr"?1:-1,v=e.direction;let w,E,O="",M,R=0,X,B;if(e.save(),v!==this.direction&&(e.canvas.setAttribute("dir",p?"ltr":"rtl"),e.direction=p?"ltr":"rtl",e.textAlign=p?Ut:pe),o-=c*this._fontSizeFraction/this.lineHeight,d){this._renderChar(t,e,l,0,n.join(""),i,o),e.restore();return}for(let $=0,tt=n.length-1;$<=tt;$++)X=$===tt||this.charSpacing||f,O+=n[$],M=this.__charBounds[l][$],R===0?(i+=_*(M.kernedWidth-M.width),R+=M.width):R+=M.kernedWidth,h&&!X&&this._reSpaceAndTab.test(n[$])&&(X=!0),X||(w=w||this.getCompleteStyleDeclaration(l,$),E=this.getCompleteStyleDeclaration(l,$+1),X=al(w,E,!1)),X&&(f?(e.save(),e.translate(M.renderLeft,M.renderTop),e.rotate(M.angle),this._renderChar(t,e,l,$,O,-R/2,0),e.restore()):(B=i,this._renderChar(t,e,l,$,O,B,o)),O="",w=E,i+=_*R,R=0);e.restore()}_applyPatternGradientTransformText(t){const e=ce(),n=this.width+this.strokeWidth,i=this.height+this.strokeWidth,o=e.getContext("2d");return e.width=n,e.height=i,o.beginPath(),o.moveTo(0,0),o.lineTo(n,0),o.lineTo(n,i),o.lineTo(0,i),o.closePath(),o.translate(n/2,i/2),o.fillStyle=t.toLive(o),this._applyPatternGradientTransform(o,t),o.fill(),o.createPattern(e,"no-repeat")}handleFiller(t,e,n){let i,o;return Tn(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(i=-this.width/2,o=-this.height/2,t.translate(i,o),t[e]=this._applyPatternGradientTransformText(n),{offsetX:i,offsetY:o}):(t[e]=n.toLive(t),this._applyPatternGradientTransform(t,n)):(t[e]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(t,e){let{stroke:n,strokeWidth:i}=e;return t.lineWidth=i,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",n)}_setFillStyles(t,e){let{fill:n}=e;return this.handleFiller(t,"fillStyle",n)}_renderChar(t,e,n,i,o,l,c){const h=this._getStyleDeclaration(n,i),f=this.getCompleteStyleDeclaration(n,i),d=t==="fillText"&&f.fill,p=t==="strokeText"&&f.stroke&&f.strokeWidth;if(!(!p&&!d)){if(e.save(),e.font=this._getFontDeclaration(f),h.textBackgroundColor&&this._removeShadow(e),h.deltaY&&(c+=h.deltaY),d){const _=this._setFillStyles(e,f);e.fillText(o,l-_.offsetX,c-_.offsetY)}if(p){const _=this._setStrokeStyles(e,f);e.strokeText(o,l-_.offsetX,c-_.offsetY)}e.restore()}}setSuperscript(t,e){this._setScript(t,e,this.superscript)}setSubscript(t,e){this._setScript(t,e,this.subscript)}_setScript(t,e,n){const i=this.get2DCursorLocation(t,!0),o=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),l=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),c={fontSize:o*n.size,deltaY:l+o*n.baseline};this.setSelectionStyles(c,t,e)}_getLineLeftOffset(t){const e=this.getLineWidth(t),n=this.width-e,i=this.textAlign,o=this.direction,l=this.isEndOfWrapping(t);let c=0;return i===Kn||i===Ks&&!l||i===$s&&!l||i===Ra&&!l?0:(i===bt&&(c=n/2),i===pe&&(c=n),i===Ks&&(c=n/2),i===$s&&(c=n),o==="rtl"&&(i===pe||i===Kn||i===$s?c=0:i===Ut||i===Ra?c=-n:(i===bt||i===Ks)&&(c=-n/2)),c)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(t){if(this.__lineWidths[t]!==void 0)return this.__lineWidths[t];const{width:e}=this.measureLine(t);return this.__lineWidths[t]=e,e}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(t,e,n){var i;return(i=this._getStyleDeclaration(t,e)[n])!==null&&i!==void 0?i:this[n]}_renderTextDecoration(t,e){if(!this[e]&&!this.styleHas(e))return;let n=this._getTopOffset();const i=this._getLeftOffset(),o=this.path,l=this._getWidthOfCharSpacing(),c=this.offsets[e];for(let h=0,f=this._textLines.length;h<f;h++){const d=this.getHeightOfLine(h);if(!this[e]&&!this.styleHas(e,h)){n+=d;continue}const p=this._textLines[h],_=d/this.lineHeight,v=this._getLineLeftOffset(h);let w=0,E=0,O=this.getValueOfPropertyAt(h,0,e),M=this.getValueOfPropertyAt(h,0,"fill"),R,X;const B=n+_*(1-this._fontSizeFraction);let $=this.getHeightOfChar(h,0),tt=this.getValueOfPropertyAt(h,0,"deltaY");for(let ot=0,it=p.length;ot<it;ot++){const at=this.__charBounds[h][ot];R=this.getValueOfPropertyAt(h,ot,e),X=this.getValueOfPropertyAt(h,ot,"fill");const dt=this.getHeightOfChar(h,ot),Lt=this.getValueOfPropertyAt(h,ot,"deltaY");if(o&&R&&X)t.save(),t.fillStyle=M,t.translate(at.renderLeft,at.renderTop),t.rotate(at.angle),t.fillRect(-at.kernedWidth/2,c*dt+Lt,at.kernedWidth,this.fontSize/15),t.restore();else if((R!==O||X!==M||dt!==$||Lt!==tt)&&E>0){let Tt=i+v+w;this.direction==="rtl"&&(Tt=this.width-Tt-E),O&&M&&(t.fillStyle=M,t.fillRect(Tt,B+c*$+tt,E,this.fontSize/15)),w=at.left,E=at.width,O=R,M=X,$=dt,tt=Lt}else E+=at.kernedWidth}let nt=i+v+w;this.direction==="rtl"&&(nt=this.width-nt-E),t.fillStyle=X,R&&X&&t.fillRect(nt,B+c*$+tt,E-l,this.fontSize/15),n+=d}this._removeShadow(t)}_getFontDeclaration(){let{fontFamily:t=this.fontFamily,fontStyle:e=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:i=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;const l=t.includes("'")||t.includes('"')||t.includes(",")||en.genericFonts.includes(t.toLowerCase())?t:'"'.concat(t,'"');return[e,n,"".concat(o?this.CACHE_FONT_SIZE:i,"px"),l].join(" ")}render(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(t)))}graphemeSplit(t){return G0(t)}_splitTextIntoLines(t){const e=t.split(this._reNewline),n=new Array(e.length),i=[`
`];let o=[];for(let l=0;l<e.length;l++)n[l]=this.graphemeSplit(e[l]),o=o.concat(n[l],i);return o.pop(),{_unwrappedLines:n,lines:e,graphemeText:o,graphemeLines:n}}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject([...g_,...t])),{},{styles:Y0(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(t,e){const{textLayoutProperties:n}=this.constructor;super.set(t,e);let i=!1,o=!1;if(typeof t=="object")for(const l in t)l==="path"&&this.setPathInfo(),i=i||n.includes(l),o=o||l==="path";else i=n.includes(t),o=t==="path";return o&&this.setPathInfo(),i&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(t,e,n){const i=yr(t,en.ATTRIBUTE_NAMES,n),o=D(D({},e),i),{textAnchor:l=Ut,textDecoration:c="",dx:h=0,dy:f=0,top:d=0,left:p=0,fontSize:_=Nh,strokeWidth:v=1}=o,w=Zt(o,fA),E=(t.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),O=new this(E,D({left:p+h,top:d+f,underline:c.includes("underline"),overline:c.includes("overline"),linethrough:c.includes("line-through"),strokeWidth:0,fontSize:_},w)),M=O.getScaledHeight()/O.height,R=(O.height+O.strokeWidth)*O.lineHeight-O.height,X=R*M,B=O.getScaledHeight()+X;let $=0;return l===bt&&($=O.getScaledWidth()/2),l===pe&&($=O.getScaledWidth()),O.set({left:O.left-$,top:O.top-(B-O.fontSize*(.07+O._fontSizeFraction))/O.lineHeight,strokeWidth:v}),O}static fromObject(t){return this._fromObject(D(D({},t),{},{styles:U0(t.styles||{},t.text)}),{extraParam:"text"})}}A(en,"textLayoutProperties",d_);A(en,"cacheProperties",[...vr,...g_]);A(en,"ownDefaults",lA);A(en,"type","Text");A(en,"genericFonts",["sans-serif","serif","cursive","fantasy","monospace"]);A(en,"ATTRIBUTE_NAMES",Vr.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor"));F0(en,[uA]);ut.setClass(en);ut.setSVGClass(en);class gA{constructor(t){A(this,"target",void 0),A(this,"__mouseDownInPlace",!1),A(this,"__dragStartFired",!1),A(this,"__isDraggingOver",!1),A(this,"__dragStartSelection",void 0),A(this,"__dragImageDisposer",void 0),A(this,"_dispose",void 0),this.target=t;const e=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{e.forEach(n=>n()),this._dispose=void 0}}isPointerOverSelection(t){const e=this.target,n=e.getSelectionStartFromPointer(t);return e.isEditing&&n>=e.selectionStart&&n<=e.selectionEnd&&e.selectionStart<e.selectionEnd}start(t){return this.__mouseDownInPlace=this.isPointerOverSelection(t)}isActive(){return this.__mouseDownInPlace}end(t){const e=this.isActive();return e&&!this.__dragStartFired&&(this.target.setCursorByClick(t),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,e}getDragStartSelection(){return this.__dragStartSelection}setDragImage(t,e){var n;let{selectionStart:i,selectionEnd:o}=e;const l=this.target,c=l.canvas,h=new F(l.flipX?-1:1,l.flipY?-1:1),f=l._getCursorBoundaries(i),p=new F(f.left+f.leftOffset,f.top+f.topOffset).multiply(h).transform(l.calcTransformMatrix()),v=c.getPointer(t).subtract(p),w=c._isRetinaScaling(),E=l.getCanvasRetinaScaling(),O=l.getBoundingRect(!0),M=p.subtract(new F(O.left,O.top)),R=c.viewportTransform,X=M.add(v).transform(R,!0),B=l.backgroundColor,$=fs(l.styles);l.backgroundColor="";const tt={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};l.setSelectionStyles(tt,0,i),l.setSelectionStyles(tt,o,l.text.length),l.dirty=!0;const nt=l.toCanvasElement({enableRetinaScaling:w,viewportTransform:!0});l.backgroundColor=B,l.styles=$,l.dirty=!0,oo(nt,{position:"fixed",left:"".concat(-nt.width,"px"),border:tn,width:"".concat(nt.width/E,"px"),height:"".concat(nt.height/E,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{nt.remove()},Fn(t.target||this.target.hiddenTextarea).body.appendChild(nt),(n=t.dataTransfer)===null||n===void 0||n.setDragImage(nt,X.x,X.y)}onDragStart(t){this.__dragStartFired=!0;const e=this.target,n=this.isActive();if(n&&t.dataTransfer){const i=this.__dragStartSelection={selectionStart:e.selectionStart,selectionEnd:e.selectionEnd},o=e._text.slice(i.selectionStart,i.selectionEnd).join(""),l=D({text:e.text,value:o},i);t.dataTransfer.setData("text/plain",o),t.dataTransfer.setData("application/fabric",JSON.stringify({value:o,styles:e.getSelectionStyles(i.selectionStart,i.selectionEnd,!0)})),t.dataTransfer.effectAllowed="copyMove",this.setDragImage(t,l)}return e.abortCursorAnimation(),n}canDrop(t){if(this.target.editable&&!this.target.getActiveControl()&&!t.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const e=this.target.getSelectionStartFromPointer(t),n=this.__dragStartSelection;return e<n.selectionStart||e>n.selectionEnd}return!0}return!1}targetCanDrop(t){return this.target.canDrop(t)}dragEnterHandler(t){let{e}=t;const n=this.targetCanDrop(e);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(t){const{e}=t,n=this.targetCanDrop(e);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(e.preventDefault(),t.canDrop=!0,t.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(t){var e;const{e:n}=t,i=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let o=(e=n.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain");if(o&&!i){const l=this.target,c=l.canvas;let h=l.getSelectionStartFromPointer(n);const{styles:f}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},d=o[Math.max(0,o.length-1)],p=0;if(this.__dragStartSelection){const _=this.__dragStartSelection.selectionStart,v=this.__dragStartSelection.selectionEnd;h>_&&h<=v?h=_:h>v&&(h-=v-_),l.removeChars(_,v),delete this.__dragStartSelection}l._reNewline.test(d)&&(l._reNewline.test(l._text[h])||h===l._text.length)&&(o=o.trimEnd()),t.didDrop=!0,t.dropTarget=l,l.insertChars(o,f,h),c.setActiveObject(l),l.enterEditing(n),l.selectionStart=Math.min(h+p,l._text.length),l.selectionEnd=Math.min(l.selectionStart+o.length,l._text.length),l.hiddenTextarea.value=l.text,l._updateTextarea(),l.hiddenTextarea.focus(),l.fire("changed",{index:h+p,action:"drop"}),c.fire("text:changed",{target:l}),c.contextTopDirty=!0,c.requestRenderAll()}}dragEndHandler(t){let{e}=t;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const i=this.target,o=this.target.canvas,{selectionStart:l,selectionEnd:c}=this.__dragStartSelection,h=((n=e.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||tn;h===tn?(i.selectionStart=l,i.selectionEnd=c,i._updateTextarea(),i.hiddenTextarea.focus()):(i.clearContextTop(),h==="move"&&(i.removeChars(l,c),i.selectionStart=i.selectionEnd=l,i.hiddenTextarea&&(i.hiddenTextarea.value=i.text),i._updateTextarea(),i.fire("changed",{index:l,action:"dragend"}),o.fire("text:changed",{target:i}),o.requestRenderAll()),i.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Rp=/[ \n\.,;!\?\-]/;class pA extends en{constructor(){super(...arguments),A(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(t){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(t)}_animateCursor(t){let{toValue:e,duration:n,delay:i,onComplete:o}=t;return su({startValue:this._currentCursorOpacity,endValue:e,duration:n,delay:i,onComplete:o,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:l=>{this._currentCursorOpacity=l,this.renderCursorOrSelection()}})}_tick(t){this._currentTickState=this._animateCursor({toValue:1,duration:this.cursorDuration,delay:t,onComplete:this._onTickComplete})}_onTickComplete(){var t;(t=this._currentTickCompleteState)===null||t===void 0||t.abort(),this._currentTickCompleteState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:100,onComplete:this._tick})}initDelayedCursor(t){this.abortCursorAnimation(),this._tick(t?0:this.cursorDelay)}abortCursorAnimation(){let t=!1;[this._currentTickState,this._currentTickCompleteState].forEach(e=>{e&&!e.isDone()&&(t=!0,e.abort())}),this._currentCursorOpacity=1,t&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(t=>!t||t.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(t){let e=0,n=t-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n--;for(;/\S/.test(this._text[n])&&n>-1;)e++,n--;return t-e}findWordBoundaryRight(t){let e=0,n=t;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e}findLineBoundaryLeft(t){let e=0,n=t-1;for(;!/\n/.test(this._text[n])&&n>-1;)e++,n--;return t-e}findLineBoundaryRight(t){let e=0,n=t;for(;!/\n/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e}searchWordBoundary(t,e){const n=this._text;let i=t>0&&this._reSpace.test(n[t])&&(e===-1||!zh.test(n[t-1]))?t-1:t,o=n[i];for(;i>0&&i<n.length&&!Rp.test(o);)i+=e,o=n[i];return e===-1&&Rp.test(o)&&i++,i}selectWord(t){t=t||this.selectionStart;const e=this.searchWordBoundary(t,-1),n=Math.max(e,this.searchWordBoundary(t,1));this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(t){t=t||this.selectionStart;const e=this.findLineBoundaryLeft(t),n=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(t){this.isEditing||!this.editable||(this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}updateSelectionOnMouseMove(t){if(this.getActiveControl())return;const e=this.hiddenTextarea;Fn(e).activeElement!==e&&e.focus();const n=this.getSelectionStartFromPointer(t),i=this.selectionStart,o=this.selectionEnd;(n!==this.__selectionStartOnMouseDown||i===o)&&(i===n||o===n)||(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==i||this.selectionEnd!==o)&&(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(t,e,n){const i=n.slice(0,t),o=this.graphemeSplit(i).length;if(t===e)return{selectionStart:o,selectionEnd:o};const l=n.slice(t,e),c=this.graphemeSplit(l).length;return{selectionStart:o,selectionEnd:o+c}}fromGraphemeToStringSelection(t,e,n){const i=n.slice(0,t),o=i.join("").length;if(t===e)return{selectionStart:o,selectionEnd:o};const l=n.slice(t,e),c=l.join("").length;return{selectionStart:o,selectionEnd:o+c}}_updateTextarea(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){const t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const t=this.hiddenTextarea;this.text=t.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const e=this.fromStringToGraphemeSelection(t.selectionStart,t.selectionEnd,t.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),n=this.get2DCursorLocation(t),i=n.lineIndex,o=n.charIndex,l=this.getValueOfPropertyAt(i,o,"fontSize")*this.lineHeight,c=e.leftOffset,h=this.getCanvasRetinaScaling(),f=this.canvas.upperCanvasEl,d=f.width/h,p=f.height/h,_=d-l,v=p-l,w=new F(e.left+c,e.top+e.topOffset+l).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new F(f.clientWidth/d,f.clientHeight/p));return w.x<0&&(w.x=0),w.x>_&&(w.x=_),w.y<0&&(w.y=0),w.y>v&&(w.y=v),w.x+=this.canvas._offset.left,w.y+=this.canvas._offset.top,{left:"".concat(w.x,"px"),top:"".concat(w.y,"px"),fontSize:"".concat(l,"px"),charHeight:l}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const t=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditing(){const t=this._textBeforeEdit!==this.text;return this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const t in this.styles)this._textLines[t]||delete this.styles[t]}removeStyleFromTo(t,e){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(t,!0),{lineIndex:o,charIndex:l}=this.get2DCursorLocation(e,!0);if(n!==o){if(this.styles[n])for(let c=i;c<this._unwrappedTextLines[n].length;c++)delete this.styles[n][c];if(this.styles[o])for(let c=l;c<this._unwrappedTextLines[o].length;c++){const h=this.styles[o][c];h&&(this.styles[n]||(this.styles[n]={}),this.styles[n][i+c-l]=h)}for(let c=n+1;c<=o;c++)delete this.styles[c];this.shiftLineStyles(o,n-o)}else if(this.styles[n]){const c=this.styles[n],h=l-i;for(let f=i;f<l;f++)delete c[f];for(const f in this.styles[n]){const d=parseInt(f,10);d>=l&&(c[d-h]=c[f],delete c[f])}}}shiftLineStyles(t,e){const n=Object.assign({},this.styles);for(const i in this.styles){const o=parseInt(i,10);o>t&&(this.styles[o+e]=n[o],n[o-e]||delete this.styles[o])}}insertNewlineStyleObject(t,e,n,i){const o={},l=this._unwrappedTextLines[t].length===e;let c=!1;n||(n=1),this.shiftLineStyles(t,n);const h=this.styles[t]?this.styles[t][e===0?e:e-1]:void 0;for(const d in this.styles[t]){const p=parseInt(d,10);p>=e&&(c=!0,o[p-e]=this.styles[t][d],l&&e===0||delete this.styles[t][d])}let f=!1;for(c&&!l&&(this.styles[t+n]=o,f=!0),f&&n--;n>0;)i&&i[n-1]?this.styles[t+n]={0:D({},i[n-1])}:h?this.styles[t+n]={0:D({},h)}:delete this.styles[t+n],n--;this._forceClearCache=!0}insertCharStyleObject(t,e,n,i){this.styles||(this.styles={});const o=this.styles[t],l=o?D({},o):{};n||(n=1);for(const h in l){const f=parseInt(h,10);f>=e&&(o[f+n]=l[f],l[f-n]||delete o[f])}if(this._forceClearCache=!0,i){for(;n--;)Object.keys(i[n]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+n]=D({},i[n]));return}if(!o)return;const c=o[e?e-1:1];for(;c&&n--;)this.styles[t][e+n]=D({},c)}insertNewStyleBlock(t,e,n){const i=this.get2DCursorLocation(e,!0),o=[0];let l=0;for(let h=0;h<t.length;h++)t[h]===`
`?(l++,o[l]=0):o[l]++;o[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,o[0],n),n=n&&n.slice(o[0]+1)),l&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+o[0],l);let c;for(c=1;c<l;c++)o[c]>0?this.insertCharStyleObject(i.lineIndex+c,0,o[c],n):n&&this.styles[i.lineIndex+c]&&n[0]&&(this.styles[i.lineIndex+c][0]=n[0]),n=n&&n.slice(o[c]+1);o[c]>0&&this.insertCharStyleObject(i.lineIndex+c,0,o[c],n)}removeChars(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t+1;this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;i>n&&this.removeStyleFromTo(n,i);const o=this.graphemeSplit(t);this.insertNewStyleBlock(o,n,e),this._text=[...this._text.slice(0,n),...o,...this._text.slice(i)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(t,e,n){n<=t?(e===t?this._selectionDirection=Ut:this._selectionDirection===pe&&(this._selectionDirection=Ut,this.selectionEnd=t),this.selectionStart=n):n>t&&n<e?this._selectionDirection===pe?this.selectionEnd=n:this.selectionStart=n:(e===t?this._selectionDirection=pe:this._selectionDirection===Ut&&(this._selectionDirection=pe,this.selectionStart=e),this.selectionEnd=n)}}class mA extends pA{initHiddenTextarea(){const t=this.canvas&&Fn(this.canvas.getElement())||us(),e=t.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(l=>{let[c,h]=l;return e.setAttribute(c,h)});const{top:n,left:i,fontSize:o}=this._calcTextareaPosition();e.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(i,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(o,";"),(this.hiddenTextareaContainer||t.body).appendChild(e),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",onCompositionUpdate:"onCompositionEnd"}).map(l=>{let[c,h]=l;return e.addEventListener(c,this[h].bind(this))}),this.hiddenTextarea=e}blur(){this.abortCursorAnimation()}onKeyDown(t){if(!this.isEditing)return;const e=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else if(t.keyCode in this.ctrlKeysMapDown&&(t.ctrlKey||t.metaKey))this[this.ctrlKeysMapDown[t.keyCode]](t);else return;t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(t){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey))this[this.ctrlKeysMapUp[t.keyCode]](t);else return;t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll()}onInput(t){const e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),!this.isEditing)return;const n=()=>{this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value===""){this.styles={},n();return}const i=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,o=this._text.length,l=i.length,c=this.selectionStart,h=this.selectionEnd,f=c!==h;let d,p,_=l-o,v,w;const E=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),O=c>E.selectionStart;f?(p=this._text.slice(c,h),_+=h-c):l<o&&(O?p=this._text.slice(h+_,h):p=this._text.slice(c,c-_));const M=i.slice(E.selectionEnd-_,E.selectionEnd);if(p&&p.length&&(M.length&&(d=this.getSelectionStyles(c,c+1,!1),d=M.map(()=>d[0])),f?(v=c,w=h):O?(v=h-p.length,w=h):(v=h,w=h+p.length),this.removeStyleFromTo(v,w)),M.length){const{copyPasteData:R}=qn();e&&M.join("")===R.copiedText&&!At.disableStyleCopyPaste&&(d=R.copiedTextStyle),this.insertNewStyleBlock(M,c,d)}n()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(t){let{target:e}=t;const{selectionStart:n,selectionEnd:i}=e;this.compositionStart=n,this.compositionEnd=i,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:t}=qn();t.copiedText=this.getSelectedText(),At.disableStyleCopyPaste?t.copiedTextStyle=void 0:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(t,e){let n=this._getLineLeftOffset(t),i;return e>0&&(i=this.__charBounds[t][e-1],n+=i.left+i.width),n}getDownCursorOffset(t,e){const n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),o=i.lineIndex;if(o===this._textLines.length-1||t.metaKey||t.keyCode===34)return this._text.length-n;const l=i.charIndex,c=this._getWidthBeforeCursor(o,l),h=this._getIndexOnLine(o+1,c);return this._textLines[o].slice(l).length+h+1+this.missingNewlineOffset(o)}_getSelectionForOffset(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart}getUpCursorOffset(t,e){const n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),o=i.lineIndex;if(o===0||t.metaKey||t.keyCode===33)return-n;const l=i.charIndex,c=this._getWidthBeforeCursor(o,l),h=this._getIndexOnLine(o-1,c),f=this._textLines[o].slice(0,l),d=this.missingNewlineOffset(o-1);return-this._textLines[o-1].length+h-f.length+(1-d)}_getIndexOnLine(t,e){const n=this._textLines[t];let o=this._getLineLeftOffset(t),l=0,c,h;for(let f=0,d=n.length;f<d;f++)if(c=this.__charBounds[t][f].width,o+=c,o>e){h=!0;const p=o-c,_=o,v=Math.abs(p-e);l=Math.abs(_-e)<v?f:f-1;break}return h||(l=n.length-1),l}moveCursorDown(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)}moveCursorUp(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",t)}_moveCursorUpOrDown(t,e){const n=this["get".concat(t,"CursorOffset")](e,this._selectionDirection===pe);if(e.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){const i=this.text.length;this.selectionStart=yi(0,this.selectionStart,i),this.selectionEnd=yi(0,this.selectionEnd,i),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(t){const e=this._selectionDirection===Ut?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),t!==0}moveCursorWithoutShift(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),t!==0}moveCursorLeft(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",t)}_move(t,e,n){let i;if(t.altKey)i=this["findWordBoundary".concat(n)](this[e]);else if(t.metaKey||t.keyCode===35||t.keyCode===36)i=this["findLineBoundary".concat(n)](this[e]);else return this[e]+=n==="Left"?-1:1,!0;return typeof i<"u"&&this[e]!==i?(this[e]=i,!0):!1}_moveLeft(t,e){return this._move(t,e,"Left")}_moveRight(t,e){return this._move(t,e,"Right")}moveCursorLeftWithoutShift(t){let e=!0;return this._selectionDirection=Ut,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e}moveCursorLeftWithShift(t){if(this._selectionDirection===pe&&this.selectionStart!==this.selectionEnd)return this._moveLeft(t,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection=Ut,this._moveLeft(t,"selectionStart")}moveCursorRight(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)}_moveCursorLeftOrRight(t,e){const n="moveCursor".concat(t).concat(e.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(t){if(this._selectionDirection===Ut&&this.selectionStart!==this.selectionEnd)return this._moveRight(t,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection=pe,this._moveRight(t,"selectionEnd")}moveCursorRightWithoutShift(t){let e=!0;return this._selectionDirection=pe,this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e}}function Xc(r){return r.button&&r.button!==1}class _A extends mA{constructor(){super(...arguments),A(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new gA(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(t){return this.draggableTextDelegate.onDragStart(t)}canDrop(t){return this.draggableTextDelegate.canDrop(t)}onMouseDown(t){if(!this.canvas)return;this.__newClickTime=+new Date;const e=t.pointer;this.isTripleClick(e)&&(this.fire("tripleclick",t),uh(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastSelected=this.selected}isTripleClick(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y}doubleClickHandler(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))}tripleClickHandler(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))}_mouseDownHandler(t){let{e}=t;!this.canvas||!this.editable||Xc(e)||this.getActiveControl()||this.draggableTextDelegate.start(e)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))}_mouseDownHandlerBefore(t){let{e}=t;!this.canvas||!this.editable||Xc(e)||(this.selected=this===this.canvas._activeObject)}mouseUpHandler(t){let{e,transform:n,button:i}=t;const o=this.draggableTextDelegate.end(e);if(this.canvas){this.canvas.textEditingManager.unregister(this);const l=this.canvas._activeObject;if(l&&l!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||Xc(e)||o||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(t){const e=this.getSelectionStartFromPointer(t),n=this.selectionStart,i=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(n,i,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(t){const e=this.canvas.getPointer(t).transform(Pe(this.calcTransformMatrix())).add(new F(-this._getLeftOffset(),-this._getTopOffset()));let n=0,i=0,o=0;for(let d=0;d<this._textLines.length&&n<=e.y;d++)n+=this.getHeightOfLine(d),o=d,d>0&&(i+=this._textLines[d-1].length+this.missingNewlineOffset(d-1));let c=Math.abs(this._getLineLeftOffset(o));const h=this._textLines[o].length,f=this.__charBounds[o];for(let d=0;d<h;d++){const p=f[d].kernedWidth,_=c+p;if(e.x<=_){Math.abs(e.x-_)<=Math.abs(e.x-c)&&i++;break}c=_,i++}return Math.min(this.flipX?h-i:i,this._text.length)}}const Fa="moveCursorUp",Ia="moveCursorDown",Ba="moveCursorLeft",ja="moveCursorRight",Wa="exitEditing",vA={9:Wa,27:Wa,33:Fa,34:Ia,35:ja,36:Ba,37:Ba,38:Fa,39:ja,40:Ia},yA={9:Wa,27:Wa,33:Fa,34:Ia,35:Ba,36:ja,37:ja,38:Fa,39:Ba,40:Ia},xA={67:"copy",88:"cut"},wA={65:"selectAll"},CA={selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1,keysMap:vA,keysMapRtl:yA,ctrlKeysMapDown:wA,ctrlKeysMapUp:xA};class Kr extends _A{static getDefaults(){return D(D({},super.getDefaults()),Kr.ownDefaults)}get type(){const t=super.type;return t==="itext"?"i-text":t}constructor(t,e){super(t,e),this.initBehavior()}_set(t,e){return this.isEditing&&this._savedProps&&t in this._savedProps?(this._savedProps[t]=e,this):(t==="canvas"&&(this.canvas instanceof yh&&this.canvas.textEditingManager.remove(this),e instanceof yh&&e.textEditingManager.add(this)),super._set(t,e))}setSelectionStart(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)}setSelectionEnd(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)}_updateAndFire(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(t,e,n)}setSelectionStyles(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(t,e,n)}get2DCursorLocation(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(t,e)}render(t){super.render(t),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(t){const e=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(t);return this.isEditing=e,n}renderCursorOrSelection(){if(!this.isEditing)return;const t=this.clearContextTop(!0);if(!t)return;const e=this._getCursorBoundaries();this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),this.canvas.contextTopDirty=!0,t.restore()}_getCursorBoundaries(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),i=this._getTopOffset(),o=this._getCursorBoundariesOffsets(t,e);return{left:n,top:i,leftOffset:o.left,topOffset:o.top}}_getCursorBoundariesOffsets(t,e){return e?this.__getCursorBoundariesOffsets(t):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(t)}__getCursorBoundariesOffsets(t){let e=0,n=0;const{charIndex:i,lineIndex:o}=this.get2DCursorLocation(t);for(let f=0;f<o;f++)e+=this.getHeightOfLine(f);const l=this._getLineLeftOffset(o),c=this.__charBounds[o][i];c&&(n=c.left),this.charSpacing!==0&&i===this._textLines[o].length&&(n-=this._getWidthOfCharSpacing());const h={top:e,left:l+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===pe||this.textAlign===Kn||this.textAlign===$s?h.left*=-1:(this.textAlign===Ut||this.textAlign===Ra||this.textAlign===bt||this.textAlign===Ks)&&(h.left=l-(n>0?n:0))),h}renderCursorAt(t){const e=this._getCursorBoundaries(t,!0);this._renderCursor(this.canvas.contextTop,e,t)}renderCursor(t,e){this._renderCursor(t,e,this.selectionStart)}_renderCursor(t,e,n){const i=this.get2DCursorLocation(n),o=i.lineIndex,l=i.charIndex>0?i.charIndex-1:0,c=this.getValueOfPropertyAt(o,l,"fontSize"),h=this.scaleX*this.canvas.getZoom(),f=this.cursorWidth/h,d=this.getValueOfPropertyAt(o,l,"deltaY"),p=e.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(o)/this.lineHeight-c*(1-this._fontSizeFraction);this.inCompositionMode&&this.renderSelection(t,e),t.fillStyle=this.cursorColor||this.getValueOfPropertyAt(o,l,"fill"),t.globalAlpha=this._currentCursorOpacity,t.fillRect(e.left+e.leftOffset-f/2,p+e.top+d,f,c)}renderSelection(t,e){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(t,n,e)}renderDragSourceEffect(){const t=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,t,this._getCursorBoundaries(t.selectionStart,!0))}renderDropTargetEffect(t){const e=this.getSelectionStartFromPointer(t);this.renderCursorAt(e)}_renderSelection(t,e,n){const i=e.selectionStart,o=e.selectionEnd,l=this.textAlign.includes(Kn),c=this.get2DCursorLocation(i),h=this.get2DCursorLocation(o),f=c.lineIndex,d=h.lineIndex,p=c.charIndex<0?0:c.charIndex,_=h.charIndex<0?0:h.charIndex;for(let v=f;v<=d;v++){const w=this._getLineLeftOffset(v)||0;let E=this.getHeightOfLine(v),O=0,M=0,R=0;if(v===f&&(M=this.__charBounds[f][p].left),v>=f&&v<d)R=l&&!this.isEndOfWrapping(v)?this.width:this.getLineWidth(v)||5;else if(v===d)if(_===0)R=this.__charBounds[d][_].left;else{const nt=this._getWidthOfCharSpacing();R=this.__charBounds[d][_-1].left+this.__charBounds[d][_-1].width-nt}O=E,(this.lineHeight<1||v===d&&this.lineHeight>1)&&(E/=this.lineHeight);let X=n.left+w+M,B=E,$=0;const tt=R-M;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",B=1,$=E):t.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===pe||this.textAlign===Kn||this.textAlign===$s?X=this.width-X-tt:(this.textAlign===Ut||this.textAlign===Ra||this.textAlign===bt||this.textAlign===Ks)&&(X=n.left+w-R)),t.fillRect(X,n.top+n.topOffset+$,tt,B),n.topOffset+=O}}getCurrentCharFontSize(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")}getCurrentCharColor(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fill")}_getCurrentCharIndex(){const t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}dispose(){this._exitEditing(),this.draggableTextDelegate.dispose(),super.dispose()}}A(Kr,"ownDefaults",CA);A(Kr,"type","IText");ut.setClass(Kr);ut.setClass(Kr,"i-text");const SA={minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1};class gs extends Kr{static getDefaults(){return D(D({},super.getDefaults()),{},{controls:R0()},gs.ownDefaults)}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Kn)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(t){let e=0,n=0,i=0;const o={};for(let l=0;l<t.graphemeLines.length;l++)t.graphemeText[i]===`
`&&l>0?(n=0,i++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[i])&&l>0&&(n++,i++),o[l]={line:e,offset:n},i+=t.graphemeLines[l].length,n+=t.graphemeLines[l].length;return o}styleHas(t,e){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];n&&(e=n.line)}return super.styleHas(t,e)}isEmptyStyles(t){if(!this.styles)return!0;let e=0,n=t+1,i,o=!1;const l=this._styleMap[t],c=this._styleMap[t+1];l&&(t=l.line,e=l.offset),c&&(n=c.line,o=n===t,i=c.offset);const h=typeof t>"u"?this.styles:{line:this.styles[t]};for(const f in h)for(const d in h[f]){const p=parseInt(d,10);if(p>=e&&(!o||p<i))for(const _ in h[f][d])return!1}return!0}_getStyleDeclaration(t,e){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[t];if(!n)return{};t=n.line,e=n.offset+e}return super._getStyleDeclaration(t,e)}_setStyleDeclaration(t,e,n){const i=this._styleMap[t];t=i.line,e=i.offset+e,this.styles[t][e]=n}_deleteStyleDeclaration(t,e){const n=this._styleMap[t];t=n.line,e=n.offset+e,delete this.styles[t][e]}_getLineStyle(t){const e=this._styleMap[t];return!!this.styles[e.line]}_setLineStyle(t){const e=this._styleMap[t];this.styles[e.line]={}}_wrapText(t,e){this.isWrapping=!0;const n=this.getGraphemeDataForRender(t),i=[];for(let o=0;o<n.wordsData.length;o++)i.push(...this._wrapLine(o,e,n));return this.isWrapping=!1,i}getGraphemeDataForRender(t){const e=this.splitByGrapheme,n=e?"":" ";let i=0;return{wordsData:t.map((l,c)=>{let h=0;const f=e?this.graphemeSplit(l):this.wordSplit(l);return f.length===0?[{word:[],width:0}]:f.map(d=>{const p=e?[d]:this.graphemeSplit(d),_=this._measureWord(p,c,h);return i=Math.max(_,i),h+=p.length+n.length,{word:p,width:_}})}),largestWordWidth:i}}_measureWord(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=0,o;const l=!0;for(let c=0,h=t.length;c<h;c++){const f=this._getGraphemeBox(t[c],e,c+n,o,l);i+=f.kernedWidth,o=t[c]}return i}wordSplit(t){return t.split(this._wordJoiners)}_wrapLine(t,e,n){let{largestWordWidth:i,wordsData:o}=n,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const c=this._getWidthOfCharSpacing(),h=this.splitByGrapheme,f=[],d=h?"":" ";let p=0,_=[],v=0,w=0,E=!0;e-=l;const O=Math.max(e,i,this.dynamicMinWidth),M=o[t];v=0;let R;for(R=0;R<M.length;R++){const{word:X,width:B}=M[R];v+=X.length,p+=w+B-c,p>O&&!E?(f.push(_),_=[],p=B,E=!0):p+=c,!E&&!h&&_.push(d),_=_.concat(X),w=h?0:this._measureWord([d],t,v),v++,E=!1}return R&&f.push(_),i+l>this.dynamicMinWidth&&(this.dynamicMinWidth=i-c+l),f}isEndOfWrapping(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line}missingNewlineOffset(t,e){return this.splitByGrapheme&&!e?this.isEndOfWrapping(t)?1:0:1}_splitTextIntoLines(t){const e=super._splitTextIntoLines(t),n=this._wrapText(e.lines,this.width),i=new Array(n.length);for(let o=0;o<n.length;o++)i[o]=n[o].join("");return e.lines=i,e.graphemeLines=n,e}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const t=new Map;for(const e in this._styleMap){const n=parseInt(e,10);if(this._textLines[n]){const i=this._styleMap[e].line;t.set("".concat(i),!0)}}for(const e in this.styles)t.has(e)||delete this.styles[e]}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...t])}}A(gs,"type","Textbox");A(gs,"textLayoutProperties",[...Kr.textLayoutProperties,"width"]);A(gs,"ownDefaults",SA);ut.setClass(gs);class bA{constructor(){A(this,"resources",{})}applyFilters(t,e,n,i,o){const l=o.getContext("2d");if(!l)return;l.drawImage(e,0,0,n,i);const c=l.getImageData(0,0,n,i),h=l.getImageData(0,0,n,i),f={sourceWidth:n,sourceHeight:i,imageData:c,originalEl:e,originalImageData:h,canvasEl:o,ctx:l,filterBackend:this};t.forEach(p=>{p.applyTo(f)});const{imageData:d}=f;return(d.width!==n||d.height!==i)&&(o.width=d.width,o.height=d.height),l.putImageData(d,0,0),f}}class m_{constructor(){let{tileSize:t=At.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};A(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),A(this,"resources",{}),this.tileSize=t,this.setupGLContext(t,t),this.captureGPUInfo()}setupGLContext(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.chooseFastestCopyGLTo2DMethod(t,e)}chooseFastestCopyGLTo2DMethod(t,e){const n=ce(),i=new ArrayBuffer(t*e*4);if(At.forceGLPutImageData){this.imageBuffer=i,this.copyGLTo2D=Hc;return}const o={imageBuffer:i},l={destinationWidth:t,destinationHeight:e,targetCanvas:n};let c;n.width=t,n.height=e,c=fi().performance.now(),this.copyGLTo2D.call(o,this.gl,l);const h=fi().performance.now()-c;c=fi().performance.now(),Hc.call(o,this.gl,l);const f=fi().performance.now()-c;h>f&&(this.imageBuffer=i,this.copyGLTo2D=Hc)}createWebGLCanvas(t,e){const n=ce();n.width=t,n.height=e;const i={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},o=n.getContext("webgl",i);o&&(o.clearColor(0,0,0,0),this.canvas=n,this.gl=o)}applyFilters(t,e,n,i,o,l){const c=this.gl,h=o.getContext("2d");if(!c||!h)return;let f;l&&(f=this.getCachedTexture(l,e));const d={originalWidth:e.width||e.originalWidth||0,originalHeight:e.height||e.originalHeight||0,sourceWidth:n,sourceHeight:i,destinationWidth:n,destinationHeight:i,context:c,sourceTexture:this.createTexture(c,n,i,f?void 0:e),targetTexture:this.createTexture(c,n,i),originalTexture:f||this.createTexture(c,n,i,f?void 0:e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:o},p=c.createFramebuffer();return c.bindFramebuffer(c.FRAMEBUFFER,p),t.forEach(_=>{_&&_.applyTo(d)}),TA(d),this.copyGLTo2D(c,d),c.bindTexture(c.TEXTURE_2D,null),c.deleteTexture(d.sourceTexture),c.deleteTexture(d.targetTexture),c.deleteFramebuffer(p),h.setTransform(1,0,0,1,0,0),d}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(t,e,n,i,o){const{NEAREST:l,TEXTURE_2D:c,RGBA:h,UNSIGNED_BYTE:f,CLAMP_TO_EDGE:d,TEXTURE_MAG_FILTER:p,TEXTURE_MIN_FILTER:_,TEXTURE_WRAP_S:v,TEXTURE_WRAP_T:w}=t,E=t.createTexture();return t.bindTexture(c,E),t.texParameteri(c,p,o||l),t.texParameteri(c,_,o||l),t.texParameteri(c,v,d),t.texParameteri(c,w,d),i?t.texImage2D(c,0,h,h,f,i):t.texImage2D(c,0,h,e,n,0,h,f,null),E}getCachedTexture(t,e,n){const{textureCache:i}=this;if(i[t])return i[t];{const o=this.createTexture(this.gl,e.width,e.height,e,n);return o&&(i[t]=o),o}}evictCachesForKey(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])}copyGLTo2D(t,e){const n=t.canvas,i=e.targetCanvas,o=i.getContext("2d");if(!o)return;o.translate(0,i.height),o.scale(1,-1);const l=n.height-i.height;o.drawImage(n,0,l,i.width,i.height,0,0,i.width,i.height)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const t=this.gl,e={renderer:"",vendor:""};if(!t)return e;const n=t.getExtension("WEBGL_debug_renderer_info");if(n){const i=t.getParameter(n.UNMASKED_RENDERER_WEBGL),o=t.getParameter(n.UNMASKED_VENDOR_WEBGL);i&&(e.renderer=i.toLowerCase()),o&&(e.vendor=o.toLowerCase())}return this.gpuInfo=e,e}}function TA(r){const t=r.targetCanvas,e=t.width,n=t.height,i=r.destinationWidth,o=r.destinationHeight;(e!==i||n!==o)&&(t.width=i,t.height=o)}function Hc(r,t){const e=t.targetCanvas,n=e.getContext("2d"),i=t.destinationWidth,o=t.destinationHeight,l=i*o*4;if(!n)return;const c=new Uint8Array(this.imageBuffer,0,l),h=new Uint8ClampedArray(this.imageBuffer,0,l);r.readPixels(0,0,i,o,r.RGBA,r.UNSIGNED_BYTE,c);const f=new ImageData(h,i,o);n.putImageData(f,0,0)}let Yc;function OA(){const{WebGLProbe:r}=qn();return r.queryWebGL(ce()),At.enableGLFiltering&&r.isSupported(At.textureSize)?new m_({tileSize:At.textureSize}):new bA}function Uc(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return!Yc&&r&&(Yc=OA()),Yc}const EA=["filters","resizeFilter","src","crossOrigin"],PA={strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0},__=["cropX","cropY"];class pn extends xe{static getDefaults(){return D(D({},super.getDefaults()),pn.ownDefaults)}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(D({filters:[]},e)),A(this,"_lastScaleX",1),A(this,"_lastScaleY",1),A(this,"_filterScalingX",1),A(this,"_filterScalingY",1),this.cacheKey="texture".concat(zr()),this.setElement(typeof t=="string"?(this.canvas&&Fn(this.canvas.getElement())||us()).getElementById(t):t,e)}getElement(){return this._element}setElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=t,this._originalElement=t,this._setWidthHeight(e),t.classList.add(pn.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(t){const e=Uc(!1);e instanceof m_&&e.evictCachesForKey(t)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(t=>{const e=this[t];e&&qn().dispose(e),this[t]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const t=this.getElement();return t?{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}:{width:0,height:0}}_stroke(t){if(!this.stroke||this.strokeWidth===0)return;const e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,-n),t.lineTo(e,-n),t.lineTo(e,n),t.lineTo(-e,n),t.lineTo(-e,-n),t.closePath()}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=[];return this.filters.forEach(n=>{n&&e.push(n.toObject())}),D(D({},super.toObject([...__,...t])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const t=[],e=this._element,n=-this.width/2,i=-this.height/2;let o=[],l=[],c="",h="";if(!e)return[];if(this.hasCrop()){const f=zr();o.push('<clipPath id="imageCrop_'+f+`">
`,'	<rect x="'+n+'" y="'+i+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),c=' clip-path="url(#imageCrop_'+f+')" '}if(this.imageSmoothing||(h=' image-rendering="optimizeSpeed"'),t.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(i-this.cropY,'" width="').concat(e.width||e.naturalWidth,'" height="').concat(e.height||e.naturalHeight,'"').concat(h).concat(c,`></image>
`)),this.stroke||this.strokeDashArray){const f=this.fill;this.fill=null,l=['	<rect x="'.concat(n,'" y="').concat(i,'" width="').concat(this.width,'" height="').concat(this.height,'" styles="').concat(this.getSvgStyles(),`" />
`)],this.fill=f}return this.paintFirst!=="fill"?o=o.concat(l,t):o=o.concat(t,l),o}getSrc(t){const e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src")||"":e.src:this.src||""}getSvgSrc(t){return this.getSrc(t)}setSrc(t){let{crossOrigin:e,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Gs(t,{crossOrigin:e,signal:n}).then(i=>{typeof e<"u"&&this.set({crossOrigin:e}),this.setElement(i)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const t=this.resizeFilter,e=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),i=n.x,o=n.y,l=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||i>e&&o>e){this._element=l,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,this._lastScaleY=o;return}const c=ce(),h=l.width,f=l.height;c.width=h,c.height=f,this._element=c,this._lastScaleX=t.scaleX=i,this._lastScaleY=t.scaleY=o,Uc().applyFilters([t],l,h,f,this._element),this._filterScalingX=c.width/this._originalElement.width,this._filterScalingY=c.height/this._originalElement.height}applyFilters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(t=t.filter(o=>o&&!o.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),t.length===0){this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,this._filterScalingY=1;return}const e=this._originalElement,n=e.naturalWidth||e.width,i=e.naturalHeight||e.height;if(this._element===this._originalElement){const o=ce();o.width=n,o.height=i,this._element=o,this._filteredEl=o}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,i),this._lastScaleX=1,this._lastScaleY=1);Uc().applyFilters(t,this._originalElement,n,i,this._element),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(t){t.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)}drawCacheOnCanvas(t){t.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(t)}shouldCache(){return this.needsItsOwnCache()}_renderFill(t){const e=this._element;if(!e)return;const n=this._filterScalingX,i=this._filterScalingY,o=this.width,l=this.height,c=Math.max(this.cropX,0),h=Math.max(this.cropY,0),f=e.naturalWidth||e.width,d=e.naturalHeight||e.height,p=c*n,_=h*i,v=Math.min(o*n,f-p),w=Math.min(l*i,d-_),E=-o/2,O=-l/2,M=Math.min(o,f/n-c),R=Math.min(l,d/i-h);e&&t.drawImage(e,p,_,v,w,E,O,M,R)}_needsResize(){const t=this.getTotalObjectScaling();return t.x!==this._lastScaleX||t.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:t,height:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getOriginalSize();this.width=t||n.width,this.height=e||n.height}parsePreserveAspectRatioAttribute(){const t=Zm(this.preserveAspectRatio||""),e=this.width,n=this.height,i={width:e,height:n};let o=this._element.width,l=this._element.height,c=1,h=1,f=0,d=0,p=0,_=0,v;return t&&(t.alignX!==tn||t.alignY!==tn)?(t.meetOrSlice==="meet"&&(c=h=N0(this._element,i),v=(e-o*c)/2,t.alignX==="Min"&&(f=-v),t.alignX==="Max"&&(f=v),v=(n-l*h)/2,t.alignY==="Min"&&(d=-v),t.alignY==="Max"&&(d=v)),t.meetOrSlice==="slice"&&(c=h=z0(this._element,i),v=o-e/c,t.alignX==="Mid"&&(p=v/2),t.alignX==="Max"&&(p=v),v=l-n/h,t.alignY==="Mid"&&(_=v/2),t.alignY==="Max"&&(_=v),o=e/c,l=n/h)):(c=e/o,h=n/l),{width:o,height:l,scaleX:c,scaleY:h,offsetLeft:f,offsetTop:d,cropX:p,cropY:_}}static fromObject(t){let{filters:e,resizeFilter:n,src:i,crossOrigin:o}=t,l=Zt(t,EA),c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Promise.all([Gs(i,D(D({},c),{},{crossOrigin:o})),e&&os(e,c),n&&os([n],c),ho(l,c)]).then(h=>{let[f,d=[],[p]=[],_={}]=h;return new this(f,D(D({},l),{},{src:i,filters:d,resizeFilter:p},_))})}static fromURL(t){let{crossOrigin:e=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return Gs(t,{crossOrigin:e,signal:n}).then(o=>new this(o,i))}static async fromElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i=yr(t,this.ATTRIBUTE_NAMES,n);return this.fromURL(i["xlink:href"],e,i).catch(o=>(console.log(o),null))}}A(pn,"type","Image");A(pn,"cacheProperties",[...vr,...__]);A(pn,"ownDefaults",PA);A(pn,"CSS_CANVAS","canvas-img");A(pn,"ATTRIBUTE_NAMES",[...Vr,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]);ut.setClass(pn);ut.setSVGClass(pn);sl(TP);const DA=r=>new F(r.width,r.height),AA=r=>function(t,e,n){var i,o;const l=n.points[r].x-n.pathOffset.x,c=n.points[r].y-n.pathOffset.y;return new F(l,c).transform(De((i=(o=n.canvas)===null||o===void 0?void 0:o.viewportTransform)!==null&&i!==void 0?i:gn,n.calcTransformMatrix()))},MA=(r,t,e,n)=>{const i=t.target,o=t.pointIndex,l=fo(t,bt,bt,e,n),c=DA(i),h=i._getTransformedDimensions(),f=c.divide(h),d=new F(i.flipX?-1:1,i.flipY?-1:1),p=l.multiply(d).multiply(f).add(i.pathOffset);return i.points[o]=p,i.setDimensions(),!0},kA=(r,t)=>function(e,n,i,o){const l=n.target,c=new F(l.points[(r>0?r:l.points.length)-1]),h=c.subtract(l.pathOffset).transform(l.calcOwnMatrix()),f=t(e,D(D({},n),{},{pointIndex:r}),i,o),d=new F(l.flipX?-1:1,l.flipY?-1:1),p=c.subtract(l.pathOffset).divide(l._getNonTransformedDimensions()).multiply(d);return l.setPositionByOrigin(h,p.x+.5,p.y+.5),f};function LA(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e={};for(let n=0;n<(typeof r=="number"?r:r.points.length);n++)e["p".concat(n)]=new fn(D({actionName:"modifyPoly",positionHandler:AA(n),actionHandler:kA(n,MA)},t));return e}var RA=Object.freeze({__proto__:null,changeWidth:dh,createObjectDefaultControls:hu,createPolyControls:LA,createResizeControls:L0,createTextboxDefaultControls:R0,dragHandler:u0,getLocalPoint:fo,renderCircleControl:w0,renderSquareControl:C0,rotationStyleHandler:S0,rotationWithSnapping:b0,scaleCursorStyleHandler:Vi,scaleOrSkewActionName:Ws,scaleSkewCursorStyleHandler:di,scalingEqually:js,scalingX:E0,scalingXOrSkewingY:ph,scalingY:P0,scalingYOrSkewingX:mh,skewCursorStyleHandler:D0,skewHandlerX:M0,skewHandlerY:k0,wrapWithFireEvent:Si,wrapWithFixedAnchor:bi});const hl=r=>r.webgl!==void 0,xh="precision highp float",FA=`
    `.concat(xh,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),IA=`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`,BA=["type"],jA=["type"];class be{get type(){return this.constructor.type}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Zt(t,BA);A(this,"vertexSource",IA),Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return FA}createProgram(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.vertexSource;const{WebGLProbe:{GLPrecision:i="highp"}}=qn();i!=="highp"&&(e=e.replace(new RegExp(xh,"g"),xh.replace("highp",i)));const o=t.createShader(t.VERTEX_SHADER),l=t.createShader(t.FRAGMENT_SHADER),c=t.createProgram();if(!o||!l||!c)throw new Error("Vertex, fragment shader or program creation error");if(t.shaderSource(o,n),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Error("Vertex shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(o)));if(t.shaderSource(l,e),t.compileShader(l),!t.getShaderParameter(l,t.COMPILE_STATUS))throw new Error("Fragment shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(l)));if(t.attachShader(c,o),t.attachShader(c,l),t.linkProgram(c),!t.getProgramParameter(c,t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+t.getProgramInfoLog(c));const h=this.getUniformLocations(t,c)||{};return h.uStepW=t.getUniformLocation(c,"uStepW"),h.uStepH=t.getUniformLocation(c,"uStepH"),{program:c,attributeLocations:this.getAttributeLocations(t,c),uniformLocations:h}}getAttributeLocations(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}}getUniformLocations(t,e){return{}}sendAttributeData(t,e,n){const i=e.aPosition,o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}_setupFrameBuffer(t){const e=t.context;if(t.passes>1){const n=t.destinationWidth,i=t.destinationHeight;(t.sourceWidth!==n||t.sourceHeight!==i)&&(e.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(e,n,i)),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.targetTexture,0)}else e.bindFramebuffer(e.FRAMEBUFFER,null),e.finish()}_swapTextures(t){t.passes--,t.pass++;const e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e}isNeutralState(t){const e=this.mainParameter,n=this.constructor.defaults[e];if(e){const i=this[e];return Array.isArray(n)&&Array.isArray(i)?n.every((o,l)=>o===i[l]):n===i}else return!1}applyTo(t){hl(t)?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){}getCacheKey(){return this.type}retrieveShader(t){const e=this.getCacheKey();return t.programCache[e]||(t.programCache[e]=this.createProgram(t.context)),t.programCache[e]}applyToWebGL(t){const e=t.context,n=this.retrieveShader(t);t.pass===0&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(n.program),this.sendAttributeData(e,n.attributeLocations,t.aPosition),e.uniform1f(n.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(n.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,n.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(t,e,n){t.activeTexture(n),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)}unbindAdditionalTexture(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)}getMainParameter(){return this.mainParameter?this[this.mainParameter]:void 0}setMainParameter(t){this.mainParameter&&(this[this.mainParameter]=t)}sendUniformData(t,e){}createHelpLayer(t){if(!t.helpLayer){const e=ce();e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}}toObject(){const t=this.mainParameter;return D({type:this.type},t?{[t]:this[t]}:{})}toJSON(){return this.toObject()}static async fromObject(t,e){let n=Zt(t,jA);return new this(n)}}A(be,"type","BaseFilter");const WA={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `},XA={color:"#F95C63",mode:"multiply",alpha:1};class pu extends be{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(WA[this.mode],`
        }
      }
      `)}applyTo2d(t){let{imageData:{data:e}}=t;const n=new Kt(this.color).getSource(),i=n[0]*this.alpha,o=n[1]*this.alpha,l=n[2]*this.alpha,c=1-this.alpha;for(let h=0;h<e.length;h+=4){const f=e[h],d=e[h+1],p=e[h+2];switch(this.mode){case"multiply":e[h]=f*i/255,e[h+1]=d*o/255,e[h+2]=p*l/255;break;case"screen":e[h]=255-(255-f)*(255-i)/255,e[h+1]=255-(255-d)*(255-o)/255,e[h+2]=255-(255-p)*(255-l)/255;break;case"add":e[h]=f+i,e[h+1]=d+o,e[h+2]=p+l;break;case"difference":e[h]=Math.abs(f-i),e[h+1]=Math.abs(d-o),e[h+2]=Math.abs(p-l);break;case"subtract":e[h]=f-i,e[h+1]=d-o,e[h+2]=p-l;break;case"darken":e[h]=Math.min(f,i),e[h+1]=Math.min(d,o),e[h+2]=Math.min(p,l);break;case"lighten":e[h]=Math.max(f,i),e[h+1]=Math.max(d,o),e[h+2]=Math.max(p,l);break;case"overlay":e[h]=i<128?2*f*i/255:255-2*(255-f)*(255-i)/255,e[h+1]=o<128?2*d*o/255:255-2*(255-d)*(255-o)/255,e[h+2]=l<128?2*p*l/255:255-2*(255-p)*(255-l)/255;break;case"exclusion":e[h]=i+f-2*i*f/255,e[h+1]=o+d-2*o*d/255,e[h+2]=l+p-2*l*p/255;break;case"tint":e[h]=i+f*c,e[h+1]=o+d*c,e[h+2]=l+p*c}}}getUniformLocations(t,e){return{uColor:t.getUniformLocation(e,"uColor")}}sendUniformData(t,e){const n=new Kt(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,t.uniform4fv(e.uColor,n)}toObject(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}A(pu,"defaults",XA);A(pu,"type","BlendColor");ut.setClass(pu);const HA={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},YA=["type","image"],UA={mode:"multiply",alpha:1,vertexSource:`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `};class mu extends be{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return HA[this.mode]}applyToWebGL(t){const e=t.context,n=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,n,e.TEXTURE1),super.applyToWebGL(t),this.unbindAdditionalTexture(e,e.TEXTURE1)}createTexture(t,e){return t.getCachedTexture(e.cacheKey,e.getElement())}calculateMatrix(){const t=this.image,{width:e,height:n}=t.getElement();return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/n,1]}applyTo2d(t){let{imageData:{data:e,width:n,height:i},filterBackend:{resources:o}}=t;const l=this.image;o.blendImage||(o.blendImage=ce());const c=o.blendImage,h=c.getContext("2d");c.width!==n||c.height!==i?(c.width=n,c.height=i):h.clearRect(0,0,n,i),h.setTransform(l.scaleX,0,0,l.scaleY,l.left,l.top),h.drawImage(l.getElement(),0,0,n,i);const f=h.getImageData(0,0,n,i).data;for(let d=0;d<e.length;d+=4){const p=e[d],_=e[d+1],v=e[d+2],w=e[d+3],E=f[d],O=f[d+1],M=f[d+2],R=f[d+3];switch(this.mode){case"multiply":e[d]=p*E/255,e[d+1]=_*O/255,e[d+2]=v*M/255,e[d+3]=w*R/255;break;case"mask":e[d+3]=R;break}}}getUniformLocations(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}}sendUniformData(t,e){const n=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,n)}toObject(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}static fromObject(t,e){let{type:n,image:i}=t,o=Zt(t,YA);return pn.fromObject(i,e).then(l=>new this(D(D({},o),{},{image:l})))}}A(mu,"type","BlendImage");A(mu,"defaults",UA);ut.setClass(mu);const NA=`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `,zA={blur:0,mainParameter:"blur"};class _u extends be{getFragmentSource(){return NA}applyTo(t){hl(t)?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){t.imageData=this.simpleBlur(t)}simpleBlur(t){let{ctx:e,imageData:n,filterBackend:{resources:i}}=t;const{width:o,height:l}=n;i.blurLayer1||(i.blurLayer1=ce(),i.blurLayer2=ce());const c=i.blurLayer1,h=i.blurLayer2;(c.width!==o||c.height!==l)&&(h.width=c.width=o,h.height=c.height=l);const f=c.getContext("2d"),d=h.getContext("2d"),p=15,_=this.blur*.06*.5;let v,w,E,O;for(f.putImageData(n,0,0),d.clearRect(0,0,o,l),O=-p;O<=p;O++)v=(Math.random()-.5)/4,w=O/p,E=_*w*o+v,d.globalAlpha=1-Math.abs(w),d.drawImage(c,E,v),f.drawImage(h,0,0),d.globalAlpha=1,d.clearRect(0,0,h.width,h.height);for(O=-p;O<=p;O++)v=(Math.random()-.5)/4,w=O/p,E=_*w*l+v,d.globalAlpha=1-Math.abs(w),d.drawImage(c,v,E),f.drawImage(h,0,0),d.globalAlpha=1,d.clearRect(0,0,h.width,h.height);e.drawImage(c,0,0);const M=e.getImageData(0,0,c.width,c.height);return f.globalAlpha=1,f.clearRect(0,0,c.width,c.height),M}getUniformLocations(t,e){return{delta:t.getUniformLocation(e,"uDelta")}}sendUniformData(t,e){const n=this.chooseRightDelta();t.uniform2fv(e.delta,n)}chooseRightDelta(){let t=1;const e=[0,0];this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio);const n=t*this.blur*.12;return this.horizontal?e[0]=n:e[1]=n,e}}A(_u,"type","Blur");A(_u,"defaults",zA);ut.setClass(_u);const VA=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`,GA={brightness:0,mainParameter:"brightness"};class vu extends be{getFragmentSource(){return VA}applyTo2d(t){let{imageData:{data:e}}=t;if(this.brightness===0)return;const n=Math.round(this.brightness*255);for(let i=0;i<e.length;i+=4)e[i]=e[i]+n,e[i+1]=e[i+1]+n,e[i+2]=e[i+2]+n}getUniformLocations(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}}sendUniformData(t,e){t.uniform1f(e.uBrightness,this.brightness)}}A(vu,"type","Brightness");A(vu,"defaults",GA);ut.setClass(vu);const $A=`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`,KA=["matrix"],v_={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0};class mo extends be{setOptions(t){let{matrix:e}=t,n=Zt(t,KA);e&&(this.matrix=[...e]),Object.assign(this,n)}getFragmentSource(){return $A}applyTo2d(t){const e=t.imageData,n=e.data,i=this.matrix,o=this.colorsOnly;for(let l=0;l<n.length;l+=4){const c=n[l],h=n[l+1],f=n[l+2];if(o)n[l]=c*i[0]+h*i[1]+f*i[2]+i[4]*255,n[l+1]=c*i[5]+h*i[6]+f*i[7]+i[9]*255,n[l+2]=c*i[10]+h*i[11]+f*i[12]+i[14]*255;else{const d=n[l+3];n[l]=c*i[0]+h*i[1]+f*i[2]+d*i[3]+i[4]*255,n[l+1]=c*i[5]+h*i[6]+f*i[7]+d*i[8]+i[9]*255,n[l+2]=c*i[10]+h*i[11]+f*i[12]+d*i[13]+i[14]*255,n[l+3]=c*i[15]+h*i[16]+f*i[17]+d*i[18]+i[19]*255}}}getUniformLocations(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}}sendUniformData(t,e){const n=this.matrix,i=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],o=[n[4],n[9],n[14],n[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,i),t.uniform4fv(e.uConstants,o)}}A(mo,"type","ColorMatrix");A(mo,"defaults",v_);ut.setClass(mo);function Ti(r,t){var e;const n=(e=class extends mo{},A(e,"type",r),A(e,"defaults",D(D({},v_),{},{mainParameter:void 0,matrix:t})),e);return ut.setClass(n,r),n}Ti("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Ti("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Ti("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Ti("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Ti("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Ti("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Ti("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);const qA=["subFilters"];class y_ extends be{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{subFilters:e=[]}=t,n=Zt(t,qA);super(n),this.subFilters=e}applyTo(t){hl(t)&&(t.passes+=this.subFilters.length-1),this.subFilters.forEach(e=>{e.applyTo(t)})}toObject(){return D(D({},super.toObject()),{},{subFilters:this.subFilters.map(t=>t.toObject())})}isNeutralState(){return!this.subFilters.some(t=>!t.isNeutralState())}static fromObject(t,e){return Promise.all((t.subFilters||[]).map(n=>ut.getClass(n.type).fromObject(n,e))).then(n=>new this({subFilters:n}))}}A(y_,"type","Composed");ut.setClass(y_);const JA=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`,QA={contrast:0,mainParameter:"contrast"};class yu extends be{getFragmentSource(){return JA}applyTo2d(t){let{imageData:{data:e}}=t;if(this.contrast===0)return;const n=Math.floor(this.contrast*255),i=259*(n+255)/(255*(259-n));for(let o=0;o<e.length;o+=4)e[o]=i*(e[o]-128)+128,e[o+1]=i*(e[o+1]-128)+128,e[o+2]=i*(e[o+2]-128)+128}getUniformLocations(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}}sendUniformData(t,e){t.uniform1f(e.uContrast,this.contrast)}}A(yu,"type","Contrast");A(yu,"defaults",QA);ut.setClass(yu);const ZA={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `},tM={opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]};class xu extends be{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return ZA[this.getCacheKey()]}applyTo2d(t){const e=t.imageData,n=e.data,i=this.matrix,o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=e.width,h=e.height,f=t.ctx.createImageData(c,h),d=f.data,p=this.opaque?1:0;let _,v,w,E,O,M,R,X,B,$,tt,nt,ot;for(tt=0;tt<h;tt++)for($=0;$<c;$++){for(O=(tt*c+$)*4,_=0,v=0,w=0,E=0,ot=0;ot<o;ot++)for(nt=0;nt<o;nt++)R=tt+ot-l,M=$+nt-l,!(R<0||R>=h||M<0||M>=c)&&(X=(R*c+M)*4,B=i[ot*o+nt],_+=n[X]*B,v+=n[X+1]*B,w+=n[X+2]*B,p||(E+=n[X+3]*B));d[O]=_,d[O+1]=v,d[O+2]=w,p?d[O+3]=n[O+3]:d[O+3]=E}t.imageData=f}getUniformLocations(t,e){return{uMatrix:t.getUniformLocation(e,"uMatrix"),uOpaque:t.getUniformLocation(e,"uOpaque"),uHalfSize:t.getUniformLocation(e,"uHalfSize"),uSize:t.getUniformLocation(e,"uSize")}}sendUniformData(t,e){t.uniform1fv(e.uMatrix,this.matrix)}toObject(){return D(D({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}A(xu,"type","Convolute");A(xu,"defaults",tM);ut.setClass(xu);const eM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`,nM=["gamma"],rM={mainParameter:"gamma",gamma:[1,1,1]};class wu extends be{getFragmentSource(){return eM}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{gamma:e=[1,1,1]}=t,n=Zt(t,nM);super(n),this.gamma=e}applyTo2d(t){let{imageData:{data:e}}=t;const n=this.gamma,i=1/n[0],o=1/n[1],l=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const c=this.rgbValues;for(let h=0;h<256;h++)c.r[h]=Math.pow(h/255,i)*255,c.g[h]=Math.pow(h/255,o)*255,c.b[h]=Math.pow(h/255,l)*255;for(let h=0;h<e.length;h+=4)e[h]=c.r[e[h]],e[h+1]=c.g[e[h+1]],e[h+2]=c.b[e[h+2]]}getUniformLocations(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}}sendUniformData(t,e){t.uniform3fv(e.uGamma,this.gamma)}}A(wu,"type","Gamma");A(wu,"defaults",rM);ut.setClass(wu);const iM={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `},sM={mode:"average",mainParameter:"mode"};class Cu extends be{applyTo2d(t){let{imageData:{data:e}}=t;for(let n=0,i;n<e.length;n+=4){switch(this.mode){case"average":i=(e[n]+e[n+1]+e[n+2])/3;break;case"lightness":i=(Math.min(e[n],e[n+1],e[n+2])+Math.max(e[n],e[n+1],e[n+2]))/2;break;case"luminosity":i=.21*e[n]+.72*e[n+1]+.07*e[n+2];break}e[n]=i,e[n+1]=i,e[n+2]=i}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return iM[this.mode]}getUniformLocations(t,e){return{uMode:t.getUniformLocation(e,"uMode")}}sendUniformData(t,e){t.uniform1i(e.uMode,1)}isNeutralState(){return!1}}A(Cu,"type","Grayscale");A(Cu,"defaults",sM);ut.setClass(Cu);const oM={rotation:0,mainParameter:"rotation"};class Su extends mo{calculateMatrix(){const t=this.rotation*Math.PI,e=ze(t),n=Ve(t),i=1/3,o=Math.sqrt(i)*n,l=1-e;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=e+l/3,this.matrix[1]=i*l-o,this.matrix[2]=i*l+o,this.matrix[5]=i*l+o,this.matrix[6]=e+i*l,this.matrix[7]=i*l-o,this.matrix[10]=i*l-o,this.matrix[11]=i*l+o,this.matrix[12]=e+i*l}isNeutralState(){return this.calculateMatrix(),super.isNeutralState()}applyTo(t){this.calculateMatrix(),super.applyTo(t)}}A(Su,"type","HueRotation");A(Su,"defaults",oM);ut.setClass(Su);const aM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`,lM={alpha:!1,invert:!0,mainParameter:"invert"};class bu extends be{applyTo2d(t){let{imageData:{data:e}}=t;for(let n=0;n<e.length;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2],this.alpha&&(e[n+3]=255-e[n+3])}getFragmentSource(){return aM}isNeutralState(){return!this.invert}getUniformLocations(t,e){return{uInvert:t.getUniformLocation(e,"uInvert"),uAlpha:t.getUniformLocation(e,"uAlpha")}}sendUniformData(t,e){t.uniform1i(e.uInvert,Number(this.invert)),t.uniform1i(e.uAlpha,Number(this.alpha))}}A(bu,"type","Invert");A(bu,"defaults",lM);ut.setClass(bu);const cM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`,hM={mainParameter:"noise",noise:0};class Tu extends be{getFragmentSource(){return cM}applyTo2d(t){let{imageData:{data:e}}=t;if(this.noise===0)return;const n=this.noise;for(let i=0;i<e.length;i+=4){const o=(.5-Math.random())*n;e[i]+=o,e[i+1]+=o,e[i+2]+=o}}getUniformLocations(t,e){return{uNoise:t.getUniformLocation(e,"uNoise"),uSeed:t.getUniformLocation(e,"uSeed")}}sendUniformData(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())}toObject(){return D(D({},super.toObject()),{},{noise:this.noise})}}A(Tu,"type","Noise");A(Tu,"defaults",hM);ut.setClass(Tu);const uM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepW;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`,fM={blocksize:4,mainParameter:"blocksize"};class Ou extends be{applyTo2d(t){let{imageData:{data:e,width:n,height:i}}=t;for(let o=0;o<i;o+=this.blocksize)for(let l=0;l<n;l+=this.blocksize){const c=o*4*n+l*4,h=e[c],f=e[c+1],d=e[c+2],p=e[c+3];for(let _=o;_<Math.min(o+this.blocksize,i);_++)for(let v=l;v<Math.min(l+this.blocksize,n);v++){const w=_*4*n+v*4;e[w]=h,e[w+1]=f,e[w+2]=d,e[w+3]=p}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return uM}getUniformLocations(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}}sendUniformData(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}A(Ou,"type","Pixelate");A(Ou,"defaults",fM);ut.setClass(Ou);const dM=`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`,gM={color:"#FFFFFF",distance:.02,useAlpha:!1};class Eu extends be{getFragmentShader(){return dM}applyTo2d(t){let{imageData:{data:e}}=t;const n=this.distance*255,i=new Kt(this.color).getSource(),o=[i[0]-n,i[1]-n,i[2]-n],l=[i[0]+n,i[1]+n,i[2]+n];for(let c=0;c<e.length;c+=4){const h=e[c],f=e[c+1],d=e[c+2];h>o[0]&&f>o[1]&&d>o[2]&&h<l[0]&&f<l[1]&&d<l[2]&&(e[c+3]=0)}}getUniformLocations(t,e){return{uLow:t.getUniformLocation(e,"uLow"),uHigh:t.getUniformLocation(e,"uHigh")}}sendUniformData(t,e){const n=new Kt(this.color).getSource(),i=this.distance,o=[0+n[0]/255-i,0+n[1]/255-i,0+n[2]/255-i,1],l=[n[0]/255+i,n[1]/255+i,n[2]/255+i,1];t.uniform4fv(e.uLow,o),t.uniform4fv(e.uHigh,l)}toObject(){return D(D({},super.toObject()),{},{color:this.color,distance:this.distance})}}A(Eu,"type","RemoveColor");A(Eu,"defaults",gM);ut.setClass(Eu);const pM={resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,fragmentSourceTOP:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
  `};class Pu extends be{getUniformLocations(t,e){return{uDelta:t.getUniformLocation(e,"uDelta"),uTaps:t.getUniformLocation(e,"uTaps")}}sendUniformData(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)}getFilterWindow(){const t=this.tempScale;return Math.ceil(this.lanczosLobes/t)}getCacheKey(){const t=this.getFilterWindow();return"".concat(this.type,"_").concat(t)}getFragmentSource(){const t=this.getFilterWindow();return this.generateShader(t)}getTaps(){const t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,n=this.getFilterWindow(),i=new Array(n);for(let o=1;o<=n;o++)i[o-1]=t(o*e);return i}generateShader(t){const e=new Array(t);for(let n=1;n<=t;n++)e[n-1]="".concat(n,".0 * uDelta");return`
      `.concat(this.fragmentSourceTOP,`
      uniform float uTaps[`).concat(t,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(e.map((n,i)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(i,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(i,`];
              sum += 2.0 * uTaps[`).concat(i,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(t){t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,super.applyTo(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,super.applyTo(t),t.sourceHeight=t.destinationHeight}applyTo(t){hl(t)?this.applyToForWebgl(t):this.applyTo2d(t)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(t){return e=>{if(e>=t||e<=-t)return 0;if(e<11920929e-14&&e>-11920929e-14)return 1;e*=Math.PI;const n=e/t;return Math.sin(e)/e*Math.sin(n)/n}}applyTo2d(t){const e=t.imageData,n=this.scaleX,i=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/i;const o=e.width,l=e.height,c=Math.round(o*n),h=Math.round(l*i);let f;this.resizeType==="sliceHack"?f=this.sliceByTwo(t,o,l,c,h):this.resizeType==="hermite"?f=this.hermiteFastResize(t,o,l,c,h):this.resizeType==="bilinear"?f=this.bilinearFiltering(t,o,l,c,h):this.resizeType==="lanczos"?f=this.lanczosResize(t,o,l,c,h):f=new ImageData(c,h),t.imageData=f}sliceByTwo(t,e,n,i,o){const l=t.imageData,c=.5;let h=!1,f=!1,d=e*c,p=n*c;const _=t.filterBackend.resources;let v=0,w=0;const E=e;let O=0;_.sliceByTwo||(_.sliceByTwo=ce());const M=_.sliceByTwo;(M.width<e*1.5||M.height<n)&&(M.width=e*1.5,M.height=n);const R=M.getContext("2d");for(R.clearRect(0,0,e*1.5,n),R.putImageData(l,0,0),i=Math.floor(i),o=Math.floor(o);!h||!f;)e=d,n=p,i<Math.floor(d*c)?d=Math.floor(d*c):(d=i,h=!0),o<Math.floor(p*c)?p=Math.floor(p*c):(p=o,f=!0),R.drawImage(M,v,w,e,n,E,O,d,p),v=E,w=O,O+=p;return R.getImageData(v,w,i,o)}lanczosResize(t,e,n,i,o){function l(B){let $,tt,nt,ot,it,at,dt,Lt,Tt,Ft,Xt;for(R.x=(B+.5)*p,X.x=Math.floor(R.x),$=0;$<o;$++){for(R.y=($+.5)*_,X.y=Math.floor(R.y),it=0,at=0,dt=0,Lt=0,Tt=0,tt=X.x-E;tt<=X.x+E;tt++)if(!(tt<0||tt>=e)){Ft=Math.floor(1e3*Math.abs(tt-R.x)),M[Ft]||(M[Ft]={});for(let Mt=X.y-O;Mt<=X.y+O;Mt++)Mt<0||Mt>=n||(Xt=Math.floor(1e3*Math.abs(Mt-R.y)),M[Ft][Xt]||(M[Ft][Xt]=d(Math.sqrt(Math.pow(Ft*v,2)+Math.pow(Xt*w,2))/1e3)),nt=M[Ft][Xt],nt>0&&(ot=(Mt*e+tt)*4,it+=nt,at+=nt*c[ot],dt+=nt*c[ot+1],Lt+=nt*c[ot+2],Tt+=nt*c[ot+3]))}ot=($*i+B)*4,f[ot]=at/it,f[ot+1]=dt/it,f[ot+2]=Lt/it,f[ot+3]=Tt/it}return++B<i?l(B):h}const c=t.imageData.data,h=t.ctx.createImageData(i,o),f=h.data,d=this.lanczosCreate(this.lanczosLobes),p=this.rcpScaleX,_=this.rcpScaleY,v=2/this.rcpScaleX,w=2/this.rcpScaleY,E=Math.ceil(p*this.lanczosLobes/2),O=Math.ceil(_*this.lanczosLobes/2),M={},R={x:0,y:0},X={x:0,y:0};return l(0)}bilinearFiltering(t,e,n,i,o){let l,c,h,f,d,p,_,v,w,E,O,M,R=0,X;const B=this.rcpScaleX,$=this.rcpScaleY,tt=4*(e-1),ot=t.imageData.data,it=t.ctx.createImageData(i,o),at=it.data;for(_=0;_<o;_++)for(v=0;v<i;v++)for(d=Math.floor(B*v),p=Math.floor($*_),w=B*v-d,E=$*_-p,X=4*(p*e+d),O=0;O<4;O++)l=ot[X+O],c=ot[X+4+O],h=ot[X+tt+O],f=ot[X+tt+4+O],M=l*(1-w)*(1-E)+c*w*(1-E)+h*E*(1-w)+f*w*E,at[R++]=M;return it}hermiteFastResize(t,e,n,i,o){const l=this.rcpScaleX,c=this.rcpScaleY,h=Math.ceil(l/2),f=Math.ceil(c/2),d=t.imageData,p=d.data,_=t.ctx.createImageData(i,o),v=_.data;for(let w=0;w<o;w++)for(let E=0;E<i;E++){const O=(E+w*i)*4;let M=0,R=0,X=0,B=0,$=0,tt=0,nt=0;const ot=(w+.5)*c;for(let it=Math.floor(w*c);it<(w+1)*c;it++){const at=Math.abs(ot-(it+.5))/f,dt=(E+.5)*l,Lt=at*at;for(let Tt=Math.floor(E*l);Tt<(E+1)*l;Tt++){let Ft=Math.abs(dt-(Tt+.5))/h;const Xt=Math.sqrt(Lt+Ft*Ft);Xt>1&&Xt<-1||(M=2*Xt*Xt*Xt-3*Xt*Xt+1,M>0&&(Ft=4*(Tt+it*e),nt+=M*p[Ft+3],X+=M,p[Ft+3]<255&&(M=M*p[Ft+3]/250),B+=M*p[Ft],$+=M*p[Ft+1],tt+=M*p[Ft+2],R+=M))}}v[O]=B/R,v[O+1]=$/R,v[O+2]=tt/R,v[O+3]=nt/X}return _}toObject(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}A(Pu,"type","Resize");A(Pu,"defaults",pM);ut.setClass(Pu);const mM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`,_M={saturation:0,mainParameter:"saturation"};class Du extends be{getFragmentSource(){return mM}applyTo2d(t){let{imageData:{data:e}}=t;if(this.saturation===0)return;const n=-this.saturation;for(let i=0;i<e.length;i+=4){const o=Math.max(e[i],e[i+1],e[i+2]);e[i]+=o!==e[i]?(o-e[i])*n:0,e[i+1]+=o!==e[i+1]?(o-e[i+1])*n:0,e[i+2]+=o!==e[i+2]?(o-e[i+2])*n:0}}getUniformLocations(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}}sendUniformData(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}A(Du,"type","Saturation");A(Du,"defaults",_M);ut.setClass(Du);const vM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`,yM={vibrance:0,mainParameter:"vibrance"};class Au extends be{getFragmentSource(){return vM}applyTo2d(t){let{imageData:{data:e}}=t;if(this.vibrance===0)return;const n=-this.vibrance;for(let i=0;i<e.length;i+=4){const o=Math.max(e[i],e[i+1],e[i+2]),l=(e[i]+e[i+1]+e[i+2])/3,c=Math.abs(o-l)*2/255*n;e[i]+=o!==e[i]?(o-e[i])*c:0,e[i+1]+=o!==e[i+1]?(o-e[i+1])*c:0,e[i+2]+=o!==e[i+2]?(o-e[i+2])*c:0}}getUniformLocations(t,e){return{uVibrance:t.getUniformLocation(e,"uVibrance")}}sendUniformData(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}A(Au,"type","Vibrance");A(Au,"defaults",yM);ut.setClass(Au);const xM=["href"],pa=xi({__name:"BaseButton",props:{look:{type:String,default:"primary"},href:{type:String,default:void 0}},setup(r){const t=r,e={primary:"rounded bg-indigo-500 px-3 py-2 text-xs font-semibold text-white shadow-sm hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500",secondary:"rounded bg-white px-3 py-2 text-xs font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},n=Ue(()=>e[t.look]);return(i,o)=>r.href?(dn(),hr("a",{key:1,href:r.href,target:"_blank",class:Js(n.value)},[yg(i.$slots,"default")],10,xM)):(dn(),hr("button",{key:0,class:Js(n.value)},[yg(i.$slots,"default")],2))}}),wM={class:"relative flex items-start"},CM={class:"flex h-6 items-center"},SM=["name","value","checked","id"],bM={class:"ml-3 text-sm leading-6"},TM=["for"],OM=xi({__name:"BaseCheckbox",props:{label:{type:String,default:""},name:{type:String,default:""},value:{type:String,required:!0},modelValue:{type:[String,Number,Array],required:!0}},emits:["update:modelValue"],setup(r,{emit:t}){const e=r,n=Ue(()=>Array.isArray(e.modelValue)?e.modelValue.includes(e.value):!!e.modelValue),i=o=>{const l=o.target.checked;if(Array.isArray(e.modelValue)){let c=[...e.modelValue];l?c.push(e.value):c.splice(c.indexOf(e.value),1),t("update:modelValue",c)}else t("update:modelValue",!!l)};return(o,l)=>(dn(),hr("div",wM,[ge("div",CM,[ge("input",{name:r.name,value:r.value,checked:n.value,onChange:i,id:r.name,type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600 cursor-pointer"},null,40,SM)]),ge("div",bM,[ge("label",{for:r.name,class:"font-medium text-gray-900 cursor-pointer"},fb(r.label),9,TM)])]))}});var Rs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xa={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Xa.exports;(function(r,t){(function(){var e,n="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",f=500,d="__lodash_placeholder__",p=1,_=2,v=4,w=1,E=2,O=1,M=2,R=4,X=8,B=16,$=32,tt=64,nt=128,ot=256,it=512,at=30,dt="...",Lt=800,Tt=16,Ft=1,Xt=2,Mt=3,Ct=1/0,vt=9007199254740991,On=17976931348623157e292,rn=0/0,he=4294967295,Ae=he-1,Cr=he>>>1,Sr=[["ary",nt],["bind",O],["bindKey",M],["curry",X],["curryRight",B],["flip",it],["partial",$],["partialRight",tt],["rearg",ot]],En="[object Arguments]",ue="[object Array]",U="[object AsyncFunction]",et="[object Boolean]",J="[object Date]",ht="[object DOMException]",It="[object Error]",C="[object Function]",b="[object GeneratorFunction]",L="[object Map]",j="[object Number]",N="[object Null]",z="[object Object]",Z="[object Promise]",K="[object Proxy]",q="[object RegExp]",V="[object Set]",ct="[object String]",st="[object Symbol]",ft="[object Undefined]",pt="[object WeakMap]",Dt="[object WeakSet]",Yt="[object ArrayBuffer]",Bt="[object DataView]",re="[object Float32Array]",Be="[object Float64Array]",Yn="[object Int8Array]",Oi="[object Int16Array]",Qn="[object Int32Array]",Ei="[object Uint8Array]",Te="[object Uint8ClampedArray]",Ge="[object Uint16Array]",Pi="[object Uint32Array]",x_=/\b__p \+= '';/g,w_=/\b(__p \+=) '' \+/g,C_=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ku=/&(?:amp|lt|gt|quot|#39);/g,Lu=/[&<>"']/g,S_=RegExp(ku.source),b_=RegExp(Lu.source),T_=/<%-([\s\S]+?)%>/g,O_=/<%([\s\S]+?)%>/g,Ru=/<%=([\s\S]+?)%>/g,E_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,P_=/^\w*$/,D_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ul=/[\\^$.*+?()[\]{}|]/g,A_=RegExp(ul.source),fl=/^\s+/,M_=/\s/,k_=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,L_=/\{\n\/\* \[wrapped with (.+)\] \*/,R_=/,? & /,F_=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,I_=/[()=,{}\[\]\/\s]/,B_=/\\(\\)?/g,j_=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Fu=/\w*$/,W_=/^[-+]0x[0-9a-f]+$/i,X_=/^0b[01]+$/i,H_=/^\[object .+?Constructor\]$/,Y_=/^0o[0-7]+$/i,U_=/^(?:0|[1-9]\d*)$/,N_=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_o=/($^)/,z_=/['\n\r\u2028\u2029\\]/g,vo="\\ud800-\\udfff",V_="\\u0300-\\u036f",G_="\\ufe20-\\ufe2f",$_="\\u20d0-\\u20ff",Iu=V_+G_+$_,Bu="\\u2700-\\u27bf",ju="a-z\\xdf-\\xf6\\xf8-\\xff",K_="\\xac\\xb1\\xd7\\xf7",q_="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",J_="\\u2000-\\u206f",Q_=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wu="A-Z\\xc0-\\xd6\\xd8-\\xde",Xu="\\ufe0e\\ufe0f",Hu=K_+q_+J_+Q_,dl="[']",Z_="["+vo+"]",Yu="["+Hu+"]",yo="["+Iu+"]",Uu="\\d+",tv="["+Bu+"]",Nu="["+ju+"]",zu="[^"+vo+Hu+Uu+Bu+ju+Wu+"]",gl="\\ud83c[\\udffb-\\udfff]",ev="(?:"+yo+"|"+gl+")",Vu="[^"+vo+"]",pl="(?:\\ud83c[\\udde6-\\uddff]){2}",ml="[\\ud800-\\udbff][\\udc00-\\udfff]",Di="["+Wu+"]",Gu="\\u200d",$u="(?:"+Nu+"|"+zu+")",nv="(?:"+Di+"|"+zu+")",Ku="(?:"+dl+"(?:d|ll|m|re|s|t|ve))?",qu="(?:"+dl+"(?:D|LL|M|RE|S|T|VE))?",Ju=ev+"?",Qu="["+Xu+"]?",rv="(?:"+Gu+"(?:"+[Vu,pl,ml].join("|")+")"+Qu+Ju+")*",iv="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",sv="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Zu=Qu+Ju+rv,ov="(?:"+[tv,pl,ml].join("|")+")"+Zu,av="(?:"+[Vu+yo+"?",yo,pl,ml,Z_].join("|")+")",lv=RegExp(dl,"g"),cv=RegExp(yo,"g"),_l=RegExp(gl+"(?="+gl+")|"+av+Zu,"g"),hv=RegExp([Di+"?"+Nu+"+"+Ku+"(?="+[Yu,Di,"$"].join("|")+")",nv+"+"+qu+"(?="+[Yu,Di+$u,"$"].join("|")+")",Di+"?"+$u+"+"+Ku,Di+"+"+qu,sv,iv,Uu,ov].join("|"),"g"),uv=RegExp("["+Gu+vo+Iu+Xu+"]"),fv=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,dv=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],gv=-1,ee={};ee[re]=ee[Be]=ee[Yn]=ee[Oi]=ee[Qn]=ee[Ei]=ee[Te]=ee[Ge]=ee[Pi]=!0,ee[En]=ee[ue]=ee[Yt]=ee[et]=ee[Bt]=ee[J]=ee[It]=ee[C]=ee[L]=ee[j]=ee[z]=ee[q]=ee[V]=ee[ct]=ee[pt]=!1;var te={};te[En]=te[ue]=te[Yt]=te[Bt]=te[et]=te[J]=te[re]=te[Be]=te[Yn]=te[Oi]=te[Qn]=te[L]=te[j]=te[z]=te[q]=te[V]=te[ct]=te[st]=te[Ei]=te[Te]=te[Ge]=te[Pi]=!0,te[It]=te[C]=te[pt]=!1;var pv={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},mv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},_v={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},vv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},yv=parseFloat,xv=parseInt,tf=typeof Rs=="object"&&Rs&&Rs.Object===Object&&Rs,wv=typeof self=="object"&&self&&self.Object===Object&&self,Oe=tf||wv||Function("return this")(),vl=t&&!t.nodeType&&t,qr=vl&&!0&&r&&!r.nodeType&&r,ef=qr&&qr.exports===vl,yl=ef&&tf.process,mn=function(){try{var P=qr&&qr.require&&qr.require("util").types;return P||yl&&yl.binding&&yl.binding("util")}catch{}}(),nf=mn&&mn.isArrayBuffer,rf=mn&&mn.isDate,sf=mn&&mn.isMap,of=mn&&mn.isRegExp,af=mn&&mn.isSet,lf=mn&&mn.isTypedArray;function sn(P,W,I){switch(I.length){case 0:return P.call(W);case 1:return P.call(W,I[0]);case 2:return P.call(W,I[0],I[1]);case 3:return P.call(W,I[0],I[1],I[2])}return P.apply(W,I)}function Cv(P,W,I,rt){for(var xt=-1,Nt=P==null?0:P.length;++xt<Nt;){var _e=P[xt];W(rt,_e,I(_e),P)}return rt}function _n(P,W){for(var I=-1,rt=P==null?0:P.length;++I<rt&&W(P[I],I,P)!==!1;);return P}function Sv(P,W){for(var I=P==null?0:P.length;I--&&W(P[I],I,P)!==!1;);return P}function cf(P,W){for(var I=-1,rt=P==null?0:P.length;++I<rt;)if(!W(P[I],I,P))return!1;return!0}function br(P,W){for(var I=-1,rt=P==null?0:P.length,xt=0,Nt=[];++I<rt;){var _e=P[I];W(_e,I,P)&&(Nt[xt++]=_e)}return Nt}function xo(P,W){var I=P==null?0:P.length;return!!I&&Ai(P,W,0)>-1}function xl(P,W,I){for(var rt=-1,xt=P==null?0:P.length;++rt<xt;)if(I(W,P[rt]))return!0;return!1}function ie(P,W){for(var I=-1,rt=P==null?0:P.length,xt=Array(rt);++I<rt;)xt[I]=W(P[I],I,P);return xt}function Tr(P,W){for(var I=-1,rt=W.length,xt=P.length;++I<rt;)P[xt+I]=W[I];return P}function wl(P,W,I,rt){var xt=-1,Nt=P==null?0:P.length;for(rt&&Nt&&(I=P[++xt]);++xt<Nt;)I=W(I,P[xt],xt,P);return I}function bv(P,W,I,rt){var xt=P==null?0:P.length;for(rt&&xt&&(I=P[--xt]);xt--;)I=W(I,P[xt],xt,P);return I}function Cl(P,W){for(var I=-1,rt=P==null?0:P.length;++I<rt;)if(W(P[I],I,P))return!0;return!1}var Tv=Sl("length");function Ov(P){return P.split("")}function Ev(P){return P.match(F_)||[]}function hf(P,W,I){var rt;return I(P,function(xt,Nt,_e){if(W(xt,Nt,_e))return rt=Nt,!1}),rt}function wo(P,W,I,rt){for(var xt=P.length,Nt=I+(rt?1:-1);rt?Nt--:++Nt<xt;)if(W(P[Nt],Nt,P))return Nt;return-1}function Ai(P,W,I){return W===W?Wv(P,W,I):wo(P,uf,I)}function Pv(P,W,I,rt){for(var xt=I-1,Nt=P.length;++xt<Nt;)if(rt(P[xt],W))return xt;return-1}function uf(P){return P!==P}function ff(P,W){var I=P==null?0:P.length;return I?Tl(P,W)/I:rn}function Sl(P){return function(W){return W==null?e:W[P]}}function bl(P){return function(W){return P==null?e:P[W]}}function df(P,W,I,rt,xt){return xt(P,function(Nt,_e,qt){I=rt?(rt=!1,Nt):W(I,Nt,_e,qt)}),I}function Dv(P,W){var I=P.length;for(P.sort(W);I--;)P[I]=P[I].value;return P}function Tl(P,W){for(var I,rt=-1,xt=P.length;++rt<xt;){var Nt=W(P[rt]);Nt!==e&&(I=I===e?Nt:I+Nt)}return I}function Ol(P,W){for(var I=-1,rt=Array(P);++I<P;)rt[I]=W(I);return rt}function Av(P,W){return ie(W,function(I){return[I,P[I]]})}function gf(P){return P&&P.slice(0,vf(P)+1).replace(fl,"")}function on(P){return function(W){return P(W)}}function El(P,W){return ie(W,function(I){return P[I]})}function ps(P,W){return P.has(W)}function pf(P,W){for(var I=-1,rt=P.length;++I<rt&&Ai(W,P[I],0)>-1;);return I}function mf(P,W){for(var I=P.length;I--&&Ai(W,P[I],0)>-1;);return I}function Mv(P,W){for(var I=P.length,rt=0;I--;)P[I]===W&&++rt;return rt}var kv=bl(pv),Lv=bl(mv);function Rv(P){return"\\"+vv[P]}function Fv(P,W){return P==null?e:P[W]}function Mi(P){return uv.test(P)}function Iv(P){return fv.test(P)}function Bv(P){for(var W,I=[];!(W=P.next()).done;)I.push(W.value);return I}function Pl(P){var W=-1,I=Array(P.size);return P.forEach(function(rt,xt){I[++W]=[xt,rt]}),I}function _f(P,W){return function(I){return P(W(I))}}function Or(P,W){for(var I=-1,rt=P.length,xt=0,Nt=[];++I<rt;){var _e=P[I];(_e===W||_e===d)&&(P[I]=d,Nt[xt++]=I)}return Nt}function Co(P){var W=-1,I=Array(P.size);return P.forEach(function(rt){I[++W]=rt}),I}function jv(P){var W=-1,I=Array(P.size);return P.forEach(function(rt){I[++W]=[rt,rt]}),I}function Wv(P,W,I){for(var rt=I-1,xt=P.length;++rt<xt;)if(P[rt]===W)return rt;return-1}function Xv(P,W,I){for(var rt=I+1;rt--;)if(P[rt]===W)return rt;return rt}function ki(P){return Mi(P)?Yv(P):Tv(P)}function Pn(P){return Mi(P)?Uv(P):Ov(P)}function vf(P){for(var W=P.length;W--&&M_.test(P.charAt(W)););return W}var Hv=bl(_v);function Yv(P){for(var W=_l.lastIndex=0;_l.test(P);)++W;return W}function Uv(P){return P.match(_l)||[]}function Nv(P){return P.match(hv)||[]}var zv=function P(W){W=W==null?Oe:Li.defaults(Oe.Object(),W,Li.pick(Oe,dv));var I=W.Array,rt=W.Date,xt=W.Error,Nt=W.Function,_e=W.Math,qt=W.Object,Dl=W.RegExp,Vv=W.String,vn=W.TypeError,So=I.prototype,Gv=Nt.prototype,Ri=qt.prototype,bo=W["__core-js_shared__"],To=Gv.toString,Gt=Ri.hasOwnProperty,$v=0,yf=function(){var s=/[^.]+$/.exec(bo&&bo.keys&&bo.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Oo=Ri.toString,Kv=To.call(qt),qv=Oe._,Jv=Dl("^"+To.call(Gt).replace(ul,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Eo=ef?W.Buffer:e,Er=W.Symbol,Po=W.Uint8Array,xf=Eo?Eo.allocUnsafe:e,Do=_f(qt.getPrototypeOf,qt),wf=qt.create,Cf=Ri.propertyIsEnumerable,Ao=So.splice,Sf=Er?Er.isConcatSpreadable:e,ms=Er?Er.iterator:e,Jr=Er?Er.toStringTag:e,Mo=function(){try{var s=ni(qt,"defineProperty");return s({},"",{}),s}catch{}}(),Qv=W.clearTimeout!==Oe.clearTimeout&&W.clearTimeout,Zv=rt&&rt.now!==Oe.Date.now&&rt.now,ty=W.setTimeout!==Oe.setTimeout&&W.setTimeout,ko=_e.ceil,Lo=_e.floor,Al=qt.getOwnPropertySymbols,ey=Eo?Eo.isBuffer:e,bf=W.isFinite,ny=So.join,ry=_f(qt.keys,qt),ve=_e.max,Me=_e.min,iy=rt.now,sy=W.parseInt,Tf=_e.random,oy=So.reverse,Ml=ni(W,"DataView"),_s=ni(W,"Map"),kl=ni(W,"Promise"),Fi=ni(W,"Set"),vs=ni(W,"WeakMap"),ys=ni(qt,"create"),Ro=vs&&new vs,Ii={},ay=ri(Ml),ly=ri(_s),cy=ri(kl),hy=ri(Fi),uy=ri(vs),Fo=Er?Er.prototype:e,xs=Fo?Fo.valueOf:e,Of=Fo?Fo.toString:e;function y(s){if(le(s)&&!wt(s)&&!(s instanceof Rt)){if(s instanceof yn)return s;if(Gt.call(s,"__wrapped__"))return Ed(s)}return new yn(s)}var Bi=function(){function s(){}return function(a){if(!oe(a))return{};if(wf)return wf(a);s.prototype=a;var u=new s;return s.prototype=e,u}}();function Io(){}function yn(s,a){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=e}y.templateSettings={escape:T_,evaluate:O_,interpolate:Ru,variable:"",imports:{_:y}},y.prototype=Io.prototype,y.prototype.constructor=y,yn.prototype=Bi(Io.prototype),yn.prototype.constructor=yn;function Rt(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=he,this.__views__=[]}function fy(){var s=new Rt(this.__wrapped__);return s.__actions__=$e(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=$e(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=$e(this.__views__),s}function dy(){if(this.__filtered__){var s=new Rt(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function gy(){var s=this.__wrapped__.value(),a=this.__dir__,u=wt(s),g=a<0,m=u?s.length:0,x=Ox(0,m,this.__views__),S=x.start,T=x.end,k=T-S,H=g?T:S-1,Y=this.__iteratees__,G=Y.length,Q=0,lt=Me(k,this.__takeCount__);if(!u||!g&&m==k&&lt==k)return qf(s,this.__actions__);var mt=[];t:for(;k--&&Q<lt;){H+=a;for(var Ot=-1,_t=s[H];++Ot<G;){var kt=Y[Ot],jt=kt.iteratee,cn=kt.type,Xe=jt(_t);if(cn==Xt)_t=Xe;else if(!Xe){if(cn==Ft)continue t;break t}}mt[Q++]=_t}return mt}Rt.prototype=Bi(Io.prototype),Rt.prototype.constructor=Rt;function Qr(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var g=s[a];this.set(g[0],g[1])}}function py(){this.__data__=ys?ys(null):{},this.size=0}function my(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}function _y(s){var a=this.__data__;if(ys){var u=a[s];return u===h?e:u}return Gt.call(a,s)?a[s]:e}function vy(s){var a=this.__data__;return ys?a[s]!==e:Gt.call(a,s)}function yy(s,a){var u=this.__data__;return this.size+=this.has(s)?0:1,u[s]=ys&&a===e?h:a,this}Qr.prototype.clear=py,Qr.prototype.delete=my,Qr.prototype.get=_y,Qr.prototype.has=vy,Qr.prototype.set=yy;function Zn(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var g=s[a];this.set(g[0],g[1])}}function xy(){this.__data__=[],this.size=0}function wy(s){var a=this.__data__,u=Bo(a,s);if(u<0)return!1;var g=a.length-1;return u==g?a.pop():Ao.call(a,u,1),--this.size,!0}function Cy(s){var a=this.__data__,u=Bo(a,s);return u<0?e:a[u][1]}function Sy(s){return Bo(this.__data__,s)>-1}function by(s,a){var u=this.__data__,g=Bo(u,s);return g<0?(++this.size,u.push([s,a])):u[g][1]=a,this}Zn.prototype.clear=xy,Zn.prototype.delete=wy,Zn.prototype.get=Cy,Zn.prototype.has=Sy,Zn.prototype.set=by;function tr(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var g=s[a];this.set(g[0],g[1])}}function Ty(){this.size=0,this.__data__={hash:new Qr,map:new(_s||Zn),string:new Qr}}function Oy(s){var a=Ko(this,s).delete(s);return this.size-=a?1:0,a}function Ey(s){return Ko(this,s).get(s)}function Py(s){return Ko(this,s).has(s)}function Dy(s,a){var u=Ko(this,s),g=u.size;return u.set(s,a),this.size+=u.size==g?0:1,this}tr.prototype.clear=Ty,tr.prototype.delete=Oy,tr.prototype.get=Ey,tr.prototype.has=Py,tr.prototype.set=Dy;function Zr(s){var a=-1,u=s==null?0:s.length;for(this.__data__=new tr;++a<u;)this.add(s[a])}function Ay(s){return this.__data__.set(s,h),this}function My(s){return this.__data__.has(s)}Zr.prototype.add=Zr.prototype.push=Ay,Zr.prototype.has=My;function Dn(s){var a=this.__data__=new Zn(s);this.size=a.size}function ky(){this.__data__=new Zn,this.size=0}function Ly(s){var a=this.__data__,u=a.delete(s);return this.size=a.size,u}function Ry(s){return this.__data__.get(s)}function Fy(s){return this.__data__.has(s)}function Iy(s,a){var u=this.__data__;if(u instanceof Zn){var g=u.__data__;if(!_s||g.length<i-1)return g.push([s,a]),this.size=++u.size,this;u=this.__data__=new tr(g)}return u.set(s,a),this.size=u.size,this}Dn.prototype.clear=ky,Dn.prototype.delete=Ly,Dn.prototype.get=Ry,Dn.prototype.has=Fy,Dn.prototype.set=Iy;function Ef(s,a){var u=wt(s),g=!u&&ii(s),m=!u&&!g&&kr(s),x=!u&&!g&&!m&&Hi(s),S=u||g||m||x,T=S?Ol(s.length,Vv):[],k=T.length;for(var H in s)(a||Gt.call(s,H))&&!(S&&(H=="length"||m&&(H=="offset"||H=="parent")||x&&(H=="buffer"||H=="byteLength"||H=="byteOffset")||ir(H,k)))&&T.push(H);return T}function Pf(s){var a=s.length;return a?s[Ul(0,a-1)]:e}function By(s,a){return qo($e(s),ti(a,0,s.length))}function jy(s){return qo($e(s))}function Ll(s,a,u){(u!==e&&!An(s[a],u)||u===e&&!(a in s))&&er(s,a,u)}function ws(s,a,u){var g=s[a];(!(Gt.call(s,a)&&An(g,u))||u===e&&!(a in s))&&er(s,a,u)}function Bo(s,a){for(var u=s.length;u--;)if(An(s[u][0],a))return u;return-1}function Wy(s,a,u,g){return Pr(s,function(m,x,S){a(g,m,u(m),S)}),g}function Df(s,a){return s&&Nn(a,Ce(a),s)}function Xy(s,a){return s&&Nn(a,qe(a),s)}function er(s,a,u){a=="__proto__"&&Mo?Mo(s,a,{configurable:!0,enumerable:!0,value:u,writable:!0}):s[a]=u}function Rl(s,a){for(var u=-1,g=a.length,m=I(g),x=s==null;++u<g;)m[u]=x?e:gc(s,a[u]);return m}function ti(s,a,u){return s===s&&(u!==e&&(s=s<=u?s:u),a!==e&&(s=s>=a?s:a)),s}function xn(s,a,u,g,m,x){var S,T=a&p,k=a&_,H=a&v;if(u&&(S=m?u(s,g,m,x):u(s)),S!==e)return S;if(!oe(s))return s;var Y=wt(s);if(Y){if(S=Px(s),!T)return $e(s,S)}else{var G=ke(s),Q=G==C||G==b;if(kr(s))return Zf(s,T);if(G==z||G==En||Q&&!m){if(S=k||Q?{}:vd(s),!T)return k?_x(s,Xy(S,s)):mx(s,Df(S,s))}else{if(!te[G])return m?s:{};S=Dx(s,G,T)}}x||(x=new Dn);var lt=x.get(s);if(lt)return lt;x.set(s,S),Gd(s)?s.forEach(function(_t){S.add(xn(_t,a,u,_t,s,x))}):zd(s)&&s.forEach(function(_t,kt){S.set(kt,xn(_t,a,u,kt,s,x))});var mt=H?k?tc:Zl:k?qe:Ce,Ot=Y?e:mt(s);return _n(Ot||s,function(_t,kt){Ot&&(kt=_t,_t=s[kt]),ws(S,kt,xn(_t,a,u,kt,s,x))}),S}function Hy(s){var a=Ce(s);return function(u){return Af(u,s,a)}}function Af(s,a,u){var g=u.length;if(s==null)return!g;for(s=qt(s);g--;){var m=u[g],x=a[m],S=s[m];if(S===e&&!(m in s)||!x(S))return!1}return!0}function Mf(s,a,u){if(typeof s!="function")throw new vn(l);return Ps(function(){s.apply(e,u)},a)}function Cs(s,a,u,g){var m=-1,x=xo,S=!0,T=s.length,k=[],H=a.length;if(!T)return k;u&&(a=ie(a,on(u))),g?(x=xl,S=!1):a.length>=i&&(x=ps,S=!1,a=new Zr(a));t:for(;++m<T;){var Y=s[m],G=u==null?Y:u(Y);if(Y=g||Y!==0?Y:0,S&&G===G){for(var Q=H;Q--;)if(a[Q]===G)continue t;k.push(Y)}else x(a,G,g)||k.push(Y)}return k}var Pr=id(Un),kf=id(Il,!0);function Yy(s,a){var u=!0;return Pr(s,function(g,m,x){return u=!!a(g,m,x),u}),u}function jo(s,a,u){for(var g=-1,m=s.length;++g<m;){var x=s[g],S=a(x);if(S!=null&&(T===e?S===S&&!ln(S):u(S,T)))var T=S,k=x}return k}function Uy(s,a,u,g){var m=s.length;for(u=St(u),u<0&&(u=-u>m?0:m+u),g=g===e||g>m?m:St(g),g<0&&(g+=m),g=u>g?0:Kd(g);u<g;)s[u++]=a;return s}function Lf(s,a){var u=[];return Pr(s,function(g,m,x){a(g,m,x)&&u.push(g)}),u}function Ee(s,a,u,g,m){var x=-1,S=s.length;for(u||(u=Mx),m||(m=[]);++x<S;){var T=s[x];a>0&&u(T)?a>1?Ee(T,a-1,u,g,m):Tr(m,T):g||(m[m.length]=T)}return m}var Fl=sd(),Rf=sd(!0);function Un(s,a){return s&&Fl(s,a,Ce)}function Il(s,a){return s&&Rf(s,a,Ce)}function Wo(s,a){return br(a,function(u){return sr(s[u])})}function ei(s,a){a=Ar(a,s);for(var u=0,g=a.length;s!=null&&u<g;)s=s[zn(a[u++])];return u&&u==g?s:e}function Ff(s,a,u){var g=a(s);return wt(s)?g:Tr(g,u(s))}function je(s){return s==null?s===e?ft:N:Jr&&Jr in qt(s)?Tx(s):jx(s)}function Bl(s,a){return s>a}function Ny(s,a){return s!=null&&Gt.call(s,a)}function zy(s,a){return s!=null&&a in qt(s)}function Vy(s,a,u){return s>=Me(a,u)&&s<ve(a,u)}function jl(s,a,u){for(var g=u?xl:xo,m=s[0].length,x=s.length,S=x,T=I(x),k=1/0,H=[];S--;){var Y=s[S];S&&a&&(Y=ie(Y,on(a))),k=Me(Y.length,k),T[S]=!u&&(a||m>=120&&Y.length>=120)?new Zr(S&&Y):e}Y=s[0];var G=-1,Q=T[0];t:for(;++G<m&&H.length<k;){var lt=Y[G],mt=a?a(lt):lt;if(lt=u||lt!==0?lt:0,!(Q?ps(Q,mt):g(H,mt,u))){for(S=x;--S;){var Ot=T[S];if(!(Ot?ps(Ot,mt):g(s[S],mt,u)))continue t}Q&&Q.push(mt),H.push(lt)}}return H}function Gy(s,a,u,g){return Un(s,function(m,x,S){a(g,u(m),x,S)}),g}function Ss(s,a,u){a=Ar(a,s),s=Cd(s,a);var g=s==null?s:s[zn(Cn(a))];return g==null?e:sn(g,s,u)}function If(s){return le(s)&&je(s)==En}function $y(s){return le(s)&&je(s)==Yt}function Ky(s){return le(s)&&je(s)==J}function bs(s,a,u,g,m){return s===a?!0:s==null||a==null||!le(s)&&!le(a)?s!==s&&a!==a:qy(s,a,u,g,bs,m)}function qy(s,a,u,g,m,x){var S=wt(s),T=wt(a),k=S?ue:ke(s),H=T?ue:ke(a);k=k==En?z:k,H=H==En?z:H;var Y=k==z,G=H==z,Q=k==H;if(Q&&kr(s)){if(!kr(a))return!1;S=!0,Y=!1}if(Q&&!Y)return x||(x=new Dn),S||Hi(s)?pd(s,a,u,g,m,x):Sx(s,a,k,u,g,m,x);if(!(u&w)){var lt=Y&&Gt.call(s,"__wrapped__"),mt=G&&Gt.call(a,"__wrapped__");if(lt||mt){var Ot=lt?s.value():s,_t=mt?a.value():a;return x||(x=new Dn),m(Ot,_t,u,g,x)}}return Q?(x||(x=new Dn),bx(s,a,u,g,m,x)):!1}function Jy(s){return le(s)&&ke(s)==L}function Wl(s,a,u,g){var m=u.length,x=m,S=!g;if(s==null)return!x;for(s=qt(s);m--;){var T=u[m];if(S&&T[2]?T[1]!==s[T[0]]:!(T[0]in s))return!1}for(;++m<x;){T=u[m];var k=T[0],H=s[k],Y=T[1];if(S&&T[2]){if(H===e&&!(k in s))return!1}else{var G=new Dn;if(g)var Q=g(H,Y,k,s,a,G);if(!(Q===e?bs(Y,H,w|E,g,G):Q))return!1}}return!0}function Bf(s){if(!oe(s)||Lx(s))return!1;var a=sr(s)?Jv:H_;return a.test(ri(s))}function Qy(s){return le(s)&&je(s)==q}function Zy(s){return le(s)&&ke(s)==V}function tx(s){return le(s)&&na(s.length)&&!!ee[je(s)]}function jf(s){return typeof s=="function"?s:s==null?Je:typeof s=="object"?wt(s)?Hf(s[0],s[1]):Xf(s):og(s)}function Xl(s){if(!Es(s))return ry(s);var a=[];for(var u in qt(s))Gt.call(s,u)&&u!="constructor"&&a.push(u);return a}function ex(s){if(!oe(s))return Bx(s);var a=Es(s),u=[];for(var g in s)g=="constructor"&&(a||!Gt.call(s,g))||u.push(g);return u}function Hl(s,a){return s<a}function Wf(s,a){var u=-1,g=Ke(s)?I(s.length):[];return Pr(s,function(m,x,S){g[++u]=a(m,x,S)}),g}function Xf(s){var a=nc(s);return a.length==1&&a[0][2]?xd(a[0][0],a[0][1]):function(u){return u===s||Wl(u,s,a)}}function Hf(s,a){return ic(s)&&yd(a)?xd(zn(s),a):function(u){var g=gc(u,s);return g===e&&g===a?pc(u,s):bs(a,g,w|E)}}function Xo(s,a,u,g,m){s!==a&&Fl(a,function(x,S){if(m||(m=new Dn),oe(x))nx(s,a,S,u,Xo,g,m);else{var T=g?g(oc(s,S),x,S+"",s,a,m):e;T===e&&(T=x),Ll(s,S,T)}},qe)}function nx(s,a,u,g,m,x,S){var T=oc(s,u),k=oc(a,u),H=S.get(k);if(H){Ll(s,u,H);return}var Y=x?x(T,k,u+"",s,a,S):e,G=Y===e;if(G){var Q=wt(k),lt=!Q&&kr(k),mt=!Q&&!lt&&Hi(k);Y=k,Q||lt||mt?wt(T)?Y=T:fe(T)?Y=$e(T):lt?(G=!1,Y=Zf(k,!0)):mt?(G=!1,Y=td(k,!0)):Y=[]:Ds(k)||ii(k)?(Y=T,ii(T)?Y=qd(T):(!oe(T)||sr(T))&&(Y=vd(k))):G=!1}G&&(S.set(k,Y),m(Y,k,g,x,S),S.delete(k)),Ll(s,u,Y)}function Yf(s,a){var u=s.length;if(u)return a+=a<0?u:0,ir(a,u)?s[a]:e}function Uf(s,a,u){a.length?a=ie(a,function(x){return wt(x)?function(S){return ei(S,x.length===1?x[0]:x)}:x}):a=[Je];var g=-1;a=ie(a,on(gt()));var m=Wf(s,function(x,S,T){var k=ie(a,function(H){return H(x)});return{criteria:k,index:++g,value:x}});return Dv(m,function(x,S){return px(x,S,u)})}function rx(s,a){return Nf(s,a,function(u,g){return pc(s,g)})}function Nf(s,a,u){for(var g=-1,m=a.length,x={};++g<m;){var S=a[g],T=ei(s,S);u(T,S)&&Ts(x,Ar(S,s),T)}return x}function ix(s){return function(a){return ei(a,s)}}function Yl(s,a,u,g){var m=g?Pv:Ai,x=-1,S=a.length,T=s;for(s===a&&(a=$e(a)),u&&(T=ie(s,on(u)));++x<S;)for(var k=0,H=a[x],Y=u?u(H):H;(k=m(T,Y,k,g))>-1;)T!==s&&Ao.call(T,k,1),Ao.call(s,k,1);return s}function zf(s,a){for(var u=s?a.length:0,g=u-1;u--;){var m=a[u];if(u==g||m!==x){var x=m;ir(m)?Ao.call(s,m,1):Vl(s,m)}}return s}function Ul(s,a){return s+Lo(Tf()*(a-s+1))}function sx(s,a,u,g){for(var m=-1,x=ve(ko((a-s)/(u||1)),0),S=I(x);x--;)S[g?x:++m]=s,s+=u;return S}function Nl(s,a){var u="";if(!s||a<1||a>vt)return u;do a%2&&(u+=s),a=Lo(a/2),a&&(s+=s);while(a);return u}function Pt(s,a){return ac(wd(s,a,Je),s+"")}function ox(s){return Pf(Yi(s))}function ax(s,a){var u=Yi(s);return qo(u,ti(a,0,u.length))}function Ts(s,a,u,g){if(!oe(s))return s;a=Ar(a,s);for(var m=-1,x=a.length,S=x-1,T=s;T!=null&&++m<x;){var k=zn(a[m]),H=u;if(k==="__proto__"||k==="constructor"||k==="prototype")return s;if(m!=S){var Y=T[k];H=g?g(Y,k,T):e,H===e&&(H=oe(Y)?Y:ir(a[m+1])?[]:{})}ws(T,k,H),T=T[k]}return s}var Vf=Ro?function(s,a){return Ro.set(s,a),s}:Je,lx=Mo?function(s,a){return Mo(s,"toString",{configurable:!0,enumerable:!1,value:_c(a),writable:!0})}:Je;function cx(s){return qo(Yi(s))}function wn(s,a,u){var g=-1,m=s.length;a<0&&(a=-a>m?0:m+a),u=u>m?m:u,u<0&&(u+=m),m=a>u?0:u-a>>>0,a>>>=0;for(var x=I(m);++g<m;)x[g]=s[g+a];return x}function hx(s,a){var u;return Pr(s,function(g,m,x){return u=a(g,m,x),!u}),!!u}function Ho(s,a,u){var g=0,m=s==null?g:s.length;if(typeof a=="number"&&a===a&&m<=Cr){for(;g<m;){var x=g+m>>>1,S=s[x];S!==null&&!ln(S)&&(u?S<=a:S<a)?g=x+1:m=x}return m}return zl(s,a,Je,u)}function zl(s,a,u,g){var m=0,x=s==null?0:s.length;if(x===0)return 0;a=u(a);for(var S=a!==a,T=a===null,k=ln(a),H=a===e;m<x;){var Y=Lo((m+x)/2),G=u(s[Y]),Q=G!==e,lt=G===null,mt=G===G,Ot=ln(G);if(S)var _t=g||mt;else H?_t=mt&&(g||Q):T?_t=mt&&Q&&(g||!lt):k?_t=mt&&Q&&!lt&&(g||!Ot):lt||Ot?_t=!1:_t=g?G<=a:G<a;_t?m=Y+1:x=Y}return Me(x,Ae)}function Gf(s,a){for(var u=-1,g=s.length,m=0,x=[];++u<g;){var S=s[u],T=a?a(S):S;if(!u||!An(T,k)){var k=T;x[m++]=S===0?0:S}}return x}function $f(s){return typeof s=="number"?s:ln(s)?rn:+s}function an(s){if(typeof s=="string")return s;if(wt(s))return ie(s,an)+"";if(ln(s))return Of?Of.call(s):"";var a=s+"";return a=="0"&&1/s==-Ct?"-0":a}function Dr(s,a,u){var g=-1,m=xo,x=s.length,S=!0,T=[],k=T;if(u)S=!1,m=xl;else if(x>=i){var H=a?null:wx(s);if(H)return Co(H);S=!1,m=ps,k=new Zr}else k=a?[]:T;t:for(;++g<x;){var Y=s[g],G=a?a(Y):Y;if(Y=u||Y!==0?Y:0,S&&G===G){for(var Q=k.length;Q--;)if(k[Q]===G)continue t;a&&k.push(G),T.push(Y)}else m(k,G,u)||(k!==T&&k.push(G),T.push(Y))}return T}function Vl(s,a){return a=Ar(a,s),s=Cd(s,a),s==null||delete s[zn(Cn(a))]}function Kf(s,a,u,g){return Ts(s,a,u(ei(s,a)),g)}function Yo(s,a,u,g){for(var m=s.length,x=g?m:-1;(g?x--:++x<m)&&a(s[x],x,s););return u?wn(s,g?0:x,g?x+1:m):wn(s,g?x+1:0,g?m:x)}function qf(s,a){var u=s;return u instanceof Rt&&(u=u.value()),wl(a,function(g,m){return m.func.apply(m.thisArg,Tr([g],m.args))},u)}function Gl(s,a,u){var g=s.length;if(g<2)return g?Dr(s[0]):[];for(var m=-1,x=I(g);++m<g;)for(var S=s[m],T=-1;++T<g;)T!=m&&(x[m]=Cs(x[m]||S,s[T],a,u));return Dr(Ee(x,1),a,u)}function Jf(s,a,u){for(var g=-1,m=s.length,x=a.length,S={};++g<m;){var T=g<x?a[g]:e;u(S,s[g],T)}return S}function $l(s){return fe(s)?s:[]}function Kl(s){return typeof s=="function"?s:Je}function Ar(s,a){return wt(s)?s:ic(s,a)?[s]:Od(Vt(s))}var ux=Pt;function Mr(s,a,u){var g=s.length;return u=u===e?g:u,!a&&u>=g?s:wn(s,a,u)}var Qf=Qv||function(s){return Oe.clearTimeout(s)};function Zf(s,a){if(a)return s.slice();var u=s.length,g=xf?xf(u):new s.constructor(u);return s.copy(g),g}function ql(s){var a=new s.constructor(s.byteLength);return new Po(a).set(new Po(s)),a}function fx(s,a){var u=a?ql(s.buffer):s.buffer;return new s.constructor(u,s.byteOffset,s.byteLength)}function dx(s){var a=new s.constructor(s.source,Fu.exec(s));return a.lastIndex=s.lastIndex,a}function gx(s){return xs?qt(xs.call(s)):{}}function td(s,a){var u=a?ql(s.buffer):s.buffer;return new s.constructor(u,s.byteOffset,s.length)}function ed(s,a){if(s!==a){var u=s!==e,g=s===null,m=s===s,x=ln(s),S=a!==e,T=a===null,k=a===a,H=ln(a);if(!T&&!H&&!x&&s>a||x&&S&&k&&!T&&!H||g&&S&&k||!u&&k||!m)return 1;if(!g&&!x&&!H&&s<a||H&&u&&m&&!g&&!x||T&&u&&m||!S&&m||!k)return-1}return 0}function px(s,a,u){for(var g=-1,m=s.criteria,x=a.criteria,S=m.length,T=u.length;++g<S;){var k=ed(m[g],x[g]);if(k){if(g>=T)return k;var H=u[g];return k*(H=="desc"?-1:1)}}return s.index-a.index}function nd(s,a,u,g){for(var m=-1,x=s.length,S=u.length,T=-1,k=a.length,H=ve(x-S,0),Y=I(k+H),G=!g;++T<k;)Y[T]=a[T];for(;++m<S;)(G||m<x)&&(Y[u[m]]=s[m]);for(;H--;)Y[T++]=s[m++];return Y}function rd(s,a,u,g){for(var m=-1,x=s.length,S=-1,T=u.length,k=-1,H=a.length,Y=ve(x-T,0),G=I(Y+H),Q=!g;++m<Y;)G[m]=s[m];for(var lt=m;++k<H;)G[lt+k]=a[k];for(;++S<T;)(Q||m<x)&&(G[lt+u[S]]=s[m++]);return G}function $e(s,a){var u=-1,g=s.length;for(a||(a=I(g));++u<g;)a[u]=s[u];return a}function Nn(s,a,u,g){var m=!u;u||(u={});for(var x=-1,S=a.length;++x<S;){var T=a[x],k=g?g(u[T],s[T],T,u,s):e;k===e&&(k=s[T]),m?er(u,T,k):ws(u,T,k)}return u}function mx(s,a){return Nn(s,rc(s),a)}function _x(s,a){return Nn(s,md(s),a)}function Uo(s,a){return function(u,g){var m=wt(u)?Cv:Wy,x=a?a():{};return m(u,s,gt(g,2),x)}}function ji(s){return Pt(function(a,u){var g=-1,m=u.length,x=m>1?u[m-1]:e,S=m>2?u[2]:e;for(x=s.length>3&&typeof x=="function"?(m--,x):e,S&&We(u[0],u[1],S)&&(x=m<3?e:x,m=1),a=qt(a);++g<m;){var T=u[g];T&&s(a,T,g,x)}return a})}function id(s,a){return function(u,g){if(u==null)return u;if(!Ke(u))return s(u,g);for(var m=u.length,x=a?m:-1,S=qt(u);(a?x--:++x<m)&&g(S[x],x,S)!==!1;);return u}}function sd(s){return function(a,u,g){for(var m=-1,x=qt(a),S=g(a),T=S.length;T--;){var k=S[s?T:++m];if(u(x[k],k,x)===!1)break}return a}}function vx(s,a,u){var g=a&O,m=Os(s);function x(){var S=this&&this!==Oe&&this instanceof x?m:s;return S.apply(g?u:this,arguments)}return x}function od(s){return function(a){a=Vt(a);var u=Mi(a)?Pn(a):e,g=u?u[0]:a.charAt(0),m=u?Mr(u,1).join(""):a.slice(1);return g[s]()+m}}function Wi(s){return function(a){return wl(ig(rg(a).replace(lv,"")),s,"")}}function Os(s){return function(){var a=arguments;switch(a.length){case 0:return new s;case 1:return new s(a[0]);case 2:return new s(a[0],a[1]);case 3:return new s(a[0],a[1],a[2]);case 4:return new s(a[0],a[1],a[2],a[3]);case 5:return new s(a[0],a[1],a[2],a[3],a[4]);case 6:return new s(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new s(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var u=Bi(s.prototype),g=s.apply(u,a);return oe(g)?g:u}}function yx(s,a,u){var g=Os(s);function m(){for(var x=arguments.length,S=I(x),T=x,k=Xi(m);T--;)S[T]=arguments[T];var H=x<3&&S[0]!==k&&S[x-1]!==k?[]:Or(S,k);if(x-=H.length,x<u)return ud(s,a,No,m.placeholder,e,S,H,e,e,u-x);var Y=this&&this!==Oe&&this instanceof m?g:s;return sn(Y,this,S)}return m}function ad(s){return function(a,u,g){var m=qt(a);if(!Ke(a)){var x=gt(u,3);a=Ce(a),u=function(T){return x(m[T],T,m)}}var S=s(a,u,g);return S>-1?m[x?a[S]:S]:e}}function ld(s){return rr(function(a){var u=a.length,g=u,m=yn.prototype.thru;for(s&&a.reverse();g--;){var x=a[g];if(typeof x!="function")throw new vn(l);if(m&&!S&&$o(x)=="wrapper")var S=new yn([],!0)}for(g=S?g:u;++g<u;){x=a[g];var T=$o(x),k=T=="wrapper"?ec(x):e;k&&sc(k[0])&&k[1]==(nt|X|$|ot)&&!k[4].length&&k[9]==1?S=S[$o(k[0])].apply(S,k[3]):S=x.length==1&&sc(x)?S[T]():S.thru(x)}return function(){var H=arguments,Y=H[0];if(S&&H.length==1&&wt(Y))return S.plant(Y).value();for(var G=0,Q=u?a[G].apply(this,H):Y;++G<u;)Q=a[G].call(this,Q);return Q}})}function No(s,a,u,g,m,x,S,T,k,H){var Y=a&nt,G=a&O,Q=a&M,lt=a&(X|B),mt=a&it,Ot=Q?e:Os(s);function _t(){for(var kt=arguments.length,jt=I(kt),cn=kt;cn--;)jt[cn]=arguments[cn];if(lt)var Xe=Xi(_t),hn=Mv(jt,Xe);if(g&&(jt=nd(jt,g,m,lt)),x&&(jt=rd(jt,x,S,lt)),kt-=hn,lt&&kt<H){var de=Or(jt,Xe);return ud(s,a,No,_t.placeholder,u,jt,de,T,k,H-kt)}var Mn=G?u:this,ar=Q?Mn[s]:s;return kt=jt.length,T?jt=Wx(jt,T):mt&&kt>1&&jt.reverse(),Y&&k<kt&&(jt.length=k),this&&this!==Oe&&this instanceof _t&&(ar=Ot||Os(ar)),ar.apply(Mn,jt)}return _t}function cd(s,a){return function(u,g){return Gy(u,s,a(g),{})}}function zo(s,a){return function(u,g){var m;if(u===e&&g===e)return a;if(u!==e&&(m=u),g!==e){if(m===e)return g;typeof u=="string"||typeof g=="string"?(u=an(u),g=an(g)):(u=$f(u),g=$f(g)),m=s(u,g)}return m}}function Jl(s){return rr(function(a){return a=ie(a,on(gt())),Pt(function(u){var g=this;return s(a,function(m){return sn(m,g,u)})})})}function Vo(s,a){a=a===e?" ":an(a);var u=a.length;if(u<2)return u?Nl(a,s):a;var g=Nl(a,ko(s/ki(a)));return Mi(a)?Mr(Pn(g),0,s).join(""):g.slice(0,s)}function xx(s,a,u,g){var m=a&O,x=Os(s);function S(){for(var T=-1,k=arguments.length,H=-1,Y=g.length,G=I(Y+k),Q=this&&this!==Oe&&this instanceof S?x:s;++H<Y;)G[H]=g[H];for(;k--;)G[H++]=arguments[++T];return sn(Q,m?u:this,G)}return S}function hd(s){return function(a,u,g){return g&&typeof g!="number"&&We(a,u,g)&&(u=g=e),a=or(a),u===e?(u=a,a=0):u=or(u),g=g===e?a<u?1:-1:or(g),sx(a,u,g,s)}}function Go(s){return function(a,u){return typeof a=="string"&&typeof u=="string"||(a=Sn(a),u=Sn(u)),s(a,u)}}function ud(s,a,u,g,m,x,S,T,k,H){var Y=a&X,G=Y?S:e,Q=Y?e:S,lt=Y?x:e,mt=Y?e:x;a|=Y?$:tt,a&=~(Y?tt:$),a&R||(a&=~(O|M));var Ot=[s,a,m,lt,G,mt,Q,T,k,H],_t=u.apply(e,Ot);return sc(s)&&Sd(_t,Ot),_t.placeholder=g,bd(_t,s,a)}function Ql(s){var a=_e[s];return function(u,g){if(u=Sn(u),g=g==null?0:Me(St(g),292),g&&bf(u)){var m=(Vt(u)+"e").split("e"),x=a(m[0]+"e"+(+m[1]+g));return m=(Vt(x)+"e").split("e"),+(m[0]+"e"+(+m[1]-g))}return a(u)}}var wx=Fi&&1/Co(new Fi([,-0]))[1]==Ct?function(s){return new Fi(s)}:xc;function fd(s){return function(a){var u=ke(a);return u==L?Pl(a):u==V?jv(a):Av(a,s(a))}}function nr(s,a,u,g,m,x,S,T){var k=a&M;if(!k&&typeof s!="function")throw new vn(l);var H=g?g.length:0;if(H||(a&=~($|tt),g=m=e),S=S===e?S:ve(St(S),0),T=T===e?T:St(T),H-=m?m.length:0,a&tt){var Y=g,G=m;g=m=e}var Q=k?e:ec(s),lt=[s,a,u,g,m,Y,G,x,S,T];if(Q&&Ix(lt,Q),s=lt[0],a=lt[1],u=lt[2],g=lt[3],m=lt[4],T=lt[9]=lt[9]===e?k?0:s.length:ve(lt[9]-H,0),!T&&a&(X|B)&&(a&=~(X|B)),!a||a==O)var mt=vx(s,a,u);else a==X||a==B?mt=yx(s,a,T):(a==$||a==(O|$))&&!m.length?mt=xx(s,a,u,g):mt=No.apply(e,lt);var Ot=Q?Vf:Sd;return bd(Ot(mt,lt),s,a)}function dd(s,a,u,g){return s===e||An(s,Ri[u])&&!Gt.call(g,u)?a:s}function gd(s,a,u,g,m,x){return oe(s)&&oe(a)&&(x.set(a,s),Xo(s,a,e,gd,x),x.delete(a)),s}function Cx(s){return Ds(s)?e:s}function pd(s,a,u,g,m,x){var S=u&w,T=s.length,k=a.length;if(T!=k&&!(S&&k>T))return!1;var H=x.get(s),Y=x.get(a);if(H&&Y)return H==a&&Y==s;var G=-1,Q=!0,lt=u&E?new Zr:e;for(x.set(s,a),x.set(a,s);++G<T;){var mt=s[G],Ot=a[G];if(g)var _t=S?g(Ot,mt,G,a,s,x):g(mt,Ot,G,s,a,x);if(_t!==e){if(_t)continue;Q=!1;break}if(lt){if(!Cl(a,function(kt,jt){if(!ps(lt,jt)&&(mt===kt||m(mt,kt,u,g,x)))return lt.push(jt)})){Q=!1;break}}else if(!(mt===Ot||m(mt,Ot,u,g,x))){Q=!1;break}}return x.delete(s),x.delete(a),Q}function Sx(s,a,u,g,m,x,S){switch(u){case Bt:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case Yt:return!(s.byteLength!=a.byteLength||!x(new Po(s),new Po(a)));case et:case J:case j:return An(+s,+a);case It:return s.name==a.name&&s.message==a.message;case q:case ct:return s==a+"";case L:var T=Pl;case V:var k=g&w;if(T||(T=Co),s.size!=a.size&&!k)return!1;var H=S.get(s);if(H)return H==a;g|=E,S.set(s,a);var Y=pd(T(s),T(a),g,m,x,S);return S.delete(s),Y;case st:if(xs)return xs.call(s)==xs.call(a)}return!1}function bx(s,a,u,g,m,x){var S=u&w,T=Zl(s),k=T.length,H=Zl(a),Y=H.length;if(k!=Y&&!S)return!1;for(var G=k;G--;){var Q=T[G];if(!(S?Q in a:Gt.call(a,Q)))return!1}var lt=x.get(s),mt=x.get(a);if(lt&&mt)return lt==a&&mt==s;var Ot=!0;x.set(s,a),x.set(a,s);for(var _t=S;++G<k;){Q=T[G];var kt=s[Q],jt=a[Q];if(g)var cn=S?g(jt,kt,Q,a,s,x):g(kt,jt,Q,s,a,x);if(!(cn===e?kt===jt||m(kt,jt,u,g,x):cn)){Ot=!1;break}_t||(_t=Q=="constructor")}if(Ot&&!_t){var Xe=s.constructor,hn=a.constructor;Xe!=hn&&"constructor"in s&&"constructor"in a&&!(typeof Xe=="function"&&Xe instanceof Xe&&typeof hn=="function"&&hn instanceof hn)&&(Ot=!1)}return x.delete(s),x.delete(a),Ot}function rr(s){return ac(wd(s,e,Ad),s+"")}function Zl(s){return Ff(s,Ce,rc)}function tc(s){return Ff(s,qe,md)}var ec=Ro?function(s){return Ro.get(s)}:xc;function $o(s){for(var a=s.name+"",u=Ii[a],g=Gt.call(Ii,a)?u.length:0;g--;){var m=u[g],x=m.func;if(x==null||x==s)return m.name}return a}function Xi(s){var a=Gt.call(y,"placeholder")?y:s;return a.placeholder}function gt(){var s=y.iteratee||vc;return s=s===vc?jf:s,arguments.length?s(arguments[0],arguments[1]):s}function Ko(s,a){var u=s.__data__;return kx(a)?u[typeof a=="string"?"string":"hash"]:u.map}function nc(s){for(var a=Ce(s),u=a.length;u--;){var g=a[u],m=s[g];a[u]=[g,m,yd(m)]}return a}function ni(s,a){var u=Fv(s,a);return Bf(u)?u:e}function Tx(s){var a=Gt.call(s,Jr),u=s[Jr];try{s[Jr]=e;var g=!0}catch{}var m=Oo.call(s);return g&&(a?s[Jr]=u:delete s[Jr]),m}var rc=Al?function(s){return s==null?[]:(s=qt(s),br(Al(s),function(a){return Cf.call(s,a)}))}:wc,md=Al?function(s){for(var a=[];s;)Tr(a,rc(s)),s=Do(s);return a}:wc,ke=je;(Ml&&ke(new Ml(new ArrayBuffer(1)))!=Bt||_s&&ke(new _s)!=L||kl&&ke(kl.resolve())!=Z||Fi&&ke(new Fi)!=V||vs&&ke(new vs)!=pt)&&(ke=function(s){var a=je(s),u=a==z?s.constructor:e,g=u?ri(u):"";if(g)switch(g){case ay:return Bt;case ly:return L;case cy:return Z;case hy:return V;case uy:return pt}return a});function Ox(s,a,u){for(var g=-1,m=u.length;++g<m;){var x=u[g],S=x.size;switch(x.type){case"drop":s+=S;break;case"dropRight":a-=S;break;case"take":a=Me(a,s+S);break;case"takeRight":s=ve(s,a-S);break}}return{start:s,end:a}}function Ex(s){var a=s.match(L_);return a?a[1].split(R_):[]}function _d(s,a,u){a=Ar(a,s);for(var g=-1,m=a.length,x=!1;++g<m;){var S=zn(a[g]);if(!(x=s!=null&&u(s,S)))break;s=s[S]}return x||++g!=m?x:(m=s==null?0:s.length,!!m&&na(m)&&ir(S,m)&&(wt(s)||ii(s)))}function Px(s){var a=s.length,u=new s.constructor(a);return a&&typeof s[0]=="string"&&Gt.call(s,"index")&&(u.index=s.index,u.input=s.input),u}function vd(s){return typeof s.constructor=="function"&&!Es(s)?Bi(Do(s)):{}}function Dx(s,a,u){var g=s.constructor;switch(a){case Yt:return ql(s);case et:case J:return new g(+s);case Bt:return fx(s,u);case re:case Be:case Yn:case Oi:case Qn:case Ei:case Te:case Ge:case Pi:return td(s,u);case L:return new g;case j:case ct:return new g(s);case q:return dx(s);case V:return new g;case st:return gx(s)}}function Ax(s,a){var u=a.length;if(!u)return s;var g=u-1;return a[g]=(u>1?"& ":"")+a[g],a=a.join(u>2?", ":" "),s.replace(k_,`{
/* [wrapped with `+a+`] */
`)}function Mx(s){return wt(s)||ii(s)||!!(Sf&&s&&s[Sf])}function ir(s,a){var u=typeof s;return a=a??vt,!!a&&(u=="number"||u!="symbol"&&U_.test(s))&&s>-1&&s%1==0&&s<a}function We(s,a,u){if(!oe(u))return!1;var g=typeof a;return(g=="number"?Ke(u)&&ir(a,u.length):g=="string"&&a in u)?An(u[a],s):!1}function ic(s,a){if(wt(s))return!1;var u=typeof s;return u=="number"||u=="symbol"||u=="boolean"||s==null||ln(s)?!0:P_.test(s)||!E_.test(s)||a!=null&&s in qt(a)}function kx(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}function sc(s){var a=$o(s),u=y[a];if(typeof u!="function"||!(a in Rt.prototype))return!1;if(s===u)return!0;var g=ec(u);return!!g&&s===g[0]}function Lx(s){return!!yf&&yf in s}var Rx=bo?sr:Cc;function Es(s){var a=s&&s.constructor,u=typeof a=="function"&&a.prototype||Ri;return s===u}function yd(s){return s===s&&!oe(s)}function xd(s,a){return function(u){return u==null?!1:u[s]===a&&(a!==e||s in qt(u))}}function Fx(s){var a=ta(s,function(g){return u.size===f&&u.clear(),g}),u=a.cache;return a}function Ix(s,a){var u=s[1],g=a[1],m=u|g,x=m<(O|M|nt),S=g==nt&&u==X||g==nt&&u==ot&&s[7].length<=a[8]||g==(nt|ot)&&a[7].length<=a[8]&&u==X;if(!(x||S))return s;g&O&&(s[2]=a[2],m|=u&O?0:R);var T=a[3];if(T){var k=s[3];s[3]=k?nd(k,T,a[4]):T,s[4]=k?Or(s[3],d):a[4]}return T=a[5],T&&(k=s[5],s[5]=k?rd(k,T,a[6]):T,s[6]=k?Or(s[5],d):a[6]),T=a[7],T&&(s[7]=T),g&nt&&(s[8]=s[8]==null?a[8]:Me(s[8],a[8])),s[9]==null&&(s[9]=a[9]),s[0]=a[0],s[1]=m,s}function Bx(s){var a=[];if(s!=null)for(var u in qt(s))a.push(u);return a}function jx(s){return Oo.call(s)}function wd(s,a,u){return a=ve(a===e?s.length-1:a,0),function(){for(var g=arguments,m=-1,x=ve(g.length-a,0),S=I(x);++m<x;)S[m]=g[a+m];m=-1;for(var T=I(a+1);++m<a;)T[m]=g[m];return T[a]=u(S),sn(s,this,T)}}function Cd(s,a){return a.length<2?s:ei(s,wn(a,0,-1))}function Wx(s,a){for(var u=s.length,g=Me(a.length,u),m=$e(s);g--;){var x=a[g];s[g]=ir(x,u)?m[x]:e}return s}function oc(s,a){if(!(a==="constructor"&&typeof s[a]=="function")&&a!="__proto__")return s[a]}var Sd=Td(Vf),Ps=ty||function(s,a){return Oe.setTimeout(s,a)},ac=Td(lx);function bd(s,a,u){var g=a+"";return ac(s,Ax(g,Xx(Ex(g),u)))}function Td(s){var a=0,u=0;return function(){var g=iy(),m=Tt-(g-u);if(u=g,m>0){if(++a>=Lt)return arguments[0]}else a=0;return s.apply(e,arguments)}}function qo(s,a){var u=-1,g=s.length,m=g-1;for(a=a===e?g:a;++u<a;){var x=Ul(u,m),S=s[x];s[x]=s[u],s[u]=S}return s.length=a,s}var Od=Fx(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(D_,function(u,g,m,x){a.push(m?x.replace(B_,"$1"):g||u)}),a});function zn(s){if(typeof s=="string"||ln(s))return s;var a=s+"";return a=="0"&&1/s==-Ct?"-0":a}function ri(s){if(s!=null){try{return To.call(s)}catch{}try{return s+""}catch{}}return""}function Xx(s,a){return _n(Sr,function(u){var g="_."+u[0];a&u[1]&&!xo(s,g)&&s.push(g)}),s.sort()}function Ed(s){if(s instanceof Rt)return s.clone();var a=new yn(s.__wrapped__,s.__chain__);return a.__actions__=$e(s.__actions__),a.__index__=s.__index__,a.__values__=s.__values__,a}function Hx(s,a,u){(u?We(s,a,u):a===e)?a=1:a=ve(St(a),0);var g=s==null?0:s.length;if(!g||a<1)return[];for(var m=0,x=0,S=I(ko(g/a));m<g;)S[x++]=wn(s,m,m+=a);return S}function Yx(s){for(var a=-1,u=s==null?0:s.length,g=0,m=[];++a<u;){var x=s[a];x&&(m[g++]=x)}return m}function Ux(){var s=arguments.length;if(!s)return[];for(var a=I(s-1),u=arguments[0],g=s;g--;)a[g-1]=arguments[g];return Tr(wt(u)?$e(u):[u],Ee(a,1))}var Nx=Pt(function(s,a){return fe(s)?Cs(s,Ee(a,1,fe,!0)):[]}),zx=Pt(function(s,a){var u=Cn(a);return fe(u)&&(u=e),fe(s)?Cs(s,Ee(a,1,fe,!0),gt(u,2)):[]}),Vx=Pt(function(s,a){var u=Cn(a);return fe(u)&&(u=e),fe(s)?Cs(s,Ee(a,1,fe,!0),e,u):[]});function Gx(s,a,u){var g=s==null?0:s.length;return g?(a=u||a===e?1:St(a),wn(s,a<0?0:a,g)):[]}function $x(s,a,u){var g=s==null?0:s.length;return g?(a=u||a===e?1:St(a),a=g-a,wn(s,0,a<0?0:a)):[]}function Kx(s,a){return s&&s.length?Yo(s,gt(a,3),!0,!0):[]}function qx(s,a){return s&&s.length?Yo(s,gt(a,3),!0):[]}function Jx(s,a,u,g){var m=s==null?0:s.length;return m?(u&&typeof u!="number"&&We(s,a,u)&&(u=0,g=m),Uy(s,a,u,g)):[]}function Pd(s,a,u){var g=s==null?0:s.length;if(!g)return-1;var m=u==null?0:St(u);return m<0&&(m=ve(g+m,0)),wo(s,gt(a,3),m)}function Dd(s,a,u){var g=s==null?0:s.length;if(!g)return-1;var m=g-1;return u!==e&&(m=St(u),m=u<0?ve(g+m,0):Me(m,g-1)),wo(s,gt(a,3),m,!0)}function Ad(s){var a=s==null?0:s.length;return a?Ee(s,1):[]}function Qx(s){var a=s==null?0:s.length;return a?Ee(s,Ct):[]}function Zx(s,a){var u=s==null?0:s.length;return u?(a=a===e?1:St(a),Ee(s,a)):[]}function tw(s){for(var a=-1,u=s==null?0:s.length,g={};++a<u;){var m=s[a];g[m[0]]=m[1]}return g}function Md(s){return s&&s.length?s[0]:e}function ew(s,a,u){var g=s==null?0:s.length;if(!g)return-1;var m=u==null?0:St(u);return m<0&&(m=ve(g+m,0)),Ai(s,a,m)}function nw(s){var a=s==null?0:s.length;return a?wn(s,0,-1):[]}var rw=Pt(function(s){var a=ie(s,$l);return a.length&&a[0]===s[0]?jl(a):[]}),iw=Pt(function(s){var a=Cn(s),u=ie(s,$l);return a===Cn(u)?a=e:u.pop(),u.length&&u[0]===s[0]?jl(u,gt(a,2)):[]}),sw=Pt(function(s){var a=Cn(s),u=ie(s,$l);return a=typeof a=="function"?a:e,a&&u.pop(),u.length&&u[0]===s[0]?jl(u,e,a):[]});function ow(s,a){return s==null?"":ny.call(s,a)}function Cn(s){var a=s==null?0:s.length;return a?s[a-1]:e}function aw(s,a,u){var g=s==null?0:s.length;if(!g)return-1;var m=g;return u!==e&&(m=St(u),m=m<0?ve(g+m,0):Me(m,g-1)),a===a?Xv(s,a,m):wo(s,uf,m,!0)}function lw(s,a){return s&&s.length?Yf(s,St(a)):e}var cw=Pt(kd);function kd(s,a){return s&&s.length&&a&&a.length?Yl(s,a):s}function hw(s,a,u){return s&&s.length&&a&&a.length?Yl(s,a,gt(u,2)):s}function uw(s,a,u){return s&&s.length&&a&&a.length?Yl(s,a,e,u):s}var fw=rr(function(s,a){var u=s==null?0:s.length,g=Rl(s,a);return zf(s,ie(a,function(m){return ir(m,u)?+m:m}).sort(ed)),g});function dw(s,a){var u=[];if(!(s&&s.length))return u;var g=-1,m=[],x=s.length;for(a=gt(a,3);++g<x;){var S=s[g];a(S,g,s)&&(u.push(S),m.push(g))}return zf(s,m),u}function lc(s){return s==null?s:oy.call(s)}function gw(s,a,u){var g=s==null?0:s.length;return g?(u&&typeof u!="number"&&We(s,a,u)?(a=0,u=g):(a=a==null?0:St(a),u=u===e?g:St(u)),wn(s,a,u)):[]}function pw(s,a){return Ho(s,a)}function mw(s,a,u){return zl(s,a,gt(u,2))}function _w(s,a){var u=s==null?0:s.length;if(u){var g=Ho(s,a);if(g<u&&An(s[g],a))return g}return-1}function vw(s,a){return Ho(s,a,!0)}function yw(s,a,u){return zl(s,a,gt(u,2),!0)}function xw(s,a){var u=s==null?0:s.length;if(u){var g=Ho(s,a,!0)-1;if(An(s[g],a))return g}return-1}function ww(s){return s&&s.length?Gf(s):[]}function Cw(s,a){return s&&s.length?Gf(s,gt(a,2)):[]}function Sw(s){var a=s==null?0:s.length;return a?wn(s,1,a):[]}function bw(s,a,u){return s&&s.length?(a=u||a===e?1:St(a),wn(s,0,a<0?0:a)):[]}function Tw(s,a,u){var g=s==null?0:s.length;return g?(a=u||a===e?1:St(a),a=g-a,wn(s,a<0?0:a,g)):[]}function Ow(s,a){return s&&s.length?Yo(s,gt(a,3),!1,!0):[]}function Ew(s,a){return s&&s.length?Yo(s,gt(a,3)):[]}var Pw=Pt(function(s){return Dr(Ee(s,1,fe,!0))}),Dw=Pt(function(s){var a=Cn(s);return fe(a)&&(a=e),Dr(Ee(s,1,fe,!0),gt(a,2))}),Aw=Pt(function(s){var a=Cn(s);return a=typeof a=="function"?a:e,Dr(Ee(s,1,fe,!0),e,a)});function Mw(s){return s&&s.length?Dr(s):[]}function kw(s,a){return s&&s.length?Dr(s,gt(a,2)):[]}function Lw(s,a){return a=typeof a=="function"?a:e,s&&s.length?Dr(s,e,a):[]}function cc(s){if(!(s&&s.length))return[];var a=0;return s=br(s,function(u){if(fe(u))return a=ve(u.length,a),!0}),Ol(a,function(u){return ie(s,Sl(u))})}function Ld(s,a){if(!(s&&s.length))return[];var u=cc(s);return a==null?u:ie(u,function(g){return sn(a,e,g)})}var Rw=Pt(function(s,a){return fe(s)?Cs(s,a):[]}),Fw=Pt(function(s){return Gl(br(s,fe))}),Iw=Pt(function(s){var a=Cn(s);return fe(a)&&(a=e),Gl(br(s,fe),gt(a,2))}),Bw=Pt(function(s){var a=Cn(s);return a=typeof a=="function"?a:e,Gl(br(s,fe),e,a)}),jw=Pt(cc);function Ww(s,a){return Jf(s||[],a||[],ws)}function Xw(s,a){return Jf(s||[],a||[],Ts)}var Hw=Pt(function(s){var a=s.length,u=a>1?s[a-1]:e;return u=typeof u=="function"?(s.pop(),u):e,Ld(s,u)});function Rd(s){var a=y(s);return a.__chain__=!0,a}function Yw(s,a){return a(s),s}function Jo(s,a){return a(s)}var Uw=rr(function(s){var a=s.length,u=a?s[0]:0,g=this.__wrapped__,m=function(x){return Rl(x,s)};return a>1||this.__actions__.length||!(g instanceof Rt)||!ir(u)?this.thru(m):(g=g.slice(u,+u+(a?1:0)),g.__actions__.push({func:Jo,args:[m],thisArg:e}),new yn(g,this.__chain__).thru(function(x){return a&&!x.length&&x.push(e),x}))});function Nw(){return Rd(this)}function zw(){return new yn(this.value(),this.__chain__)}function Vw(){this.__values__===e&&(this.__values__=$d(this.value()));var s=this.__index__>=this.__values__.length,a=s?e:this.__values__[this.__index__++];return{done:s,value:a}}function Gw(){return this}function $w(s){for(var a,u=this;u instanceof Io;){var g=Ed(u);g.__index__=0,g.__values__=e,a?m.__wrapped__=g:a=g;var m=g;u=u.__wrapped__}return m.__wrapped__=s,a}function Kw(){var s=this.__wrapped__;if(s instanceof Rt){var a=s;return this.__actions__.length&&(a=new Rt(this)),a=a.reverse(),a.__actions__.push({func:Jo,args:[lc],thisArg:e}),new yn(a,this.__chain__)}return this.thru(lc)}function qw(){return qf(this.__wrapped__,this.__actions__)}var Jw=Uo(function(s,a,u){Gt.call(s,u)?++s[u]:er(s,u,1)});function Qw(s,a,u){var g=wt(s)?cf:Yy;return u&&We(s,a,u)&&(a=e),g(s,gt(a,3))}function Zw(s,a){var u=wt(s)?br:Lf;return u(s,gt(a,3))}var tC=ad(Pd),eC=ad(Dd);function nC(s,a){return Ee(Qo(s,a),1)}function rC(s,a){return Ee(Qo(s,a),Ct)}function iC(s,a,u){return u=u===e?1:St(u),Ee(Qo(s,a),u)}function Fd(s,a){var u=wt(s)?_n:Pr;return u(s,gt(a,3))}function Id(s,a){var u=wt(s)?Sv:kf;return u(s,gt(a,3))}var sC=Uo(function(s,a,u){Gt.call(s,u)?s[u].push(a):er(s,u,[a])});function oC(s,a,u,g){s=Ke(s)?s:Yi(s),u=u&&!g?St(u):0;var m=s.length;return u<0&&(u=ve(m+u,0)),ra(s)?u<=m&&s.indexOf(a,u)>-1:!!m&&Ai(s,a,u)>-1}var aC=Pt(function(s,a,u){var g=-1,m=typeof a=="function",x=Ke(s)?I(s.length):[];return Pr(s,function(S){x[++g]=m?sn(a,S,u):Ss(S,a,u)}),x}),lC=Uo(function(s,a,u){er(s,u,a)});function Qo(s,a){var u=wt(s)?ie:Wf;return u(s,gt(a,3))}function cC(s,a,u,g){return s==null?[]:(wt(a)||(a=a==null?[]:[a]),u=g?e:u,wt(u)||(u=u==null?[]:[u]),Uf(s,a,u))}var hC=Uo(function(s,a,u){s[u?0:1].push(a)},function(){return[[],[]]});function uC(s,a,u){var g=wt(s)?wl:df,m=arguments.length<3;return g(s,gt(a,4),u,m,Pr)}function fC(s,a,u){var g=wt(s)?bv:df,m=arguments.length<3;return g(s,gt(a,4),u,m,kf)}function dC(s,a){var u=wt(s)?br:Lf;return u(s,ea(gt(a,3)))}function gC(s){var a=wt(s)?Pf:ox;return a(s)}function pC(s,a,u){(u?We(s,a,u):a===e)?a=1:a=St(a);var g=wt(s)?By:ax;return g(s,a)}function mC(s){var a=wt(s)?jy:cx;return a(s)}function _C(s){if(s==null)return 0;if(Ke(s))return ra(s)?ki(s):s.length;var a=ke(s);return a==L||a==V?s.size:Xl(s).length}function vC(s,a,u){var g=wt(s)?Cl:hx;return u&&We(s,a,u)&&(a=e),g(s,gt(a,3))}var yC=Pt(function(s,a){if(s==null)return[];var u=a.length;return u>1&&We(s,a[0],a[1])?a=[]:u>2&&We(a[0],a[1],a[2])&&(a=[a[0]]),Uf(s,Ee(a,1),[])}),Zo=Zv||function(){return Oe.Date.now()};function xC(s,a){if(typeof a!="function")throw new vn(l);return s=St(s),function(){if(--s<1)return a.apply(this,arguments)}}function Bd(s,a,u){return a=u?e:a,a=s&&a==null?s.length:a,nr(s,nt,e,e,e,e,a)}function jd(s,a){var u;if(typeof a!="function")throw new vn(l);return s=St(s),function(){return--s>0&&(u=a.apply(this,arguments)),s<=1&&(a=e),u}}var hc=Pt(function(s,a,u){var g=O;if(u.length){var m=Or(u,Xi(hc));g|=$}return nr(s,g,a,u,m)}),Wd=Pt(function(s,a,u){var g=O|M;if(u.length){var m=Or(u,Xi(Wd));g|=$}return nr(a,g,s,u,m)});function Xd(s,a,u){a=u?e:a;var g=nr(s,X,e,e,e,e,e,a);return g.placeholder=Xd.placeholder,g}function Hd(s,a,u){a=u?e:a;var g=nr(s,B,e,e,e,e,e,a);return g.placeholder=Hd.placeholder,g}function Yd(s,a,u){var g,m,x,S,T,k,H=0,Y=!1,G=!1,Q=!0;if(typeof s!="function")throw new vn(l);a=Sn(a)||0,oe(u)&&(Y=!!u.leading,G="maxWait"in u,x=G?ve(Sn(u.maxWait)||0,a):x,Q="trailing"in u?!!u.trailing:Q);function lt(de){var Mn=g,ar=m;return g=m=e,H=de,S=s.apply(ar,Mn),S}function mt(de){return H=de,T=Ps(kt,a),Y?lt(de):S}function Ot(de){var Mn=de-k,ar=de-H,ag=a-Mn;return G?Me(ag,x-ar):ag}function _t(de){var Mn=de-k,ar=de-H;return k===e||Mn>=a||Mn<0||G&&ar>=x}function kt(){var de=Zo();if(_t(de))return jt(de);T=Ps(kt,Ot(de))}function jt(de){return T=e,Q&&g?lt(de):(g=m=e,S)}function cn(){T!==e&&Qf(T),H=0,g=k=m=T=e}function Xe(){return T===e?S:jt(Zo())}function hn(){var de=Zo(),Mn=_t(de);if(g=arguments,m=this,k=de,Mn){if(T===e)return mt(k);if(G)return Qf(T),T=Ps(kt,a),lt(k)}return T===e&&(T=Ps(kt,a)),S}return hn.cancel=cn,hn.flush=Xe,hn}var wC=Pt(function(s,a){return Mf(s,1,a)}),CC=Pt(function(s,a,u){return Mf(s,Sn(a)||0,u)});function SC(s){return nr(s,it)}function ta(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new vn(l);var u=function(){var g=arguments,m=a?a.apply(this,g):g[0],x=u.cache;if(x.has(m))return x.get(m);var S=s.apply(this,g);return u.cache=x.set(m,S)||x,S};return u.cache=new(ta.Cache||tr),u}ta.Cache=tr;function ea(s){if(typeof s!="function")throw new vn(l);return function(){var a=arguments;switch(a.length){case 0:return!s.call(this);case 1:return!s.call(this,a[0]);case 2:return!s.call(this,a[0],a[1]);case 3:return!s.call(this,a[0],a[1],a[2])}return!s.apply(this,a)}}function bC(s){return jd(2,s)}var TC=ux(function(s,a){a=a.length==1&&wt(a[0])?ie(a[0],on(gt())):ie(Ee(a,1),on(gt()));var u=a.length;return Pt(function(g){for(var m=-1,x=Me(g.length,u);++m<x;)g[m]=a[m].call(this,g[m]);return sn(s,this,g)})}),uc=Pt(function(s,a){var u=Or(a,Xi(uc));return nr(s,$,e,a,u)}),Ud=Pt(function(s,a){var u=Or(a,Xi(Ud));return nr(s,tt,e,a,u)}),OC=rr(function(s,a){return nr(s,ot,e,e,e,a)});function EC(s,a){if(typeof s!="function")throw new vn(l);return a=a===e?a:St(a),Pt(s,a)}function PC(s,a){if(typeof s!="function")throw new vn(l);return a=a==null?0:ve(St(a),0),Pt(function(u){var g=u[a],m=Mr(u,0,a);return g&&Tr(m,g),sn(s,this,m)})}function DC(s,a,u){var g=!0,m=!0;if(typeof s!="function")throw new vn(l);return oe(u)&&(g="leading"in u?!!u.leading:g,m="trailing"in u?!!u.trailing:m),Yd(s,a,{leading:g,maxWait:a,trailing:m})}function AC(s){return Bd(s,1)}function MC(s,a){return uc(Kl(a),s)}function kC(){if(!arguments.length)return[];var s=arguments[0];return wt(s)?s:[s]}function LC(s){return xn(s,v)}function RC(s,a){return a=typeof a=="function"?a:e,xn(s,v,a)}function FC(s){return xn(s,p|v)}function IC(s,a){return a=typeof a=="function"?a:e,xn(s,p|v,a)}function BC(s,a){return a==null||Af(s,a,Ce(a))}function An(s,a){return s===a||s!==s&&a!==a}var jC=Go(Bl),WC=Go(function(s,a){return s>=a}),ii=If(function(){return arguments}())?If:function(s){return le(s)&&Gt.call(s,"callee")&&!Cf.call(s,"callee")},wt=I.isArray,XC=nf?on(nf):$y;function Ke(s){return s!=null&&na(s.length)&&!sr(s)}function fe(s){return le(s)&&Ke(s)}function HC(s){return s===!0||s===!1||le(s)&&je(s)==et}var kr=ey||Cc,YC=rf?on(rf):Ky;function UC(s){return le(s)&&s.nodeType===1&&!Ds(s)}function NC(s){if(s==null)return!0;if(Ke(s)&&(wt(s)||typeof s=="string"||typeof s.splice=="function"||kr(s)||Hi(s)||ii(s)))return!s.length;var a=ke(s);if(a==L||a==V)return!s.size;if(Es(s))return!Xl(s).length;for(var u in s)if(Gt.call(s,u))return!1;return!0}function zC(s,a){return bs(s,a)}function VC(s,a,u){u=typeof u=="function"?u:e;var g=u?u(s,a):e;return g===e?bs(s,a,e,u):!!g}function fc(s){if(!le(s))return!1;var a=je(s);return a==It||a==ht||typeof s.message=="string"&&typeof s.name=="string"&&!Ds(s)}function GC(s){return typeof s=="number"&&bf(s)}function sr(s){if(!oe(s))return!1;var a=je(s);return a==C||a==b||a==U||a==K}function Nd(s){return typeof s=="number"&&s==St(s)}function na(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=vt}function oe(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}function le(s){return s!=null&&typeof s=="object"}var zd=sf?on(sf):Jy;function $C(s,a){return s===a||Wl(s,a,nc(a))}function KC(s,a,u){return u=typeof u=="function"?u:e,Wl(s,a,nc(a),u)}function qC(s){return Vd(s)&&s!=+s}function JC(s){if(Rx(s))throw new xt(o);return Bf(s)}function QC(s){return s===null}function ZC(s){return s==null}function Vd(s){return typeof s=="number"||le(s)&&je(s)==j}function Ds(s){if(!le(s)||je(s)!=z)return!1;var a=Do(s);if(a===null)return!0;var u=Gt.call(a,"constructor")&&a.constructor;return typeof u=="function"&&u instanceof u&&To.call(u)==Kv}var dc=of?on(of):Qy;function t1(s){return Nd(s)&&s>=-vt&&s<=vt}var Gd=af?on(af):Zy;function ra(s){return typeof s=="string"||!wt(s)&&le(s)&&je(s)==ct}function ln(s){return typeof s=="symbol"||le(s)&&je(s)==st}var Hi=lf?on(lf):tx;function e1(s){return s===e}function n1(s){return le(s)&&ke(s)==pt}function r1(s){return le(s)&&je(s)==Dt}var i1=Go(Hl),s1=Go(function(s,a){return s<=a});function $d(s){if(!s)return[];if(Ke(s))return ra(s)?Pn(s):$e(s);if(ms&&s[ms])return Bv(s[ms]());var a=ke(s),u=a==L?Pl:a==V?Co:Yi;return u(s)}function or(s){if(!s)return s===0?s:0;if(s=Sn(s),s===Ct||s===-Ct){var a=s<0?-1:1;return a*On}return s===s?s:0}function St(s){var a=or(s),u=a%1;return a===a?u?a-u:a:0}function Kd(s){return s?ti(St(s),0,he):0}function Sn(s){if(typeof s=="number")return s;if(ln(s))return rn;if(oe(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=oe(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=gf(s);var u=X_.test(s);return u||Y_.test(s)?xv(s.slice(2),u?2:8):W_.test(s)?rn:+s}function qd(s){return Nn(s,qe(s))}function o1(s){return s?ti(St(s),-vt,vt):s===0?s:0}function Vt(s){return s==null?"":an(s)}var a1=ji(function(s,a){if(Es(a)||Ke(a)){Nn(a,Ce(a),s);return}for(var u in a)Gt.call(a,u)&&ws(s,u,a[u])}),Jd=ji(function(s,a){Nn(a,qe(a),s)}),ia=ji(function(s,a,u,g){Nn(a,qe(a),s,g)}),l1=ji(function(s,a,u,g){Nn(a,Ce(a),s,g)}),c1=rr(Rl);function h1(s,a){var u=Bi(s);return a==null?u:Df(u,a)}var u1=Pt(function(s,a){s=qt(s);var u=-1,g=a.length,m=g>2?a[2]:e;for(m&&We(a[0],a[1],m)&&(g=1);++u<g;)for(var x=a[u],S=qe(x),T=-1,k=S.length;++T<k;){var H=S[T],Y=s[H];(Y===e||An(Y,Ri[H])&&!Gt.call(s,H))&&(s[H]=x[H])}return s}),f1=Pt(function(s){return s.push(e,gd),sn(Qd,e,s)});function d1(s,a){return hf(s,gt(a,3),Un)}function g1(s,a){return hf(s,gt(a,3),Il)}function p1(s,a){return s==null?s:Fl(s,gt(a,3),qe)}function m1(s,a){return s==null?s:Rf(s,gt(a,3),qe)}function _1(s,a){return s&&Un(s,gt(a,3))}function v1(s,a){return s&&Il(s,gt(a,3))}function y1(s){return s==null?[]:Wo(s,Ce(s))}function x1(s){return s==null?[]:Wo(s,qe(s))}function gc(s,a,u){var g=s==null?e:ei(s,a);return g===e?u:g}function w1(s,a){return s!=null&&_d(s,a,Ny)}function pc(s,a){return s!=null&&_d(s,a,zy)}var C1=cd(function(s,a,u){a!=null&&typeof a.toString!="function"&&(a=Oo.call(a)),s[a]=u},_c(Je)),S1=cd(function(s,a,u){a!=null&&typeof a.toString!="function"&&(a=Oo.call(a)),Gt.call(s,a)?s[a].push(u):s[a]=[u]},gt),b1=Pt(Ss);function Ce(s){return Ke(s)?Ef(s):Xl(s)}function qe(s){return Ke(s)?Ef(s,!0):ex(s)}function T1(s,a){var u={};return a=gt(a,3),Un(s,function(g,m,x){er(u,a(g,m,x),g)}),u}function O1(s,a){var u={};return a=gt(a,3),Un(s,function(g,m,x){er(u,m,a(g,m,x))}),u}var E1=ji(function(s,a,u){Xo(s,a,u)}),Qd=ji(function(s,a,u,g){Xo(s,a,u,g)}),P1=rr(function(s,a){var u={};if(s==null)return u;var g=!1;a=ie(a,function(x){return x=Ar(x,s),g||(g=x.length>1),x}),Nn(s,tc(s),u),g&&(u=xn(u,p|_|v,Cx));for(var m=a.length;m--;)Vl(u,a[m]);return u});function D1(s,a){return Zd(s,ea(gt(a)))}var A1=rr(function(s,a){return s==null?{}:rx(s,a)});function Zd(s,a){if(s==null)return{};var u=ie(tc(s),function(g){return[g]});return a=gt(a),Nf(s,u,function(g,m){return a(g,m[0])})}function M1(s,a,u){a=Ar(a,s);var g=-1,m=a.length;for(m||(m=1,s=e);++g<m;){var x=s==null?e:s[zn(a[g])];x===e&&(g=m,x=u),s=sr(x)?x.call(s):x}return s}function k1(s,a,u){return s==null?s:Ts(s,a,u)}function L1(s,a,u,g){return g=typeof g=="function"?g:e,s==null?s:Ts(s,a,u,g)}var tg=fd(Ce),eg=fd(qe);function R1(s,a,u){var g=wt(s),m=g||kr(s)||Hi(s);if(a=gt(a,4),u==null){var x=s&&s.constructor;m?u=g?new x:[]:oe(s)?u=sr(x)?Bi(Do(s)):{}:u={}}return(m?_n:Un)(s,function(S,T,k){return a(u,S,T,k)}),u}function F1(s,a){return s==null?!0:Vl(s,a)}function I1(s,a,u){return s==null?s:Kf(s,a,Kl(u))}function B1(s,a,u,g){return g=typeof g=="function"?g:e,s==null?s:Kf(s,a,Kl(u),g)}function Yi(s){return s==null?[]:El(s,Ce(s))}function j1(s){return s==null?[]:El(s,qe(s))}function W1(s,a,u){return u===e&&(u=a,a=e),u!==e&&(u=Sn(u),u=u===u?u:0),a!==e&&(a=Sn(a),a=a===a?a:0),ti(Sn(s),a,u)}function X1(s,a,u){return a=or(a),u===e?(u=a,a=0):u=or(u),s=Sn(s),Vy(s,a,u)}function H1(s,a,u){if(u&&typeof u!="boolean"&&We(s,a,u)&&(a=u=e),u===e&&(typeof a=="boolean"?(u=a,a=e):typeof s=="boolean"&&(u=s,s=e)),s===e&&a===e?(s=0,a=1):(s=or(s),a===e?(a=s,s=0):a=or(a)),s>a){var g=s;s=a,a=g}if(u||s%1||a%1){var m=Tf();return Me(s+m*(a-s+yv("1e-"+((m+"").length-1))),a)}return Ul(s,a)}var Y1=Wi(function(s,a,u){return a=a.toLowerCase(),s+(u?ng(a):a)});function ng(s){return mc(Vt(s).toLowerCase())}function rg(s){return s=Vt(s),s&&s.replace(N_,kv).replace(cv,"")}function U1(s,a,u){s=Vt(s),a=an(a);var g=s.length;u=u===e?g:ti(St(u),0,g);var m=u;return u-=a.length,u>=0&&s.slice(u,m)==a}function N1(s){return s=Vt(s),s&&b_.test(s)?s.replace(Lu,Lv):s}function z1(s){return s=Vt(s),s&&A_.test(s)?s.replace(ul,"\\$&"):s}var V1=Wi(function(s,a,u){return s+(u?"-":"")+a.toLowerCase()}),G1=Wi(function(s,a,u){return s+(u?" ":"")+a.toLowerCase()}),$1=od("toLowerCase");function K1(s,a,u){s=Vt(s),a=St(a);var g=a?ki(s):0;if(!a||g>=a)return s;var m=(a-g)/2;return Vo(Lo(m),u)+s+Vo(ko(m),u)}function q1(s,a,u){s=Vt(s),a=St(a);var g=a?ki(s):0;return a&&g<a?s+Vo(a-g,u):s}function J1(s,a,u){s=Vt(s),a=St(a);var g=a?ki(s):0;return a&&g<a?Vo(a-g,u)+s:s}function Q1(s,a,u){return u||a==null?a=0:a&&(a=+a),sy(Vt(s).replace(fl,""),a||0)}function Z1(s,a,u){return(u?We(s,a,u):a===e)?a=1:a=St(a),Nl(Vt(s),a)}function tS(){var s=arguments,a=Vt(s[0]);return s.length<3?a:a.replace(s[1],s[2])}var eS=Wi(function(s,a,u){return s+(u?"_":"")+a.toLowerCase()});function nS(s,a,u){return u&&typeof u!="number"&&We(s,a,u)&&(a=u=e),u=u===e?he:u>>>0,u?(s=Vt(s),s&&(typeof a=="string"||a!=null&&!dc(a))&&(a=an(a),!a&&Mi(s))?Mr(Pn(s),0,u):s.split(a,u)):[]}var rS=Wi(function(s,a,u){return s+(u?" ":"")+mc(a)});function iS(s,a,u){return s=Vt(s),u=u==null?0:ti(St(u),0,s.length),a=an(a),s.slice(u,u+a.length)==a}function sS(s,a,u){var g=y.templateSettings;u&&We(s,a,u)&&(a=e),s=Vt(s),a=ia({},a,g,dd);var m=ia({},a.imports,g.imports,dd),x=Ce(m),S=El(m,x),T,k,H=0,Y=a.interpolate||_o,G="__p += '",Q=Dl((a.escape||_o).source+"|"+Y.source+"|"+(Y===Ru?j_:_o).source+"|"+(a.evaluate||_o).source+"|$","g"),lt="//# sourceURL="+(Gt.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++gv+"]")+`
`;s.replace(Q,function(_t,kt,jt,cn,Xe,hn){return jt||(jt=cn),G+=s.slice(H,hn).replace(z_,Rv),kt&&(T=!0,G+=`' +
__e(`+kt+`) +
'`),Xe&&(k=!0,G+=`';
`+Xe+`;
__p += '`),jt&&(G+=`' +
((__t = (`+jt+`)) == null ? '' : __t) +
'`),H=hn+_t.length,_t}),G+=`';
`;var mt=Gt.call(a,"variable")&&a.variable;if(!mt)G=`with (obj) {
`+G+`
}
`;else if(I_.test(mt))throw new xt(c);G=(k?G.replace(x_,""):G).replace(w_,"$1").replace(C_,"$1;"),G="function("+(mt||"obj")+`) {
`+(mt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(T?", __e = _.escape":"")+(k?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+G+`return __p
}`;var Ot=sg(function(){return Nt(x,lt+"return "+G).apply(e,S)});if(Ot.source=G,fc(Ot))throw Ot;return Ot}function oS(s){return Vt(s).toLowerCase()}function aS(s){return Vt(s).toUpperCase()}function lS(s,a,u){if(s=Vt(s),s&&(u||a===e))return gf(s);if(!s||!(a=an(a)))return s;var g=Pn(s),m=Pn(a),x=pf(g,m),S=mf(g,m)+1;return Mr(g,x,S).join("")}function cS(s,a,u){if(s=Vt(s),s&&(u||a===e))return s.slice(0,vf(s)+1);if(!s||!(a=an(a)))return s;var g=Pn(s),m=mf(g,Pn(a))+1;return Mr(g,0,m).join("")}function hS(s,a,u){if(s=Vt(s),s&&(u||a===e))return s.replace(fl,"");if(!s||!(a=an(a)))return s;var g=Pn(s),m=pf(g,Pn(a));return Mr(g,m).join("")}function uS(s,a){var u=at,g=dt;if(oe(a)){var m="separator"in a?a.separator:m;u="length"in a?St(a.length):u,g="omission"in a?an(a.omission):g}s=Vt(s);var x=s.length;if(Mi(s)){var S=Pn(s);x=S.length}if(u>=x)return s;var T=u-ki(g);if(T<1)return g;var k=S?Mr(S,0,T).join(""):s.slice(0,T);if(m===e)return k+g;if(S&&(T+=k.length-T),dc(m)){if(s.slice(T).search(m)){var H,Y=k;for(m.global||(m=Dl(m.source,Vt(Fu.exec(m))+"g")),m.lastIndex=0;H=m.exec(Y);)var G=H.index;k=k.slice(0,G===e?T:G)}}else if(s.indexOf(an(m),T)!=T){var Q=k.lastIndexOf(m);Q>-1&&(k=k.slice(0,Q))}return k+g}function fS(s){return s=Vt(s),s&&S_.test(s)?s.replace(ku,Hv):s}var dS=Wi(function(s,a,u){return s+(u?" ":"")+a.toUpperCase()}),mc=od("toUpperCase");function ig(s,a,u){return s=Vt(s),a=u?e:a,a===e?Iv(s)?Nv(s):Ev(s):s.match(a)||[]}var sg=Pt(function(s,a){try{return sn(s,e,a)}catch(u){return fc(u)?u:new xt(u)}}),gS=rr(function(s,a){return _n(a,function(u){u=zn(u),er(s,u,hc(s[u],s))}),s});function pS(s){var a=s==null?0:s.length,u=gt();return s=a?ie(s,function(g){if(typeof g[1]!="function")throw new vn(l);return[u(g[0]),g[1]]}):[],Pt(function(g){for(var m=-1;++m<a;){var x=s[m];if(sn(x[0],this,g))return sn(x[1],this,g)}})}function mS(s){return Hy(xn(s,p))}function _c(s){return function(){return s}}function _S(s,a){return s==null||s!==s?a:s}var vS=ld(),yS=ld(!0);function Je(s){return s}function vc(s){return jf(typeof s=="function"?s:xn(s,p))}function xS(s){return Xf(xn(s,p))}function wS(s,a){return Hf(s,xn(a,p))}var CS=Pt(function(s,a){return function(u){return Ss(u,s,a)}}),SS=Pt(function(s,a){return function(u){return Ss(s,u,a)}});function yc(s,a,u){var g=Ce(a),m=Wo(a,g);u==null&&!(oe(a)&&(m.length||!g.length))&&(u=a,a=s,s=this,m=Wo(a,Ce(a)));var x=!(oe(u)&&"chain"in u)||!!u.chain,S=sr(s);return _n(m,function(T){var k=a[T];s[T]=k,S&&(s.prototype[T]=function(){var H=this.__chain__;if(x||H){var Y=s(this.__wrapped__),G=Y.__actions__=$e(this.__actions__);return G.push({func:k,args:arguments,thisArg:s}),Y.__chain__=H,Y}return k.apply(s,Tr([this.value()],arguments))})}),s}function bS(){return Oe._===this&&(Oe._=qv),this}function xc(){}function TS(s){return s=St(s),Pt(function(a){return Yf(a,s)})}var OS=Jl(ie),ES=Jl(cf),PS=Jl(Cl);function og(s){return ic(s)?Sl(zn(s)):ix(s)}function DS(s){return function(a){return s==null?e:ei(s,a)}}var AS=hd(),MS=hd(!0);function wc(){return[]}function Cc(){return!1}function kS(){return{}}function LS(){return""}function RS(){return!0}function FS(s,a){if(s=St(s),s<1||s>vt)return[];var u=he,g=Me(s,he);a=gt(a),s-=he;for(var m=Ol(g,a);++u<s;)a(u);return m}function IS(s){return wt(s)?ie(s,zn):ln(s)?[s]:$e(Od(Vt(s)))}function BS(s){var a=++$v;return Vt(s)+a}var jS=zo(function(s,a){return s+a},0),WS=Ql("ceil"),XS=zo(function(s,a){return s/a},1),HS=Ql("floor");function YS(s){return s&&s.length?jo(s,Je,Bl):e}function US(s,a){return s&&s.length?jo(s,gt(a,2),Bl):e}function NS(s){return ff(s,Je)}function zS(s,a){return ff(s,gt(a,2))}function VS(s){return s&&s.length?jo(s,Je,Hl):e}function GS(s,a){return s&&s.length?jo(s,gt(a,2),Hl):e}var $S=zo(function(s,a){return s*a},1),KS=Ql("round"),qS=zo(function(s,a){return s-a},0);function JS(s){return s&&s.length?Tl(s,Je):0}function QS(s,a){return s&&s.length?Tl(s,gt(a,2)):0}return y.after=xC,y.ary=Bd,y.assign=a1,y.assignIn=Jd,y.assignInWith=ia,y.assignWith=l1,y.at=c1,y.before=jd,y.bind=hc,y.bindAll=gS,y.bindKey=Wd,y.castArray=kC,y.chain=Rd,y.chunk=Hx,y.compact=Yx,y.concat=Ux,y.cond=pS,y.conforms=mS,y.constant=_c,y.countBy=Jw,y.create=h1,y.curry=Xd,y.curryRight=Hd,y.debounce=Yd,y.defaults=u1,y.defaultsDeep=f1,y.defer=wC,y.delay=CC,y.difference=Nx,y.differenceBy=zx,y.differenceWith=Vx,y.drop=Gx,y.dropRight=$x,y.dropRightWhile=Kx,y.dropWhile=qx,y.fill=Jx,y.filter=Zw,y.flatMap=nC,y.flatMapDeep=rC,y.flatMapDepth=iC,y.flatten=Ad,y.flattenDeep=Qx,y.flattenDepth=Zx,y.flip=SC,y.flow=vS,y.flowRight=yS,y.fromPairs=tw,y.functions=y1,y.functionsIn=x1,y.groupBy=sC,y.initial=nw,y.intersection=rw,y.intersectionBy=iw,y.intersectionWith=sw,y.invert=C1,y.invertBy=S1,y.invokeMap=aC,y.iteratee=vc,y.keyBy=lC,y.keys=Ce,y.keysIn=qe,y.map=Qo,y.mapKeys=T1,y.mapValues=O1,y.matches=xS,y.matchesProperty=wS,y.memoize=ta,y.merge=E1,y.mergeWith=Qd,y.method=CS,y.methodOf=SS,y.mixin=yc,y.negate=ea,y.nthArg=TS,y.omit=P1,y.omitBy=D1,y.once=bC,y.orderBy=cC,y.over=OS,y.overArgs=TC,y.overEvery=ES,y.overSome=PS,y.partial=uc,y.partialRight=Ud,y.partition=hC,y.pick=A1,y.pickBy=Zd,y.property=og,y.propertyOf=DS,y.pull=cw,y.pullAll=kd,y.pullAllBy=hw,y.pullAllWith=uw,y.pullAt=fw,y.range=AS,y.rangeRight=MS,y.rearg=OC,y.reject=dC,y.remove=dw,y.rest=EC,y.reverse=lc,y.sampleSize=pC,y.set=k1,y.setWith=L1,y.shuffle=mC,y.slice=gw,y.sortBy=yC,y.sortedUniq=ww,y.sortedUniqBy=Cw,y.split=nS,y.spread=PC,y.tail=Sw,y.take=bw,y.takeRight=Tw,y.takeRightWhile=Ow,y.takeWhile=Ew,y.tap=Yw,y.throttle=DC,y.thru=Jo,y.toArray=$d,y.toPairs=tg,y.toPairsIn=eg,y.toPath=IS,y.toPlainObject=qd,y.transform=R1,y.unary=AC,y.union=Pw,y.unionBy=Dw,y.unionWith=Aw,y.uniq=Mw,y.uniqBy=kw,y.uniqWith=Lw,y.unset=F1,y.unzip=cc,y.unzipWith=Ld,y.update=I1,y.updateWith=B1,y.values=Yi,y.valuesIn=j1,y.without=Rw,y.words=ig,y.wrap=MC,y.xor=Fw,y.xorBy=Iw,y.xorWith=Bw,y.zip=jw,y.zipObject=Ww,y.zipObjectDeep=Xw,y.zipWith=Hw,y.entries=tg,y.entriesIn=eg,y.extend=Jd,y.extendWith=ia,yc(y,y),y.add=jS,y.attempt=sg,y.camelCase=Y1,y.capitalize=ng,y.ceil=WS,y.clamp=W1,y.clone=LC,y.cloneDeep=FC,y.cloneDeepWith=IC,y.cloneWith=RC,y.conformsTo=BC,y.deburr=rg,y.defaultTo=_S,y.divide=XS,y.endsWith=U1,y.eq=An,y.escape=N1,y.escapeRegExp=z1,y.every=Qw,y.find=tC,y.findIndex=Pd,y.findKey=d1,y.findLast=eC,y.findLastIndex=Dd,y.findLastKey=g1,y.floor=HS,y.forEach=Fd,y.forEachRight=Id,y.forIn=p1,y.forInRight=m1,y.forOwn=_1,y.forOwnRight=v1,y.get=gc,y.gt=jC,y.gte=WC,y.has=w1,y.hasIn=pc,y.head=Md,y.identity=Je,y.includes=oC,y.indexOf=ew,y.inRange=X1,y.invoke=b1,y.isArguments=ii,y.isArray=wt,y.isArrayBuffer=XC,y.isArrayLike=Ke,y.isArrayLikeObject=fe,y.isBoolean=HC,y.isBuffer=kr,y.isDate=YC,y.isElement=UC,y.isEmpty=NC,y.isEqual=zC,y.isEqualWith=VC,y.isError=fc,y.isFinite=GC,y.isFunction=sr,y.isInteger=Nd,y.isLength=na,y.isMap=zd,y.isMatch=$C,y.isMatchWith=KC,y.isNaN=qC,y.isNative=JC,y.isNil=ZC,y.isNull=QC,y.isNumber=Vd,y.isObject=oe,y.isObjectLike=le,y.isPlainObject=Ds,y.isRegExp=dc,y.isSafeInteger=t1,y.isSet=Gd,y.isString=ra,y.isSymbol=ln,y.isTypedArray=Hi,y.isUndefined=e1,y.isWeakMap=n1,y.isWeakSet=r1,y.join=ow,y.kebabCase=V1,y.last=Cn,y.lastIndexOf=aw,y.lowerCase=G1,y.lowerFirst=$1,y.lt=i1,y.lte=s1,y.max=YS,y.maxBy=US,y.mean=NS,y.meanBy=zS,y.min=VS,y.minBy=GS,y.stubArray=wc,y.stubFalse=Cc,y.stubObject=kS,y.stubString=LS,y.stubTrue=RS,y.multiply=$S,y.nth=lw,y.noConflict=bS,y.noop=xc,y.now=Zo,y.pad=K1,y.padEnd=q1,y.padStart=J1,y.parseInt=Q1,y.random=H1,y.reduce=uC,y.reduceRight=fC,y.repeat=Z1,y.replace=tS,y.result=M1,y.round=KS,y.runInContext=P,y.sample=gC,y.size=_C,y.snakeCase=eS,y.some=vC,y.sortedIndex=pw,y.sortedIndexBy=mw,y.sortedIndexOf=_w,y.sortedLastIndex=vw,y.sortedLastIndexBy=yw,y.sortedLastIndexOf=xw,y.startCase=rS,y.startsWith=iS,y.subtract=qS,y.sum=JS,y.sumBy=QS,y.template=sS,y.times=FS,y.toFinite=or,y.toInteger=St,y.toLength=Kd,y.toLower=oS,y.toNumber=Sn,y.toSafeInteger=o1,y.toString=Vt,y.toUpper=aS,y.trim=lS,y.trimEnd=cS,y.trimStart=hS,y.truncate=uS,y.unescape=fS,y.uniqueId=BS,y.upperCase=dS,y.upperFirst=mc,y.each=Fd,y.eachRight=Id,y.first=Md,yc(y,function(){var s={};return Un(y,function(a,u){Gt.call(y.prototype,u)||(s[u]=a)}),s}(),{chain:!1}),y.VERSION=n,_n(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){y[s].placeholder=y}),_n(["drop","take"],function(s,a){Rt.prototype[s]=function(u){u=u===e?1:ve(St(u),0);var g=this.__filtered__&&!a?new Rt(this):this.clone();return g.__filtered__?g.__takeCount__=Me(u,g.__takeCount__):g.__views__.push({size:Me(u,he),type:s+(g.__dir__<0?"Right":"")}),g},Rt.prototype[s+"Right"]=function(u){return this.reverse()[s](u).reverse()}}),_n(["filter","map","takeWhile"],function(s,a){var u=a+1,g=u==Ft||u==Mt;Rt.prototype[s]=function(m){var x=this.clone();return x.__iteratees__.push({iteratee:gt(m,3),type:u}),x.__filtered__=x.__filtered__||g,x}}),_n(["head","last"],function(s,a){var u="take"+(a?"Right":"");Rt.prototype[s]=function(){return this[u](1).value()[0]}}),_n(["initial","tail"],function(s,a){var u="drop"+(a?"":"Right");Rt.prototype[s]=function(){return this.__filtered__?new Rt(this):this[u](1)}}),Rt.prototype.compact=function(){return this.filter(Je)},Rt.prototype.find=function(s){return this.filter(s).head()},Rt.prototype.findLast=function(s){return this.reverse().find(s)},Rt.prototype.invokeMap=Pt(function(s,a){return typeof s=="function"?new Rt(this):this.map(function(u){return Ss(u,s,a)})}),Rt.prototype.reject=function(s){return this.filter(ea(gt(s)))},Rt.prototype.slice=function(s,a){s=St(s);var u=this;return u.__filtered__&&(s>0||a<0)?new Rt(u):(s<0?u=u.takeRight(-s):s&&(u=u.drop(s)),a!==e&&(a=St(a),u=a<0?u.dropRight(-a):u.take(a-s)),u)},Rt.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Rt.prototype.toArray=function(){return this.take(he)},Un(Rt.prototype,function(s,a){var u=/^(?:filter|find|map|reject)|While$/.test(a),g=/^(?:head|last)$/.test(a),m=y[g?"take"+(a=="last"?"Right":""):a],x=g||/^find/.test(a);m&&(y.prototype[a]=function(){var S=this.__wrapped__,T=g?[1]:arguments,k=S instanceof Rt,H=T[0],Y=k||wt(S),G=function(kt){var jt=m.apply(y,Tr([kt],T));return g&&Q?jt[0]:jt};Y&&u&&typeof H=="function"&&H.length!=1&&(k=Y=!1);var Q=this.__chain__,lt=!!this.__actions__.length,mt=x&&!Q,Ot=k&&!lt;if(!x&&Y){S=Ot?S:new Rt(this);var _t=s.apply(S,T);return _t.__actions__.push({func:Jo,args:[G],thisArg:e}),new yn(_t,Q)}return mt&&Ot?s.apply(this,T):(_t=this.thru(G),mt?g?_t.value()[0]:_t.value():_t)})}),_n(["pop","push","shift","sort","splice","unshift"],function(s){var a=So[s],u=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",g=/^(?:pop|shift)$/.test(s);y.prototype[s]=function(){var m=arguments;if(g&&!this.__chain__){var x=this.value();return a.apply(wt(x)?x:[],m)}return this[u](function(S){return a.apply(wt(S)?S:[],m)})}}),Un(Rt.prototype,function(s,a){var u=y[a];if(u){var g=u.name+"";Gt.call(Ii,g)||(Ii[g]=[]),Ii[g].push({name:a,func:u})}}),Ii[No(e,M).name]=[{name:"wrapper",func:e}],Rt.prototype.clone=fy,Rt.prototype.reverse=dy,Rt.prototype.value=gy,y.prototype.at=Uw,y.prototype.chain=Nw,y.prototype.commit=zw,y.prototype.next=Vw,y.prototype.plant=$w,y.prototype.reverse=Kw,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=qw,y.prototype.first=y.prototype.head,ms&&(y.prototype[ms]=Gw),y},Li=zv();qr?((qr.exports=Li)._=Li,vl._=Li):Oe._=Li}).call(Rs)})(Xa,Xa.exports);var EM=Xa.exports;const PM={class:"flex gap-3 justify-between items-center p-3 fixed bottom-0 sm:top-0 sm:bottom-auto right-0 z-10"},DM=ge("h1",{class:"font-bold text-xl header hidden sm:block"},"Olesheva Tattoo Builder",-1),AM={class:"flex flex-row gap-3 sm:gap-2 flex-wrap justify-end"},MM=ge("div",{class:"flex gap-2 items-center"},[ge("div",null,"Book a tattoo session"),ge("img",{class:"h-4",src:R2})],-1),kM={class:"flex items-center gap-3 sm:gap-2"},LM={key:0,class:"fixed left-3 z-10 translate-y-1/2 bottom-1/2"},RM=ge("svg",{xmlns:"http://www.w3.org/2000/svg",width:"9",height:"16",viewBox:"0 0 9 16",fill:"none",class:"text-gray-400"},[ge("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.707077 15.9961L8.69926 8.00395L7.99216 7.29684L-2.97672e-05 15.289L0.707077 15.9961Z",fill:"currentColor"}),ge("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.69929 7.99219L0.707107 7.7486e-07L0 0.707108L7.99219 8.69929L8.69929 7.99219Z",fill:"currentColor"})],-1),FM={class:"flex relative"},IM={class:"overflow-auto h-screen absolute offset-0 z-10 border border-r w-[200px] bg-white/90"},BM={class:"flex flex-wrap gap-2 p-2"},jM=["src"],WM=["onDragover"],XM=xi({__name:"TheConstructor",setup(r){const t=ai(null),e=ai(null),n=ai(!0),i=ai([]);let o;const l=ai([]),c="/tattoo-builder";console.log("constructor: is dev mode",!1);const f=Ue(()=>i.value.length?l.value.filter(it=>i.value.includes(it.category)):l.value);async function d(){const at=await(await fetch("config.json")).json();at.forEach(dt=>l.value.push({...dt,key:Symbol("image-key")})),l.value.concat(at)}const p=Ue(()=>[...new Set(l.value.map(it=>it.category))]);d();let _,v,w=null;function E(){n.value=!1}function O(){if(o){const it=o==null?void 0:o.toDataURL({format:"jpeg",quality:90,multiplier:2}),at=document.createElement("a");at.download="tattoo.jpeg",at.href=it,at.click()}}function M(it){if("ontouchstart"in window){const dt=it.target;var at=new pn(dt,{scaleX:dt.width/dt.naturalWidth,scaleY:dt.height/dt.naturalHeight,width:dt.naturalWidth,height:dt.naturalHeight,left:window.innerWidth/2-dt.width/2,top:window.innerHeight/2-dt.height/2});o==null||o.add(at),n.value=!1}}function R(it){var dt;w=it.target;const at=(dt=it.target)==null?void 0:dt.getBoundingClientRect();_=it.clientX-(at.left+window.scrollX),v=it.clientY-(at.top+window.scrollY)}function X(it){return it.dataTransfer&&(it.dataTransfer.dropEffect="copy"),!1}function B(){w=null}function $(it){if(it=it||window.event,it.preventDefault&&it.preventDefault(),it.stopPropagation&&it.stopPropagation(),!t.value||!w)return;const at=t.value.getBoundingClientRect();if(v===void 0||_===void 0)return;const dt=it.clientX-(at.left+window.scrollX+_),Lt=it.clientY-(at.top+window.scrollY+v);var Tt=new pn(w,{scaleX:w.width/w.naturalWidth,scaleY:w.height/w.naturalHeight,width:w.naturalWidth,height:w.naturalHeight,left:dt,top:Lt});return o==null||o.add(Tt),n.value=!1,!1}const tt=EM.throttle(()=>{console.log("constructor: store data"),localStorage.setItem("canvas",JSON.stringify(o==null?void 0:o.toJSON()))},300,{leading:!1,trailing:!0});function nt(){localStorage.removeItem("canvas"),o&&(o.clear(),o.backgroundColor="#fff")}function ot(){if(!t.value||!e.value)return;o=new yh(t.value),o.backgroundColor="#fff";function it(){o==null||o.setDimensions({width:window.innerWidth,height:window.innerHeight})}o.on("after:render",tt),window.addEventListener("resize",()=>it());const at=localStorage.getItem("canvas");if(at){const Tt=JSON.parse(at);o==null||o.loadFromJSON(Tt,()=>{o&&o.requestRenderAll()})}it();const dt="data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15.289 15.9961L-1.44839e-05 0.707107L0.707092 0L15.9961 15.289L15.289 15.9961Z' fill='%23B2CCFF'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M0.707107 15.9961L15.9961 0.707107L15.289 0L5.23321e-07 15.289L0.707107 15.9961Z' fill='%23B2CCFF'/%3E%3C/svg%3E%0A",Lt=document.createElement("img");Lt.src=dt,xe.ownDefaults.controls={...RA.createObjectDefaultControls(),deleteControl:new fn({x:.5,y:-.5,offsetX:24,cursorStyle:"pointer",mouseUpHandler:(Tt,Ft)=>{const Xt=Ft.target,Mt=Xt.canvas;Mt==null||Mt.remove(Xt),Mt==null||Mt.requestRenderAll()},render:(Tt,Ft,Xt,Mt,Ct)=>{Tt.save(),Tt.translate(Ft,Xt),Tt.rotate(LD.degreesToRadians(Ct.angle)),Tt.drawImage(Lt,-16/2,-16/2,16,16),Tt.restore()}})}}return _m(()=>{ot()}),(it,at)=>(dn(),hr(Ze,null,[ge("header",PM,[DM,ge("div",AM,[ye(pa,{look:"secondary",href:"https://www.instagram.com/oleshevatattoo"},{default:Is(()=>[MM]),_:1}),ge("div",kM,[ye(pa,{onClick:O},{default:Is(()=>[eh("Download result")]),_:1}),ye(pa,{onClick:nt},{default:Is(()=>[eh("Reset")]),_:1})])])]),n.value?WT("",!0):(dn(),hr("div",LM,[ye(pa,{look:"secondary",class:"h-32 w-8 flex items-center justify-center",onClick:at[0]||(at[0]=dt=>n.value=!0)},{default:Is(()=>[RM]),_:1})])),ge("div",FM,[oT(ge("div",IM,[ge("div",BM,[(dn(!0),hr(Ze,null,vg(p.value,dt=>(dn(),qa(OM,{key:dt,modelValue:i.value,"onUpdate:modelValue":at[1]||(at[1]=Lt=>i.value=Lt),value:dt,name:dt,label:dt,class:"border px-2 rounded-sm py-0.5"},null,8,["modelValue","value","name","label"]))),128))]),(dn(!0),hr(Ze,null,vg(f.value,dt=>(dn(),hr("img",{key:dt.key,draggable:"",src:`${Hr(c)||""}/tattoo/${dt.file}`,onDragstartPassive:R,onDragendPassive:B,onClick:M},null,40,jM))),128))],512),[[vO,n.value]]),ge("div",{ref_key:"canvasContainer",ref:e,class:"canvas-container",onDragover:_O(X,["prevent"]),onDrop:$,onTouchstart:E,onClick:E},[ge("canvas",{ref_key:"canvasElement",ref:t,class:"w-full"},null,512)],40,WM)])],64))}});const HM=xi({__name:"HomeView",setup(r){return(t,e)=>(dn(),hr("main",null,[ye(XM)]))}}),YM=O2({history:UO("/tattoo-builder"),routes:[{path:"/",name:"home",component:HM},{path:"/about",name:"about",component:()=>L2(()=>import("./AboutView-c613d47b.js"),["assets/AboutView-c613d47b.js","assets/AboutView-4d995ba2.css"])}]}),Mu=wO(A2);Mu.use(TO());Mu.use(YM);Mu.mount("#app");export{D2 as _,ge as a,hr as c,dn as o};
