(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();function Th(r,t){const e=Object.create(null),n=r.split(",");for(let i=0;i<n.length;i++)e[n[i]]=!0;return t?i=>!!e[i.toLowerCase()]:i=>!!e[i]}const oe={},Gi=[],Wn=()=>{},nb=()=>!1,rb=/^on[^a-z]/,Ua=r=>rb.test(r),Oh=r=>r.startsWith("onUpdate:"),Oe=Object.assign,Eh=(r,t)=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)},ib=Object.prototype.hasOwnProperty,Yt=(r,t)=>ib.call(r,t),wt=Array.isArray,$i=r=>za(r)==="[object Map]",Wp=r=>za(r)==="[object Set]",Et=r=>typeof r=="function",Se=r=>typeof r=="string",Ph=r=>typeof r=="symbol",ce=r=>r!==null&&typeof r=="object",Xp=r=>ce(r)&&Et(r.then)&&Et(r.catch),Hp=Object.prototype.toString,za=r=>Hp.call(r),sb=r=>za(r).slice(8,-1),Yp=r=>za(r)==="[object Object]",Ah=r=>Se(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,va=Th(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Na=r=>{const t=Object.create(null);return e=>t[e]||(t[e]=r(e))},ob=/-(\w)/g,Qi=Na(r=>r.replace(ob,(t,e)=>e?e.toUpperCase():"")),ab=/\B([A-Z])/g,ls=Na(r=>r.replace(ab,"-$1").toLowerCase()),Up=Na(r=>r.charAt(0).toUpperCase()+r.slice(1)),Tc=Na(r=>r?`on${Up(r)}`:""),Js=(r,t)=>!Object.is(r,t),Oc=(r,t)=>{for(let e=0;e<r.length;e++)r[e](t)},Sa=(r,t,e)=>{Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value:e})},lb=r=>{const t=parseFloat(r);return isNaN(t)?r:t};let fg;const $c=()=>fg||(fg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Va(r){if(wt(r)){const t={};for(let e=0;e<r.length;e++){const n=r[e],i=Se(n)?fb(n):Va(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(Se(r))return r;if(ce(r))return r}}const cb=/;(?![^(]*\))/g,hb=/:([^]+)/,ub=/\/\*[^]*?\*\//g;function fb(r){const t={};return r.replace(ub,"").split(cb).forEach(e=>{if(e){const n=e.split(hb);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Zs(r){let t="";if(Se(r))t=r;else if(wt(r))for(let e=0;e<r.length;e++){const n=Zs(r[e]);n&&(t+=n+" ")}else if(ce(r))for(const e in r)r[e]&&(t+=e+" ");return t.trim()}const db="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",gb=Th(db);function zp(r){return!!r||r===""}const Fs=r=>Se(r)?r:r==null?"":wt(r)||ce(r)&&(r.toString===Hp||!Et(r.toString))?JSON.stringify(r,Np,2):String(r),Np=(r,t)=>t&&t.__v_isRef?Np(r,t.value):$i(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[n,i])=>(e[`${n} =>`]=i,e),{})}:Wp(t)?{[`Set(${t.size})`]:[...t.values()]}:ce(t)&&!wt(t)&&!Yp(t)?String(t):t;let Rn;class Vp{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Rn,!t&&Rn&&(this.index=(Rn.scopes||(Rn.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=Rn;try{return Rn=this,t()}finally{Rn=e}}}on(){Rn=this}off(){Rn=this.parent}stop(t){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function pb(r){return new Vp(r)}function mb(r,t=Rn){t&&t.active&&t.effects.push(r)}function _b(){return Rn}const Dh=r=>{const t=new Set(r);return t.w=0,t.n=0,t},Gp=r=>(r.w&zr)>0,$p=r=>(r.n&zr)>0,vb=({deps:r})=>{if(r.length)for(let t=0;t<r.length;t++)r[t].w|=zr},yb=r=>{const{deps:t}=r;if(t.length){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Gp(i)&&!$p(i)?i.delete(r):t[e++]=i,i.w&=~zr,i.n&=~zr}t.length=e}},Kc=new WeakMap;let Is=0,zr=1;const qc=30;let In;const gi=Symbol(""),Jc=Symbol("");class Mh{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,mb(this,n)}run(){if(!this.active)return this.fn();let t=In,e=Hr;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=In,In=this,Hr=!0,zr=1<<++Is,Is<=qc?vb(this):dg(this),this.fn()}finally{Is<=qc&&yb(this),zr=1<<--Is,In=this.parent,Hr=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){In===this?this.deferStop=!0:this.active&&(dg(this),this.onStop&&this.onStop(),this.active=!1)}}function dg(r){const{deps:t}=r;if(t.length){for(let e=0;e<t.length;e++)t[e].delete(r);t.length=0}}let Hr=!0;const Kp=[];function cs(){Kp.push(Hr),Hr=!1}function hs(){const r=Kp.pop();Hr=r===void 0?!0:r}function hn(r,t,e){if(Hr&&In){let n=Kc.get(r);n||Kc.set(r,n=new Map);let i=n.get(e);i||n.set(e,i=Dh()),qp(i)}}function qp(r,t){let e=!1;Is<=qc?$p(r)||(r.n|=zr,e=!Gp(r)):e=!r.has(In),e&&(r.add(In),In.deps.push(r))}function _r(r,t,e,n,i,o){const l=Kc.get(r);if(!l)return;let c=[];if(t==="clear")c=[...l.values()];else if(e==="length"&&wt(r)){const h=Number(n);l.forEach((f,d)=>{(d==="length"||d>=h)&&c.push(f)})}else switch(e!==void 0&&c.push(l.get(e)),t){case"add":wt(r)?Ah(e)&&c.push(l.get("length")):(c.push(l.get(gi)),$i(r)&&c.push(l.get(Jc)));break;case"delete":wt(r)||(c.push(l.get(gi)),$i(r)&&c.push(l.get(Jc)));break;case"set":$i(r)&&c.push(l.get(gi));break}if(c.length===1)c[0]&&Zc(c[0]);else{const h=[];for(const f of c)f&&h.push(...f);Zc(Dh(h))}}function Zc(r,t){const e=wt(r)?r:[...r];for(const n of e)n.computed&&gg(n);for(const n of e)n.computed||gg(n)}function gg(r,t){(r!==In||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const xb=Th("__proto__,__v_isRef,__isVue"),Jp=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(Ph)),wb=kh(),Cb=kh(!1,!0),Sb=kh(!0),pg=bb();function bb(){const r={};return["includes","indexOf","lastIndexOf"].forEach(t=>{r[t]=function(...e){const n=$t(this);for(let o=0,l=this.length;o<l;o++)hn(n,"get",o+"");const i=n[t](...e);return i===-1||i===!1?n[t](...e.map($t)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{r[t]=function(...e){cs();const n=$t(this)[t].apply(this,e);return hs(),n}}),r}function Tb(r){const t=$t(this);return hn(t,"has",r),t.hasOwnProperty(r)}function kh(r=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!r;if(i==="__v_isReadonly")return r;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(r?t?Hb:nm:t?em:tm).get(n))return n;const l=wt(n);if(!r){if(l&&Yt(pg,i))return Reflect.get(pg,i,o);if(i==="hasOwnProperty")return Tb}const c=Reflect.get(n,i,o);return(Ph(i)?Jp.has(i):xb(i))||(r||hn(n,"get",i),t)?c:je(c)?l&&Ah(i)?c:c.value:ce(c)?r?im(c):$a(c):c}}const Ob=Zp(),Eb=Zp(!0);function Zp(r=!1){return function(e,n,i,o){let l=e[n];if(ts(l)&&je(l)&&!je(i))return!1;if(!r&&(!ba(i)&&!ts(i)&&(l=$t(l),i=$t(i)),!wt(e)&&je(l)&&!je(i)))return l.value=i,!0;const c=wt(e)&&Ah(n)?Number(n)<e.length:Yt(e,n),h=Reflect.set(e,n,i,o);return e===$t(o)&&(c?Js(i,l)&&_r(e,"set",n,i):_r(e,"add",n,i)),h}}function Pb(r,t){const e=Yt(r,t);r[t];const n=Reflect.deleteProperty(r,t);return n&&e&&_r(r,"delete",t,void 0),n}function Ab(r,t){const e=Reflect.has(r,t);return(!Ph(t)||!Jp.has(t))&&hn(r,"has",t),e}function Db(r){return hn(r,"iterate",wt(r)?"length":gi),Reflect.ownKeys(r)}const Qp={get:wb,set:Ob,deleteProperty:Pb,has:Ab,ownKeys:Db},Mb={get:Sb,set(r,t){return!0},deleteProperty(r,t){return!0}},kb=Oe({},Qp,{get:Cb,set:Eb}),Lh=r=>r,Ga=r=>Reflect.getPrototypeOf(r);function aa(r,t,e=!1,n=!1){r=r.__v_raw;const i=$t(r),o=$t(t);e||(t!==o&&hn(i,"get",t),hn(i,"get",o));const{has:l}=Ga(i),c=n?Lh:e?Bh:Qs;if(l.call(i,t))return c(r.get(t));if(l.call(i,o))return c(r.get(o));r!==i&&r.get(t)}function la(r,t=!1){const e=this.__v_raw,n=$t(e),i=$t(r);return t||(r!==i&&hn(n,"has",r),hn(n,"has",i)),r===i?e.has(r):e.has(r)||e.has(i)}function ca(r,t=!1){return r=r.__v_raw,!t&&hn($t(r),"iterate",gi),Reflect.get(r,"size",r)}function mg(r){r=$t(r);const t=$t(this);return Ga(t).has.call(t,r)||(t.add(r),_r(t,"add",r,r)),this}function _g(r,t){t=$t(t);const e=$t(this),{has:n,get:i}=Ga(e);let o=n.call(e,r);o||(r=$t(r),o=n.call(e,r));const l=i.call(e,r);return e.set(r,t),o?Js(t,l)&&_r(e,"set",r,t):_r(e,"add",r,t),this}function vg(r){const t=$t(this),{has:e,get:n}=Ga(t);let i=e.call(t,r);i||(r=$t(r),i=e.call(t,r)),n&&n.call(t,r);const o=t.delete(r);return i&&_r(t,"delete",r,void 0),o}function yg(){const r=$t(this),t=r.size!==0,e=r.clear();return t&&_r(r,"clear",void 0,void 0),e}function ha(r,t){return function(n,i){const o=this,l=o.__v_raw,c=$t(l),h=t?Lh:r?Bh:Qs;return!r&&hn(c,"iterate",gi),l.forEach((f,d)=>n.call(i,h(f),h(d),o))}}function ua(r,t,e){return function(...n){const i=this.__v_raw,o=$t(i),l=$i(o),c=r==="entries"||r===Symbol.iterator&&l,h=r==="keys"&&l,f=i[r](...n),d=e?Lh:t?Bh:Qs;return!t&&hn(o,"iterate",h?Jc:gi),{next(){const{value:p,done:_}=f.next();return _?{value:p,done:_}:{value:c?[d(p[0]),d(p[1])]:d(p),done:_}},[Symbol.iterator](){return this}}}}function Rr(r){return function(...t){return r==="delete"?!1:this}}function Lb(){const r={get(o){return aa(this,o)},get size(){return ca(this)},has:la,add:mg,set:_g,delete:vg,clear:yg,forEach:ha(!1,!1)},t={get(o){return aa(this,o,!1,!0)},get size(){return ca(this)},has:la,add:mg,set:_g,delete:vg,clear:yg,forEach:ha(!1,!0)},e={get(o){return aa(this,o,!0)},get size(){return ca(this,!0)},has(o){return la.call(this,o,!0)},add:Rr("add"),set:Rr("set"),delete:Rr("delete"),clear:Rr("clear"),forEach:ha(!0,!1)},n={get(o){return aa(this,o,!0,!0)},get size(){return ca(this,!0)},has(o){return la.call(this,o,!0)},add:Rr("add"),set:Rr("set"),delete:Rr("delete"),clear:Rr("clear"),forEach:ha(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{r[o]=ua(o,!1,!1),e[o]=ua(o,!0,!1),t[o]=ua(o,!1,!0),n[o]=ua(o,!0,!0)}),[r,e,t,n]}const[Rb,Fb,Ib,Bb]=Lb();function Rh(r,t){const e=t?r?Bb:Ib:r?Fb:Rb;return(n,i,o)=>i==="__v_isReactive"?!r:i==="__v_isReadonly"?r:i==="__v_raw"?n:Reflect.get(Yt(e,i)&&i in n?e:n,i,o)}const jb={get:Rh(!1,!1)},Wb={get:Rh(!1,!0)},Xb={get:Rh(!0,!1)},tm=new WeakMap,em=new WeakMap,nm=new WeakMap,Hb=new WeakMap;function Yb(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ub(r){return r.__v_skip||!Object.isExtensible(r)?0:Yb(sb(r))}function $a(r){return ts(r)?r:Fh(r,!1,Qp,jb,tm)}function rm(r){return Fh(r,!1,kb,Wb,em)}function im(r){return Fh(r,!0,Mb,Xb,nm)}function Fh(r,t,e,n,i){if(!ce(r)||r.__v_raw&&!(t&&r.__v_isReactive))return r;const o=i.get(r);if(o)return o;const l=Ub(r);if(l===0)return r;const c=new Proxy(r,l===2?n:e);return i.set(r,c),c}function Ki(r){return ts(r)?Ki(r.__v_raw):!!(r&&r.__v_isReactive)}function ts(r){return!!(r&&r.__v_isReadonly)}function ba(r){return!!(r&&r.__v_isShallow)}function sm(r){return Ki(r)||ts(r)}function $t(r){const t=r&&r.__v_raw;return t?$t(t):r}function Ih(r){return Sa(r,"__v_skip",!0),r}const Qs=r=>ce(r)?$a(r):r,Bh=r=>ce(r)?im(r):r;function om(r){Hr&&In&&(r=$t(r),qp(r.dep||(r.dep=Dh())))}function am(r,t){r=$t(r);const e=r.dep;e&&Zc(e)}function je(r){return!!(r&&r.__v_isRef===!0)}function ur(r){return lm(r,!1)}function zb(r){return lm(r,!0)}function lm(r,t){return je(r)?r:new Nb(r,t)}class Nb{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:$t(t),this._value=e?t:Qs(t)}get value(){return om(this),this._value}set value(t){const e=this.__v_isShallow||ba(t)||ts(t);t=e?t:$t(t),Js(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:Qs(t),am(this))}}function Yr(r){return je(r)?r.value:r}const Vb={get:(r,t,e)=>Yr(Reflect.get(r,t,e)),set:(r,t,e,n)=>{const i=r[t];return je(i)&&!je(e)?(i.value=e,!0):Reflect.set(r,t,e,n)}};function cm(r){return Ki(r)?r:new Proxy(r,Vb)}class Gb{constructor(t,e,n,i){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Mh(t,()=>{this._dirty||(this._dirty=!0,am(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=$t(this);return om(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function $b(r,t,e=!1){let n,i;const o=Et(r);return o?(n=r,i=Wn):(n=r.get,i=r.set),new Gb(n,i,o||!i,e)}function Ur(r,t,e,n){let i;try{i=n?r(...n):r()}catch(o){Ka(o,t,e)}return i}function Xn(r,t,e,n){if(Et(r)){const o=Ur(r,t,e,n);return o&&Xp(o)&&o.catch(l=>{Ka(l,t,e)}),o}const i=[];for(let o=0;o<r.length;o++)i.push(Xn(r[o],t,e,n));return i}function Ka(r,t,e,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const l=t.proxy,c=e;for(;o;){const f=o.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](r,l,c)===!1)return}o=o.parent}const h=t.appContext.config.errorHandler;if(h){Ur(h,null,10,[r,l,c]);return}}Kb(r,e,i,n)}function Kb(r,t,e,n=!0){console.error(r)}let to=!1,Qc=!1;const Ie=[];let qn=0;const qi=[];let fr=null,li=0;const hm=Promise.resolve();let jh=null;function Wh(r){const t=jh||hm;return r?t.then(this?r.bind(this):r):t}function qb(r){let t=qn+1,e=Ie.length;for(;t<e;){const n=t+e>>>1;eo(Ie[n])<r?t=n+1:e=n}return t}function Xh(r){(!Ie.length||!Ie.includes(r,to&&r.allowRecurse?qn+1:qn))&&(r.id==null?Ie.push(r):Ie.splice(qb(r.id),0,r),um())}function um(){!to&&!Qc&&(Qc=!0,jh=hm.then(dm))}function Jb(r){const t=Ie.indexOf(r);t>qn&&Ie.splice(t,1)}function Zb(r){wt(r)?qi.push(...r):(!fr||!fr.includes(r,r.allowRecurse?li+1:li))&&qi.push(r),um()}function xg(r,t=to?qn+1:0){for(;t<Ie.length;t++){const e=Ie[t];e&&e.pre&&(Ie.splice(t,1),t--,e())}}function fm(r){if(qi.length){const t=[...new Set(qi)];if(qi.length=0,fr){fr.push(...t);return}for(fr=t,fr.sort((e,n)=>eo(e)-eo(n)),li=0;li<fr.length;li++)fr[li]();fr=null,li=0}}const eo=r=>r.id==null?1/0:r.id,Qb=(r,t)=>{const e=eo(r)-eo(t);if(e===0){if(r.pre&&!t.pre)return-1;if(t.pre&&!r.pre)return 1}return e};function dm(r){Qc=!1,to=!0,Ie.sort(Qb);const t=Wn;try{for(qn=0;qn<Ie.length;qn++){const e=Ie[qn];e&&e.active!==!1&&Ur(e,null,14)}}finally{qn=0,Ie.length=0,fm(),to=!1,jh=null,(Ie.length||qi.length)&&dm()}}function tT(r,t,...e){if(r.isUnmounted)return;const n=r.vnode.props||oe;let i=e;const o=t.startsWith("update:"),l=o&&t.slice(7);if(l&&l in n){const d=`${l==="modelValue"?"model":l}Modifiers`,{number:p,trim:_}=n[d]||oe;_&&(i=e.map(v=>Se(v)?v.trim():v)),p&&(i=e.map(lb))}let c,h=n[c=Tc(t)]||n[c=Tc(Qi(t))];!h&&o&&(h=n[c=Tc(ls(t))]),h&&Xn(h,r,6,i);const f=n[c+"Once"];if(f){if(!r.emitted)r.emitted={};else if(r.emitted[c])return;r.emitted[c]=!0,Xn(f,r,6,i)}}function gm(r,t,e=!1){const n=t.emitsCache,i=n.get(r);if(i!==void 0)return i;const o=r.emits;let l={},c=!1;if(!Et(r)){const h=f=>{const d=gm(f,t,!0);d&&(c=!0,Oe(l,d))};!e&&t.mixins.length&&t.mixins.forEach(h),r.extends&&h(r.extends),r.mixins&&r.mixins.forEach(h)}return!o&&!c?(ce(r)&&n.set(r,null),null):(wt(o)?o.forEach(h=>l[h]=null):Oe(l,o),ce(r)&&n.set(r,l),l)}function qa(r,t){return!r||!Ua(t)?!1:(t=t.slice(2).replace(/Once$/,""),Yt(r,t[0].toLowerCase()+t.slice(1))||Yt(r,ls(t))||Yt(r,t))}let $e=null,pm=null;function Ta(r){const t=$e;return $e=r,pm=r&&r.type.__scopeId||null,t}function Bs(r,t=$e,e){if(!t||r._n)return r;const n=(...i)=>{n._d&&kg(-1);const o=Ta(t);let l;try{l=r(...i)}finally{Ta(o),n._d&&kg(1)}return l};return n._n=!0,n._c=!0,n._d=!0,n}function Ec(r){const{type:t,vnode:e,proxy:n,withProxy:i,props:o,propsOptions:[l],slots:c,attrs:h,emit:f,render:d,renderCache:p,data:_,setupState:v,ctx:w,inheritAttrs:E}=r;let T,P;const R=Ta(r);try{if(e.shapeFlag&4){const B=i||n;T=Kn(d.call(B,B,p,o,v,_,w)),P=h}else{const B=t;T=Kn(B.length>1?B(o,{attrs:h,slots:c,emit:f}):B(o,null)),P=t.props?h:eT(h)}}catch(B){Us.length=0,Ka(B,r,1),T=Te(Nr)}let X=T;if(P&&E!==!1){const B=Object.keys(P),{shapeFlag:$}=X;B.length&&$&7&&(l&&B.some(Oh)&&(P=nT(P,l)),X=es(X,P))}return e.dirs&&(X=es(X),X.dirs=X.dirs?X.dirs.concat(e.dirs):e.dirs),e.transition&&(X.transition=e.transition),T=X,Ta(R),T}const eT=r=>{let t;for(const e in r)(e==="class"||e==="style"||Ua(e))&&((t||(t={}))[e]=r[e]);return t},nT=(r,t)=>{const e={};for(const n in r)(!Oh(n)||!(n.slice(9)in t))&&(e[n]=r[n]);return e};function rT(r,t,e){const{props:n,children:i,component:o}=r,{props:l,children:c,patchFlag:h}=t,f=o.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&h>=0){if(h&1024)return!0;if(h&16)return n?wg(n,l,f):!!l;if(h&8){const d=t.dynamicProps;for(let p=0;p<d.length;p++){const _=d[p];if(l[_]!==n[_]&&!qa(f,_))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:n===l?!1:n?l?wg(n,l,f):!0:!!l;return!1}function wg(r,t,e){const n=Object.keys(t);if(n.length!==Object.keys(r).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==r[o]&&!qa(e,o))return!0}return!1}function iT({vnode:r,parent:t},e){for(;t&&t.subTree===r;)(r=t.vnode).el=e,t=t.parent}const sT=r=>r.__isSuspense;function oT(r,t){t&&t.pendingBranch?wt(r)?t.effects.push(...r):t.effects.push(r):Zb(r)}const fa={};function ya(r,t,e){return mm(r,t,e)}function mm(r,t,{immediate:e,deep:n,flush:i,onTrack:o,onTrigger:l}=oe){var c;const h=_b()===((c=Be)==null?void 0:c.scope)?Be:null;let f,d=!1,p=!1;if(je(r)?(f=()=>r.value,d=ba(r)):Ki(r)?(f=()=>r,n=!0):wt(r)?(p=!0,d=r.some(B=>Ki(B)||ba(B)),f=()=>r.map(B=>{if(je(B))return B.value;if(Ki(B))return ui(B);if(Et(B))return Ur(B,h,2)})):Et(r)?t?f=()=>Ur(r,h,2):f=()=>{if(!(h&&h.isUnmounted))return _&&_(),Xn(r,h,3,[v])}:f=Wn,t&&n){const B=f;f=()=>ui(B())}let _,v=B=>{_=R.onStop=()=>{Ur(B,h,4)}},w;if(io)if(v=Wn,t?e&&Xn(t,h,3,[f(),p?[]:void 0,v]):f(),i==="sync"){const B=JT();w=B.__watcherHandles||(B.__watcherHandles=[])}else return Wn;let E=p?new Array(r.length).fill(fa):fa;const T=()=>{if(R.active)if(t){const B=R.run();(n||d||(p?B.some(($,tt)=>Js($,E[tt])):Js(B,E)))&&(_&&_(),Xn(t,h,3,[B,E===fa?void 0:p&&E[0]===fa?[]:E,v]),E=B)}else R.run()};T.allowRecurse=!!t;let P;i==="sync"?P=T:i==="post"?P=()=>sn(T,h&&h.suspense):(T.pre=!0,h&&(T.id=h.uid),P=()=>Xh(T));const R=new Mh(f,P);t?e?T():E=R.run():i==="post"?sn(R.run.bind(R),h&&h.suspense):R.run();const X=()=>{R.stop(),h&&h.scope&&Eh(h.scope.effects,R)};return w&&w.push(X),X}function aT(r,t,e){const n=this.proxy,i=Se(r)?r.includes(".")?_m(n,r):()=>n[r]:r.bind(n,n);let o;Et(t)?o=t:(o=t.handler,e=t);const l=Be;ns(this);const c=mm(i,o.bind(n),e);return l?ns(l):pi(),c}function _m(r,t){const e=t.split(".");return()=>{let n=r;for(let i=0;i<e.length&&n;i++)n=n[e[i]];return n}}function ui(r,t){if(!ce(r)||r.__v_skip||(t=t||new Set,t.has(r)))return r;if(t.add(r),je(r))ui(r.value,t);else if(wt(r))for(let e=0;e<r.length;e++)ui(r[e],t);else if(Wp(r)||$i(r))r.forEach(e=>{ui(e,t)});else if(Yp(r))for(const e in r)ui(r[e],t);return r}function lT(r,t){const e=$e;if(e===null)return r;const n=tl(e)||e.proxy,i=r.dirs||(r.dirs=[]);for(let o=0;o<t.length;o++){let[l,c,h,f=oe]=t[o];l&&(Et(l)&&(l={mounted:l,updated:l}),l.deep&&ui(c),i.push({dir:l,instance:n,value:c,oldValue:void 0,arg:h,modifiers:f}))}return r}function oi(r,t,e,n){const i=r.dirs,o=t&&t.dirs;for(let l=0;l<i.length;l++){const c=i[l];o&&(c.oldValue=o[l].value);let h=c.dir[n];h&&(cs(),Xn(h,e,8,[r.el,c,r,t]),hs())}}function xi(r,t){return Et(r)?(()=>Oe({name:r.name},t,{setup:r}))():r}const Hs=r=>!!r.type.__asyncLoader,vm=r=>r.type.__isKeepAlive;function cT(r,t){ym(r,"a",t)}function hT(r,t){ym(r,"da",t)}function ym(r,t,e=Be){const n=r.__wdc||(r.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return r()});if(Ja(t,n,e),e){let i=e.parent;for(;i&&i.parent;)vm(i.parent.vnode)&&uT(n,t,e,i),i=i.parent}}function uT(r,t,e,n){const i=Ja(t,r,n,!0);wm(()=>{Eh(n[t],i)},e)}function Ja(r,t,e=Be,n=!1){if(e){const i=e[r]||(e[r]=[]),o=t.__weh||(t.__weh=(...l)=>{if(e.isUnmounted)return;cs(),ns(e);const c=Xn(t,e,r,l);return pi(),hs(),c});return n?i.unshift(o):i.push(o),o}}const yr=r=>(t,e=Be)=>(!io||r==="sp")&&Ja(r,(...n)=>t(...n),e),fT=yr("bm"),xm=yr("m"),dT=yr("bu"),gT=yr("u"),pT=yr("bum"),wm=yr("um"),mT=yr("sp"),_T=yr("rtg"),vT=yr("rtc");function yT(r,t=Be){Ja("ec",r,t)}const xT=Symbol.for("v-ndc");function Cg(r,t,e,n){let i;const o=e&&e[n];if(wt(r)||Se(r)){i=new Array(r.length);for(let l=0,c=r.length;l<c;l++)i[l]=t(r[l],l,void 0,o&&o[l])}else if(typeof r=="number"){i=new Array(r);for(let l=0;l<r;l++)i[l]=t(l+1,l,void 0,o&&o[l])}else if(ce(r))if(r[Symbol.iterator])i=Array.from(r,(l,c)=>t(l,c,void 0,o&&o[c]));else{const l=Object.keys(r);i=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const f=l[c];i[c]=t(r[f],f,c,o&&o[c])}}else i=[];return e&&(e[n]=i),i}function Sg(r,t,e={},n,i){if($e.isCE||$e.parent&&Hs($e.parent)&&$e.parent.isCE)return t!=="default"&&(e.name=t),Te("slot",e,n&&n());let o=r[t];o&&o._c&&(o._d=!1),on();const l=o&&Cm(o(e)),c=ro(an,{key:e.key||l&&l.key||`_${t}`},l||(n?n():[]),l&&r._===1?64:-2);return!i&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),o&&o._c&&(o._d=!0),c}function Cm(r){return r.some(t=>Pa(t)?!(t.type===Nr||t.type===an&&!Cm(t.children)):!0)?r:null}const th=r=>r?Lm(r)?tl(r)||r.proxy:th(r.parent):null,Ys=Oe(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>th(r.parent),$root:r=>th(r.root),$emit:r=>r.emit,$options:r=>Hh(r),$forceUpdate:r=>r.f||(r.f=()=>Xh(r.update)),$nextTick:r=>r.n||(r.n=Wh.bind(r.proxy)),$watch:r=>aT.bind(r)}),Pc=(r,t)=>r!==oe&&!r.__isScriptSetup&&Yt(r,t),wT={get({_:r},t){const{ctx:e,setupState:n,data:i,props:o,accessCache:l,type:c,appContext:h}=r;let f;if(t[0]!=="$"){const v=l[t];if(v!==void 0)switch(v){case 1:return n[t];case 2:return i[t];case 4:return e[t];case 3:return o[t]}else{if(Pc(n,t))return l[t]=1,n[t];if(i!==oe&&Yt(i,t))return l[t]=2,i[t];if((f=r.propsOptions[0])&&Yt(f,t))return l[t]=3,o[t];if(e!==oe&&Yt(e,t))return l[t]=4,e[t];eh&&(l[t]=0)}}const d=Ys[t];let p,_;if(d)return t==="$attrs"&&hn(r,"get",t),d(r);if((p=c.__cssModules)&&(p=p[t]))return p;if(e!==oe&&Yt(e,t))return l[t]=4,e[t];if(_=h.config.globalProperties,Yt(_,t))return _[t]},set({_:r},t,e){const{data:n,setupState:i,ctx:o}=r;return Pc(i,t)?(i[t]=e,!0):n!==oe&&Yt(n,t)?(n[t]=e,!0):Yt(r.props,t)||t[0]==="$"&&t.slice(1)in r?!1:(o[t]=e,!0)},has({_:{data:r,setupState:t,accessCache:e,ctx:n,appContext:i,propsOptions:o}},l){let c;return!!e[l]||r!==oe&&Yt(r,l)||Pc(t,l)||(c=o[0])&&Yt(c,l)||Yt(n,l)||Yt(Ys,l)||Yt(i.config.globalProperties,l)},defineProperty(r,t,e){return e.get!=null?r._.accessCache[t]=0:Yt(e,"value")&&this.set(r,t,e.value,null),Reflect.defineProperty(r,t,e)}};function bg(r){return wt(r)?r.reduce((t,e)=>(t[e]=null,t),{}):r}let eh=!0;function CT(r){const t=Hh(r),e=r.proxy,n=r.ctx;eh=!1,t.beforeCreate&&Tg(t.beforeCreate,r,"bc");const{data:i,computed:o,methods:l,watch:c,provide:h,inject:f,created:d,beforeMount:p,mounted:_,beforeUpdate:v,updated:w,activated:E,deactivated:T,beforeDestroy:P,beforeUnmount:R,destroyed:X,unmounted:B,render:$,renderTracked:tt,renderTriggered:nt,errorCaptured:st,serverPrefetch:Dt,expose:Pt,inheritAttrs:Zt,components:ot,directives:ct,filters:ht}=t;if(f&&ST(f,n,null),l)for(const xt in l){const pt=l[xt];Et(pt)&&(n[xt]=pt.bind(e))}if(i){const xt=i.call(e,e);ce(xt)&&(r.data=$a(xt))}if(eh=!0,o)for(const xt in o){const pt=o[xt],Le=Et(pt)?pt.bind(e,e):Et(pt.get)?pt.get.bind(e,e):Wn,Ft=!Et(pt)&&Et(pt.set)?pt.set.bind(e):Wn,Ht=Ge({get:Le,set:Ft});Object.defineProperty(n,xt,{enumerable:!0,configurable:!0,get:()=>Ht.value,set:Vt=>Ht.value=Vt})}if(c)for(const xt in c)Sm(c[xt],n,e,xt);if(h){const xt=Et(h)?h.call(e):h;Reflect.ownKeys(xt).forEach(pt=>{xa(pt,xt[pt])})}d&&Tg(d,r,"c");function Mt(xt,pt){wt(pt)?pt.forEach(Le=>xt(Le.bind(e))):pt&&xt(pt.bind(e))}if(Mt(fT,p),Mt(xm,_),Mt(dT,v),Mt(gT,w),Mt(cT,E),Mt(hT,T),Mt(yT,st),Mt(vT,tt),Mt(_T,nt),Mt(pT,R),Mt(wm,B),Mt(mT,Dt),wt(Pt))if(Pt.length){const xt=r.exposed||(r.exposed={});Pt.forEach(pt=>{Object.defineProperty(xt,pt,{get:()=>e[pt],set:Le=>e[pt]=Le})})}else r.exposed||(r.exposed={});$&&r.render===Wn&&(r.render=$),Zt!=null&&(r.inheritAttrs=Zt),ot&&(r.components=ot),ct&&(r.directives=ct)}function ST(r,t,e=Wn){wt(r)&&(r=nh(r));for(const n in r){const i=r[n];let o;ce(i)?"default"in i?o=pr(i.from||n,i.default,!0):o=pr(i.from||n):o=pr(i),je(o)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:l=>o.value=l}):t[n]=o}}function Tg(r,t,e){Xn(wt(r)?r.map(n=>n.bind(t.proxy)):r.bind(t.proxy),t,e)}function Sm(r,t,e,n){const i=n.includes(".")?_m(e,n):()=>e[n];if(Se(r)){const o=t[r];Et(o)&&ya(i,o)}else if(Et(r))ya(i,r.bind(e));else if(ce(r))if(wt(r))r.forEach(o=>Sm(o,t,e,n));else{const o=Et(r.handler)?r.handler.bind(e):t[r.handler];Et(o)&&ya(i,o,r)}}function Hh(r){const t=r.type,{mixins:e,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:l}}=r.appContext,c=o.get(t);let h;return c?h=c:!i.length&&!e&&!n?h=t:(h={},i.length&&i.forEach(f=>Oa(h,f,l,!0)),Oa(h,t,l)),ce(t)&&o.set(t,h),h}function Oa(r,t,e,n=!1){const{mixins:i,extends:o}=t;o&&Oa(r,o,e,!0),i&&i.forEach(l=>Oa(r,l,e,!0));for(const l in t)if(!(n&&l==="expose")){const c=bT[l]||e&&e[l];r[l]=c?c(r[l],t[l]):t[l]}return r}const bT={data:Og,props:Eg,emits:Eg,methods:js,computed:js,beforeCreate:ze,created:ze,beforeMount:ze,mounted:ze,beforeUpdate:ze,updated:ze,beforeDestroy:ze,beforeUnmount:ze,destroyed:ze,unmounted:ze,activated:ze,deactivated:ze,errorCaptured:ze,serverPrefetch:ze,components:js,directives:js,watch:OT,provide:Og,inject:TT};function Og(r,t){return t?r?function(){return Oe(Et(r)?r.call(this,this):r,Et(t)?t.call(this,this):t)}:t:r}function TT(r,t){return js(nh(r),nh(t))}function nh(r){if(wt(r)){const t={};for(let e=0;e<r.length;e++)t[r[e]]=r[e];return t}return r}function ze(r,t){return r?[...new Set([].concat(r,t))]:t}function js(r,t){return r?Oe(Object.create(null),r,t):t}function Eg(r,t){return r?wt(r)&&wt(t)?[...new Set([...r,...t])]:Oe(Object.create(null),bg(r),bg(t??{})):t}function OT(r,t){if(!r)return t;if(!t)return r;const e=Oe(Object.create(null),r);for(const n in t)e[n]=ze(r[n],t[n]);return e}function bm(){return{app:null,config:{isNativeTag:nb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ET=0;function PT(r,t){return function(n,i=null){Et(n)||(n=Oe({},n)),i!=null&&!ce(i)&&(i=null);const o=bm(),l=new Set;let c=!1;const h=o.app={_uid:ET++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:ZT,get config(){return o.config},set config(f){},use(f,...d){return l.has(f)||(f&&Et(f.install)?(l.add(f),f.install(h,...d)):Et(f)&&(l.add(f),f(h,...d))),h},mixin(f){return o.mixins.includes(f)||o.mixins.push(f),h},component(f,d){return d?(o.components[f]=d,h):o.components[f]},directive(f,d){return d?(o.directives[f]=d,h):o.directives[f]},mount(f,d,p){if(!c){const _=Te(n,i);return _.appContext=o,d&&t?t(_,f):r(_,f,p),c=!0,h._container=f,f.__vue_app__=h,tl(_.component)||_.component.proxy}},unmount(){c&&(r(null,h._container),delete h._container.__vue_app__)},provide(f,d){return o.provides[f]=d,h},runWithContext(f){Ea=h;try{return f()}finally{Ea=null}}};return h}}let Ea=null;function xa(r,t){if(Be){let e=Be.provides;const n=Be.parent&&Be.parent.provides;n===e&&(e=Be.provides=Object.create(n)),e[r]=t}}function pr(r,t,e=!1){const n=Be||$e;if(n||Ea){const i=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Ea._context.provides;if(i&&r in i)return i[r];if(arguments.length>1)return e&&Et(t)?t.call(n&&n.proxy):t}}function AT(r,t,e,n=!1){const i={},o={};Sa(o,Qa,1),r.propsDefaults=Object.create(null),Tm(r,t,i,o);for(const l in r.propsOptions[0])l in i||(i[l]=void 0);e?r.props=n?i:rm(i):r.type.props?r.props=i:r.props=o,r.attrs=o}function DT(r,t,e,n){const{props:i,attrs:o,vnode:{patchFlag:l}}=r,c=$t(i),[h]=r.propsOptions;let f=!1;if((n||l>0)&&!(l&16)){if(l&8){const d=r.vnode.dynamicProps;for(let p=0;p<d.length;p++){let _=d[p];if(qa(r.emitsOptions,_))continue;const v=t[_];if(h)if(Yt(o,_))v!==o[_]&&(o[_]=v,f=!0);else{const w=Qi(_);i[w]=rh(h,c,w,v,r,!1)}else v!==o[_]&&(o[_]=v,f=!0)}}}else{Tm(r,t,i,o)&&(f=!0);let d;for(const p in c)(!t||!Yt(t,p)&&((d=ls(p))===p||!Yt(t,d)))&&(h?e&&(e[p]!==void 0||e[d]!==void 0)&&(i[p]=rh(h,c,p,void 0,r,!0)):delete i[p]);if(o!==c)for(const p in o)(!t||!Yt(t,p))&&(delete o[p],f=!0)}f&&_r(r,"set","$attrs")}function Tm(r,t,e,n){const[i,o]=r.propsOptions;let l=!1,c;if(t)for(let h in t){if(va(h))continue;const f=t[h];let d;i&&Yt(i,d=Qi(h))?!o||!o.includes(d)?e[d]=f:(c||(c={}))[d]=f:qa(r.emitsOptions,h)||(!(h in n)||f!==n[h])&&(n[h]=f,l=!0)}if(o){const h=$t(e),f=c||oe;for(let d=0;d<o.length;d++){const p=o[d];e[p]=rh(i,h,p,f[p],r,!Yt(f,p))}}return l}function rh(r,t,e,n,i,o){const l=r[e];if(l!=null){const c=Yt(l,"default");if(c&&n===void 0){const h=l.default;if(l.type!==Function&&!l.skipFactory&&Et(h)){const{propsDefaults:f}=i;e in f?n=f[e]:(ns(i),n=f[e]=h.call(null,t),pi())}else n=h}l[0]&&(o&&!c?n=!1:l[1]&&(n===""||n===ls(e))&&(n=!0))}return n}function Om(r,t,e=!1){const n=t.propsCache,i=n.get(r);if(i)return i;const o=r.props,l={},c=[];let h=!1;if(!Et(r)){const d=p=>{h=!0;const[_,v]=Om(p,t,!0);Oe(l,_),v&&c.push(...v)};!e&&t.mixins.length&&t.mixins.forEach(d),r.extends&&d(r.extends),r.mixins&&r.mixins.forEach(d)}if(!o&&!h)return ce(r)&&n.set(r,Gi),Gi;if(wt(o))for(let d=0;d<o.length;d++){const p=Qi(o[d]);Pg(p)&&(l[p]=oe)}else if(o)for(const d in o){const p=Qi(d);if(Pg(p)){const _=o[d],v=l[p]=wt(_)||Et(_)?{type:_}:Oe({},_);if(v){const w=Mg(Boolean,v.type),E=Mg(String,v.type);v[0]=w>-1,v[1]=E<0||w<E,(w>-1||Yt(v,"default"))&&c.push(p)}}}const f=[l,c];return ce(r)&&n.set(r,f),f}function Pg(r){return r[0]!=="$"}function Ag(r){const t=r&&r.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:r===null?"null":""}function Dg(r,t){return Ag(r)===Ag(t)}function Mg(r,t){return wt(t)?t.findIndex(e=>Dg(e,r)):Et(t)&&Dg(t,r)?0:-1}const Em=r=>r[0]==="_"||r==="$stable",Yh=r=>wt(r)?r.map(Kn):[Kn(r)],MT=(r,t,e)=>{if(t._n)return t;const n=Bs((...i)=>Yh(t(...i)),e);return n._c=!1,n},Pm=(r,t,e)=>{const n=r._ctx;for(const i in r){if(Em(i))continue;const o=r[i];if(Et(o))t[i]=MT(i,o,n);else if(o!=null){const l=Yh(o);t[i]=()=>l}}},Am=(r,t)=>{const e=Yh(t);r.slots.default=()=>e},kT=(r,t)=>{if(r.vnode.shapeFlag&32){const e=t._;e?(r.slots=$t(t),Sa(t,"_",e)):Pm(t,r.slots={})}else r.slots={},t&&Am(r,t);Sa(r.slots,Qa,1)},LT=(r,t,e)=>{const{vnode:n,slots:i}=r;let o=!0,l=oe;if(n.shapeFlag&32){const c=t._;c?e&&c===1?o=!1:(Oe(i,t),!e&&c===1&&delete i._):(o=!t.$stable,Pm(t,i)),l=t}else t&&(Am(r,t),l={default:1});if(o)for(const c in i)!Em(c)&&!(c in l)&&delete i[c]};function ih(r,t,e,n,i=!1){if(wt(r)){r.forEach((_,v)=>ih(_,t&&(wt(t)?t[v]:t),e,n,i));return}if(Hs(n)&&!i)return;const o=n.shapeFlag&4?tl(n.component)||n.component.proxy:n.el,l=i?null:o,{i:c,r:h}=r,f=t&&t.r,d=c.refs===oe?c.refs={}:c.refs,p=c.setupState;if(f!=null&&f!==h&&(Se(f)?(d[f]=null,Yt(p,f)&&(p[f]=null)):je(f)&&(f.value=null)),Et(h))Ur(h,c,12,[l,d]);else{const _=Se(h),v=je(h);if(_||v){const w=()=>{if(r.f){const E=_?Yt(p,h)?p[h]:d[h]:h.value;i?wt(E)&&Eh(E,o):wt(E)?E.includes(o)||E.push(o):_?(d[h]=[o],Yt(p,h)&&(p[h]=d[h])):(h.value=[o],r.k&&(d[r.k]=h.value))}else _?(d[h]=l,Yt(p,h)&&(p[h]=l)):v&&(h.value=l,r.k&&(d[r.k]=l))};l?(w.id=-1,sn(w,e)):w()}}}const sn=oT;function RT(r){return FT(r)}function FT(r,t){const e=$c();e.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:l,createText:c,createComment:h,setText:f,setElementText:d,parentNode:p,nextSibling:_,setScopeId:v=Wn,insertStaticContent:w}=r,E=(C,b,L,j=null,z=null,N=null,Q=!1,K=null,q=!!b.dynamicChildren)=>{if(C===b)return;C&&!Ds(C,b)&&(j=U(C),Vt(C,z,N,!0),C=null),b.patchFlag===-2&&(q=!1,b.dynamicChildren=null);const{type:V,ref:lt,shapeFlag:it}=b;switch(V){case Za:T(C,b,L,j);break;case Nr:P(C,b,L,j);break;case Ac:C==null&&R(b,L,j,Q);break;case an:ot(C,b,L,j,z,N,Q,K,q);break;default:it&1?$(C,b,L,j,z,N,Q,K,q):it&6?ct(C,b,L,j,z,N,Q,K,q):(it&64||it&128)&&V.process(C,b,L,j,z,N,Q,K,q,J)}lt!=null&&z&&ih(lt,C&&C.ref,N,b||C,!b)},T=(C,b,L,j)=>{if(C==null)n(b.el=c(b.children),L,j);else{const z=b.el=C.el;b.children!==C.children&&f(z,b.children)}},P=(C,b,L,j)=>{C==null?n(b.el=h(b.children||""),L,j):b.el=C.el},R=(C,b,L,j)=>{[C.el,C.anchor]=w(C.children,b,L,j,C.el,C.anchor)},X=({el:C,anchor:b},L,j)=>{let z;for(;C&&C!==b;)z=_(C),n(C,L,j),C=z;n(b,L,j)},B=({el:C,anchor:b})=>{let L;for(;C&&C!==b;)L=_(C),i(C),C=L;i(b)},$=(C,b,L,j,z,N,Q,K,q)=>{Q=Q||b.type==="svg",C==null?tt(b,L,j,z,N,Q,K,q):Dt(C,b,z,N,Q,K,q)},tt=(C,b,L,j,z,N,Q,K)=>{let q,V;const{type:lt,props:it,shapeFlag:dt,transition:_t,dirs:kt}=C;if(q=C.el=l(C.type,N,it&&it.is,it),dt&8?d(q,C.children):dt&16&&st(C.children,q,null,j,z,N&&lt!=="foreignObject",Q,K),kt&&oi(C,null,j,"created"),nt(q,C,C.scopeId,Q,j),it){for(const jt in it)jt!=="value"&&!va(jt)&&o(q,jt,null,it[jt],N,C.children,j,z,he);"value"in it&&o(q,"value",null,it.value),(V=it.onVnodeBeforeMount)&&$n(V,j,C)}kt&&oi(C,null,j,"beforeMount");const zt=(!z||z&&!z.pendingBranch)&&_t&&!_t.persisted;zt&&_t.beforeEnter(q),n(q,b,L),((V=it&&it.onVnodeMounted)||zt||kt)&&sn(()=>{V&&$n(V,j,C),zt&&_t.enter(q),kt&&oi(C,null,j,"mounted")},z)},nt=(C,b,L,j,z)=>{if(L&&v(C,L),j)for(let N=0;N<j.length;N++)v(C,j[N]);if(z){let N=z.subTree;if(b===N){const Q=z.vnode;nt(C,Q,Q.scopeId,Q.slotScopeIds,z.parent)}}},st=(C,b,L,j,z,N,Q,K,q=0)=>{for(let V=q;V<C.length;V++){const lt=C[V]=K?jr(C[V]):Kn(C[V]);E(null,lt,b,L,j,z,N,Q,K)}},Dt=(C,b,L,j,z,N,Q)=>{const K=b.el=C.el;let{patchFlag:q,dynamicChildren:V,dirs:lt}=b;q|=C.patchFlag&16;const it=C.props||oe,dt=b.props||oe;let _t;L&&ai(L,!1),(_t=dt.onVnodeBeforeUpdate)&&$n(_t,L,b,C),lt&&oi(b,C,L,"beforeUpdate"),L&&ai(L,!0);const kt=z&&b.type!=="foreignObject";if(V?Pt(C.dynamicChildren,V,K,L,j,kt,N):Q||pt(C,b,K,null,L,j,kt,N,!1),q>0){if(q&16)Zt(K,b,it,dt,L,j,z);else if(q&2&&it.class!==dt.class&&o(K,"class",null,dt.class,z),q&4&&o(K,"style",it.style,dt.style,z),q&8){const zt=b.dynamicProps;for(let jt=0;jt<zt.length;jt++){const ae=zt[jt],Xe=it[ae],zn=dt[ae];(zn!==Xe||ae==="value")&&o(K,ae,Xe,zn,z,C.children,L,j,he)}}q&1&&C.children!==b.children&&d(K,b.children)}else!Q&&V==null&&Zt(K,b,it,dt,L,j,z);((_t=dt.onVnodeUpdated)||lt)&&sn(()=>{_t&&$n(_t,L,b,C),lt&&oi(b,C,L,"updated")},j)},Pt=(C,b,L,j,z,N,Q)=>{for(let K=0;K<b.length;K++){const q=C[K],V=b[K],lt=q.el&&(q.type===an||!Ds(q,V)||q.shapeFlag&70)?p(q.el):L;E(q,V,lt,null,j,z,N,Q,!0)}},Zt=(C,b,L,j,z,N,Q)=>{if(L!==j){if(L!==oe)for(const K in L)!va(K)&&!(K in j)&&o(C,K,L[K],null,Q,b.children,z,N,he);for(const K in j){if(va(K))continue;const q=j[K],V=L[K];q!==V&&K!=="value"&&o(C,K,V,q,Q,b.children,z,N,he)}"value"in j&&o(C,"value",L.value,j.value)}},ot=(C,b,L,j,z,N,Q,K,q)=>{const V=b.el=C?C.el:c(""),lt=b.anchor=C?C.anchor:c("");let{patchFlag:it,dynamicChildren:dt,slotScopeIds:_t}=b;_t&&(K=K?K.concat(_t):_t),C==null?(n(V,L,j),n(lt,L,j),st(b.children,L,lt,z,N,Q,K,q)):it>0&&it&64&&dt&&C.dynamicChildren?(Pt(C.dynamicChildren,dt,L,z,N,Q,K),(b.key!=null||z&&b===z.subTree)&&Dm(C,b,!0)):pt(C,b,L,lt,z,N,Q,K,q)},ct=(C,b,L,j,z,N,Q,K,q)=>{b.slotScopeIds=K,C==null?b.shapeFlag&512?z.ctx.activate(b,L,j,Q,q):ht(b,L,j,z,N,Q,q):gt(C,b,q)},ht=(C,b,L,j,z,N,Q)=>{const K=C.component=zT(C,j,z);if(vm(C)&&(K.ctx.renderer=J),NT(K),K.asyncDep){if(z&&z.registerDep(K,Mt),!C.el){const q=K.subTree=Te(Nr);P(null,q,b,L)}return}Mt(K,C,b,L,z,N,Q)},gt=(C,b,L)=>{const j=b.component=C.component;if(rT(C,b,L))if(j.asyncDep&&!j.asyncResolved){xt(j,b,L);return}else j.next=b,Jb(j.update),j.update();else b.el=C.el,j.vnode=b},Mt=(C,b,L,j,z,N,Q)=>{const K=()=>{if(C.isMounted){let{next:lt,bu:it,u:dt,parent:_t,vnode:kt}=C,zt=lt,jt;ai(C,!1),lt?(lt.el=kt.el,xt(C,lt,Q)):lt=kt,it&&Oc(it),(jt=lt.props&&lt.props.onVnodeBeforeUpdate)&&$n(jt,_t,lt,kt),ai(C,!0);const ae=Ec(C),Xe=C.subTree;C.subTree=ae,E(Xe,ae,p(Xe.el),U(Xe),C,z,N),lt.el=ae.el,zt===null&&iT(C,ae.el),dt&&sn(dt,z),(jt=lt.props&&lt.props.onVnodeUpdated)&&sn(()=>$n(jt,_t,lt,kt),z)}else{let lt;const{el:it,props:dt}=b,{bm:_t,m:kt,parent:zt}=C,jt=Hs(b);if(ai(C,!1),_t&&Oc(_t),!jt&&(lt=dt&&dt.onVnodeBeforeMount)&&$n(lt,zt,b),ai(C,!0),it&&Bt){const ae=()=>{C.subTree=Ec(C),Bt(it,C.subTree,C,z,null)};jt?b.type.__asyncLoader().then(()=>!C.isUnmounted&&ae()):ae()}else{const ae=C.subTree=Ec(C);E(null,ae,L,j,C,z,N),b.el=ae.el}if(kt&&sn(kt,z),!jt&&(lt=dt&&dt.onVnodeMounted)){const ae=b;sn(()=>$n(lt,zt,ae),z)}(b.shapeFlag&256||zt&&Hs(zt.vnode)&&zt.vnode.shapeFlag&256)&&C.a&&sn(C.a,z),C.isMounted=!0,b=L=j=null}},q=C.effect=new Mh(K,()=>Xh(V),C.scope),V=C.update=()=>q.run();V.id=C.uid,ai(C,!0),V()},xt=(C,b,L)=>{b.component=C;const j=C.vnode.props;C.vnode=b,C.next=null,DT(C,b.props,j,L),LT(C,b.children,L),cs(),xg(),hs()},pt=(C,b,L,j,z,N,Q,K,q=!1)=>{const V=C&&C.children,lt=C?C.shapeFlag:0,it=b.children,{patchFlag:dt,shapeFlag:_t}=b;if(dt>0){if(dt&128){Ft(V,it,L,j,z,N,Q,K,q);return}else if(dt&256){Le(V,it,L,j,z,N,Q,K,q);return}}_t&8?(lt&16&&he(V,z,N),it!==V&&d(L,it)):lt&16?_t&16?Ft(V,it,L,j,z,N,Q,K,q):he(V,z,N,!0):(lt&8&&d(L,""),_t&16&&st(it,L,j,z,N,Q,K,q))},Le=(C,b,L,j,z,N,Q,K,q)=>{C=C||Gi,b=b||Gi;const V=C.length,lt=b.length,it=Math.min(V,lt);let dt;for(dt=0;dt<it;dt++){const _t=b[dt]=q?jr(b[dt]):Kn(b[dt]);E(C[dt],_t,L,null,z,N,Q,K,q)}V>lt?he(C,z,N,!0,!1,it):st(b,L,j,z,N,Q,K,q,it)},Ft=(C,b,L,j,z,N,Q,K,q)=>{let V=0;const lt=b.length;let it=C.length-1,dt=lt-1;for(;V<=it&&V<=dt;){const _t=C[V],kt=b[V]=q?jr(b[V]):Kn(b[V]);if(Ds(_t,kt))E(_t,kt,L,null,z,N,Q,K,q);else break;V++}for(;V<=it&&V<=dt;){const _t=C[it],kt=b[dt]=q?jr(b[dt]):Kn(b[dt]);if(Ds(_t,kt))E(_t,kt,L,null,z,N,Q,K,q);else break;it--,dt--}if(V>it){if(V<=dt){const _t=dt+1,kt=_t<lt?b[_t].el:j;for(;V<=dt;)E(null,b[V]=q?jr(b[V]):Kn(b[V]),L,kt,z,N,Q,K,q),V++}}else if(V>dt)for(;V<=it;)Vt(C[V],z,N,!0),V++;else{const _t=V,kt=V,zt=new Map;for(V=kt;V<=dt;V++){const Pe=b[V]=q?jr(b[V]):Kn(b[V]);Pe.key!=null&&zt.set(Pe.key,V)}let jt,ae=0;const Xe=dt-kt+1;let zn=!1,Oi=0;const tr=new Array(Xe);for(V=0;V<Xe;V++)tr[V]=0;for(V=_t;V<=it;V++){const Pe=C[V];if(ae>=Xe){Vt(Pe,z,N,!0);continue}let Qe;if(Pe.key!=null)Qe=zt.get(Pe.key);else for(jt=kt;jt<=dt;jt++)if(tr[jt-kt]===0&&Ds(Pe,b[jt])){Qe=jt;break}Qe===void 0?Vt(Pe,z,N,!0):(tr[Qe-kt]=V+1,Qe>=Oi?Oi=Qe:zn=!0,E(Pe,b[Qe],L,null,z,N,Q,K,q),ae++)}const Ei=zn?IT(tr):Gi;for(jt=Ei.length-1,V=Xe-1;V>=0;V--){const Pe=kt+V,Qe=b[Pe],Pi=Pe+1<lt?b[Pe+1].el:j;tr[V]===0?E(null,Qe,L,Pi,z,N,Q,K,q):zn&&(jt<0||V!==Ei[jt]?Ht(Qe,L,Pi,2):jt--)}}},Ht=(C,b,L,j,z=null)=>{const{el:N,type:Q,transition:K,children:q,shapeFlag:V}=C;if(V&6){Ht(C.component.subTree,b,L,j);return}if(V&128){C.suspense.move(b,L,j);return}if(V&64){Q.move(C,b,L,J);return}if(Q===an){n(N,b,L);for(let it=0;it<q.length;it++)Ht(q[it],b,L,j);n(C.anchor,b,L);return}if(Q===Ac){X(C,b,L);return}if(j!==2&&V&1&&K)if(j===0)K.beforeEnter(N),n(N,b,L),sn(()=>K.enter(N),z);else{const{leave:it,delayLeave:dt,afterLeave:_t}=K,kt=()=>n(N,b,L),zt=()=>{it(N,()=>{kt(),_t&&_t()})};dt?dt(N,kt,zt):zt()}else n(N,b,L)},Vt=(C,b,L,j=!1,z=!1)=>{const{type:N,props:Q,ref:K,children:q,dynamicChildren:V,shapeFlag:lt,patchFlag:it,dirs:dt}=C;if(K!=null&&ih(K,null,L,C,!0),lt&256){b.ctx.deactivate(C);return}const _t=lt&1&&dt,kt=!Hs(C);let zt;if(kt&&(zt=Q&&Q.onVnodeBeforeUnmount)&&$n(zt,b,C),lt&6)Ze(C.component,L,j);else{if(lt&128){C.suspense.unmount(L,j);return}_t&&oi(C,null,b,"beforeUnmount"),lt&64?C.type.remove(C,b,L,z,J,j):V&&(N!==an||it>0&&it&64)?he(V,b,L,!1,!0):(N===an&&it&384||!z&&lt&16)&&he(q,b,L),j&&Ut(C)}(kt&&(zt=Q&&Q.onVnodeUnmounted)||_t)&&sn(()=>{zt&&$n(zt,b,C),_t&&oi(C,null,b,"unmounted")},L)},Ut=C=>{const{type:b,el:L,anchor:j,transition:z}=C;if(b===an){Je(L,j);return}if(b===Ac){B(C);return}const N=()=>{i(L),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(C.shapeFlag&1&&z&&!z.persisted){const{leave:Q,delayLeave:K}=z,q=()=>Q(L,N);K?K(C.el,N,q):q()}else N()},Je=(C,b)=>{let L;for(;C!==b;)L=_(C),i(C),C=L;i(b)},Ze=(C,b,L)=>{const{bum:j,scope:z,update:N,subTree:Q,um:K}=C;j&&Oc(j),z.stop(),N&&(N.active=!1,Vt(Q,C,b,L)),K&&sn(K,b),sn(()=>{C.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},he=(C,b,L,j=!1,z=!1,N=0)=>{for(let Q=N;Q<C.length;Q++)Vt(C[Q],b,L,j,z)},U=C=>C.shapeFlag&6?U(C.component.subTree):C.shapeFlag&128?C.suspense.next():_(C.anchor||C.el),et=(C,b,L)=>{C==null?b._vnode&&Vt(b._vnode,null,null,!0):E(b._vnode||null,C,b,null,null,null,L),xg(),fm(),b._vnode=C},J={p:E,um:Vt,m:Ht,r:Ut,mt:ht,mc:st,pc:pt,pbc:Pt,n:U,o:r};let ut,Bt;return t&&([ut,Bt]=t(J)),{render:et,hydrate:ut,createApp:PT(et,ut)}}function ai({effect:r,update:t},e){r.allowRecurse=t.allowRecurse=e}function Dm(r,t,e=!1){const n=r.children,i=t.children;if(wt(n)&&wt(i))for(let o=0;o<n.length;o++){const l=n[o];let c=i[o];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[o]=jr(i[o]),c.el=l.el),e||Dm(l,c)),c.type===Za&&(c.el=l.el)}}function IT(r){const t=r.slice(),e=[0];let n,i,o,l,c;const h=r.length;for(n=0;n<h;n++){const f=r[n];if(f!==0){if(i=e[e.length-1],r[i]<f){t[n]=i,e.push(n);continue}for(o=0,l=e.length-1;o<l;)c=o+l>>1,r[e[c]]<f?o=c+1:l=c;f<r[e[o]]&&(o>0&&(t[n]=e[o-1]),e[o]=n)}}for(o=e.length,l=e[o-1];o-- >0;)e[o]=l,l=t[l];return e}const BT=r=>r.__isTeleport,an=Symbol.for("v-fgt"),Za=Symbol.for("v-txt"),Nr=Symbol.for("v-cmt"),Ac=Symbol.for("v-stc"),Us=[];let jn=null;function on(r=!1){Us.push(jn=r?null:[])}function jT(){Us.pop(),jn=Us[Us.length-1]||null}let no=1;function kg(r){no+=r}function Mm(r){return r.dynamicChildren=no>0?jn||Gi:null,jT(),no>0&&jn&&jn.push(r),r}function dr(r,t,e,n,i,o){return Mm(ge(r,t,e,n,i,o,!0))}function ro(r,t,e,n,i){return Mm(Te(r,t,e,n,i,!0))}function Pa(r){return r?r.__v_isVNode===!0:!1}function Ds(r,t){return r.type===t.type&&r.key===t.key}const Qa="__vInternal",km=({key:r})=>r??null,wa=({ref:r,ref_key:t,ref_for:e})=>(typeof r=="number"&&(r=""+r),r!=null?Se(r)||je(r)||Et(r)?{i:$e,r,k:t,f:!!e}:r:null);function ge(r,t=null,e=null,n=0,i=null,o=r===an?0:1,l=!1,c=!1){const h={__v_isVNode:!0,__v_skip:!0,type:r,props:t,key:t&&km(t),ref:t&&wa(t),scopeId:pm,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:$e};return c?(Uh(h,e),o&128&&r.normalize(h)):e&&(h.shapeFlag|=Se(e)?8:16),no>0&&!l&&jn&&(h.patchFlag>0||o&6)&&h.patchFlag!==32&&jn.push(h),h}const Te=WT;function WT(r,t=null,e=null,n=0,i=null,o=!1){if((!r||r===xT)&&(r=Nr),Pa(r)){const c=es(r,t,!0);return e&&Uh(c,e),no>0&&!o&&jn&&(c.shapeFlag&6?jn[jn.indexOf(r)]=c:jn.push(c)),c.patchFlag|=-2,c}if(KT(r)&&(r=r.__vccOpts),t){t=XT(t);let{class:c,style:h}=t;c&&!Se(c)&&(t.class=Zs(c)),ce(h)&&(sm(h)&&!wt(h)&&(h=Oe({},h)),t.style=Va(h))}const l=Se(r)?1:sT(r)?128:BT(r)?64:ce(r)?4:Et(r)?2:0;return ge(r,t,e,n,i,l,o,!0)}function XT(r){return r?sm(r)||Qa in r?Oe({},r):r:null}function es(r,t,e=!1){const{props:n,ref:i,patchFlag:o,children:l}=r,c=t?HT(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:c,key:c&&km(c),ref:t&&t.ref?e&&i?wt(i)?i.concat(wa(t)):[i,wa(t)]:wa(t):i,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:l,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:t&&r.type!==an?o===-1?16:o|16:o,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&es(r.ssContent),ssFallback:r.ssFallback&&es(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce}}function sh(r=" ",t=0){return Te(Za,null,r,t)}function Dc(r="",t=!1){return t?(on(),ro(Nr,null,r)):Te(Nr,null,r)}function Kn(r){return r==null||typeof r=="boolean"?Te(Nr):wt(r)?Te(an,null,r.slice()):typeof r=="object"?jr(r):Te(Za,null,String(r))}function jr(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:es(r)}function Uh(r,t){let e=0;const{shapeFlag:n}=r;if(t==null)t=null;else if(wt(t))e=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Uh(r,i()),i._c&&(i._d=!0));return}else{e=32;const i=t._;!i&&!(Qa in t)?t._ctx=$e:i===3&&$e&&($e.slots._===1?t._=1:(t._=2,r.patchFlag|=1024))}else Et(t)?(t={default:t,_ctx:$e},e=32):(t=String(t),n&64?(e=16,t=[sh(t)]):e=8);r.children=t,r.shapeFlag|=e}function HT(...r){const t={};for(let e=0;e<r.length;e++){const n=r[e];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Zs([t.class,n.class]));else if(i==="style")t.style=Va([t.style,n.style]);else if(Ua(i)){const o=t[i],l=n[i];l&&o!==l&&!(wt(o)&&o.includes(l))&&(t[i]=o?[].concat(o,l):l)}else i!==""&&(t[i]=n[i])}return t}function $n(r,t,e,n=null){Xn(r,t,7,[e,n])}const YT=bm();let UT=0;function zT(r,t,e){const n=r.type,i=(t?t.appContext:r.appContext)||YT,o={uid:UT++,vnode:r,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Vp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Om(n,i),emitsOptions:gm(n,i),emit:null,emitted:null,propsDefaults:oe,inheritAttrs:n.inheritAttrs,ctx:oe,data:oe,props:oe,attrs:oe,slots:oe,refs:oe,setupState:oe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=tT.bind(null,o),r.ce&&r.ce(o),o}let Be=null,zh,Ui,Lg="__VUE_INSTANCE_SETTERS__";(Ui=$c()[Lg])||(Ui=$c()[Lg]=[]),Ui.push(r=>Be=r),zh=r=>{Ui.length>1?Ui.forEach(t=>t(r)):Ui[0](r)};const ns=r=>{zh(r),r.scope.on()},pi=()=>{Be&&Be.scope.off(),zh(null)};function Lm(r){return r.vnode.shapeFlag&4}let io=!1;function NT(r,t=!1){io=t;const{props:e,children:n}=r.vnode,i=Lm(r);AT(r,e,i,t),kT(r,n);const o=i?VT(r,t):void 0;return io=!1,o}function VT(r,t){const e=r.type;r.accessCache=Object.create(null),r.proxy=Ih(new Proxy(r.ctx,wT));const{setup:n}=e;if(n){const i=r.setupContext=n.length>1?$T(r):null;ns(r),cs();const o=Ur(n,r,0,[r.props,i]);if(hs(),pi(),Xp(o)){if(o.then(pi,pi),t)return o.then(l=>{Rg(r,l,t)}).catch(l=>{Ka(l,r,0)});r.asyncDep=o}else Rg(r,o,t)}else Rm(r,t)}function Rg(r,t,e){Et(t)?r.type.__ssrInlineRender?r.ssrRender=t:r.render=t:ce(t)&&(r.setupState=cm(t)),Rm(r,e)}let Fg;function Rm(r,t,e){const n=r.type;if(!r.render){if(!t&&Fg&&!n.render){const i=n.template||Hh(r).template;if(i){const{isCustomElement:o,compilerOptions:l}=r.appContext.config,{delimiters:c,compilerOptions:h}=n,f=Oe(Oe({isCustomElement:o,delimiters:c},l),h);n.render=Fg(i,f)}}r.render=n.render||Wn}ns(r),cs(),CT(r),hs(),pi()}function GT(r){return r.attrsProxy||(r.attrsProxy=new Proxy(r.attrs,{get(t,e){return hn(r,"get","$attrs"),t[e]}}))}function $T(r){const t=e=>{r.exposed=e||{}};return{get attrs(){return GT(r)},slots:r.slots,emit:r.emit,expose:t}}function tl(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(cm(Ih(r.exposed)),{get(t,e){if(e in t)return t[e];if(e in Ys)return Ys[e](r)},has(t,e){return e in t||e in Ys}}))}function KT(r){return Et(r)&&"__vccOpts"in r}const Ge=(r,t)=>$b(r,t,io);function Fm(r,t,e){const n=arguments.length;return n===2?ce(t)&&!wt(t)?Pa(t)?Te(r,null,[t]):Te(r,t):Te(r,null,t):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&Pa(e)&&(e=[e]),Te(r,t,e))}const qT=Symbol.for("v-scx"),JT=()=>pr(qT),ZT="3.3.4",QT="http://www.w3.org/2000/svg",ci=typeof document<"u"?document:null,Ig=ci&&ci.createElement("template"),tO={insert:(r,t,e)=>{t.insertBefore(r,e||null)},remove:r=>{const t=r.parentNode;t&&t.removeChild(r)},createElement:(r,t,e,n)=>{const i=t?ci.createElementNS(QT,r):ci.createElement(r,e?{is:e}:void 0);return r==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:r=>ci.createTextNode(r),createComment:r=>ci.createComment(r),setText:(r,t)=>{r.nodeValue=t},setElementText:(r,t)=>{r.textContent=t},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>ci.querySelector(r),setScopeId(r,t){r.setAttribute(t,"")},insertStaticContent(r,t,e,n,i,o){const l=e?e.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),e),!(i===o||!(i=i.nextSibling)););else{Ig.innerHTML=n?`<svg>${r}</svg>`:r;const c=Ig.content;if(n){const h=c.firstChild;for(;h.firstChild;)c.appendChild(h.firstChild);c.removeChild(h)}t.insertBefore(c,e)}return[l?l.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}};function eO(r,t,e){const n=r._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?r.removeAttribute("class"):e?r.setAttribute("class",t):r.className=t}function nO(r,t,e){const n=r.style,i=Se(e);if(e&&!i){if(t&&!Se(t))for(const o in t)e[o]==null&&oh(n,o,"");for(const o in e)oh(n,o,e[o])}else{const o=n.display;i?t!==e&&(n.cssText=e):t&&r.removeAttribute("style"),"_vod"in r&&(n.display=o)}}const Bg=/\s*!important$/;function oh(r,t,e){if(wt(e))e.forEach(n=>oh(r,t,n));else if(e==null&&(e=""),t.startsWith("--"))r.setProperty(t,e);else{const n=rO(r,t);Bg.test(e)?r.setProperty(ls(n),e.replace(Bg,""),"important"):r[n]=e}}const jg=["Webkit","Moz","ms"],Mc={};function rO(r,t){const e=Mc[t];if(e)return e;let n=Qi(t);if(n!=="filter"&&n in r)return Mc[t]=n;n=Up(n);for(let i=0;i<jg.length;i++){const o=jg[i]+n;if(o in r)return Mc[t]=o}return t}const Wg="http://www.w3.org/1999/xlink";function iO(r,t,e,n,i){if(n&&t.startsWith("xlink:"))e==null?r.removeAttributeNS(Wg,t.slice(6,t.length)):r.setAttributeNS(Wg,t,e);else{const o=gb(t);e==null||o&&!zp(e)?r.removeAttribute(t):r.setAttribute(t,o?"":e)}}function sO(r,t,e,n,i,o,l){if(t==="innerHTML"||t==="textContent"){n&&l(n,i,o),r[t]=e??"";return}const c=r.tagName;if(t==="value"&&c!=="PROGRESS"&&!c.includes("-")){r._value=e;const f=c==="OPTION"?r.getAttribute("value"):r.value,d=e??"";f!==d&&(r.value=d),e==null&&r.removeAttribute(t);return}let h=!1;if(e===""||e==null){const f=typeof r[t];f==="boolean"?e=zp(e):e==null&&f==="string"?(e="",h=!0):f==="number"&&(e=0,h=!0)}try{r[t]=e}catch{}h&&r.removeAttribute(t)}function oO(r,t,e,n){r.addEventListener(t,e,n)}function aO(r,t,e,n){r.removeEventListener(t,e,n)}function lO(r,t,e,n,i=null){const o=r._vei||(r._vei={}),l=o[t];if(n&&l)l.value=n;else{const[c,h]=cO(t);if(n){const f=o[t]=fO(n,i);oO(r,c,f,h)}else l&&(aO(r,c,l,h),o[t]=void 0)}}const Xg=/(?:Once|Passive|Capture)$/;function cO(r){let t;if(Xg.test(r)){t={};let n;for(;n=r.match(Xg);)r=r.slice(0,r.length-n[0].length),t[n[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):ls(r.slice(2)),t]}let kc=0;const hO=Promise.resolve(),uO=()=>kc||(hO.then(()=>kc=0),kc=Date.now());function fO(r,t){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;Xn(dO(n,e.value),t,5,[n])};return e.value=r,e.attached=uO(),e}function dO(r,t){if(wt(t)){const e=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{e.call(r),r._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const Hg=/^on[a-z]/,gO=(r,t,e,n,i=!1,o,l,c,h)=>{t==="class"?eO(r,n,i):t==="style"?nO(r,e,n):Ua(t)?Oh(t)||lO(r,t,e,n,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):pO(r,t,n,i))?sO(r,t,n,o,l,c,h):(t==="true-value"?r._trueValue=n:t==="false-value"&&(r._falseValue=n),iO(r,t,n,i))};function pO(r,t,e,n){return n?!!(t==="innerHTML"||t==="textContent"||t in r&&Hg.test(t)&&Et(e)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&r.tagName==="INPUT"||t==="type"&&r.tagName==="TEXTAREA"||Hg.test(t)&&Se(e)?!1:t in r}const mO=["ctrl","shift","alt","meta"],_O={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,t)=>mO.some(e=>r[`${e}Key`]&&!t.includes(e))},vO=(r,t)=>(e,...n)=>{for(let i=0;i<t.length;i++){const o=_O[t[i]];if(o&&o(e,t))return}return r(e,...n)},yO={beforeMount(r,{value:t},{transition:e}){r._vod=r.style.display==="none"?"":r.style.display,e&&t?e.beforeEnter(r):Ms(r,t)},mounted(r,{value:t},{transition:e}){e&&t&&e.enter(r)},updated(r,{value:t,oldValue:e},{transition:n}){!t!=!e&&(n?t?(n.beforeEnter(r),Ms(r,!0),n.enter(r)):n.leave(r,()=>{Ms(r,!1)}):Ms(r,t))},beforeUnmount(r,{value:t}){Ms(r,t)}};function Ms(r,t){r.style.display=t?r._vod:"none"}const xO=Oe({patchProp:gO},tO);let Yg;function wO(){return Yg||(Yg=RT(xO))}const CO=(...r)=>{const t=wO().createApp(...r),{mount:e}=t;return t.mount=n=>{const i=SO(n);if(!i)return;const o=t._component;!Et(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const l=e(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),l},t};function SO(r){return Se(r)?document.querySelector(r):r}var bO=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const TO=Symbol();var Ug;(function(r){r.direct="direct",r.patchObject="patch object",r.patchFunction="patch function"})(Ug||(Ug={}));function OO(){const r=pb(!0),t=r.run(()=>ur({}));let e=[],n=[];const i=Ih({install(o){i._a=o,o.provide(TO,i),o.config.globalProperties.$pinia=i,n.forEach(l=>e.push(l)),n=[]},use(o){return!this._a&&!bO?n.push(o):e.push(o),this},_p:e,_a:null,_e:r,_s:new Map,state:t});return i}/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const zi=typeof window<"u";function EO(r){return r.__esModule||r[Symbol.toStringTag]==="Module"}const Jt=Object.assign;function Lc(r,t){const e={};for(const n in t){const i=t[n];e[n]=Yn(i)?i.map(r):r(i)}return e}const zs=()=>{},Yn=Array.isArray,PO=/\/$/,AO=r=>r.replace(PO,"");function Rc(r,t,e="/"){let n,i={},o="",l="";const c=t.indexOf("#");let h=t.indexOf("?");return c<h&&c>=0&&(h=-1),h>-1&&(n=t.slice(0,h),o=t.slice(h+1,c>-1?c:t.length),i=r(o)),c>-1&&(n=n||t.slice(0,c),l=t.slice(c,t.length)),n=LO(n??t,e),{fullPath:n+(o&&"?")+o+l,path:n,query:i,hash:l}}function DO(r,t){const e=t.query?r(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function zg(r,t){return!t||!r.toLowerCase().startsWith(t.toLowerCase())?r:r.slice(t.length)||"/"}function MO(r,t,e){const n=t.matched.length-1,i=e.matched.length-1;return n>-1&&n===i&&rs(t.matched[n],e.matched[i])&&Im(t.params,e.params)&&r(t.query)===r(e.query)&&t.hash===e.hash}function rs(r,t){return(r.aliasOf||r)===(t.aliasOf||t)}function Im(r,t){if(Object.keys(r).length!==Object.keys(t).length)return!1;for(const e in r)if(!kO(r[e],t[e]))return!1;return!0}function kO(r,t){return Yn(r)?Ng(r,t):Yn(t)?Ng(t,r):r===t}function Ng(r,t){return Yn(t)?r.length===t.length&&r.every((e,n)=>e===t[n]):r.length===1&&r[0]===t}function LO(r,t){if(r.startsWith("/"))return r;if(!r)return t;const e=t.split("/"),n=r.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let o=e.length-1,l,c;for(l=0;l<n.length;l++)if(c=n[l],c!==".")if(c==="..")o>1&&o--;else break;return e.slice(0,o).join("/")+"/"+n.slice(l-(l===n.length?1:0)).join("/")}var so;(function(r){r.pop="pop",r.push="push"})(so||(so={}));var Ns;(function(r){r.back="back",r.forward="forward",r.unknown=""})(Ns||(Ns={}));function RO(r){if(!r)if(zi){const t=document.querySelector("base");r=t&&t.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),AO(r)}const FO=/^[^#]+#/;function IO(r,t){return r.replace(FO,"#")+t}function BO(r,t){const e=document.documentElement.getBoundingClientRect(),n=r.getBoundingClientRect();return{behavior:t.behavior,left:n.left-e.left-(t.left||0),top:n.top-e.top-(t.top||0)}}const el=()=>({left:window.pageXOffset,top:window.pageYOffset});function jO(r){let t;if("el"in r){const e=r.el,n=typeof e=="string"&&e.startsWith("#"),i=typeof e=="string"?n?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!i)return;t=BO(i,r)}else t=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Vg(r,t){return(history.state?history.state.position-t:-1)+r}const ah=new Map;function WO(r,t){ah.set(r,t)}function XO(r){const t=ah.get(r);return ah.delete(r),t}let HO=()=>location.protocol+"//"+location.host;function Bm(r,t){const{pathname:e,search:n,hash:i}=t,o=r.indexOf("#");if(o>-1){let c=i.includes(r.slice(o))?r.slice(o).length:1,h=i.slice(c);return h[0]!=="/"&&(h="/"+h),zg(h,"")}return zg(e,r)+n+i}function YO(r,t,e,n){let i=[],o=[],l=null;const c=({state:_})=>{const v=Bm(r,location),w=e.value,E=t.value;let T=0;if(_){if(e.value=v,t.value=_,l&&l===w){l=null;return}T=E?_.position-E.position:0}else n(v);i.forEach(P=>{P(e.value,w,{delta:T,type:so.pop,direction:T?T>0?Ns.forward:Ns.back:Ns.unknown})})};function h(){l=e.value}function f(_){i.push(_);const v=()=>{const w=i.indexOf(_);w>-1&&i.splice(w,1)};return o.push(v),v}function d(){const{history:_}=window;_.state&&_.replaceState(Jt({},_.state,{scroll:el()}),"")}function p(){for(const _ of o)_();o=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:h,listen:f,destroy:p}}function Gg(r,t,e,n=!1,i=!1){return{back:r,current:t,forward:e,replaced:n,position:window.history.length,scroll:i?el():null}}function UO(r){const{history:t,location:e}=window,n={value:Bm(r,e)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(h,f,d){const p=r.indexOf("#"),_=p>-1?(e.host&&document.querySelector("base")?r:r.slice(p))+h:HO()+r+h;try{t[d?"replaceState":"pushState"](f,"",_),i.value=f}catch(v){console.error(v),e[d?"replace":"assign"](_)}}function l(h,f){const d=Jt({},t.state,Gg(i.value.back,h,i.value.forward,!0),f,{position:i.value.position});o(h,d,!0),n.value=h}function c(h,f){const d=Jt({},i.value,t.state,{forward:h,scroll:el()});o(d.current,d,!0);const p=Jt({},Gg(n.value,h,null),{position:d.position+1},f);o(h,p,!1),n.value=h}return{location:n,state:i,push:c,replace:l}}function zO(r){r=RO(r);const t=UO(r),e=YO(r,t.state,t.location,t.replace);function n(o,l=!0){l||e.pauseListeners(),history.go(o)}const i=Jt({location:"",base:r,go:n,createHref:IO.bind(null,r)},t,e);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function NO(r){return typeof r=="string"||r&&typeof r=="object"}function jm(r){return typeof r=="string"||typeof r=="symbol"}const Fr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Wm=Symbol("");var $g;(function(r){r[r.aborted=4]="aborted",r[r.cancelled=8]="cancelled",r[r.duplicated=16]="duplicated"})($g||($g={}));function is(r,t){return Jt(new Error,{type:r,[Wm]:!0},t)}function hr(r,t){return r instanceof Error&&Wm in r&&(t==null||!!(r.type&t))}const Kg="[^/]+?",VO={sensitive:!1,strict:!1,start:!0,end:!0},GO=/[.+*?^${}()[\]/\\]/g;function $O(r,t){const e=Jt({},VO,t),n=[];let i=e.start?"^":"";const o=[];for(const f of r){const d=f.length?[]:[90];e.strict&&!f.length&&(i+="/");for(let p=0;p<f.length;p++){const _=f[p];let v=40+(e.sensitive?.25:0);if(_.type===0)p||(i+="/"),i+=_.value.replace(GO,"\\$&"),v+=40;else if(_.type===1){const{value:w,repeatable:E,optional:T,regexp:P}=_;o.push({name:w,repeatable:E,optional:T});const R=P||Kg;if(R!==Kg){v+=10;try{new RegExp(`(${R})`)}catch(B){throw new Error(`Invalid custom RegExp for param "${w}" (${R}): `+B.message)}}let X=E?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;p||(X=T&&f.length<2?`(?:/${X})`:"/"+X),T&&(X+="?"),i+=X,v+=20,T&&(v+=-8),E&&(v+=-20),R===".*"&&(v+=-50)}d.push(v)}n.push(d)}if(e.strict&&e.end){const f=n.length-1;n[f][n[f].length-1]+=.7000000000000001}e.strict||(i+="/?"),e.end?i+="$":e.strict&&(i+="(?:/|$)");const l=new RegExp(i,e.sensitive?"":"i");function c(f){const d=f.match(l),p={};if(!d)return null;for(let _=1;_<d.length;_++){const v=d[_]||"",w=o[_-1];p[w.name]=v&&w.repeatable?v.split("/"):v}return p}function h(f){let d="",p=!1;for(const _ of r){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const v of _)if(v.type===0)d+=v.value;else if(v.type===1){const{value:w,repeatable:E,optional:T}=v,P=w in f?f[w]:"";if(Yn(P)&&!E)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const R=Yn(P)?P.join("/"):P;if(!R)if(T)_.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${w}"`);d+=R}}return d||"/"}return{re:l,score:n,keys:o,parse:c,stringify:h}}function KO(r,t){let e=0;for(;e<r.length&&e<t.length;){const n=t[e]-r[e];if(n)return n;e++}return r.length<t.length?r.length===1&&r[0]===40+40?-1:1:r.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function qO(r,t){let e=0;const n=r.score,i=t.score;for(;e<n.length&&e<i.length;){const o=KO(n[e],i[e]);if(o)return o;e++}if(Math.abs(i.length-n.length)===1){if(qg(n))return 1;if(qg(i))return-1}return i.length-n.length}function qg(r){const t=r[r.length-1];return r.length>0&&t[t.length-1]<0}const JO={type:0,value:""},ZO=/[a-zA-Z0-9_]/;function QO(r){if(!r)return[[]];if(r==="/")return[[JO]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function t(v){throw new Error(`ERR (${e})/"${f}": ${v}`)}let e=0,n=e;const i=[];let o;function l(){o&&i.push(o),o=[]}let c=0,h,f="",d="";function p(){f&&(e===0?o.push({type:0,value:f}):e===1||e===2||e===3?(o.length>1&&(h==="*"||h==="+")&&t(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:f,regexp:d,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):t("Invalid state to consume buffer"),f="")}function _(){f+=h}for(;c<r.length;){if(h=r[c++],h==="\\"&&e!==2){n=e,e=4;continue}switch(e){case 0:h==="/"?(f&&p(),l()):h===":"?(p(),e=1):_();break;case 4:_(),e=n;break;case 1:h==="("?e=2:ZO.test(h)?_():(p(),e=0,h!=="*"&&h!=="?"&&h!=="+"&&c--);break;case 2:h===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+h:e=3:d+=h;break;case 3:p(),e=0,h!=="*"&&h!=="?"&&h!=="+"&&c--,d="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${f}"`),p(),l(),i}function tE(r,t,e){const n=$O(QO(r.path),e),i=Jt(n,{record:r,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function eE(r,t){const e=[],n=new Map;t=Qg({strict:!1,end:!0,sensitive:!1},t);function i(d){return n.get(d)}function o(d,p,_){const v=!_,w=nE(d);w.aliasOf=_&&_.record;const E=Qg(t,d),T=[w];if("alias"in d){const X=typeof d.alias=="string"?[d.alias]:d.alias;for(const B of X)T.push(Jt({},w,{components:_?_.record.components:w.components,path:B,aliasOf:_?_.record:w}))}let P,R;for(const X of T){const{path:B}=X;if(p&&B[0]!=="/"){const $=p.record.path,tt=$[$.length-1]==="/"?"":"/";X.path=p.record.path+(B&&tt+B)}if(P=tE(X,p,E),_?_.alias.push(P):(R=R||P,R!==P&&R.alias.push(P),v&&d.name&&!Zg(P)&&l(d.name)),w.children){const $=w.children;for(let tt=0;tt<$.length;tt++)o($[tt],P,_&&_.children[tt])}_=_||P,(P.record.components&&Object.keys(P.record.components).length||P.record.name||P.record.redirect)&&h(P)}return R?()=>{l(R)}:zs}function l(d){if(jm(d)){const p=n.get(d);p&&(n.delete(d),e.splice(e.indexOf(p),1),p.children.forEach(l),p.alias.forEach(l))}else{const p=e.indexOf(d);p>-1&&(e.splice(p,1),d.record.name&&n.delete(d.record.name),d.children.forEach(l),d.alias.forEach(l))}}function c(){return e}function h(d){let p=0;for(;p<e.length&&qO(d,e[p])>=0&&(d.record.path!==e[p].record.path||!Xm(d,e[p]));)p++;e.splice(p,0,d),d.record.name&&!Zg(d)&&n.set(d.record.name,d)}function f(d,p){let _,v={},w,E;if("name"in d&&d.name){if(_=n.get(d.name),!_)throw is(1,{location:d});E=_.record.name,v=Jt(Jg(p.params,_.keys.filter(R=>!R.optional).map(R=>R.name)),d.params&&Jg(d.params,_.keys.map(R=>R.name))),w=_.stringify(v)}else if("path"in d)w=d.path,_=e.find(R=>R.re.test(w)),_&&(v=_.parse(w),E=_.record.name);else{if(_=p.name?n.get(p.name):e.find(R=>R.re.test(p.path)),!_)throw is(1,{location:d,currentLocation:p});E=_.record.name,v=Jt({},p.params,d.params),w=_.stringify(v)}const T=[];let P=_;for(;P;)T.unshift(P.record),P=P.parent;return{name:E,path:w,params:v,matched:T,meta:iE(T)}}return r.forEach(d=>o(d)),{addRoute:o,resolve:f,removeRoute:l,getRoutes:c,getRecordMatcher:i}}function Jg(r,t){const e={};for(const n of t)n in r&&(e[n]=r[n]);return e}function nE(r){return{path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:void 0,beforeEnter:r.beforeEnter,props:rE(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||null:r.component&&{default:r.component}}}function rE(r){const t={},e=r.props||!1;if("component"in r)t.default=e;else for(const n in r.components)t[n]=typeof e=="object"?e[n]:e;return t}function Zg(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function iE(r){return r.reduce((t,e)=>Jt(t,e.meta),{})}function Qg(r,t){const e={};for(const n in r)e[n]=n in t?t[n]:r[n];return e}function Xm(r,t){return t.children.some(e=>e===r||Xm(r,e))}const Hm=/#/g,sE=/&/g,oE=/\//g,aE=/=/g,lE=/\?/g,Ym=/\+/g,cE=/%5B/g,hE=/%5D/g,Um=/%5E/g,uE=/%60/g,zm=/%7B/g,fE=/%7C/g,Nm=/%7D/g,dE=/%20/g;function Nh(r){return encodeURI(""+r).replace(fE,"|").replace(cE,"[").replace(hE,"]")}function gE(r){return Nh(r).replace(zm,"{").replace(Nm,"}").replace(Um,"^")}function lh(r){return Nh(r).replace(Ym,"%2B").replace(dE,"+").replace(Hm,"%23").replace(sE,"%26").replace(uE,"`").replace(zm,"{").replace(Nm,"}").replace(Um,"^")}function pE(r){return lh(r).replace(aE,"%3D")}function mE(r){return Nh(r).replace(Hm,"%23").replace(lE,"%3F")}function _E(r){return r==null?"":mE(r).replace(oE,"%2F")}function Aa(r){try{return decodeURIComponent(""+r)}catch{}return""+r}function vE(r){const t={};if(r===""||r==="?")return t;const n=(r[0]==="?"?r.slice(1):r).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(Ym," "),l=o.indexOf("="),c=Aa(l<0?o:o.slice(0,l)),h=l<0?null:Aa(o.slice(l+1));if(c in t){let f=t[c];Yn(f)||(f=t[c]=[f]),f.push(h)}else t[c]=h}return t}function tp(r){let t="";for(let e in r){const n=r[e];if(e=pE(e),n==null){n!==void 0&&(t+=(t.length?"&":"")+e);continue}(Yn(n)?n.map(o=>o&&lh(o)):[n&&lh(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+e,o!=null&&(t+="="+o))})}return t}function yE(r){const t={};for(const e in r){const n=r[e];n!==void 0&&(t[e]=Yn(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const xE=Symbol(""),ep=Symbol(""),Vh=Symbol(""),Vm=Symbol(""),ch=Symbol("");function ks(){let r=[];function t(n){return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}function e(){r=[]}return{add:t,list:()=>r.slice(),reset:e}}function Wr(r,t,e,n,i){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((l,c)=>{const h=p=>{p===!1?c(is(4,{from:e,to:t})):p instanceof Error?c(p):NO(p)?c(is(2,{from:t,to:p})):(o&&n.enterCallbacks[i]===o&&typeof p=="function"&&o.push(p),l())},f=r.call(n&&n.instances[i],t,e,h);let d=Promise.resolve(f);r.length<3&&(d=d.then(h)),d.catch(p=>c(p))})}function Fc(r,t,e,n){const i=[];for(const o of r)for(const l in o.components){let c=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(wE(c)){const f=(c.__vccOpts||c)[t];f&&i.push(Wr(f,e,n,o,l))}else{let h=c();i.push(()=>h.then(f=>{if(!f)return Promise.reject(new Error(`Couldn't resolve component "${l}" at "${o.path}"`));const d=EO(f)?f.default:f;o.components[l]=d;const _=(d.__vccOpts||d)[t];return _&&Wr(_,e,n,o,l)()}))}}return i}function wE(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function np(r){const t=pr(Vh),e=pr(Vm),n=Ge(()=>t.resolve(Yr(r.to))),i=Ge(()=>{const{matched:h}=n.value,{length:f}=h,d=h[f-1],p=e.matched;if(!d||!p.length)return-1;const _=p.findIndex(rs.bind(null,d));if(_>-1)return _;const v=rp(h[f-2]);return f>1&&rp(d)===v&&p[p.length-1].path!==v?p.findIndex(rs.bind(null,h[f-2])):_}),o=Ge(()=>i.value>-1&&TE(e.params,n.value.params)),l=Ge(()=>i.value>-1&&i.value===e.matched.length-1&&Im(e.params,n.value.params));function c(h={}){return bE(h)?t[Yr(r.replace)?"replace":"push"](Yr(r.to)).catch(zs):Promise.resolve()}return{route:n,href:Ge(()=>n.value.href),isActive:o,isExactActive:l,navigate:c}}const CE=xi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:np,setup(r,{slots:t}){const e=$a(np(r)),{options:n}=pr(Vh),i=Ge(()=>({[ip(r.activeClass,n.linkActiveClass,"router-link-active")]:e.isActive,[ip(r.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const o=t.default&&t.default(e);return r.custom?o:Fm("a",{"aria-current":e.isExactActive?r.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:i.value},o)}}}),SE=CE;function bE(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const t=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return r.preventDefault&&r.preventDefault(),!0}}function TE(r,t){for(const e in t){const n=t[e],i=r[e];if(typeof n=="string"){if(n!==i)return!1}else if(!Yn(i)||i.length!==n.length||n.some((o,l)=>o!==i[l]))return!1}return!0}function rp(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const ip=(r,t,e)=>r??t??e,OE=xi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(r,{attrs:t,slots:e}){const n=pr(ch),i=Ge(()=>r.route||n.value),o=pr(ep,0),l=Ge(()=>{let f=Yr(o);const{matched:d}=i.value;let p;for(;(p=d[f])&&!p.components;)f++;return f}),c=Ge(()=>i.value.matched[l.value]);xa(ep,Ge(()=>l.value+1)),xa(xE,c),xa(ch,i);const h=ur();return ya(()=>[h.value,c.value,r.name],([f,d,p],[_,v,w])=>{d&&(d.instances[p]=f,v&&v!==d&&f&&f===_&&(d.leaveGuards.size||(d.leaveGuards=v.leaveGuards),d.updateGuards.size||(d.updateGuards=v.updateGuards))),f&&d&&(!v||!rs(d,v)||!_)&&(d.enterCallbacks[p]||[]).forEach(E=>E(f))},{flush:"post"}),()=>{const f=i.value,d=r.name,p=c.value,_=p&&p.components[d];if(!_)return sp(e.default,{Component:_,route:f});const v=p.props[d],w=v?v===!0?f.params:typeof v=="function"?v(f):v:null,T=Fm(_,Jt({},w,t,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(p.instances[d]=null)},ref:h}));return sp(e.default,{Component:T,route:f})||T}}});function sp(r,t){if(!r)return null;const e=r(t);return e.length===1?e[0]:e}const Gm=OE;function EE(r){const t=eE(r.routes,r),e=r.parseQuery||vE,n=r.stringifyQuery||tp,i=r.history,o=ks(),l=ks(),c=ks(),h=zb(Fr);let f=Fr;zi&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Lc.bind(null,U=>""+U),p=Lc.bind(null,_E),_=Lc.bind(null,Aa);function v(U,et){let J,ut;return jm(U)?(J=t.getRecordMatcher(U),ut=et):ut=U,t.addRoute(ut,J)}function w(U){const et=t.getRecordMatcher(U);et&&t.removeRoute(et)}function E(){return t.getRoutes().map(U=>U.record)}function T(U){return!!t.getRecordMatcher(U)}function P(U,et){if(et=Jt({},et||h.value),typeof U=="string"){const L=Rc(e,U,et.path),j=t.resolve({path:L.path},et),z=i.createHref(L.fullPath);return Jt(L,j,{params:_(j.params),hash:Aa(L.hash),redirectedFrom:void 0,href:z})}let J;if("path"in U)J=Jt({},U,{path:Rc(e,U.path,et.path).path});else{const L=Jt({},U.params);for(const j in L)L[j]==null&&delete L[j];J=Jt({},U,{params:p(L)}),et.params=p(et.params)}const ut=t.resolve(J,et),Bt=U.hash||"";ut.params=d(_(ut.params));const C=DO(n,Jt({},U,{hash:gE(Bt),path:ut.path})),b=i.createHref(C);return Jt({fullPath:C,hash:Bt,query:n===tp?yE(U.query):U.query||{}},ut,{redirectedFrom:void 0,href:b})}function R(U){return typeof U=="string"?Rc(e,U,h.value.path):Jt({},U)}function X(U,et){if(f!==U)return is(8,{from:et,to:U})}function B(U){return nt(U)}function $(U){return B(Jt(R(U),{replace:!0}))}function tt(U){const et=U.matched[U.matched.length-1];if(et&&et.redirect){const{redirect:J}=et;let ut=typeof J=="function"?J(U):J;return typeof ut=="string"&&(ut=ut.includes("?")||ut.includes("#")?ut=R(ut):{path:ut},ut.params={}),Jt({query:U.query,hash:U.hash,params:"path"in ut?{}:U.params},ut)}}function nt(U,et){const J=f=P(U),ut=h.value,Bt=U.state,C=U.force,b=U.replace===!0,L=tt(J);if(L)return nt(Jt(R(L),{state:typeof L=="object"?Jt({},Bt,L.state):Bt,force:C,replace:b}),et||J);const j=J;j.redirectedFrom=et;let z;return!C&&MO(n,ut,J)&&(z=is(16,{to:j,from:ut}),Ht(ut,ut,!0,!1)),(z?Promise.resolve(z):Pt(j,ut)).catch(N=>hr(N)?hr(N,2)?N:Ft(N):pt(N,j,ut)).then(N=>{if(N){if(hr(N,2))return nt(Jt({replace:b},R(N.to),{state:typeof N.to=="object"?Jt({},Bt,N.to.state):Bt,force:C}),et||j)}else N=ot(j,ut,!0,b,Bt);return Zt(j,ut,N),N})}function st(U,et){const J=X(U,et);return J?Promise.reject(J):Promise.resolve()}function Dt(U){const et=Je.values().next().value;return et&&typeof et.runWithContext=="function"?et.runWithContext(U):U()}function Pt(U,et){let J;const[ut,Bt,C]=PE(U,et);J=Fc(ut.reverse(),"beforeRouteLeave",U,et);for(const L of ut)L.leaveGuards.forEach(j=>{J.push(Wr(j,U,et))});const b=st.bind(null,U,et);return J.push(b),he(J).then(()=>{J=[];for(const L of o.list())J.push(Wr(L,U,et));return J.push(b),he(J)}).then(()=>{J=Fc(Bt,"beforeRouteUpdate",U,et);for(const L of Bt)L.updateGuards.forEach(j=>{J.push(Wr(j,U,et))});return J.push(b),he(J)}).then(()=>{J=[];for(const L of C)if(L.beforeEnter)if(Yn(L.beforeEnter))for(const j of L.beforeEnter)J.push(Wr(j,U,et));else J.push(Wr(L.beforeEnter,U,et));return J.push(b),he(J)}).then(()=>(U.matched.forEach(L=>L.enterCallbacks={}),J=Fc(C,"beforeRouteEnter",U,et),J.push(b),he(J))).then(()=>{J=[];for(const L of l.list())J.push(Wr(L,U,et));return J.push(b),he(J)}).catch(L=>hr(L,8)?L:Promise.reject(L))}function Zt(U,et,J){c.list().forEach(ut=>Dt(()=>ut(U,et,J)))}function ot(U,et,J,ut,Bt){const C=X(U,et);if(C)return C;const b=et===Fr,L=zi?history.state:{};J&&(ut||b?i.replace(U.fullPath,Jt({scroll:b&&L&&L.scroll},Bt)):i.push(U.fullPath,Bt)),h.value=U,Ht(U,et,J,b),Ft()}let ct;function ht(){ct||(ct=i.listen((U,et,J)=>{if(!Ze.listening)return;const ut=P(U),Bt=tt(ut);if(Bt){nt(Jt(Bt,{replace:!0}),ut).catch(zs);return}f=ut;const C=h.value;zi&&WO(Vg(C.fullPath,J.delta),el()),Pt(ut,C).catch(b=>hr(b,12)?b:hr(b,2)?(nt(b.to,ut).then(L=>{hr(L,20)&&!J.delta&&J.type===so.pop&&i.go(-1,!1)}).catch(zs),Promise.reject()):(J.delta&&i.go(-J.delta,!1),pt(b,ut,C))).then(b=>{b=b||ot(ut,C,!1),b&&(J.delta&&!hr(b,8)?i.go(-J.delta,!1):J.type===so.pop&&hr(b,20)&&i.go(-1,!1)),Zt(ut,C,b)}).catch(zs)}))}let gt=ks(),Mt=ks(),xt;function pt(U,et,J){Ft(U);const ut=Mt.list();return ut.length?ut.forEach(Bt=>Bt(U,et,J)):console.error(U),Promise.reject(U)}function Le(){return xt&&h.value!==Fr?Promise.resolve():new Promise((U,et)=>{gt.add([U,et])})}function Ft(U){return xt||(xt=!U,ht(),gt.list().forEach(([et,J])=>U?J(U):et()),gt.reset()),U}function Ht(U,et,J,ut){const{scrollBehavior:Bt}=r;if(!zi||!Bt)return Promise.resolve();const C=!J&&XO(Vg(U.fullPath,0))||(ut||!J)&&history.state&&history.state.scroll||null;return Wh().then(()=>Bt(U,et,C)).then(b=>b&&jO(b)).catch(b=>pt(b,U,et))}const Vt=U=>i.go(U);let Ut;const Je=new Set,Ze={currentRoute:h,listening:!0,addRoute:v,removeRoute:w,hasRoute:T,getRoutes:E,resolve:P,options:r,push:B,replace:$,go:Vt,back:()=>Vt(-1),forward:()=>Vt(1),beforeEach:o.add,beforeResolve:l.add,afterEach:c.add,onError:Mt.add,isReady:Le,install(U){const et=this;U.component("RouterLink",SE),U.component("RouterView",Gm),U.config.globalProperties.$router=et,Object.defineProperty(U.config.globalProperties,"$route",{enumerable:!0,get:()=>Yr(h)}),zi&&!Ut&&h.value===Fr&&(Ut=!0,B(i.location).catch(Bt=>{}));const J={};for(const Bt in Fr)Object.defineProperty(J,Bt,{get:()=>h.value[Bt],enumerable:!0});U.provide(Vh,et),U.provide(Vm,rm(J)),U.provide(ch,h);const ut=U.unmount;Je.add(U),U.unmount=function(){Je.delete(U),Je.size<1&&(f=Fr,ct&&ct(),ct=null,h.value=Fr,Ut=!1,xt=!1),ut()}}};function he(U){return U.reduce((et,J)=>et.then(()=>Dt(J)),Promise.resolve())}return Ze}function PE(r,t){const e=[],n=[],i=[],o=Math.max(t.matched.length,r.matched.length);for(let l=0;l<o;l++){const c=t.matched[l];c&&(r.matched.find(f=>rs(f,c))?n.push(c):e.push(c));const h=r.matched[l];h&&(t.matched.find(f=>rs(f,h))||i.push(h))}return[e,n,i]}const AE=xi({__name:"App",setup(r){return(t,e)=>(on(),ro(Yr(Gm)))}});const DE=(r,t)=>{const e=r.__vccOpts||r;for(const[n,i]of t)e[n]=i;return e},ME=DE(AE,[["__scopeId","data-v-651df105"]]),kE="modulepreload",LE=function(r){return"/"+r},op={},RE=function(t,e,n){if(!e||e.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(e.map(o=>{if(o=LE(o),o in op)return;op[o]=!0;const l=o.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(!!n)for(let d=i.length-1;d>=0;d--){const p=i[d];if(p.href===o&&(!l||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":kE,l||(f.as="script",f.crossOrigin=""),f.href=o,document.head.appendChild(f),l)return new Promise((d,p)=>{f.addEventListener("load",d),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})},FE="/assets/ig-logo-96f41ae6.png";function ap(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function D(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ap(Object(e),!0).forEach(function(n){M(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ap(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function M(r,t,e){return t=$m(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function IE(r,t){if(r==null)return{};var e={},n=Object.keys(r),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(e[i]=r[i]);return e}function re(r,t){if(r==null)return{};var e=IE(r,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function Qn(r,t){return t||(t=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(t)}}))}function BE(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function $m(r){var t=BE(r,"string");return typeof t=="symbol"?t:String(t)}class lp{constructor(){M(this,"browserShadowBlurConstant",1),M(this,"DPI",96),M(this,"devicePixelRatio",1),M(this,"perfLimitSizeTotal",2097152),M(this,"maxCacheSideLimit",4096),M(this,"minCacheSideLimit",256),M(this,"disableStyleCopyPaste",!1),M(this,"enableGLFiltering",!0),M(this,"textureSize",4096),M(this,"forceGLPutImageData",!1),M(this,"cachesBoundsOfCurve",!0),M(this,"fontPaths",{}),M(this,"NUM_FRACTION_DIGITS",4)}}class jE extends lp{constructor(t){super(),this.configure(t)}configure(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,t)}addFonts(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=D(D({},this.fontPaths),t)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(e=>{delete this.fontPaths[e]})}clearFonts(){this.fontPaths={}}restoreDefaults(t){const e=new lp,n=(t==null?void 0:t.reduce((i,o)=>(i[o]=e[o],i),{}))||e;this.configure(n)}}const Lt=new jE;class WE{}class XE extends WE{testPrecision(t,e){const n="precision ".concat(e,` float;
void main(){}`),i=t.createShader(t.FRAGMENT_SHADER);return i?(t.shaderSource(i,n),t.compileShader(i),!!t.getShaderParameter(i,t.COMPILE_STATUS)):!1}queryWebGL(t){const e=t.getContext("webgl");e&&(this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(n=>this.testPrecision(e,n)),console.log("fabric: max texture size ".concat(this.maxTextureSize)))}isSupported(t){return!!this.maxTextureSize&&this.maxTextureSize>=t}}const HE={};let cp=!1,hp;const YE=()=>(cp||(Lt.configure({devicePixelRatio:window.devicePixelRatio||1}),hp="ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,cp=!0),{document,window,isTouchSupported:hp,WebGLProbe:new XE,dispose(){},copyPasteData:HE}),Zn=()=>YE(),us=()=>Zn().document,fi=()=>Zn().window;class UE{constructor(){M(this,"charWidthsCache",{}),M(this,"boundsOfCurveCache",{})}getFontCache(t){let{fontFamily:e,fontStyle:n,fontWeight:i}=t;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const o=this.charWidthsCache[e],l="".concat(n.toLowerCase(),"_").concat((i+"").toLowerCase());return o[l]||(o[l]={}),o[l]}clearFontCache(t){t=(t||"").toLowerCase(),t?this.charWidthsCache[t]&&delete this.charWidthsCache[t]:this.charWidthsCache={}}limitDimsByArea(t){const{perfLimitSizeTotal:e}=Lt,n=Math.sqrt(e*t);return[Math.floor(n),Math.floor(e/n)]}}const Vs=new UE;var zE="6.0.0-beta13";const hh=zE;function mi(){}const xr=Math.PI/2,vr=Math.PI*2,Gh=Math.PI/180,vn=Object.freeze([1,0,0,1,0,0]),$h=16,up=2,Ir=1-.5522847498,fp=1,da=2,ga=3,Tt="center",Nt="left",We="top",uh="bottom",ve="right",ln="none",Kh=/\r?\n/,Ls="json",Ic="svg";class NE{constructor(){this[Ls]=new Map,this[Ic]=new Map}getClass(t){const e=this[Ls].get(t);if(!e)throw new Error("No class registered for ".concat(t));return e}setClass(t,e){e?this[Ls].set(e,t):(this[Ls].set(t.type,t),this[Ls].set(t.type.toLowerCase(),t))}getSVGClass(t){return this[Ic].get(t)}setSVGClass(t,e){this[Ic].set(e??t.type.toLowerCase(),t)}}const ft=new NE;class VE extends Array{remove(t){const e=this.indexOf(t);e>-1&&this.splice(e,1)}cancelAll(){const t=this.splice(0);return t.forEach(e=>e.abort()),t}cancelByCanvas(t){if(!t)return[];const e=this.filter(n=>{var i;return typeof n.target=="object"&&((i=n.target)===null||i===void 0?void 0:i.canvas)===t});return e.forEach(n=>n.abort()),e}cancelByTarget(t){if(!t)return[];const e=this.filter(n=>n.target===t);return e.forEach(n=>n.abort()),e}}const fh=new VE;class GE{constructor(){M(this,"__eventListeners",{})}on(t,e){if(this.__eventListeners||(this.__eventListeners={}),typeof t=="object")return Object.entries(t).forEach(n=>{let[i,o]=n;this.on(i,o)}),()=>this.off(t);if(e){const n=t;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(e),()=>this.off(n,e)}else return()=>!1}once(t,e){if(typeof t=="object"){const n=[];return Object.entries(t).forEach(i=>{let[o,l]=i;n.push(this.once(o,l))}),()=>n.forEach(i=>i())}else if(e){const n=this.on(t,function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];e.call(this,...l),n()});return n}else return()=>!1}_removeEventListener(t,e){if(this.__eventListeners[t])if(e){const n=this.__eventListeners[t],i=n.indexOf(e);i>-1&&n.splice(i,1)}else this.__eventListeners[t]=[]}off(t,e){if(this.__eventListeners)if(typeof t>"u")for(const n in this.__eventListeners)this._removeEventListener(n);else typeof t=="object"?Object.entries(t).forEach(n=>{let[i,o]=n;this._removeEventListener(i,o)}):this._removeEventListener(t,e)}fire(t,e){var n;if(!this.__eventListeners)return;const i=(n=this.__eventListeners[t])===null||n===void 0?void 0:n.concat();if(i)for(let o=0;o<i.length;o++)i[o].call(this,e||{})}}const $E=(r,t)=>{for(let e=r.length-1;e>=0;e--)if(t(r[e],e,r))return e;return-1},KE=(r,t)=>Math.floor(Math.random()*(t-r+1))+r,Ni=(r,t)=>isNaN(r)&&typeof t=="number"?t:r,hi=(r,t)=>{const e=r.indexOf(t);return e!==-1&&r.splice(e,1),r},Ke=r=>{if(r===0)return 1;switch(Math.abs(r)/xr){case 1:case 3:return 0;case 2:return-1}return Math.cos(r)},qe=r=>{if(r===0)return 0;const t=r/xr,e=Math.sign(r);switch(t){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(r)};class F{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof t=="object"?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}add(t){return new F(this.x+t.x,this.y+t.y)}addEquals(t){return this.x+=t.x,this.y+=t.y,this}scalarAdd(t){return new F(this.x+t,this.y+t)}scalarAddEquals(t){return this.x+=t,this.y+=t,this}subtract(t){return new F(this.x-t.x,this.y-t.y)}subtractEquals(t){return this.x-=t.x,this.y-=t.y,this}scalarSubtract(t){return new F(this.x-t,this.y-t)}scalarSubtractEquals(t){return this.x-=t,this.y-=t,this}multiply(t){return new F(this.x*t.x,this.y*t.y)}scalarMultiply(t){return new F(this.x*t,this.y*t)}scalarMultiplyEquals(t){return this.x*=t,this.y*=t,this}divide(t){return new F(this.x/t.x,this.y/t.y)}scalarDivide(t){return new F(this.x/t,this.y/t)}scalarDivideEquals(t){return this.x/=t,this.y/=t,this}eq(t){return this.x===t.x&&this.y===t.y}lt(t){return this.x<t.x&&this.y<t.y}lte(t){return this.x<=t.x&&this.y<=t.y}gt(t){return this.x>t.x&&this.y>t.y}gte(t){return this.x>=t.x&&this.y>=t.y}lerp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return e=Math.max(Math.min(1,e),0),new F(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)}distanceFrom(t){const e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}midPointFrom(t){return this.lerp(t)}min(t){return new F(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new F(Math.max(this.x,t.x),Math.max(this.y,t.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPoint(t){return this.x=t.x,this.y=t.y,this}swap(t){const e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n}clone(){return new F(this.x,this.y)}rotate(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qE;const n=qe(t),i=Ke(t),o=this.subtract(e);return new F(o.x*i-o.y*n,o.x*n+o.y*i).add(e)}transform(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new F(t[0]*this.x+t[2]*this.y+(e?0:t[4]),t[1]*this.x+t[3]*this.y+(e?0:t[5]))}}const qE=new F(0,0);function Km(r){class t extends r{constructor(){super(...arguments),M(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];const l=this._objects.push(...i);return i.forEach(c=>this._onObjectAdded(c)),l}insertAt(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return this._objects.splice(n,0,...o),o.forEach(c=>this._onObjectAdded(c)),this._objects.length}remove(){const n=this._objects,i=[];for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return l.forEach(h=>{const f=n.indexOf(h);f!==-1&&(n.splice(f,1),i.push(h),this._onObjectRemoved(h))}),i}forEachObject(n){this.getObjects().forEach((i,o,l)=>n(i,o,l))}getObjects(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return i.length===0?[...this._objects]:this._objects.filter(l=>l.isType(...i))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,i){return this._objects.includes(n)?!0:i?this._objects.some(o=>o instanceof t&&o.contains(n,!0)):!1}complexity(){return this._objects.reduce((n,i)=>(n+=i.complexity?i.complexity():0,n),0)}sendObjectToBack(n){return!n||n===this._objects[0]?!1:(hi(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!n||n===this._objects[this._objects.length-1]?!1:(hi(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,i){if(!n)return!1;const o=this._objects.indexOf(n);if(o!==0){const l=this.findNewLowerIndex(n,o,i);return hi(this._objects,n),this._objects.splice(l,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,i){if(!n)return!1;const o=this._objects.indexOf(n);if(o!==this._objects.length-1){const l=this.findNewUpperIndex(n,o,i);return hi(this._objects,n),this._objects.splice(l,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,i){return n===this._objects[i]?!1:(hi(this._objects,n),this._objects.splice(i,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,i,o){let l;if(o){l=i;for(let c=i-1;c>=0;--c)if(n.isOverlapping(this._objects[c])){l=c;break}}else l=i-1;return l}findNewUpperIndex(n,i,o){let l;if(o){l=i;for(let c=i+1;c<this._objects.length;++c)if(n.isOverlapping(this._objects[c])){l=c;break}}else l=i+1;return l}collectObjects(n){let{left:i,top:o,width:l,height:c}=n,{includeIntersecting:h=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const f=[],d=new F(i,o),p=d.add(new F(l,c));for(let _=this._objects.length-1;_>=0;_--){const v=this._objects[_];v.selectable&&v.visible&&(h&&v.intersectsWithRect(d,p,!0)||v.isContainedWithinRect(d,p,!0)||h&&v.containsPoint(d,void 0,!0)||h&&v.containsPoint(p,void 0,!0))&&f.push(v)}return f}}return t}class qm extends GE{_setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const e in t)this.set(e,t[e])}_setObject(t){for(const e in t)this._set(e,t[e])}set(t,e){return typeof t=="object"?this._setObject(t):this._set(t,e),this}_set(t,e){this[t]=e}toggle(t){const e=this.get(t);return typeof e=="boolean"&&this.set(t,!e),this}get(t){return this[t]}}function Gs(r){return fi().requestAnimationFrame(r)}function Jm(r){return fi().cancelAnimationFrame(r)}let JE=0;const Vr=()=>JE++,pe=()=>{const r=us().createElement("canvas");if(!r||typeof r.getContext>"u")throw new Error("Failed to create `canvas` element");return r},Zm=()=>us().createElement("img"),ZE=r=>{var t;const e=pe();return e.width=r.width,e.height=r.height,(t=e.getContext("2d"))===null||t===void 0||t.drawImage(r,0,0),e},qh=(r,t,e)=>r.toDataURL("image/".concat(t),e),QE=r=>!!r&&r.getContext!==void 0,ne=r=>r*Gh,ss=r=>r/Gh,t2=["translateX","translateY","angle"],e2=r=>r.every((t,e)=>t===vn[e]),fe=(r,t,e)=>new F(r).transform(t,e),Me=r=>{const t=1/(r[0]*r[3]-r[1]*r[2]),e=[t*r[3],-t*r[1],-t*r[2],t*r[0],0,0],{x:n,y:i}=new F(r[4],r[5]).transform(e,!0);return e[4]=-n,e[5]=-i,e},ke=(r,t,e)=>[r[0]*t[0]+r[2]*t[1],r[1]*t[0]+r[3]*t[1],r[0]*t[2]+r[2]*t[3],r[1]*t[2]+r[3]*t[3],e?0:r[0]*t[4]+r[2]*t[5]+r[4],e?0:r[1]*t[4]+r[3]*t[5]+r[5]],nl=(r,t)=>r.reduceRight((e,n)=>n?ke(n,e,t):e,vn),vi=r=>{const t=Math.atan2(r[1],r[0]),e=Math.pow(r[0],2)+Math.pow(r[1],2),n=Math.sqrt(e),i=(r[0]*r[3]-r[2]*r[1])/n,o=Math.atan2(r[0]*r[2]+r[1]*r[3],e);return{angle:ss(t),scaleX:n,scaleY:i,skewX:ss(o),skewY:0,translateX:r[4]||0,translateY:r[5]||0}},ho=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return[1,0,0,1,r,t]};function uo(){let{angle:r=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:t=0,y:e=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=ne(r),i=Ke(n),o=qe(n);return[i,o,-o,i,t?t-(i*t-o*e):0,e?e-(o*t+i*e):0]}const Jh=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r;return[r,0,0,t,0,0]},Qm=r=>Math.tan(ne(r)),Zh=r=>[1,0,Qm(r),1,0,0],Qh=r=>[1,Qm(r),0,1,0,0],rl=r=>{let{scaleX:t=1,scaleY:e=1,flipX:n=!1,flipY:i=!1,skewX:o=0,skewY:l=0}=r;return nl([Jh(n?-t:t,i?-e:e),o&&Zh(o),l&&Qh(l)],!0)},t0=r=>{let{translateX:t=0,translateY:e=0,angle:n=0}=r,i=re(r,t2);return nl([ho(t,e),n&&uo({angle:n}),rl(i)])},$s=function(r){let{signal:t,crossOrigin:e=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,i){if(t&&t.aborted)return i(new Error("`options.signal` is in `aborted` state"));const o=Zm();let l;t&&(l=function(h){o.src="",i(h)},t.addEventListener("abort",l,{once:!0}));const c=function(){o.onload=o.onerror=null,l&&(t==null||t.removeEventListener("abort",l)),n(o)};if(!r){c();return}o.onload=c,o.onerror=function(){l&&(t==null||t.removeEventListener("abort",l)),i(new Error("Error loading "+o.src))},e&&(o.crossOrigin=e),o.src=r})},os=function(r){let{signal:t,reviver:e=mi}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,i)=>{const o=[];t&&t.addEventListener("abort",i,{once:!0}),Promise.all(r.map(l=>ft.getClass(l.type).fromObject(l,{signal:t,reviver:e}).then(c=>(e(l,c),o.push(c),c)))).then(n).catch(l=>{o.forEach(c=>{c.dispose&&c.dispose()}),i(l)}).finally(()=>{t&&t.removeEventListener("abort",i)})})},fo=function(r){let{signal:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((e,n)=>{const i=[];t&&t.addEventListener("abort",n,{once:!0});const o=Object.values(r).map(c=>c&&(c.colorStops?new(ft.getClass("gradient"))(c):c.type?os([c],{signal:t}).then(h=>{let[f]=h;return i.push(f),f}):c.source?ft.getClass("pattern").fromObject(c,{signal:t}).then(h=>(i.push(h),h)):c)),l=Object.keys(r);Promise.all(o).then(c=>c.reduce((h,f,d)=>(h[l[d]]=f,h),{})).then(e).catch(c=>{i.forEach(h=>{h.dispose&&h.dispose()}),n(c)}).finally(()=>{t&&t.removeEventListener("abort",n)})})},wi=function(r){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,n)=>(n in r&&(e[n]=r[n]),e),{})},e0=(r,t)=>Object.keys(r).reduce((e,n)=>(t(r[n],n,r)&&(e[n]=r[n]),e),{}),dp={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},n2=()=>/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i,r2=()=>/^hsla?\(\s*([+-]?\d{1,3})\s*[\s|,]\s*(\d{1,3}%)\s*[\s|,]\s*(\d{1,3}%)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i,i2=()=>/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i,Bc=(r,t,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+(t-r)*6*e:e<1/2?t:e<2/3?r+(t-r)*(2/3-e)*6:r),gp=(r,t,e,n)=>{r/=255,t/=255,e/=255;const i=Math.max(r,t,e),o=Math.min(r,t,e);let l,c;const h=(i+o)/2;if(i===o)l=c=0;else{const f=i-o;switch(c=h>.5?f/(2-i-o):f/(i+o),i){case r:l=(t-e)/f+(t<e?6:0);break;case t:l=(e-r)/f+2;break;case e:l=(r-t)/f+4;break}l/=6}return[Math.round(l*360),Math.round(c*100),Math.round(h*100),n]},pp=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(r)/(r.endsWith("%")?100:1)},pa=r=>Math.min(Math.round(r),255).toString(16).toUpperCase().padStart(2,"0"),mp=r=>{let[t,e,n,i=1]=r;const o=Math.round(t*.3+e*.59+n*.11);return[o,o,o,i]};class Qt{constructor(t){if(!t)this.setSource([0,0,0,1]);else if(t instanceof Qt)this.setSource([...t._source]);else if(Array.isArray(t)){const[e,n,i,o=1]=t;this.setSource([e,n,i,o])}else this.setSource(this._tryParsingColor(t))}_tryParsingColor(t){return t in dp&&(t=dp[t]),t==="transparent"?[255,255,255,0]:Qt.sourceFromHex(t)||Qt.sourceFromRgb(t)||Qt.sourceFromHsl(t)||[0,0,0,1]}getSource(){return this._source}setSource(t){this._source=t}toRgb(){const[t,e,n]=this.getSource();return"rgb(".concat(t,",").concat(e,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[t,e,n]=gp(...this.getSource());return"hsl(".concat(t,",").concat(e,"%,").concat(n,"%)")}toHsla(){const[t,e,n,i]=gp(...this.getSource());return"hsla(".concat(t,",").concat(e,"%,").concat(n,"%,").concat(i,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[t,e,n,i]=this.getSource();return"".concat(pa(t)).concat(pa(e)).concat(pa(n)).concat(pa(Math.round(i*255)))}getAlpha(){return this.getSource()[3]}setAlpha(t){return this._source[3]=t,this}toGrayscale(){return this.setSource(mp(this.getSource())),this}toBlackWhite(t){const[e,,,n]=mp(this.getSource()),i=e<(t||127)?0:255;return this.setSource([i,i,i,n]),this}overlayWith(t){t instanceof Qt||(t=new Qt(t));const e=this.getSource(),n=.5,i=t.getSource(),[o,l,c]=e.map((h,f)=>Math.round(h*(1-n)+i[f]*n));return this.setSource([o,l,c,e[3]]),this}static fromRgb(t){return Qt.fromRgba(t)}static fromRgba(t){return new Qt(Qt.sourceFromRgb(t))}static sourceFromRgb(t){const e=t.match(n2());if(e){const[n,i,o]=e.slice(1,4).map(l=>{const c=parseFloat(l);return l.endsWith("%")?Math.round(c*2.55):c});return[n,i,o,pp(e[4])]}}static fromHsl(t){return Qt.fromHsla(t)}static fromHsla(t){return new Qt(Qt.sourceFromHsl(t))}static sourceFromHsl(t){const e=t.match(r2());if(!e)return;const n=(parseFloat(e[1])%360+360)%360/360,i=parseFloat(e[2])/100,o=parseFloat(e[3])/100;let l,c,h;if(i===0)l=c=h=o;else{const f=o<=.5?o*(i+1):o+i-o*i,d=o*2-f;l=Bc(d,f,n+1/3),c=Bc(d,f,n),h=Bc(d,f,n-1/3)}return[Math.round(l*255),Math.round(c*255),Math.round(h*255),pp(e[4])]}static fromHex(t){return new Qt(Qt.sourceFromHex(t))}static sourceFromHex(t){if(t.match(i2())){const e=t.slice(t.indexOf("#")+1),n=e.length<=4;let i;n?i=e.split("").map(f=>f+f):i=e.match(/.{2}/g);const[o,l,c,h=255]=i.map(f=>parseInt(f,16));return[o,l,c,h/255]}}}const Xt=(r,t)=>parseFloat(Number(r).toFixed(t)),s2=r=>{const t=["instantiated_by_use","style","id","class"];switch(r){case"linearGradient":return t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return t.concat(["offset","stop-color","stop-opacity"])}return t},_i=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$h;const e=/\D{0,2}$/.exec(r),n=parseFloat(r),i=Lt.DPI;switch(e==null?void 0:e[0]){case"mm":return n*i/25.4;case"cm":return n*i/2.54;case"in":return n*i;case"pt":return n*i/72;case"pc":return n*i/72*12;case"em":return n*t;default:return n}},o2=r=>r&&r!==ln?[r.slice(1,4),r.slice(5,8)]:r===ln?[r,r]:["Mid","Mid"],n0=r=>{const[t,e]=r.trim().split(" "),[n,i]=o2(t);return{meetOrSlice:e||"meet",alignX:n,alignY:i}},oo=r=>"matrix("+r.map(t=>Xt(t,Lt.NUM_FRACTION_DIGITS)).join(" ")+")",ao=(r,t)=>{if(t){if(t.toLive)return"".concat(r,": url(#SVGID_").concat(t.id,"); ");{const e=new Qt(t),n=e.getAlpha();let i="".concat(r,": ").concat(e.toRgb(),"; ");return n!==1&&(i+="".concat(r,"-opacity: ").concat(n.toString(),"; ")),i}}else return"".concat(r,": none; ")},a2=function(r,t){let{left:e,top:n,width:i,height:o}=t,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Lt.NUM_FRACTION_DIGITS;const c=ao("fill",r),[h,f,d,p]=[e,n,i,o].map(_=>Xt(_,l));return"<rect ".concat(c,' x="').concat(h,'" y="').concat(f,'" width="').concat(d,'" height="').concat(p,'"></rect>')},An=r=>!!r&&r.toLive!==void 0,_p=r=>!!r&&typeof r.toObject=="function",vp=r=>!!r&&r.offsetX!==void 0&&r.source!==void 0,dh=r=>!!r&&Array.isArray(r._objects),l2=r=>!!r&&r.isType("ActiveSelection"),r0=r=>!!r&&r.isType("Text","IText","Textbox"),c2=r=>!!r&&r.isType("Path"),Ca=r=>!!r&&r.isType("IText","Textbox"),yp=r=>!!r&&typeof r.onDragStart=="function"&&typeof r.shouldStartDragging=="function";function i0(r){const t=r&&Bn(r);let e=0,n=0;if(!r||!t)return{left:e,top:n};const i=t.documentElement,o=t.body||{scrollLeft:0,scrollTop:0};for(;r&&(r.parentNode||r.host)&&(r=r.parentNode||r.host,r===t?(e=o.scrollLeft||i.scrollLeft||0,n=o.scrollTop||i.scrollTop||0):(e+=r.scrollLeft||0,n+=r.scrollTop||0),!(r.nodeType===1&&r.style.position==="fixed")););return{left:e,top:n}}const Bn=r=>r.ownerDocument||null,s0=r=>{var t;return((t=r.ownerDocument)===null||t===void 0?void 0:t.defaultView)||null};function lo(r,t){const e=r.style;if(e)typeof t=="string"?r.style.cssText+=";"+t:Object.entries(t).forEach(n=>{let[i,o]=n;return e.setProperty(i,o)});else return}const o0=function(r,t,e){let{width:n,height:i}=e,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;r.width=n,r.height=i,o>1&&(r.setAttribute("width",(n*o).toString()),r.setAttribute("height",(i*o).toString()),t.scale(o,o))};function h2(r,t){const e=t?"manipulation":ln;lo(r,{"touch-action":e,"-ms-touch-action":e})}const gh=(r,t)=>{let{width:e,height:n}=t;e&&(r.style.width=typeof e=="number"?"".concat(e,"px"):e),n&&(r.style.height=typeof n=="number"?"".concat(n,"px"):n)};function u2(r){var t;let e={left:0,top:0};const n=r&&Bn(r),i={left:0,top:0},o={borderLeftWidth:Nt,borderTopWidth:We,paddingLeft:Nt,paddingTop:We};if(!n)return i;const l=((t=s0(r))===null||t===void 0?void 0:t.getComputedStyle(r,null))||{};for(const f in o)i[o[f]]+=parseInt(l[f],10)||0;const c=n.documentElement;typeof r.getBoundingClientRect<"u"&&(e=r.getBoundingClientRect());const h=i0(r);return{left:e.left+h.left-(c.clientLeft||0)+i.left,top:e.top+h.top-(c.clientTop||0)+i.top}}function xp(r){return typeof r.onselectstart<"u"&&(r.onselectstart=()=>!1),r.style.userSelect=ln,r}class a0{constructor(t){M(this,"_originalCanvasStyle",void 0),M(this,"lower",void 0);const e=this.createLowerCanvas(t);this.lower={el:e,ctx:e.getContext("2d")}}createLowerCanvas(t){const e=QE(t)?t:us().getElementById(t)||pe();if(e.hasAttribute("data-fabric"))throw new Error("fabric.js: trying to initialize a canvas that has already been initialized");return this._originalCanvasStyle=e.style.cssText,e.setAttribute("data-fabric","main"),e.classList.add("lower-canvas"),e}cleanupDOM(t){let{width:e,height:n}=t;const{el:i}=this.lower;i.classList.remove("lower-canvas"),i.removeAttribute("data-fabric"),i.setAttribute("width","".concat(e)),i.setAttribute("height","".concat(n)),i.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(t,e){const{el:n,ctx:i}=this.lower;o0(n,i,t,e)}setCSSDimensions(t){gh(this.lower.el,t)}calcOffset(){return u2(this.lower.el)}dispose(){Zn().dispose(this.lower.el),delete this.lower}}const f2={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...vn]};class go extends Km(qm){get lowerCanvasEl(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.el}get contextContainer(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.ctx}static getDefaults(){return go.ownDefaults}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(e),this.initElements(t),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(t){this.elements=new a0(t)}add(){const t=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}insertAt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const o=super.insertAt(t,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),o}remove(){const t=super.remove(...arguments);return t.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}_onObjectAdded(t){t.canvas&&t.canvas!==this&&(console.warn(`fabric.Canvas: trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t){t._set("canvas",void 0),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}_isRetinaScaling(){return Lt.devicePixelRatio>1&&this.enableRetinaScaling}getRetinaScaling(){return this._isRetinaScaling()?Math.max(1,Lt.devicePixelRatio):1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setDimensions({width:t},e)}setHeight(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setDimensions({height:t},e)}_setDimensionsImpl(t){let{cssOnly:e=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e){const i=D({width:this.width,height:this.height},t);this.elements.setDimensions(i,this.getRetinaScaling()),this.hasLostContext=!0,this.width=i.width,this.height=i.height}n||this.elements.setCSSDimensions(t),this.calcOffset()}setDimensions(t){let{cssOnly:e=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._setDimensionsImpl(t,{cssOnly:e,backstoreOnly:n}),e||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(t){const e=this.backgroundImage,n=this.overlayImage,i=this._objects.length;this.viewportTransform=t;for(let o=0;o<i;o++){const l=this._objects[o];l.group||l.setCoords()}e&&e.setCoords(),n&&n.setCoords(),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(t,e){const n=t,i=[...this.viewportTransform],o=fe(t,Me(i));i[0]=e,i[3]=e;const l=fe(o,i);i[4]+=n.x-l.x,i[5]+=n.y-l.y,this.setViewportTransform(i)}setZoom(t){this.zoomToPoint(new F(0,0),t)}absolutePan(t){const e=[...this.viewportTransform];return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)}relativePan(t){return this.absolutePan(new F(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(t){t.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),!this.destroyed&&this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){!this.nextRenderHandle&&!this.disposed&&!this.destroyed&&(this.nextRenderHandle=Gs(()=>this.renderAndReset()))}calcViewportBoundaries(){const t=this.width,e=this.height,n=Me(this.viewportTransform),i=fe({x:0,y:0},n),o=fe({x:t,y:e},n),l=i.min(o),c=i.max(o);return this.vptCoords={tl:l,tr:new F(c.x,l.y),bl:new F(l.x,c.y),br:c}}cancelRequestedRender(){this.nextRenderHandle&&(Jm(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(t){}renderCanvas(t,e){if(this.destroyed)return;const n=this.viewportTransform,i=this.clipPath;this.calcViewportBoundaries(),this.clearContext(t),t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.patternQuality="best",this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(t,e),t.restore(),this.controlsAboveOverlay||this.drawControls(t),i&&(i._set("canvas",this),i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t,i)),this._renderOverlay(t),this.controlsAboveOverlay&&this.drawControls(t),this.fire("after:render",{ctx:t}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(t,e){const n=this.viewportTransform;t.save(),t.transform(...n),t.globalCompositeOperation="destination-in",e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}_renderObjects(t,e){for(let n=0,i=e.length;n<i;++n)e[n]&&e[n].render(t)}_renderBackgroundOrOverlay(t,e){const n=this["".concat(e,"Color")],i=this["".concat(e,"Image")],o=this.viewportTransform,l=this["".concat(e,"Vpt")];if(!n&&!i)return;const c=An(n);if(n){if(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=c?n.toLive(t):n,l&&t.transform(...o),c){t.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const h=n.gradientTransform||n.patternTransform;h&&t.transform(...h)}t.fill(),t.restore()}if(i){t.save();const{skipOffscreen:h}=this;this.skipOffscreen=l,l&&t.transform(...o),i.render(t),this.skipOffscreen=h,t.restore()}}_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")}_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new F(this.width/2,this.height/2)}centerObjectH(t){return this._centerObject(t,new F(this.getCenterPoint().x,t.getCenterPoint().y))}centerObjectV(t){return this._centerObject(t,new F(t.getCenterPoint().x,this.getCenterPoint().y))}centerObject(t){return this._centerObject(t,this.getCenterPoint())}viewportCenterObject(t){return this._centerObject(t,this.getVpCenter())}viewportCenterObjectH(t){return this._centerObject(t,new F(this.getVpCenter().x,t.getCenterPoint().y))}viewportCenterObjectV(t){return this._centerObject(t,new F(t.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return fe(this.getCenterPoint(),Me(this.viewportTransform))}_centerObject(t,e){t.setXY(e,Tt,Tt),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(t){return this.toDatalessObject(t)}toObject(t){return this._toObjectMethod("toObject",t)}toJSON(){return this.toObject()}toDatalessObject(t){return this._toObjectMethod("toDatalessObject",t)}_toObjectMethod(t,e){const n=this.clipPath,i=n&&!n.excludeFromExport?this._toObject(n,t,e):null;return D(D(D({version:hh},wi(this,e)),{},{objects:this._objects.filter(o=>!o.excludeFromExport).map(o=>this._toObject(o,t,e))},this.__serializeBgOverlay(t,e)),i?{clipPath:i}:null)}_toObject(t,e,n){let i;this.includeDefaultValues||(i=t.includeDefaultValues,t.includeDefaultValues=!1);const o=t[e](n);return this.includeDefaultValues||(t.includeDefaultValues=!!i),o}__serializeBgOverlay(t,e){const n={},i=this.backgroundImage,o=this.overlayImage,l=this.backgroundColor,c=this.overlayColor;return An(l)?l.excludeFromExport||(n.background=l.toObject(e)):l&&(n.background=l),An(c)?c.excludeFromExport||(n.overlay=c.toObject(e)):c&&(n.overlay=c),i&&!i.excludeFromExport&&(n.backgroundImage=this._toObject(i,t,e)),o&&!o.excludeFromExport&&(n.overlayImage=this._toObject(o,t,e)),n}toSVG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;t.reviver=e;const n=[];return this._setSVGPreamble(n,t),this._setSVGHeader(n,t),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",e),this._setSVGObjects(n,e),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",e),n.push("</svg>"),n.join("")}_setSVGPreamble(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(t,e){const n=e.width||"".concat(this.width),i=e.height||"".concat(this.height),o=Lt.NUM_FRACTION_DIGITS,l=e.viewBox;let c;if(l)c='viewBox="'.concat(l.x," ").concat(l.y," ").concat(l.width," ").concat(l.height,'" ');else if(this.svgViewportTransformation){const h=this.viewportTransform;c='viewBox="'.concat(Xt(-h[4]/h[0],o)," ").concat(Xt(-h[5]/h[3],o)," ").concat(Xt(this.width/h[0],o)," ").concat(Xt(this.height/h[3],o),'" ')}else c='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',i,'" ',c,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",hh,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),`</defs>
`)}createSVGClipPathMarkup(t){const e=this.clipPath;return e?(e.clipPathId="CLIPPATH_".concat(Vr()),'<clipPath id="'.concat(e.clipPathId,`" >
`).concat(e.toClipPathSVG(t.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(t=>{const e=this["".concat(t,"Color")];if(An(e)){const n=this["".concat(t,"Vpt")],i=this.viewportTransform,o={isType:()=>!1,width:this.width/(n?i[0]:1),height:this.height/(n?i[3]:1)};return e.toSVG(o,{additionalTransform:n?oo(i):""})}}).join("")}createSVGFontFacesMarkup(){const t=[],e={},n=Lt.fontPaths;this._objects.forEach(function o(l){t.push(l),dh(l)&&l._objects.forEach(o)}),t.forEach(o=>{if(!r0(o))return;const{styles:l,fontFamily:c}=o;e[c]||!n[c]||(e[c]=!0,l&&Object.values(l).forEach(h=>{Object.values(h).forEach(f=>{let{fontFamily:d=""}=f;!e[d]&&n[d]&&(e[d]=!0)})}))});const i=Object.keys(e).map(o=>`		@font-face {
			font-family: '`.concat(o,`';
			src: url('`).concat(n[o],`');
		}
`)).join("");return i?`	<style type="text/css"><![CDATA[
`.concat(i,`]]></style>
`):""}_setSVGObjects(t,e){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(t,n,e)})}_setSVGObject(t,e,n){t.push(e.toSVG(n))}_setSVGBgOverlayImage(t,e,n){const i=this[e];i&&!i.excludeFromExport&&i.toSVG&&t.push(i.toSVG(n))}_setSVGBgOverlayColor(t,e){const n=this["".concat(e,"Color")];if(n)if(An(n)){const i=n.repeat||"",o=this.width,l=this.height,c=this["".concat(e,"Vpt")],h=c?oo(Me(this.viewportTransform)):"";t.push('<rect transform="'.concat(h," translate(").concat(o/2,",").concat(l/2,')" x="').concat(n.offsetX-o/2,'" y="').concat(n.offsetY-l/2,'" width="').concat((i==="repeat-y"||i==="no-repeat")&&vp(n)?n.source.width:o,'" height="').concat((i==="repeat-x"||i==="no-repeat")&&vp(n)?n.source.height:l,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(t,e){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return Promise.reject(new Error("fabric.js: `json` is undefined"));const i=typeof t=="string"?JSON.parse(t):t,{objects:o=[],backgroundImage:l,background:c,overlayImage:h,overlay:f,clipPath:d}=i,p=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([os(o,{reviver:e,signal:n}),fo({backgroundImage:l,backgroundColor:c,overlayImage:h,overlayColor:f,clipPath:d},{signal:n})]).then(_=>{let[v,w]=_;return this.clear(),this.add(...v),this.set(i),this.set(w),this.renderOnAddRemove=p,this})}clone(t){const e=this.toObject(t);return this.cloneWithoutData().loadFromJSON(e)}cloneWithoutData(){const t=pe();return t.width=this.width,t.height=this.height,new this.constructor(t)}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:n=1,multiplier:i=1,enableRetinaScaling:o=!1}=t,l=i*(o?this.getRetinaScaling():1);return qh(this.toCanvasElement(l,t),e,n)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:e,height:n,left:i,top:o,filter:l}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=(e||this.width)*t,h=(n||this.height)*t,f=this.getZoom(),d=this.width,p=this.height,_=f*t,v=this.viewportTransform,w=(v[4]-(i||0))*t,E=(v[5]-(o||0))*t,T=[_,0,0,_,w,E],P=this.enableRetinaScaling,R=pe(),X=l?this._objects.filter(B=>l(B)):this._objects;return R.width=c,R.height=h,this.enableRetinaScaling=!1,this.viewportTransform=T,this.width=c,this.height=h,this.calcViewportBoundaries(),this.renderCanvas(R.getContext("2d"),X),this.viewportTransform=v,this.width=d,this.height=p,this.calcViewportBoundaries(),this.enableRetinaScaling=P,R}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),this.disposed=!0,new Promise((t,e)=>{const n=()=>{this.destroy(),t(!0)};n.kill=e,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?t(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(t=>t.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}M(go,"ownDefaults",f2);const d2=["touchstart","touchmove","touchend"];function g2(r){const t=r.changedTouches;return t&&t[0]?t[0]:r}const l0=r=>{const t=r.target,e=i0(t),n=g2(r);return new F(n.clientX+e.left,n.clientY+e.top)},Da=r=>d2.includes(r.type)||r.pointerType==="touch",ph=r=>{r.preventDefault(),r.stopPropagation()},mr=r=>{if(r.length===0)return{left:0,top:0,width:0,height:0};const{min:t,max:e}=r.reduce((i,o)=>{let{min:l,max:c}=i;return{min:l.min(o),max:c.max(o)}},{min:new F(r[0]),max:new F(r[0])}),n=e.subtract(t);return{left:t.x,top:t.y,width:n.x,height:n.y}},p2=["translateX","translateY","scaleX","scaleY"],m2=(r,t)=>{const e=Me(t),n=ke(e,r.calcOwnMatrix());as(r,n)},c0=(r,t)=>as(r,ke(t,r.calcOwnMatrix())),as=(r,t)=>{const e=vi(t),{translateX:n,translateY:i,scaleX:o,scaleY:l}=e,c=re(e,p2),h=new F(n,i);r.flipX=!1,r.flipY=!1,Object.assign(r,c),r.set({scaleX:o,scaleY:l}),r.setPositionByOrigin(h,Tt,Tt)},tu=r=>{r.scaleX=1,r.scaleY=1,r.skewX=0,r.skewY=0,r.flipX=!1,r.flipY=!1,r.rotate(0)},eu=r=>({scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,angle:r.angle,left:r.left,flipX:r.flipX,flipY:r.flipY,top:r.top}),nu=(r,t,e)=>{const n=r/2,i=t/2,o=rl(e),l=[new F(-n,-i),new F(n,-i),new F(-n,i),new F(n,i)].map(h=>h.transform(o)),c=mr(l);return new F(c.width,c.height)},ru=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vn,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vn;return ke(Me(t),r)},iu=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vn,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vn;return r.transform(ru(t,e))},_2=(r,t,e,n)=>{if(e!=="child"&&e!=="sibling")throw new Error("fabric.js: received bad argument ".concat(e));if(n!=="child"&&n!=="sibling")throw new Error("fabric.js: received bad argument ".concat(n));if(e===n)return r;const i=t.viewportTransform;return r.transform(n==="child"?Me(i):i)},su=(r,t,e)=>{const n=ru(t,e);return as(r,ke(n,r.calcOwnMatrix())),n},h0=(r,t)=>{var e;const{transform:{target:n}}=t;(e=n.canvas)===null||e===void 0||e.fire("object:".concat(r),D(D({},t),{},{target:n})),n.fire(r,t)},v2={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Xr=r=>typeof r=="string"?v2[r]:r-.5,Ma="not-allowed",y2=(r,t,e,n)=>{if(!t||!r)return"drag";const i=n.controls[t];return i.getActionName(e,i,n)};function u0(r){return r.originX===Tt&&r.originY===Tt}function wp(r){return-Xr(r)+.5}const Hn=(r,t)=>r[t],f0=(r,t,e,n)=>({e:r,transform:t,pointer:new F(e,n)});function d0(r,t){const e=r.getTotalAngle(),n=e+ss(Math.atan2(t.y,t.x))+360;return Math.round(n%360/45)}function x2(r,t,e,n){const i=r.getRelativeCenterPoint(),o=typeof e<"u"&&typeof n<"u"?r.translateToGivenOrigin(i,Tt,Tt,e,n):new F(r.left,r.top);return(r.angle?t.rotate(-ne(r.angle),i):t).subtract(o)}function po(r,t,e,n,i){var o;let{target:l,corner:c}=r;const h=l.controls[c],f=((o=l.canvas)===null||o===void 0?void 0:o.getZoom())||1,d=l.padding/f,p=x2(l,new F(n,i),t,e);return p.x>=d&&(p.x-=d),p.x<=-d&&(p.x+=d),p.y>=d&&(p.y-=d),p.y<=d&&(p.y+=d),p.x-=h.offsetX,p.y-=h.offsetY,p}const g0=(r,t,e,n)=>{const{target:i,offsetX:o,offsetY:l}=t,c=e-o,h=n-l,f=!Hn(i,"lockMovementX")&&i.left!==c,d=!Hn(i,"lockMovementY")&&i.top!==h;return f&&i.set(Nt,c),d&&i.set(We,h),(f||d)&&h0("moving",f0(r,t,e,n)),f||d};class p0{getSvgStyles(t){const e=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):ln,o=this.strokeDashOffset?this.strokeDashOffset:"0",l=this.strokeLineCap?this.strokeLineCap:"butt",c=this.strokeLineJoin?this.strokeLineJoin:"miter",h=this.strokeMiterLimit?this.strokeMiterLimit:"4",f=typeof this.opacity<"u"?this.opacity:"1",d=this.visible?"":" visibility: hidden;",p=t?"":this.getSvgFilter(),_=ao("fill",this.fill);return[ao("stroke",this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",l,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",c,"; ","stroke-miterlimit: ",h,"; ",_,"fill-rule: ",e,"; ","opacity: ",f,";",p,d].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=t?this.calcTransformMatrix():this.calcOwnMatrix(),i='transform="'.concat(oo(n));return"".concat(i).concat(e,'" ')}_toSVG(t){return[""]}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:e,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),o=t.indexOf("COMMON_PARTS");return t[o]=i,e?e(t.join("")):t.join("")}_createBaseSVGMarkup(t){let{noStyle:e,reviver:n,withShadow:i,additionalTransform:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=e?"":'style="'.concat(this.getSvgStyles(),'" '),c=i?'style="'.concat(this.getSvgFilter(),'" '):"",h=this.clipPath,f=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",d=h&&h.absolutePositioned,p=this.stroke,_=this.fill,v=this.shadow,w=[],E=t.indexOf("COMMON_PARTS");let T;h&&(h.clipPathId="CLIPPATH_".concat(Vr()),T='<clipPath id="'.concat(h.clipPathId,`" >
`).concat(h.toClipPathSVG(n),`</clipPath>
`)),d&&w.push("<g ",c,this.getSvgCommons(),` >
`),w.push("<g ",this.getSvgTransform(!1),d?"":c+this.getSvgCommons(),` >
`);const P=[l,f,e?"":this.addPaintOrder()," ",o?'transform="'.concat(o,'" '):""].join("");return t[E]=P,An(_)&&w.push(_.toSVG(this)),An(p)&&w.push(p.toSVG(this)),v&&w.push(v.toSVG(this)),h&&w.push(T),w.push(t.join("")),w.push(`</g>
`),d&&w.push(`</g>
`),n?n(w.join("")):w.join("")}addPaintOrder(){return this.paintFirst!=="fill"?' paint-order="'.concat(this.paintFirst,'" '):""}}const ou=(r,t,e,n)=>(r<Math.abs(t)?(r=t,n=e/4):t===0&&r===0?n=e/vr*Math.asin(1):n=e/vr*Math.asin(t/r),{a:r,c:t,p:e,s:n}),m0=(r,t,e,n,i)=>r*Math.pow(2,10*(n-=1))*Math.sin((n*i-t)*vr/e),_0=(r,t,e,n)=>-e*Math.cos(r/n*xr)+e+t,w2=(r,t,e,n)=>e*(r/n)**3+t,C2=(r,t,e,n)=>e*((r/n-1)**3+1)+t,S2=(r,t,e,n)=>(r/=n/2,r<1?e/2*r**3+t:e/2*((r-2)**3+2)+t),b2=(r,t,e,n)=>e*(r/=n)*r**3+t,T2=(r,t,e,n)=>-e*((r=r/n-1)*r**3-1)+t,O2=(r,t,e,n)=>(r/=n/2,r<1?e/2*r**4+t:-e/2*((r-=2)*r**3-2)+t),E2=(r,t,e,n)=>e*(r/n)**5+t,P2=(r,t,e,n)=>e*((r/n-1)**5+1)+t,A2=(r,t,e,n)=>(r/=n/2,r<1?e/2*r**5+t:e/2*((r-2)**5+2)+t),D2=(r,t,e,n)=>-e*Math.cos(r/n*xr)+e+t,M2=(r,t,e,n)=>e*Math.sin(r/n*xr)+t,k2=(r,t,e,n)=>-e/2*(Math.cos(Math.PI*r/n)-1)+t,L2=(r,t,e,n)=>r===0?t:e*2**(10*(r/n-1))+t,R2=(r,t,e,n)=>r===n?t+e:e*-(2**(-10*r/n)+1)+t,F2=(r,t,e,n)=>r===0?t:r===n?t+e:(r/=n/2,r<1?e/2*2**(10*(r-1))+t:e/2*-(2**(-10*--r)+2)+t),I2=(r,t,e,n)=>-e*(Math.sqrt(1-(r/=n)*r)-1)+t,B2=(r,t,e,n)=>e*Math.sqrt(1-(r=r/n-1)*r)+t,j2=(r,t,e,n)=>(r/=n/2,r<1?-e/2*(Math.sqrt(1-r**2)-1)+t:e/2*(Math.sqrt(1-(r-=2)*r)+1)+t),W2=(r,t,e,n)=>{const o=e;let l=0;if(r===0)return t;if(r/=n,r===1)return t+e;l||(l=n*.3);const{a:c,s:h,p:f}=ou(o,e,l,1.70158);return-m0(c,h,f,r,n)+t},X2=(r,t,e,n)=>{const o=e;let l=0;if(r===0)return t;if(r/=n,r===1)return t+e;l||(l=n*.3);const{a:c,s:h,p:f,c:d}=ou(o,e,l,1.70158);return c*2**(-10*r)*Math.sin((r*n-h)*vr/f)+d+t},H2=(r,t,e,n)=>{const o=e;let l=0;if(r===0)return t;if(r/=n/2,r===2)return t+e;l||(l=n*(.3*1.5));const{a:c,s:h,p:f,c:d}=ou(o,e,l,1.70158);return r<1?-.5*m0(c,h,f,r,n)+t:c*Math.pow(2,-10*(r-=1))*Math.sin((r*n-h)*vr/f)*.5+d+t},Y2=function(r,t,e,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return e*(r/=n)*r*((i+1)*r-i)+t},U2=function(r,t,e,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return e*((r=r/n-1)*r*((i+1)*r+i)+1)+t},z2=function(r,t,e,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return r/=n/2,r<1?e/2*(r*r*(((i*=1.525)+1)*r-i))+t:e/2*((r-=2)*r*(((i*=1.525)+1)*r+i)+2)+t},au=(r,t,e,n)=>(r/=n)<1/2.75?e*(7.5625*r*r)+t:r<2/2.75?e*(7.5625*(r-=1.5/2.75)*r+.75)+t:r<2.5/2.75?e*(7.5625*(r-=2.25/2.75)*r+.9375)+t:e*(7.5625*(r-=2.625/2.75)*r+.984375)+t,v0=(r,t,e,n)=>e-au(n-r,0,e,n)+t,N2=(r,t,e,n)=>r<n/2?v0(r*2,0,e,n)*.5+t:au(r*2-n,0,e,n)*.5+e*.5+t,V2=(r,t,e,n)=>e*(r/=n)*r+t,G2=(r,t,e,n)=>-e*(r/=n)*(r-2)+t,$2=(r,t,e,n)=>(r/=n/2,r<1?e/2*r**2+t:-e/2*(--r*(r-2)-1)+t);var K2=Object.freeze({__proto__:null,defaultEasing:_0,easeInBack:Y2,easeInBounce:v0,easeInCirc:I2,easeInCubic:w2,easeInElastic:W2,easeInExpo:L2,easeInOutBack:z2,easeInOutBounce:N2,easeInOutCirc:j2,easeInOutCubic:S2,easeInOutElastic:H2,easeInOutExpo:F2,easeInOutQuad:$2,easeInOutQuart:O2,easeInOutQuint:A2,easeInOutSine:k2,easeInQuad:V2,easeInQuart:b2,easeInQuint:E2,easeInSine:D2,easeOutBack:U2,easeOutBounce:au,easeOutCirc:B2,easeOutCubic:C2,easeOutElastic:X2,easeOutExpo:R2,easeOutQuad:G2,easeOutQuart:T2,easeOutQuint:P2,easeOutSine:M2});const q2=()=>!1;class lu{constructor(t){let{startValue:e,byValue:n,duration:i=500,delay:o=0,easing:l=_0,onStart:c=mi,onChange:h=mi,onComplete:f=mi,abort:d=q2,target:p}=t;M(this,"_state","pending"),M(this,"durationProgress",0),M(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=i,this.delay=o,this.easing=l,this._onStart=c,this._onChange=h,this._onComplete=f,this._abort=d,this.target=p,this.startValue=e,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const t=e=>{this._state==="pending"&&(this.startTime=e||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Gs(t),this.delay):Gs(t)}tick(t){const e=(t||+new Date)-this.startTime,n=Math.min(e,this.duration);this.durationProgress=n/this.duration;const{value:i,valueProgress:o}=this.calculate(n);this.value=Object.freeze(i),this.valueProgress=o,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):e>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Gs(this.tick)))}register(){fh.push(this)}unregister(){fh.remove(this)}abort(){this._state="aborted",this.unregister()}}const J2=["startValue","endValue"];class Z2 extends lu{constructor(t){let{startValue:e=0,endValue:n=100}=t,i=re(t,J2);super(D(D({},i),{},{startValue:e,byValue:n-e}))}calculate(t){const e=this.easing(t,this.startValue,this.byValue,this.duration);return{value:e,valueProgress:Math.abs((e-this.startValue)/this.byValue)}}}const Q2=["startValue","endValue"];class tP extends lu{constructor(t){let{startValue:e=[0],endValue:n=[100]}=t,i=re(t,Q2);super(D(D({},i),{},{startValue:e,byValue:n.map((o,l)=>o-e[l])}))}calculate(t){const e=this.startValue.map((n,i)=>this.easing(t,n,this.byValue[i],this.duration,i));return{value:e,valueProgress:Math.abs((e[0]-this.startValue[0])/this.byValue[0])}}}const yi=(r,t,e)=>Math.max(r,Math.min(t,e)),eP=["startValue","endValue","easing","onChange","onComplete","abort"],nP=(r,t,e,n)=>{const i=1-Math.cos(r/n*xr);return t+e*i},jc=r=>r&&((t,e,n)=>r(new Qt(t).toRgba(),e,n));class rP extends lu{constructor(t){let{startValue:e,endValue:n,easing:i=nP,onChange:o,onComplete:l,abort:c}=t,h=re(t,eP);const f=new Qt(e).getSource(),d=new Qt(n).getSource();super(D(D({},h),{},{startValue:f,byValue:d.map((p,_)=>p-f[_]),easing:i,onChange:jc(o),onComplete:jc(l),abort:jc(c)}))}calculate(t){const[e,n,i,o]=this.startValue.map((c,h)=>this.easing(t,c,this.byValue[h],this.duration,h)),l=[...[e,n,i].map(Math.round),yi(0,o,1)];return{value:l,valueProgress:l.map((c,h)=>this.byValue[h]!==0?Math.abs((c-this.startValue[h])/this.byValue[h]):0).find(c=>c!==0)||0}}}const iP=r=>Array.isArray(r.startValue)||Array.isArray(r.endValue);function cu(r){const t=iP(r)?new tP(r):new Z2(r);return t.start(),t}function y0(r){const t=new rP(r);return t.start(),t}const sP=new F(1,0),x0=new F,hu=(r,t)=>r.rotate(t),ka=(r,t)=>new F(t).subtract(r),La=r=>r.distanceFrom(x0),Ra=(r,t)=>Math.atan2(Ji(r,t),C0(r,t)),w0=r=>Ra(sP,r),il=r=>r.eq(x0)?r:r.scalarDivide(La(r)),uu=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return il(new F(-r.y,r.x).scalarMultiply(t?1:-1))},Ji=(r,t)=>r.x*t.y-r.y*t.x,C0=(r,t)=>r.x*t.x+r.y*t.y,mh=(r,t,e)=>{if(r.eq(t)||r.eq(e))return!0;const n=Ji(t,e),i=Ji(t,r),o=Ji(e,r);return n>=0?i>=0&&o<=0:!(i<=0&&o>=0)};class xe{constructor(t){this.status=t,this.points=[]}includes(t){return this.points.some(e=>e.eq(t))}append(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.points=this.points.concat(e.filter(i=>!this.includes(i))),this}static isPointContained(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.eq(n))return t.eq(e);if(e.x===n.x)return t.x===e.x&&(i||t.y>=Math.min(e.y,n.y)&&t.y<=Math.max(e.y,n.y));if(e.y===n.y)return t.y===e.y&&(i||t.x>=Math.min(e.x,n.x)&&t.x<=Math.max(e.x,n.x));{const o=ka(e,n),c=ka(e,t).divide(o);return i?Math.abs(c.x)===Math.abs(c.y):c.x===c.y&&c.x>=0&&c.x<=1}}static intersectLineLine(t,e,n,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;const c=e.x-t.x,h=e.y-t.y,f=i.x-n.x,d=i.y-n.y,p=t.x-n.x,_=t.y-n.y,v=f*_-d*p,w=c*_-h*p,E=d*c-f*h;if(E!==0){const T=v/E,P=w/E;return(o||0<=T&&T<=1)&&(l||0<=P&&P<=1)?new xe("Intersection").append(new F(t.x+T*c,t.y+T*h)):new xe}else if(v===0||w===0){const T=o||l||xe.isPointContained(t,n,i)||xe.isPointContained(e,n,i)||xe.isPointContained(n,t,e)||xe.isPointContained(i,t,e);return new xe(T?"Coincident":void 0)}else return new xe("Parallel")}static intersectSegmentLine(t,e,n,i){return xe.intersectLineLine(t,e,n,i,!1,!0)}static intersectSegmentSegment(t,e,n,i){return xe.intersectLineLine(t,e,n,i,!1,!1)}static intersectLinePolygon(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const o=new xe,l=n.length;for(let c=0,h,f,d;c<l;c++){if(h=n[c],f=n[(c+1)%l],d=xe.intersectLineLine(t,e,h,f,i,!1),d.status==="Coincident")return d;o.append(...d.points)}return o.points.length>0&&(o.status="Intersection"),o}static intersectSegmentPolygon(t,e,n){return xe.intersectLinePolygon(t,e,n,!1)}static intersectPolygonPolygon(t,e){const n=new xe,i=t.length,o=[];for(let l=0;l<i;l++){const c=t[l],h=t[(l+1)%i],f=xe.intersectSegmentPolygon(c,h,e);f.status==="Coincident"?(o.push(f),n.append(c,h)):n.append(...f.points)}return o.length>0&&o.length===t.length?new xe("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(t,e,n){const i=e.min(n),o=e.max(n),l=new F(o.x,i.y),c=new F(i.x,o.y);return xe.intersectPolygonPolygon(t,[i,l,o,c])}}class oP extends qm{_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=D({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},t),n=e.strokeWidth;let i=n,o=0;this.strokeUniform&&(i=0,o=n);const l=e.width+i,c=e.height+i,h=e.skewX===0&&e.skewY===0;let f;return h?f=new F(l*e.scaleX,c*e.scaleY):f=nu(l,c,e),f.scalarAdd(o)}translateToGivenOrigin(t,e,n,i,o){let l=t.x,c=t.y;const h=Xr(i)-Xr(e),f=Xr(o)-Xr(n);if(h||f){const d=this._getTransformedDimensions();l+=h*d.x,c+=f*d.y}return new F(l,c)}translateToCenterPoint(t,e,n){const i=this.translateToGivenOrigin(t,e,n,Tt,Tt);return this.angle?i.rotate(ne(this.angle),t):i}translateToOriginPoint(t,e,n){const i=this.translateToGivenOrigin(t,Tt,Tt,e,n);return this.angle?i.rotate(ne(this.angle),t):i}getCenterPoint(){const t=this.getRelativeCenterPoint();return this.group?fe(t,this.group.calcTransformMatrix()):t}getRelativeCenterPoint(){return this.translateToCenterPoint(new F(this.left,this.top),this.originX,this.originY)}getPointByOrigin(t,e){return this.translateToOriginPoint(this.getRelativeCenterPoint(),t,e)}setPositionByOrigin(t,e,n){const i=this.translateToCenterPoint(t,e,n),o=this.translateToOriginPoint(i,this.originX,this.originY);this.set({left:o.x,top:o.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Nt,We)}}class aP extends oP{getX(){return this.getXY().x}setX(t){this.setXY(this.getXY().setX(t))}getY(){return this.getXY().y}setY(t){this.setXY(this.getXY().setY(t))}getRelativeX(){return this.left}setRelativeX(t){this.left=t}getRelativeY(){return this.top}setRelativeY(t){this.top=t}getXY(){const t=this.getRelativeXY();return this.group?fe(t,this.group.calcTransformMatrix()):t}setXY(t,e,n){this.group&&(t=fe(t,Me(this.group.calcTransformMatrix()))),this.setRelativeXY(t,e,n)}getRelativeXY(){return new F(this.left,this.top)}setRelativeXY(t,e,n){this.setPositionByOrigin(t,e||this.originX,n||this.originY)}_getCoords(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?t?this.calcACoords():this.calcLineCoords():(this.aCoords||(this.aCoords=this.calcACoords()),this.lineCoords||(this.lineCoords=this.calcLineCoords()),t?this.aCoords:this.lineCoords)}getCoords(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{tl:n,tr:i,br:o,bl:l}=this._getCoords(t,e),c=[n,i,o,l];if(this.group){const h=this.group.calcTransformMatrix();return c.map(f=>fe(f,h))}return c}intersectsWithRect(t,e,n,i){const o=this.getCoords(n,i);return xe.intersectPolygonRectangle(o,t,e).status==="Intersection"}intersectsWithObject(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=xe.intersectPolygonPolygon(this.getCoords(e,n),t.getCoords(e,n));return i.status==="Intersection"||i.status==="Coincident"||t.isContainedWithinObject(this,e,n)||this.isContainedWithinObject(t,e,n)}isContainedWithinObject(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=this.getCoords(e,n),o=e?t.aCoords:t.lineCoords,l=t._getImageLines(o);for(let c=0;c<4;c++)if(!t.containsPoint(i[c],l))return!1;return!0}isContainedWithinRect(t,e,n,i){const o=this.getBoundingRect(n,i);return o.left>=t.x&&o.left+o.width<=e.x&&o.top>=t.y&&o.top+o.height<=e.y}isOverlapping(t){return this.intersectsWithObject(t)||this.isContainedWithinObject(t)||t.isContainedWithinObject(this)}containsPoint(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const o=this._getCoords(n,i),l=e||this._getImageLines(o),c=this._findCrossPoints(t,l);return c!==0&&c%2===1}isOnScreen(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.canvas)return!1;const{tl:e,br:n}=this.canvas.vptCoords;return this.getCoords(!0,t).some(o=>o.x<=n.x&&o.x>=e.x&&o.y<=n.y&&o.y>=e.y)||this.intersectsWithRect(e,n,!0,t)?!0:this._containsCenterOfCanvas(e,n,t)}_containsCenterOfCanvas(t,e,n){const i=t.midPointFrom(e);return this.containsPoint(i,void 0,!0,n)}isPartiallyOnScreen(t){if(!this.canvas)return!1;const{tl:e,br:n}=this.canvas.vptCoords;return this.intersectsWithRect(e,n,!0,t)?!0:this.getCoords(!0,t).every(o=>(o.x>=n.x||o.x<=e.x)&&(o.y>=n.y||o.y<=e.y))&&this._containsCenterOfCanvas(e,n,t)}_getImageLines(t){let{tl:e,tr:n,bl:i,br:o}=t;return{topline:{o:e,d:n},rightline:{o:n,d:o},bottomline:{o,d:i},leftline:{o:i,d:e}}}_findCrossPoints(t,e){let n=0;for(const i in e){let o;const l=e[i];if(!(l.o.y<t.y&&l.d.y<t.y)&&!(l.o.y>=t.y&&l.d.y>=t.y)){if(l.o.x===l.d.x&&l.o.x>=t.x)o=l.o.x;else{const h=(l.d.y-l.o.y)/(l.d.x-l.o.x),f=t.y-0*t.x,d=l.o.y-h*l.o.x;o=-(f-d)/(0-h)}if(o>=t.x&&(n+=1),n===2)break}}return n}getBoundingRect(t,e){return mr(this.getCoords(t,e))}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(t){this._set("scaleX",t),this._set("scaleY",t),this.setCoords()}scaleToWidth(t,e){const n=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/n)}scaleToHeight(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/n)}getCanvasRetinaScaling(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.getRetinaScaling())||1}getTotalAngle(){return this.group?vi(this.calcTransformMatrix()).angle:this.angle}calcLineCoords(){const t=this.getViewportTransform(),e=this.padding,n=ne(this.getTotalAngle()),i=Ke(n)*e,o=qe(n)*e,l=i+o,c=i-o,{tl:h,tr:f,bl:d,br:p}=this.calcACoords(),_={tl:fe(h,t),tr:fe(f,t),bl:fe(d,t),br:fe(p,t)};return e&&(_.tl.x-=c,_.tl.y-=l,_.tr.x+=l,_.tr.y-=c,_.bl.x-=l,_.bl.y+=c,_.br.x+=c,_.br.y+=l),_}getViewportTransform(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.viewportTransform)||vn.concat()}calcACoords(){const t=uo({angle:this.angle}),{x:e,y:n}=this.getRelativeCenterPoint(),i=ho(e,n),o=ke(i,t),l=this._getTransformedDimensions(),c=l.x/2,h=l.y/2;return{tl:fe({x:-c,y:-h},o),tr:fe({x:c,y:-h},o),bl:fe({x:-c,y:h},o),br:fe({x:c,y:h},o)}}setCoords(){this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords()}transformMatrixKey(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const e="_";let n="";return!t&&this.group&&(n=this.group.transformMatrixKey(t)+e),n+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY}calcTransformMatrix(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.calcOwnMatrix();if(t||!this.group)return e;const n=this.transformMatrixKey(t),i=this.matrixCache;return i&&i.key===n?i.value:(this.group&&(e=ke(this.group.calcTransformMatrix(!1),e)),this.matrixCache={key:n,value:e},e)}calcOwnMatrix(){const t=this.transformMatrixKey(!0),e=this.ownMatrixCache;if(e&&e.key===t)return e.value;const n=this.getRelativeCenterPoint(),i={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},o=t0(i);return this.ownMatrixCache={key:t,value:o},o}_getNonTransformedDimensions(){return new F(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(t){return this._getTransformedDimensions(t).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}}class fu extends aP{getParent(t){return(l2(this.group)?this.__owningGroup:this.group)||(t?void 0:this.canvas)}isDescendantOf(t){return this.__owningGroup===t||this.group===t||this.canvas===t||!!this.__owningGroup&&this.__owningGroup.isDescendantOf(t)||!!this.group&&this.group.isDescendantOf(t)}getAncestors(t){const e=[];let n=this;do n=n instanceof fu?n.getParent(t):void 0,n&&e.push(n);while(n);return e}findCommonAncestors(t,e){if(this===t)return{fork:[],otherFork:[],common:[this,...this.getAncestors(e)]};const n=this.getAncestors(e),i=t.getAncestors(e);if(n.length===0&&i.length>0&&this===i[i.length-1])return{fork:[],otherFork:[t,...i.slice(0,i.length-1)],common:[this]};for(let o=0,l;o<n.length;o++){if(l=n[o],l===t)return{fork:[this,...n.slice(0,o)],otherFork:[],common:n.slice(o)};for(let c=0;c<i.length;c++){if(this===i[c])return{fork:[],otherFork:[t,...i.slice(0,c)],common:[this,...n]};if(l===i[c])return{fork:[this,...n.slice(0,o)],otherFork:[t,...i.slice(0,c)],common:n.slice(o)}}}return{fork:[this,...n],otherFork:[t,...i],common:[]}}hasCommonAncestors(t,e){const n=this.findCommonAncestors(t,e);return n&&!!n.common.length}isInFrontOf(t){if(this===t)return;const e=this.findCommonAncestors(t);if(!e)return;if(e.fork.includes(t))return!0;if(e.otherFork.includes(this))return!1;const n=e.common[0];if(!n)return;const i=e.fork.pop(),o=e.otherFork.pop(),l=n._objects.indexOf(i),c=n._objects.indexOf(o);return l>-1&&l>c}}class lP extends fu{animate(t,e){return Object.entries(t).reduce((n,i)=>{let[o,l]=i;return n[o]=this._animate(o,l,e),n},{})}_animate(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=t.split("."),o=this.colorProperties.includes(i[i.length-1]),{easing:l,duration:c,abort:h,startValue:f,onChange:d,onComplete:p}=n,_={target:this,startValue:f??i.reduce((v,w)=>v[w],this),endValue:e,easing:l,duration:c,abort:h==null?void 0:h.bind(this),onChange:(v,w,E)=>{i.reduce((T,P,R)=>(R===i.length-1&&(T[P]=v),T[P]),this),d&&d(v,w,E)},onComplete:(v,w,E)=>{this.setCoords(),p&&p(v,w,E)}};return o?y0(_):cu(_)}}const cP={color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1};class gr{constructor(t){const e=typeof t=="string"?gr.parseShadow(t):t;Object.assign(this,this.constructor.ownDefaults);for(const n in e)this[n]=e[n];this.id=Vr()}static parseShadow(t){const e=t.trim(),[n,i=0,o=0,l=0]=(gr.reOffsetsAndBlur.exec(e)||[]).map(h=>parseFloat(h)||0);return{color:(e.replace(gr.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:i,offsetY:o,blur:l}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(t){const e=hu(new F(this.offsetX,this.offsetY),ne(-t.angle)),n=20,i=new Qt(this.color);let o=40,l=40;return t.width&&t.height&&(o=Xt((Math.abs(e.x)+this.blur)/t.width,Lt.NUM_FRACTION_DIGITS)*100+n,l=Xt((Math.abs(e.y)+this.blur)/t.height,Lt.NUM_FRACTION_DIGITS)*100+n),t.flipX&&(e.x*=-1),t.flipY&&(e.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(l,'%" height="').concat(100+2*l,'%" x="-').concat(o,'%" width="').concat(100+2*o,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Xt(this.blur?this.blur/2:0,Lt.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Xt(e.x,Lt.NUM_FRACTION_DIGITS),'" dy="').concat(Xt(e.y,Lt.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(i.toRgb(),'" flood-opacity="').concat(i.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const t={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling},e=gr.ownDefaults;return this.includeDefaultValues?t:e0(t,(n,i)=>n!==e[i])}}M(gr,"ownDefaults",cP);M(gr,"reOffsetsAndBlur",/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/);const fs=r=>JSON.parse(JSON.stringify(r)),hP=[We,Nt,"scaleX","scaleY","flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible","skewX","skewY"],wr=["fill","stroke","strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],uP={originX:Nt,originY:We,top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!0,noScaleCache:!0,strokeUniform:!1,dirty:!0,paintFirst:"fill",activeOn:"down",colorProperties:["fill","stroke","backgroundColor"],clipPath:void 0,inverted:!1,absolutePositioned:!1,FX_DURATION:500},fP=["extraParam"];let Ci=class S0 extends lP{static getDefaults(){return D({},S0.ownDefaults)}get type(){const t=this.constructor.type;return t==="FabricObject"?"object":t.toLowerCase()}set type(t){console.warn("Setting type has no effect",t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),M(this,"_cacheContext",null),Object.assign(this,this.constructor.getDefaults()),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=pe(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(t){const e=t.width,n=t.height,i=Lt.maxCacheSideLimit,o=Lt.minCacheSideLimit;if(e<=i&&n<=i&&e*n<=Lt.perfLimitSizeTotal)return e<o&&(t.width=o),n<o&&(t.height=o),t;const l=e/n,[c,h]=Vs.limitDimsByArea(l),f=yi(o,c,i),d=yi(o,h,i);return e>f&&(t.zoomX/=e/f,t.width=f,t.capped=!0),n>d&&(t.zoomY/=n/d,t.height=d,t.capped=!0),t}_getCacheCanvasDimensions(){const t=this.getTotalObjectScaling(),e=this._getTransformedDimensions({skewX:0,skewY:0}),n=e.x*t.x/this.scaleX,i=e.y*t.y/this.scaleY;return{width:n+up,height:i+up,zoomX:t.x,zoomY:t.y,x:n,y:i}}_updateCacheCanvas(){const t=this._cacheCanvas,e=this._cacheContext,n=this._limitCacheSize(this._getCacheCanvasDimensions()),i=Lt.minCacheSideLimit,o=n.width,l=n.height,c=n.zoomX,h=n.zoomY,f=o!==this.cacheWidth||l!==this.cacheHeight,d=this.zoomX!==c||this.zoomY!==h;if(!t||!e)return!1;let p,_,v=f||d,w=0,E=0,T=!1;if(f){const P=this._cacheCanvas.width,R=this._cacheCanvas.height,X=o>P||l>R,B=(o<P*.9||l<R*.9)&&P>i&&R>i;T=X||B,X&&!n.capped&&(o>i||l>i)&&(w=o*.1,E=l*.1)}return r0(this)&&this.path&&(v=!0,T=!0,w+=this.getHeightOfLine(0)*this.zoomX,E+=this.getHeightOfLine(0)*this.zoomY),v?(T?(t.width=Math.ceil(o+w),t.height=Math.ceil(l+E)):(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height)),p=n.x/2,_=n.y/2,this.cacheTranslationX=Math.round(t.width/2-p)+p,this.cacheTranslationY=Math.round(t.height/2-_)+_,this.cacheWidth=o,this.cacheHeight=l,e.translate(this.cacheTranslationX,this.cacheTranslationY),e.scale(c,h),this.zoomX=c,this.zoomY=h,!0):!1}setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(t)}transform(t){const e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,n=this.calcTransformMatrix(!e);t.transform(n[0],n[1],n[2],n[3],n[4],n[5])}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=Lt.NUM_FRACTION_DIGITS,n=this.clipPath&&!this.clipPath.excludeFromExport?D(D({},this.clipPath.toObject(t)),{},{inverted:this.clipPath.inverted,absolutePositioned:this.clipPath.absolutePositioned}):null,i=D(D({},wi(this,t)),{},{type:this.constructor.type,version:hh,originX:this.originX,originY:this.originY,left:Xt(this.left,e),top:Xt(this.top,e),width:Xt(this.width,e),height:Xt(this.height,e),fill:_p(this.fill)?this.fill.toObject():this.fill,stroke:_p(this.stroke)?this.stroke.toObject():this.stroke,strokeWidth:Xt(this.strokeWidth,e),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:Xt(this.strokeMiterLimit,e),scaleX:Xt(this.scaleX,e),scaleY:Xt(this.scaleY,e),angle:Xt(this.angle,e),flipX:this.flipX,flipY:this.flipY,opacity:Xt(this.opacity,e),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:Xt(this.skewX,e),skewY:Xt(this.skewY,e)},n?{clipPath:n}:null);return this.includeDefaultValues?i:this._removeDefaultValues(i)}toDatalessObject(t){return this.toObject(t)}_removeDefaultValues(t){const e=this.constructor.getDefaults(),i=Object.keys(e).length>0?e:Object.getPrototypeOf(this);return e0(t,(o,l)=>{if(l===Nt||l===We||l==="type")return!0;const c=i[l];return o!==c&&!(Array.isArray(o)&&Array.isArray(c)&&o.length===0&&c.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}getObjectScaling(){if(!this.group)return new F(Math.abs(this.scaleX),Math.abs(this.scaleY));const t=vi(this.calcTransformMatrix());return new F(Math.abs(t.scaleX),Math.abs(t.scaleY))}getTotalObjectScaling(){const t=this.getObjectScaling();if(this.canvas){const e=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return t.scalarMultiply(e*n)}return t}getObjectOpacity(){let t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t}_constrainScale(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t===0?1e-4:t}_set(t,e){const n=this[t]!==e;if((t==="scaleX"||t==="scaleY")&&(e=this._constrainScale(e)),t==="scaleX"&&e<0?(this.flipX=!this.flipX,e*=-1):t==="scaleY"&&e<0?(this.flipY=!this.flipY,e*=-1):t==="shadow"&&e&&!(e instanceof gr)?e=new gr(e):t==="dirty"&&this.group&&this.group.set("dirty",e),this[t]=e,n){const i=this.group&&this.group.isOnACache();this.constructor.cacheProperties.includes(t)?(this.dirty=!0,i&&this.group.set("dirty",!0)):i&&this.constructor.stateProperties.includes(t)&&this.group.set("dirty",!0)}return this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.drawObject(t),this.dirty=!1),t.restore())}drawSelectionBackground(t){}renderCache(t){t=t||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext&&(this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)}shouldCache(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(t,e){if(t.save(),e.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",e.absolutePositioned){const n=Me(this.calcTransformMatrix());t.transform(n[0],n[1],n[2],n[3],n[4],n[5])}e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}drawObject(t,e){const n=this.fill,i=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath),this.fill=n,this.stroke=i}_drawClipPath(t,e){e&&(e._set("canvas",this.canvas),e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t,e))}drawCacheOnCanvas(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned){if(this._cacheCanvas&&this._cacheContext&&!t){const e=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-n/2,e,n)}return!0}return!1}_renderBackground(t){if(!this.backgroundColor)return;const e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity}_setStrokeStyles(t,e){const n=e.stroke;n&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,An(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(t,n):(t.strokeStyle=n.toLive(t),this._applyPatternGradientTransform(t,n)):t.strokeStyle=e.stroke)}_setFillStyles(t,e){let{fill:n}=e;n&&(An(n)?(t.fillStyle=n.toLive(t),this._applyPatternGradientTransform(t,n)):t.fillStyle=n)}_setClippingProperties(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"}_setLineDash(t,e){!e||e.length===0||(1&e.length&&e.push(...e),t.setLineDash(e))}_setShadow(t){if(!this.shadow)return;const e=this.shadow,n=this.canvas,i=this.getCanvasRetinaScaling(),[o,,,l]=(n==null?void 0:n.viewportTransform)||vn,c=o*i,h=l*i,f=e.nonScaling?new F(1,1):this.getObjectScaling();t.shadowColor=e.color,t.shadowBlur=e.blur*Lt.browserShadowBlurConstant*(c+h)*(f.x+f.y)/4,t.shadowOffsetX=e.offsetX*c*f.x,t.shadowOffsetY=e.offsetY*h*f.y}_removeShadow(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)}_applyPatternGradientTransform(t,e){if(!An(e))return{offsetX:0,offsetY:0};const n=e.gradientTransform||e.patternTransform,i=-this.width/2+e.offsetX||0,o=-this.height/2+e.offsetY||0;return e.gradientUnits==="percentage"?t.transform(this.width,0,0,this.height,i,o):t.transform(1,0,0,1,i,o),n&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:i,offsetY:o}}_renderPaintInOrder(t){this.paintFirst==="stroke"?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))}_render(t){}_renderFill(t){this.fill&&(t.save(),this._setFillStyles(t,this),this.fillRule==="evenodd"?t.fill("evenodd"):t.fill(),t.restore())}_renderStroke(t){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform){const e=this.getObjectScaling();t.scale(1/e.x,1/e.y)}this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}}_applyPatternForTransformedGradient(t,e){var n;const i=this._limitCacheSize(this._getCacheCanvasDimensions()),o=pe(),l=this.getCanvasRetinaScaling(),c=i.x/this.scaleX/l,h=i.y/this.scaleY/l;o.width=Math.ceil(c),o.height=Math.ceil(h);const f=o.getContext("2d");f&&(f.beginPath(),f.moveTo(0,0),f.lineTo(c,0),f.lineTo(c,h),f.lineTo(0,h),f.closePath(),f.translate(c/2,h/2),f.scale(i.zoomX/this.scaleX/l,i.zoomY/this.scaleY/l),this._applyPatternGradientTransform(f,e),f.fillStyle=e.toLive(t),f.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(l*this.scaleX/i.zoomX,l*this.scaleY/i.zoomY),t.strokeStyle=(n=f.createPattern(o,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new F(this.left+this.width/2,this.top+this.height/2)}clone(t){const e=this.toObject(t);return this.constructor.fromObject(e)}cloneAsImage(t){const e=this.toCanvasElement(t),n=ft.getClass("image");return new n(e)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=eu(this),n=this.group,i=this.shadow,o=Math.abs,l=t.enableRetinaScaling?Math.max(Lt.devicePixelRatio,1):1,c=(t.multiplier||1)*l;delete this.group,t.withoutTransform&&tu(this),t.withoutShadow&&(this.shadow=null),t.viewportTransform&&su(this,this.getViewportTransform());const h=pe(),f=this.getBoundingRect(!0,!0),d=this.shadow,p=new F;if(d){const P=d.blur,R=d.nonScaling?new F(1,1):this.getObjectScaling();p.x=2*Math.round(o(d.offsetX)+P)*o(R.x),p.y=2*Math.round(o(d.offsetY)+P)*o(R.y)}const _=f.width+p.x,v=f.height+p.y;h.width=Math.ceil(_),h.height=Math.ceil(v);const w=new go(h,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});t.format==="jpeg"&&(w.backgroundColor="#fff"),this.setPositionByOrigin(new F(w.width/2,w.height/2),Tt,Tt);const E=this.canvas;w._objects=[this],this.set("canvas",w),this.setCoords();const T=w.toCanvasElement(c||1,t);return this.set("canvas",E),this.shadow=i,n&&(this.group=n),this.set(e),this.setCoords(),w._objects=[],w.destroy(),T}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return qh(this.toCanvasElement(t),t.format||"png",t.quality||1)}isType(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.includes(this.constructor.type)||e.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(t){const{centeredRotation:e,originX:n,originY:i}=this;if(e){const{x:o,y:l}=this.getRelativeCenterPoint();this.originX=Tt,this.originY=Tt,this.left=o,this.top=l}if(this.set("angle",t),e){const{x:o,y:l}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,i);this.left=o,this.top=l,this.originX=n,this.originY=i}}setOnGroup(){}_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}dispose(){fh.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Zn().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}static _fromObject(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:n}=e,i=re(e,fP);return fo(fs(t),i).then(o=>{const l=D(D({},i),o);if(n){const{[n]:c,type:h}=l,f=re(l,[n,"type"].map($m));return new this(c,f)}else return new this(l)})}static fromObject(t,e){return this._fromObject(t,e)}};M(Ci,"stateProperties",hP);M(Ci,"cacheProperties",wr);M(Ci,"ownDefaults",uP);M(Ci,"type","FabricObject");ft.setClass(Ci);ft.setClass(Ci,"object");const Si=(r,t)=>(e,n,i,o)=>{const l=t(e,n,i,o);return l&&h0(r,f0(e,n,i,o)),l};function bi(r){return(t,e,n,i)=>{const{target:o,originX:l,originY:c}=e,h=o.getRelativeCenterPoint(),f=o.translateToOriginPoint(h,l,c),d=r(t,e,n,i);return o.setPositionByOrigin(f,e.originX,e.originY),d}}const dP=(r,t,e,n)=>{const i=po(t,t.originX,t.originY,e,n);if(t.originX===Tt||t.originX===ve&&i.x<0||t.originX===Nt&&i.x>0){const{target:o}=t,l=o.strokeWidth/(o.strokeUniform?o.scaleX:1),c=u0(t)?2:1,h=o.width,f=Math.ceil(Math.abs(i.x*c/o.scaleX)-l);return o.set("width",Math.max(f,0)),h!==o.width}return!1},_h=Si("resizing",bi(dP));function b0(r,t,e,n,i){n=n||{};const o=this.sizeX||n.cornerSize||i.cornerSize,l=this.sizeY||n.cornerSize||i.cornerSize,c=typeof n.transparentCorners<"u"?n.transparentCorners:i.transparentCorners,h=c?"stroke":"fill",f=!c&&(n.cornerStrokeColor||i.cornerStrokeColor);let d=t,p=e,_;r.save(),r.fillStyle=n.cornerColor||i.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||i.cornerStrokeColor||"",o>l?(_=o,r.scale(1,l/o),p=e*o/l):l>o?(_=l,r.scale(o/l,1),d=t*l/o):_=o,r.lineWidth=1,r.beginPath(),r.arc(d,p,_/2,0,vr,!1),r[h](),f&&r.stroke(),r.restore()}function T0(r,t,e,n,i){n=n||{};const o=this.sizeX||n.cornerSize||i.cornerSize,l=this.sizeY||n.cornerSize||i.cornerSize,c=typeof n.transparentCorners<"u"?n.transparentCorners:i.transparentCorners,h=c?"stroke":"fill",f=!c&&(n.cornerStrokeColor||i.cornerStrokeColor),d=o/2,p=l/2;r.save(),r.fillStyle=n.cornerColor||i.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||i.cornerStrokeColor||"",r.lineWidth=1,r.translate(t,e);const _=i.getTotalAngle();r.rotate(ne(_)),r["".concat(h,"Rect")](-d,-p,o,l),f&&r.strokeRect(-d,-p,o,l),r.restore()}class Ne{constructor(t){M(this,"visible",!0),M(this,"actionName","scale"),M(this,"angle",0),M(this,"x",0),M(this,"y",0),M(this,"offsetX",0),M(this,"offsetY",0),M(this,"sizeX",null),M(this,"sizeY",null),M(this,"touchSizeX",null),M(this,"touchSizeY",null),M(this,"cursorStyle","crosshair"),M(this,"withConnection",!1),Object.assign(this,t)}shouldActivate(t,e){var n;return((n=e.canvas)===null||n===void 0?void 0:n.getActiveObject())===e&&e.isControlVisible(t)}getActionHandler(t,e,n){return this.actionHandler}getMouseDownHandler(t,e,n){return this.mouseDownHandler}getMouseUpHandler(t,e,n){return this.mouseUpHandler}cursorStyleHandler(t,e,n){return e.cursorStyle}getActionName(t,e,n){return e.actionName}getVisibility(t,e){var n,i;return(n=(i=t._controlsVisibility)===null||i===void 0?void 0:i[e])!==null&&n!==void 0?n:this.visible}setVisibility(t,e,n){this.visible=t}positionHandler(t,e,n,i){return new F(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(e)}calcCornerCoords(t,e,n,i,o){let l,c,h,f;const d=o?this.touchSizeX:this.sizeX,p=o?this.touchSizeY:this.sizeY;if(d&&p&&d!==p){const _=Math.atan2(p,d),v=Math.sqrt(d*d+p*p)/2,w=_-ne(t),E=xr-_-ne(t);l=v*Ke(w),c=v*qe(w),h=v*Ke(E),f=v*qe(E)}else{const v=(d&&p?d:e)*Math.SQRT1_2,w=ne(45-t);l=h=v*Ke(w),c=f=v*qe(w)}return{tl:new F(n-f,i-h),tr:new F(n+l,i-c),bl:new F(n-l,i+c),br:new F(n+f,i+h)}}render(t,e,n,i,o){switch(i=i||{},i.cornerStyle||o.cornerStyle){case"circle":b0.call(this,t,e,n,i,o);break;default:T0.call(this,t,e,n,i,o)}}}const O0=(r,t,e)=>e.lockRotation?Ma:t.cursorStyle,gP=(r,t,e,n)=>{let{target:i,ex:o,ey:l,theta:c,originX:h,originY:f}=t;const d=i.translateToOriginPoint(i.getRelativeCenterPoint(),h,f);if(Hn(i,"lockRotation"))return!1;const p=Math.atan2(l-d.y,o-d.x),_=Math.atan2(n-d.y,e-d.x);let v=ss(_-p+c);if(i.snapAngle&&i.snapAngle>0){const E=i.snapAngle,T=i.snapThreshold||E,P=Math.ceil(v/E)*E,R=Math.floor(v/E)*E;Math.abs(v-R)<T?v=R:Math.abs(v-P)<T&&(v=P)}v<0&&(v=360+v),v%=360;const w=i.angle!==v;return i.angle=v,w},E0=Si("rotating",bi(gP));function P0(r,t){const e=t.canvas,n=r[e.uniScaleKey];return e.uniformScaling&&!n||!e.uniformScaling&&n}function A0(r,t,e){const n=Hn(r,"lockScalingX"),i=Hn(r,"lockScalingY");return!!(n&&i||!t&&(n||i)&&e||n&&t==="x"||i&&t==="y")}const pP=["e","se","s","sw","w","nw","n","ne","e"],Vi=(r,t,e)=>{const n=P0(r,e),i=t.x!==0&&t.y===0?"x":t.x===0&&t.y!==0?"y":"";if(A0(e,i,n))return Ma;const o=d0(e,t);return"".concat(pP[o],"-resize")};function du(r,t,e,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o=t.target,l=i.by,c=P0(r,o),h=A0(o,l,c);let f,d,p,_,v,w;if(h)return!1;if(t.gestureScale)d=t.scaleX*t.gestureScale,p=t.scaleY*t.gestureScale;else{if(f=po(t,t.originX,t.originY,e,n),v=l!=="y"?Math.sign(f.x||t.signX||1):1,w=l!=="x"?Math.sign(f.y||t.signY||1):1,t.signX||(t.signX=v),t.signY||(t.signY=w),Hn(o,"lockScalingFlip")&&(t.signX!==v||t.signY!==w))return!1;if(_=o._getTransformedDimensions(),c&&!l){const P=Math.abs(f.x)+Math.abs(f.y),{original:R}=t,X=Math.abs(_.x*R.scaleX/o.scaleX)+Math.abs(_.y*R.scaleY/o.scaleY),B=P/X;d=R.scaleX*B,p=R.scaleY*B}else d=Math.abs(f.x*o.scaleX/_.x),p=Math.abs(f.y*o.scaleY/_.y);u0(t)&&(d*=2,p*=2),t.signX!==v&&l!=="y"&&(t.originX=wp(t.originX),d*=-1,t.signX=v),t.signY!==w&&l!=="x"&&(t.originY=wp(t.originY),p*=-1,t.signY=w)}const E=o.scaleX,T=o.scaleY;return l?(l==="x"&&o.set("scaleX",d),l==="y"&&o.set("scaleY",p)):(!Hn(o,"lockScalingX")&&o.set("scaleX",d),!Hn(o,"lockScalingY")&&o.set("scaleY",p)),E!==o.scaleX||T!==o.scaleY}const mP=(r,t,e,n)=>du(r,t,e,n),_P=(r,t,e,n)=>du(r,t,e,n,{by:"x"}),vP=(r,t,e,n)=>du(r,t,e,n,{by:"y"}),Ws=Si("scaling",bi(mP)),D0=Si("scaling",bi(_P)),M0=Si("scaling",bi(vP)),yP=["target","ex","ey","skewingSide"],vh={x:{counterAxis:"y",scale:"scaleX",skew:"skewX",lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:"scaleY",skew:"skewY",lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},xP=["ns","nesw","ew","nwse"],k0=(r,t,e)=>{if(t.x!==0&&Hn(e,"lockSkewingY")||t.y!==0&&Hn(e,"lockSkewingX"))return Ma;const n=d0(e,t)%4;return"".concat(xP[n],"-resize")};function wP(r,t,e){let{target:n,ex:i,ey:o,skewingSide:l}=t,c=re(t,yP);const{skew:h}=vh[r],f=e.subtract(new F(i,o)).divide(new F(n.scaleX,n.scaleY))[r],d=n[h],p=c[h],_=Math.tan(ne(p)),v=r==="y"?n._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:n._getTransformedDimensions({scaleX:1,scaleY:1}).y,w=2*f*l/Math.max(v,1)+_,E=ss(Math.atan(w));n.set(h,E);const T=d!==n[h];if(T&&r==="y"){const{skewX:P,scaleX:R}=n,X=n._getTransformedDimensions({skewY:d}),B=n._getTransformedDimensions(),$=P!==0?X.x/B.x:1;$!==1&&n.set("scaleX",$*R)}return T}function L0(r,t,e,n,i){const{target:o}=e,{counterAxis:l,origin:c,lockSkewing:h,skew:f,flip:d}=vh[r];if(Hn(o,h))return!1;const{origin:p,flip:_}=vh[l],v=Xr(e[p])*(o[_]?-1:1),w=-Math.sign(v)*(o[d]?-1:1),E=(o[f]===0&&po(e,Tt,Tt,n,i)[r]>0||o[f]>0?1:-1)*w,T=-E*.5+.5;return Si("skewing",bi((R,X,B,$)=>wP(r,X,new F(B,$))))(t,D(D({},e),{},{[c]:T,skewingSide:w}),n,i)}const R0=(r,t,e,n)=>L0("x",r,t,e,n),F0=(r,t,e,n)=>L0("y",r,t,e,n);function sl(r,t){return r[t.canvas.altActionKey]}const Xs=(r,t,e)=>{const n=sl(r,e);return t.x===0?n?"skewX":"scaleY":t.y===0?n?"skewY":"scaleX":""},di=(r,t,e)=>sl(r,e)?k0(r,t,e):Vi(r,t,e),yh=(r,t,e,n)=>sl(r,t.target)?F0(r,t,e,n):D0(r,t,e,n),xh=(r,t,e,n)=>sl(r,t.target)?R0(r,t,e,n):M0(r,t,e,n),gu=()=>({ml:new Ne({x:-.5,y:0,cursorStyleHandler:di,actionHandler:yh,getActionName:Xs}),mr:new Ne({x:.5,y:0,cursorStyleHandler:di,actionHandler:yh,getActionName:Xs}),mb:new Ne({x:0,y:.5,cursorStyleHandler:di,actionHandler:xh,getActionName:Xs}),mt:new Ne({x:0,y:-.5,cursorStyleHandler:di,actionHandler:xh,getActionName:Xs}),tl:new Ne({x:-.5,y:-.5,cursorStyleHandler:Vi,actionHandler:Ws}),tr:new Ne({x:.5,y:-.5,cursorStyleHandler:Vi,actionHandler:Ws}),bl:new Ne({x:-.5,y:.5,cursorStyleHandler:Vi,actionHandler:Ws}),br:new Ne({x:.5,y:.5,cursorStyleHandler:Vi,actionHandler:Ws}),mtr:new Ne({x:0,y:-.5,actionHandler:E0,cursorStyleHandler:O0,offsetY:-40,withConnection:!0,actionName:"rotate"})}),I0=()=>({mr:new Ne({x:.5,y:0,actionHandler:_h,cursorStyleHandler:di,actionName:"resizing"}),ml:new Ne({x:-.5,y:0,actionHandler:_h,cursorStyleHandler:di,actionName:"resizing"})}),B0=()=>D(D({},gu()),I0()),CP={};class ol extends Ci{static getDefaults(){return D(D({},super.getDefaults()),{},{controls:gu()},ol.ownDefaults)}_updateCacheCanvas(){const t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){const e=t._currentTransform.target,n=t._currentTransform.action;if(this===e&&n.startsWith("scale"))return!1}return super._updateCacheCanvas()}getActiveControl(){return this.__corner}_findTargetCorner(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasControls||!this.canvas)return"";this.__corner=void 0;const n=Object.entries(this.oCoords);for(let i=n.length-1;i>=0;i--){const[o,l]=n[i];if(this.controls[o].shouldActivate(o,this)){const c=this._getImageLines(e?l.touchCorner:l.corner),h=this._findCrossPoints(t,c);if(h!==0&&h%2===1)return this.__corner=o,o}}return""}calcOCoords(){const t=this.getViewportTransform(),e=this.getCenterPoint(),n=ho(e.x,e.y),i=uo({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),o=ke(n,i),l=ke(t,o),c=ke(l,[1/t[0],0,0,1/t[3],0,0]),h=this.group?vi(this.calcTransformMatrix()):void 0,f=this._calculateCurrentDimensions(h),d={};return this.forEachControl((p,_)=>{const v=p.positionHandler(f,c,this,p);d[_]=Object.assign(v,this._calcCornerCoords(p,v))}),d}_calcCornerCoords(t,e){const n=t.calcCornerCoords(this.angle,this.cornerSize,e.x,e.y,!1),i=t.calcCornerCoords(this.angle,this.touchCornerSize,e.x,e.y,!0);return{corner:n,touchCorner:i}}setCoords(){super.setCoords(),this.oCoords=this.calcOCoords()}forEachControl(t){for(const e in this.controls)t(this.controls[e],e,this)}drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;t.save();const e=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),i=this.getViewportTransform();t.translate(e.x,e.y),t.scale(1/i[0],1/i[3]),t.rotate(ne(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-n.x/2,-n.y/2,n.x,n.y),t.restore()}strokeBorders(t,e){t.strokeRect(-e.x/2,-e.y/2,e.x,e.y)}_drawBorders(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=D({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);t.save(),t.strokeStyle=i.borderColor,this._setLineDash(t,i.borderDashArray),this.strokeBorders(t,e),i.hasControls&&this.drawControlsConnectingLines(t,e),t.restore()}_renderControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:n,hasControls:i}=this,o=D({hasBorders:n,hasControls:i},e),l=this.getViewportTransform(),c=o.hasBorders,h=o.hasControls,f=ke(l,this.calcTransformMatrix()),d=vi(f);t.save(),t.translate(d.translateX,d.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(d.angle-=180),t.rotate(ne(this.group?d.angle:this.angle)),c&&this.drawBorders(t,d,e),h&&this.drawControls(t,e),t.restore()}drawBorders(t,e,n){let i;if(n&&n.forActiveSelection||this.group){const o=nu(this.width,this.height,e),l=(this.strokeUniform?new F().scalarAdd(this.canvas?this.canvas.getZoom():1):new F(e.scaleX,e.scaleY)).scalarMultiply(this.strokeWidth);i=o.add(l).scalarAdd(this.borderScaleFactor).scalarAdd(this.padding*2)}else i=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(t,i,n)}drawControlsConnectingLines(t,e){let n=!1;t.beginPath(),this.forEachControl((i,o)=>{i.withConnection&&i.getVisibility(this,o)&&(n=!0,t.moveTo(i.x*e.x,i.y*e.y),t.lineTo(i.x*e.x+i.offsetX,i.y*e.y+i.offsetY))}),n&&t.stroke()}drawControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:i,cornerDashArray:o,cornerColor:l}=this,c=D({cornerStrokeColor:i,cornerDashArray:o,cornerColor:l},e);t.setTransform(n,0,0,n,0,0),t.strokeStyle=t.fillStyle=c.cornerColor,this.transparentCorners||(t.strokeStyle=c.cornerStrokeColor),this._setLineDash(t,c.cornerDashArray),this.setCoords(),this.forEachControl((h,f)=>{if(h.getVisibility(this,f)){const d=this.oCoords[f];h.render(t,d.x,d.y,c,this)}}),t.restore()}isControlVisible(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)}setControlVisible(t,e){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e}setControlsVisibility(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(t).forEach(e=>{let[n,i]=e;return this.setControlVisible(n,i)})}clearContextTop(t){if(!this.canvas)return;const e=this.canvas.contextTop;if(!e)return;const n=this.canvas.viewportTransform;e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(e);const i=this.width+4,o=this.height+4;return e.clearRect(-i/2,-o/2,i,o),t||e.restore(),e}onDeselect(t){return!1}onSelect(t){return!1}canDrop(t){return!1}renderDragSourceEffect(t){}renderDropTargetEffect(t){}}M(ol,"ownDefaults",CP);function j0(r,t){return t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(e.prototype,n)||Object.create(null))})}),r}class ye extends ol{}j0(ye,[p0]);ft.setClass(ye);ft.setClass(ye,"object");const W0=(r,t,e,n)=>{n=Math.round(n);const i=n*2+1,{data:o}=r.getImageData(t-n,e-n,i,i);for(let l=3;l<o.length;l+=4)if(o[l]>0)return!1;return!0},Gr=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function al(r){return new RegExp("^("+r.join("|")+")\\b","i")}var Cp,Sp;const co=String.raw(Cp||(Cp=Qn(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"])));String.raw(Sp||(Sp=Qn(["(?:s+,?s*|,s*|$)"],["(?:\\s+,?\\s*|,\\s*|$)"])));const SP=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+co+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+co+"))?\\s+(.*)"),bP=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],TP=["symbol","image","marker","pattern","view","svg"],OP=["pattern","defs","symbol","metadata","clipPath","mask","desc"],EP=["symbol","g","a","svg","clipPath","defs"],PP={cx:Nt,x:Nt,r:"radius",cy:We,y:We,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},Wc="font-size",Xc="clip-path";al(bP);al(TP);const bp=al(EP);function X0(r,t){const e=r.nodeName,n=r.getAttribute("class"),i=r.getAttribute("id");let o;if(o=new RegExp("^"+e,"i"),t=t.replace(o,""),i&&t.length&&(o=new RegExp("#"+i+"(?![a-zA-Z\\-]+)","i"),t=t.replace(o,"")),n&&t.length){const l=n.split(" ");for(let c=l.length;c--;)o=new RegExp("\\."+l[c]+"(?![a-zA-Z\\-]+)","i"),t=t.replace(o,"")}return t.length===0}function AP(r,t){let e,n=!0;for(;r.parentElement&&r.parentElement.nodeType===1&&t.length;)n&&(e=t.pop()),r=r.parentElement,n=X0(r,e);return t.length===0}function DP(r,t){let e=!0;const n=X0(r,t.pop());return n&&t.length&&(e=AP(r,t)),n&&e&&t.length===0}function MP(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e={};for(const n in t)DP(r,n.split(" "))&&(e=D(D({},e),t[n]));return e}const kP=r=>{var t;return(t=PP[r])!==null&&t!==void 0?t:r},H0=r=>r.replace(new RegExp("(".concat(co,")"),"gi")," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Tp,Op,Ep,Pp,Ap,Dp,Mp;const Ve="(".concat(co,")"),LP=String.raw(Tp||(Tp=Qn(["(skewX)(",")"],["(skewX)\\(","\\)"])),Ve),RP=String.raw(Op||(Op=Qn(["(skewY)(",")"],["(skewY)\\(","\\)"])),Ve),FP=String.raw(Ep||(Ep=Qn(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Ve,Ve,Ve),IP=String.raw(Pp||(Pp=Qn(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Ve,Ve),BP=String.raw(Ap||(Ap=Qn(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Ve,Ve),jP=String.raw(Dp||(Dp=Qn(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Ve,Ve,Ve,Ve,Ve,Ve),pu="(?:".concat(jP,"|").concat(BP,"|").concat(FP,"|").concat(IP,"|").concat(LP,"|").concat(RP,")"),WP="(?:".concat(pu,"*)"),XP=String.raw(Mp||(Mp=Qn(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),WP),HP=new RegExp(XP),YP=new RegExp(pu,"g");function wh(r){r=H0(r).replace(/\s*([()])\s*/gi,"$1");const t=[];if(!r||r&&!HP.test(r))return[...vn];for(const e of r.matchAll(YP)){const n=new RegExp(pu).exec(e[0]);if(!n)continue;let i=vn;const o=n.filter(w=>!!w),[,l,...c]=o,[h,f,d,p,_,v]=c.map(w=>parseFloat(w));switch(l){case"translate":i=ho(h,f);break;case"rotate":i=uo({angle:h},{x:f,y:d});break;case"scale":i=Jh(h,f);break;case"skewX":i=Zh(h);break;case"skewY":i=Qh(h);break;case"matrix":i=[h,f,d,p,_,v];break}t.push(i)}return nl(t)}function UP(r,t,e,n){const i=Array.isArray(t);let o,l=t;if((r==="fill"||r==="stroke")&&t===ln)l="";else{if(r==="strokeUniform")return t==="non-scaling-stroke";if(r==="strokeDashArray")t===ln?l=null:l=t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(r==="transformMatrix")e&&e.transformMatrix?l=ke(e.transformMatrix,wh(t)):l=wh(t);else if(r==="visible")l=t!==ln&&t!=="hidden",e&&e.visible===!1&&(l=!1);else if(r==="opacity")l=parseFloat(t),e&&typeof e.opacity<"u"&&(l*=e.opacity);else if(r==="textAnchor")l=t==="start"?Nt:t==="end"?ve:Tt;else if(r==="charSpacing")o=_i(t,n)/n*1e3;else if(r==="paintFirst"){const c=t.indexOf("fill"),h=t.indexOf("stroke");l="fill",(c>-1&&h>-1&&h<c||c===-1&&h>-1)&&(l="stroke")}else{if(r==="href"||r==="xlink:href"||r==="font")return t;if(r==="imageSmoothing")return t==="optimizeQuality";o=i?t.map(_i):_i(t,n)}}return!i&&isNaN(o)?l:o}function zP(r,t){const e=r.match(SP);if(!e)return;const n=e[1],i=e[3],o=e[4],l=e[5],c=e[6];n&&(t.fontStyle=n),i&&(t.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),o&&(t.fontSize=_i(o)),c&&(t.fontFamily=c),l&&(t.lineHeight=l==="normal"?1:l)}function NP(r,t){Object.entries(r).forEach(e=>{let[n,i]=e;i!==void 0&&(t[n.toLowerCase()]=i)})}function VP(r,t){r.replace(/;\s*$/,"").split(";").forEach(e=>{const[n,i]=e.split(":");t[n.trim().toLowerCase()]=i.trim()})}function GP(r){const t={},e=r.getAttribute("style");return e&&(typeof e=="string"?VP(e,t):NP(e,t)),t}const $P={stroke:"strokeOpacity",fill:"fillOpacity"};function KP(r){const t=ye.getDefaults();return Object.entries($P).forEach(e=>{let[n,i]=e;if(typeof r[i]>"u"||r[n]==="")return;if(typeof r[n]>"u"){if(!t[n])return;r[n]=t[n]}if(r[n].indexOf("url(")===0)return;const o=new Qt(r[n]);r[n]=o.setAlpha(Xt(o.getAlpha()*r[i],2)).toRgba()}),r}function Cr(r,t,e){if(!r)return{};let n={},i,o=$h;r.parentNode&&bp.test(r.parentNode.nodeName)&&(n=Cr(r.parentElement,t,e),n.fontSize&&(i=o=_i(n.fontSize)));const l=D(D(D({},t.reduce((f,d)=>{const p=r.getAttribute(d);return p&&(f[d]=p),f},{})),MP(r,e)),GP(r));l[Xc]&&r.setAttribute(Xc,l[Xc]),l[Wc]&&(i=_i(l[Wc],o),l[Wc]="".concat(i));const c={};for(const f in l){const d=kP(f),p=UP(d,l[f],n,i);c[d]=p}c&&c.font&&zP(c.font,c);const h=D(D({},n),c);return bp.test(r.nodeName)?h:KP(h)}const qP=["left","top","width","height","visible"],JP={rx:0,ry:0},Y0=["rx","ry"];class Sr extends ye{static getDefaults(){return D(D({},super.getDefaults()),Sr.ownDefaults)}constructor(t){super(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:e}=this;t&&!e?this.ry=t:e&&!t&&(this.rx=e)}_render(t){const{width:e,height:n}=this,i=-e/2,o=-n/2,l=this.rx?Math.min(this.rx,e/2):0,c=this.ry?Math.min(this.ry,n/2):0,h=l!==0||c!==0;t.beginPath(),t.moveTo(i+l,o),t.lineTo(i+e-l,o),h&&t.bezierCurveTo(i+e-Ir*l,o,i+e,o+Ir*c,i+e,o+c),t.lineTo(i+e,o+n-c),h&&t.bezierCurveTo(i+e,o+n-Ir*c,i+e-Ir*l,o+n,i+e-l,o+n),t.lineTo(i+l,o+n),h&&t.bezierCurveTo(i+Ir*l,o+n,i,o+n-Ir*c,i,o+n-c),t.lineTo(i,o+c),h&&t.bezierCurveTo(i,o+Ir*c,i+Ir*l,o,i+l,o),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Y0,...t])}_toSVG(){const{width:t,height:e,rx:n,ry:i}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-t/2,'" y="').concat(-e/2,'" rx="').concat(n,'" ry="').concat(i,'" width="').concat(t,'" height="').concat(e,`" />
`)]}static async fromElement(t,e,n){const i=Cr(t,this.ATTRIBUTE_NAMES,n),{left:o=0,top:l=0,width:c=0,height:h=0,visible:f=!0}=i,d=re(i,qP);return new this(D(D(D({},e),d),{},{left:o,top:l,width:c,height:h,visible:!!(f&&c&&h)}))}}M(Sr,"type","Rect");M(Sr,"cacheProperties",[...wr,...Y0]);M(Sr,"ownDefaults",JP);M(Sr,"ATTRIBUTE_NAMES",[...Gr,"x","y","rx","ry","width","height"]);ft.setClass(Sr);ft.setSVGClass(Sr);const ZP=["objects"],QP={layout:"fit-content",strokeWidth:0,subTargetCheck:!1,interactive:!1};class br extends Km(ye){static getDefaults(){return D(D({},super.getDefaults()),br.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;super(),M(this,"_activeObjects",[]),M(this,"__objectSelectionTracker",void 0),M(this,"__objectSelectionDisposer",void 0),M(this,"_firstLayoutDone",!1),this._objects=t.slice(),this.__objectMonitor=this.__objectMonitor.bind(this),this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.set(D(D({},e),{},{angle:0,skewX:0,skewY:0})),this.forEachObject(i=>{this.enterGroup(i,!1)}),this._applyLayoutStrategy({type:"initialization",options:e,objectsRelativeToGroup:n})}canEnterGroup(t){return t===this||this.isDescendantOf(t)?(console.error("fabric.Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(t)!==-1?(console.error("fabric.Group: duplicate objects are not supported inside group, this call has no effect"),!1):!0}_filterObjectsBeforeEnteringGroup(t){return t.filter((e,n,i)=>this.canEnterGroup(e)&&i.indexOf(e)===n)}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=this._filterObjectsBeforeEnteringGroup(e),o=super.add(...i);return this._onAfterObjectsChange("added",i),o}insertAt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const o=this._filterObjectsBeforeEnteringGroup(n),l=super.insertAt(t,...o);return this._onAfterObjectsChange("added",o),l}remove(){const t=super.remove(...arguments);return this._onAfterObjectsChange("removed",t),t}_onObjectAdded(t){this.enterGroup(t,!0),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onRelativeObjectAdded(t){this.enterGroup(t,!1),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t,e){this.exitGroup(t,e),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onAfterObjectsChange(t,e){this._applyLayoutStrategy({type:t,targets:e}),this._set("dirty",!0)}_onStackOrderChanged(){this._set("dirty",!0)}_set(t,e){const n=this[t];return super._set(t,e),t==="canvas"&&n!==e&&this.forEachObject(i=>{i._set(t,e)}),t==="layout"&&n!==e&&this._applyLayoutStrategy({type:"layout_change",layout:e,prevLayout:n}),t==="interactive"&&this.forEachObject(i=>this._watchObject(e,i)),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectMonitor(t){this._applyLayoutStrategy(D(D({},t),{},{type:"object_modified"})),this._set("dirty",!0)}__objectSelectionMonitor(t,e){let{target:n}=e;if(t)this._activeObjects.push(n),this._set("dirty",!0);else if(this._activeObjects.length>0){const i=this._activeObjects.indexOf(n);i>-1&&(this._activeObjects.splice(i,1),this._set("dirty",!0))}}_watchObject(t,e){const n=t?"on":"off";t&&this._watchObject(!1,e),e[n]("changed",this.__objectMonitor),e[n]("modified",this.__objectMonitor),e[n]("selected",this.__objectSelectionTracker),e[n]("deselected",this.__objectSelectionDisposer)}enterGroup(t,e){return t.group&&t.group.remove(t),this._enterGroup(t,e),!0}_enterGroup(t,e){e&&as(t,ke(Me(this.calcTransformMatrix()),t.calcTransformMatrix())),this._shouldSetNestedCoords()&&t.setCoords(),t._set("group",this),t._set("canvas",this.canvas),this.interactive&&this._watchObject(!0,t);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===t||t.isDescendantOf(n))&&this._activeObjects.push(t)}exitGroup(t,e){this._exitGroup(t,e),t._set("canvas",void 0)}_exitGroup(t,e){t._set("group",void 0),e||(as(t,ke(this.calcTransformMatrix(),t.calcTransformMatrix())),t.setCoords()),this._watchObject(!1,t);const n=this._activeObjects.length>0?this._activeObjects.indexOf(t):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const t=ye.prototype.shouldCache.call(this);if(t){for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1,!1}return t}willDrawShadow(){if(ye.prototype.willDrawShadow.call(this))return!0;for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.group&&this.group.isOnACache()}drawObject(t){this._renderBackground(t);for(let n=0;n<this._objects.length;n++){var e;(e=this.canvas)!==null&&e!==void 0&&e.preserveObjectStacking&&this._objects[n].group!==this?(t.save(),t.transform(...Me(this.calcTransformMatrix())),this._objects[n].render(t),t.restore()):this._objects[n].group===this&&this._objects[n].render(t)}this._drawClipPath(t,this.clipPath)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(t=>t.setCoords())}render(t){this._transformDone=!0,super.render(t),this._transformDone=!1}triggerLayout(t){t&&t.layout&&(t.prevLayout=this.layout,this.layout=t.layout),this._applyLayoutStrategy({type:"imperative",context:t})}_adjustObjectPosition(t,e){t.set({left:t.left+e.x,top:t.top+e.y})}_applyLayoutStrategy(t){const e=t.type==="initialization";if(!e&&!this._firstLayoutDone)return;const n=e&&t.options,i=n&&{angle:n.angle||0,skewX:n.skewX||0,skewY:n.skewY||0},o=this.getRelativeCenterPoint();let l=this.getLayoutStrategyResult(this.layout,[...this._objects],t),c;if(l){const h=new F(l.centerX,l.centerY);c=o.subtract(h).add(new F(l.correctionX||0,l.correctionY||0)).transform(Me(this.calcOwnMatrix()),!0),this.set({width:l.width,height:l.height}),!t.objectsRelativeToGroup&&this.forEachObject(d=>{d.group===this&&this._adjustObjectPosition(d,c)}),!e&&this.layout!=="clip-path"&&this.clipPath&&!this.clipPath.absolutePositioned&&this._adjustObjectPosition(this.clipPath,c),(!h.eq(o)||i)&&(this.setPositionByOrigin(h,Tt,Tt),i&&this.set(i),this.setCoords())}else if(e)l={centerX:o.x,centerY:o.y,width:this.width,height:this.height},i&&this.set(i),c=new F;else return;this._firstLayoutDone=!0,this.onLayout(t,l),this.fire("layout",{context:t,result:l,diff:c}),this.group&&this.group._applyLayoutStrategy&&(t.path||(t.path=[]),t.path.push(this),this.group._applyLayoutStrategy(t))}getLayoutStrategyResult(t,e,n){if(t==="fit-content-lazy"&&n.type==="added"&&e.length>n.targets.length){const i=n.targets.concat(this);return this.prepareBoundingBox(t,i,n)}else{if(t==="fit-content"||t==="fit-content-lazy"||t==="fixed"&&(n.type==="initialization"||n.type==="imperative"))return this.prepareBoundingBox(t,e,n);if(t==="clip-path"&&this.clipPath){const i=this.clipPath,o=i._getTransformedDimensions();if(i.absolutePositioned&&(n.type==="initialization"||n.type==="layout_change")){let l=i.getCenterPoint();if(this.group){const c=Me(this.group.calcTransformMatrix());l=fe(l,c)}return{centerX:l.x,centerY:l.y,width:o.x,height:o.y}}else if(!i.absolutePositioned){let l;const c=i.getRelativeCenterPoint(),h=fe(c,this.calcOwnMatrix(),!0);if(n.type==="initialization"||n.type==="layout_change"){const f=this.prepareBoundingBox(t,e,n)||{};return l=new F(f.centerX||0,f.centerY||0),{centerX:l.x+h.x,centerY:l.y+h.y,correctionX:f.correctionX-h.x,correctionY:f.correctionY-h.y,width:i.width,height:i.height}}else return l=this.getRelativeCenterPoint(),{centerX:l.x+h.x,centerY:l.y+h.y,width:o.x,height:o.y}}}}}prepareBoundingBox(t,e,n){return n.type==="initialization"?this.prepareInitialBoundingBox(t,e,n):n.type==="imperative"&&n.context?D(D({},this.getObjectsBoundingBox(e)||{}),n.context):this.getObjectsBoundingBox(e)}prepareInitialBoundingBox(t,e,n){const i=n.options||{},o=typeof i.left=="number",l=typeof i.top=="number",c=typeof i.width=="number",h=typeof i.height=="number";if(o&&l&&c&&h&&n.objectsRelativeToGroup||e.length===0)return;const f=this.getObjectsBoundingBox(e)||{},{centerX:d=0,centerY:p=0,width:_=0,height:v=0}=f,w=c?this.width:_,E=h?this.height:v,T=new F(d,p),P=new F(Xr(this.originX),Xr(this.originY)),R=new F(w,E),X=this._getTransformedDimensions({width:0,height:0}),B=this._getTransformedDimensions({width:w,height:E,strokeWidth:0}),$=this._getTransformedDimensions({width:f.width,height:f.height,strokeWidth:0}),tt=new F(0,0),nt=P.scalarAdd(.5),st=B.multiply(nt),Dt=new F(c?$.x/2:st.x,h?$.y/2:st.y),Pt=new F(o?this.left-(B.x+X.x)*P.x:T.x-Dt.x,l?this.top-(B.y+X.y)*P.y:T.y-Dt.y),Zt=new F(o?Pt.x-T.x+$.x*(c?.5:0):-(c?(B.x-X.x)*.5:B.x*nt.x),l?Pt.y-T.y+$.y*(h?.5:0):-(h?(B.y-X.y)*.5:B.y*nt.y)).add(tt),ot=new F(c?-B.x/2:0,h?-B.y/2:0).add(Zt);return{centerX:Pt.x,centerY:Pt.y,correctionX:ot.x,correctionY:ot.y,width:R.x,height:R.y}}getObjectsBoundingBox(t,e){if(t.length===0)return null;const n=[];t.forEach(p=>{const _=p.getRelativeCenterPoint();let v=p._getTransformedDimensions().scalarDivide(2);if(p.angle){const w=ne(p.angle),E=Math.abs(qe(w)),T=Math.abs(Ke(w)),P=v.x*T+v.y*E,R=v.x*E+v.y*T;v=new F(P,R)}n.push(_.subtract(v),_.add(v))});const{left:i,top:o,width:l,height:c}=mr(n),h=new F(l,c),f=(e?new F:new F(i,o)).add(h.scalarDivide(2)),d=f.transform(this.calcOwnMatrix());return{centerX:d.x,centerY:d.y,width:h.x,height:h.y}}onLayout(t,e){}__serializeObjects(t,e){const n=this.includeDefaultValues;return this._objects.filter(function(i){return!i.excludeFromExport}).map(function(i){const o=i.includeDefaultValues;i.includeDefaultValues=n;const l=i[t||"toObject"](e);return i.includeDefaultValues=o,l})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(["layout","subTargetCheck","interactive",...t])),{},{objects:this.__serializeObjects("toObject",t)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this._activeObjects=[],this.forEachObject(t=>{this._watchObject(!1,t),t.dispose()}),super.dispose()}_createSVGBgRect(t){if(!this.backgroundColor)return"";const e=Sr.prototype._toSVG.call(this),n=e.indexOf("COMMON_PARTS");e[n]='for="group" ';const i=e.join("");return t?t(i):i}_toSVG(t){const e=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(t);n&&e.push("		",n);for(let i=0;i<this._objects.length;i++)e.push("		",this._objects[i].toSVG(t));return e.push(`</g>
`),e}getSvgStyles(){const t=typeof this.opacity<"u"&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")}toClipPathSVG(t){const e=[],n=this._createSVGBgRect(t);n&&e.push("	",n);for(let i=0;i<this._objects.length;i++)e.push("	",this._objects[i].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}static fromObject(t){let{objects:e=[]}=t,n=re(t,ZP);return Promise.all([os(e),fo(n)]).then(i=>{let[o,l]=i;return new this(o,D(D({},n),l),!0)})}}M(br,"stateProperties",[...ye.stateProperties,"layout"]);M(br,"type","Group");M(br,"ownDefaults",QP);ft.setClass(br);class ll extends br{constructor(){super(...arguments),M(this,"multiSelectionStacking","canvas-stacking")}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...e):e.forEach(i=>{const o=this._objects.findIndex(c=>c.isInFrontOf(i)),l=o===-1?this.size():o;this.insertAt(l,i)})}enterGroup(t,e){if(t.group){const n=t.group;n._exitGroup(t),t.__owningGroup=n}return this._enterGroup(t,e),!0}exitGroup(t,e){this._exitGroup(t,e);const n=t.__owningGroup;n&&(n._enterGroup(t,!0),delete t.__owningGroup)}_onAfterObjectsChange(t,e){super._onAfterObjectsChange(t,e);const n=[];e.forEach(i=>{i.group&&!n.includes(i.group)&&n.push(i.group)}),t==="removed"?n.forEach(i=>{i._onAfterObjectsChange("added",e)}):n.forEach(i=>{i._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}_applyLayoutStrategy(t){super._applyLayoutStrategy(t),this._objects.length===0&&Object.assign(this,{left:0,top:0,angle:0,scaleX:1,scaleY:1,skewX:0,skewY:0,flipX:!1,flipY:!1})}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(t,e,n){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,super._renderControls(t,e);const i=D(D({hasControls:!1},n),{},{forActiveSelection:!0});for(let o=0;o<this._objects.length;o++)this._objects[o]._renderControls(t,i);t.restore()}}M(ll,"type","ActiveSelection");ft.setClass(ll);ft.setClass(ll,"activeSelection");const tA=(r,t,e)=>r.rotate(e,t);class U0{constructor(t){this.options=t,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new F(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new F(1/this.options.scaleX,1/this.options.scaleY):new F(1,1)}createSideVector(t,e){const n=ka(t,e);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(t,e,n){return this.applySkew(t.add(this.calcOrthogonalProjection(t,e,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(t){const e=new F(t);return e.y+=e.x*Math.tan(ne(this.options.skewY)),e.x+=e.y*Math.tan(ne(this.options.skewX)),e}scaleUnitVector(t,e){return t.multiply(this.strokeUniformScalar).scalarMultiply(e)}}const eA=new F;class Zi extends U0{static getOrthogonalRotationFactor(t,e){const n=e?Ra(t,e):w0(t);return Math.abs(n)<xr?-1:1}constructor(t,e,n,i){super(i),M(this,"AB",void 0),M(this,"AC",void 0),M(this,"alpha",void 0),M(this,"bisector",void 0),this.A=new F(t),this.B=new F(e),this.C=new F(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Ra(this.AB,this.AC),this.bisector=il(hu(this.AB.eq(eA)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(t,e),o=uu(i),l=Zi.getOrthogonalRotationFactor(o,this.bisector);return this.scaleUnitVector(o,n*l)}projectBevel(){const t=[];return(this.alpha%vr===0?[this.B]:[this.B,this.C]).forEach(e=>{t.push(this.projectOrthogonally(this.A,e)),t.push(this.projectOrthogonally(this.A,e,-this.strokeProjectionMagnitude))}),t}projectMiter(){const t=[],e=Math.abs(this.alpha),n=1/Math.sin(e/2),i=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),o=this.options.strokeUniform?La(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return La(i)/this.strokeProjectionMagnitude<=o&&t.push(this.applySkew(this.A.add(i))),t.push(...this.projectBevel()),t}projectRoundNoSkew(t,e){const n=[],i=new F(Zi.getOrthogonalRotationFactor(this.bisector),Zi.getOrthogonalRotationFactor(new F(this.bisector.y,this.bisector.x))),o=new F(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i),l=new F(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i);return[o,l].forEach(c=>{mh(c,t,e)&&n.push(this.A.add(c))}),n}projectRoundWithSkew(t,e){const n=[],{skewX:i,skewY:o,scaleX:l,scaleY:c,strokeUniform:h}=this.options,f=new F(Math.tan(ne(i)),Math.tan(ne(o))),d=this.strokeProjectionMagnitude,p=h?d/c/Math.sqrt(1/c**2+1/l**2*f.y**2):d/Math.sqrt(1+f.y**2),_=new F(Math.sqrt(Math.max(d**2-p**2,0)),p),v=h?d/Math.sqrt(1+f.x**2*(1/c)**2/(1/l+1/l*f.x*f.y)**2):d/Math.sqrt(1+f.x**2/(1+f.x*f.y)**2),w=new F(v,Math.sqrt(Math.max(d**2-v**2,0)));return[w,w.scalarMultiply(-1),_,_.scalarMultiply(-1)].map(E=>this.applySkew(h?E.multiply(this.strokeUniformScalar):E)).forEach(E=>{mh(E,t,e)&&n.push(this.applySkew(this.A).add(E))}),n}projectRound(){const t=[];t.push(...this.projectBevel());const e=this.alpha%vr===0,n=this.applySkew(this.A),i=t[e?0:2].subtract(n),o=t[e?1:0].subtract(n),l=e?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),c=Ji(i,l)>0,h=c?i:o,f=c?o:i;return this.isSkewed()?t.push(...this.projectRoundWithSkew(h,f)):t.push(...this.projectRoundNoSkew(h,f)),t}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t,angle:this.alpha,bisector:this.bisector}))}}class kp extends U0{constructor(t,e,n){super(n),this.A=new F(t),this.T=new F(e)}calcOrthogonalProjection(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(t,e);return this.scaleUnitVector(uu(i),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const t=[];if(!this.isSkewed()&&this.A.eq(this.T)){const e=new F(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.applySkew(this.A.add(e)),this.applySkew(this.A.subtract(e)))}else t.push(...new Zi(this.A,this.T,this.T,this.options).projectRound());return t}projectSquare(){const t=[];if(this.A.eq(this.T)){const e=new F(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.A.add(e),this.A.subtract(e))}else{const e=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(il(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),i=this.A.add(n);t.push(i.add(e),i.subtract(e))}return t.map(e=>this.applySkew(e))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t}))}}const z0=function(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const n=[];if(r.length===0)return n;const i=r.reduce((o,l)=>(o[o.length-1].eq(l)||o.push(new F(l)),o),[new F(r[0])]);if(i.length===1)e=!0;else if(!e){const o=i[0],l=$E(i,c=>!c.eq(o));i.splice(l+1)}return i.forEach((o,l,c)=>{let h,f;l===0?(f=c[1],h=e?o:c[c.length-1]):l===c.length-1?(h=c[l-1],f=e?o:c[0]):(h=c[l-1],f=c[l+1]),e&&c.length===1?n.push(...new kp(o,o,t).project()):e&&(l===0||l===c.length-1)?n.push(...new kp(o,l===0?f:h,t).project()):n.push(...new Zi(o,h,f,t).project())}),n},cl=function(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return r.fill!==t.fill||r.stroke!==t.stroke||r.strokeWidth!==t.strokeWidth||r.fontSize!==t.fontSize||r.fontFamily!==t.fontFamily||r.fontWeight!==t.fontWeight||r.fontStyle!==t.fontStyle||r.textBackgroundColor!==t.textBackgroundColor||r.deltaY!==t.deltaY||e&&(r.overline!==t.overline||r.underline!==t.underline||r.linethrough!==t.linethrough)},N0=(r,t)=>{const e=t.split(`
`),n=[];let i=-1,o={};r=fs(r);for(let l=0;l<e.length;l++){if(!r[l]){i+=e[l].length,o={};continue}for(let c=0;c<e[l].length;c++){i++;const h=r[l][c];h&&Object.keys(h).length>0&&(cl(o,h,!0)?n.push({start:i,end:i+1,style:h}):n[n.length-1].end++),o=h||{}}}return n},V0=(r,t)=>{if(!Array.isArray(r))return fs(r);const e=t.split(Kh),n={};let i=-1,o=0;for(let l=0;l<e.length;l++)for(let c=0;c<e[l].length;c++)i++,r[o]&&r[o].start<=i&&i<r[o].end&&(n[l]=n[l]||{},n[l][c]=D({},r[o].style),i===r[o].end-1&&o++);return n},nA=r=>r&&r.length===1?r[0]:new br(r),G0=(r,t)=>Math.min(t.width/r.width,t.height/r.height),$0=(r,t)=>Math.max(t.width/r.width,t.height/r.height),rA=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return"".concat(r.charAt(0).toUpperCase()).concat(t?r.slice(1):r.slice(1).toLowerCase())},K0=r=>r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),q0=r=>{const t=[];for(let e=0,n;e<r.length;e++)(n=iA(r,e))!==!1&&t.push(n);return t},iA=(r,t)=>{const e=r.charCodeAt(t);if(isNaN(e))return"";if(e<55296||e>57343)return r.charAt(t);if(55296<=e&&e<=56319){if(r.length<=t+1)throw"High surrogate without following low surrogate";const i=r.charCodeAt(t+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return r.charAt(t)+r.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";const n=r.charCodeAt(t-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1};var sA=Object.freeze({__proto__:null,capitalize:rA,escapeXml:K0,graphemeSplit:q0}),Lp;const ee="(".concat(co,")"),oA="(M) (?:".concat(ee," ").concat(ee," ?)+"),aA="(L) (?:".concat(ee," ").concat(ee," ?)+"),lA="(H) (?:".concat(ee," ?)+"),cA="(V) (?:".concat(ee," ?)+"),hA=String.raw(Lp||(Lp=Qn(["(Z)s*"],["(Z)\\s*"]))),uA="(C) (?:".concat(ee," ").concat(ee," ").concat(ee," ").concat(ee," ").concat(ee," ").concat(ee," ?)+"),fA="(S) (?:".concat(ee," ").concat(ee," ").concat(ee," ").concat(ee," ?)+"),dA="(Q) (?:".concat(ee," ").concat(ee," ").concat(ee," ").concat(ee," ?)+"),gA="(T) (?:".concat(ee," ").concat(ee," ?)+"),pA="(A) (?:".concat(ee," ").concat(ee," ").concat(ee," ([01]) ?([01]) ").concat(ee," ").concat(ee," ?)+"),Rp="(?:(?:".concat(oA,")")+"|(?:".concat(aA,")")+"|(?:".concat(lA,")")+"|(?:".concat(cA,")")+"|(?:".concat(hA,")")+"|(?:".concat(uA,")")+"|(?:".concat(fA,")")+"|(?:".concat(dA,")")+"|(?:".concat(gA,")")+"|(?:".concat(pA,"))"),mA={m:"l",M:"L"},_A=(r,t,e,n,i,o,l,c,h,f,d)=>{const p=Ke(r),_=qe(r),v=Ke(t),w=qe(t),E=e*i*v-n*o*w+l,T=n*i*v+e*o*w+c,P=f+h*(-e*i*_-n*o*p),R=d+h*(-n*i*_+e*o*p),X=E+h*(e*i*w+n*o*v),B=T+h*(n*i*w-e*o*v);return["C",P,R,X,B,E,T]},vA=(r,t,e,n,i,o,l)=>{if(e===0||n===0)return[];let c=0,h=0,f=0;const d=Math.PI,p=l*Gh,_=qe(p),v=Ke(p),w=.5*(-v*r-_*t),E=.5*(-v*t+_*r),T=e**2,P=n**2,R=E**2,X=w**2,B=T*P-T*R-P*X;let $=Math.abs(e),tt=Math.abs(n);if(B<0){const pt=Math.sqrt(1-B/(T*P));$*=pt,tt*=pt}else f=(i===o?-1:1)*Math.sqrt(B/(T*R+P*X));const nt=f*$*E/tt,st=-f*tt*w/$,Dt=v*nt-_*st+r*.5,Pt=_*nt+v*st+t*.5;let Zt=Fp(1,0,(w-nt)/$,(E-st)/tt),ot=Fp((w-nt)/$,(E-st)/tt,(-w-nt)/$,(-E-st)/tt);o===0&&ot>0?ot-=2*d:o===1&&ot<0&&(ot+=2*d);const ct=Math.ceil(Math.abs(ot/d*2)),ht=new Array(ct),gt=ot/ct,Mt=8/3*Math.sin(gt/4)*Math.sin(gt/4)/Math.sin(gt/2);let xt=Zt+gt;for(let pt=0;pt<ct;pt++)ht[pt]=_A(Zt,xt,v,_,$,tt,Dt,Pt,Mt,c,h),c=ht[pt][5],h=ht[pt][6],Zt=xt,xt+=gt;return ht},Fp=(r,t,e,n)=>{const i=Math.atan2(t,r),o=Math.atan2(n,e);return o>=i?o-i:2*Math.PI-(i-o)},yA=r=>r**3,xA=r=>3*r**2*(1-r),wA=r=>3*r*(1-r)**2,CA=r=>(1-r)**3;function Ch(r,t,e,n,i,o,l,c){let h;if(Lt.cachesBoundsOfCurve&&(h=[...arguments].join(),Vs.boundsOfCurveCache[h]))return Vs.boundsOfCurveCache[h];const f=Math.sqrt,d=Math.abs,p=[],_=[[0,0],[0,0]];let v=6*r-12*e+6*i,w=-3*r+9*e-9*i+3*l,E=3*e-3*r;for(let B=0;B<2;++B){if(B>0&&(v=6*t-12*n+6*o,w=-3*t+9*n-9*o+3*c,E=3*n-3*t),d(w)<1e-12){if(d(v)<1e-12)continue;const Dt=-E/v;0<Dt&&Dt<1&&p.push(Dt);continue}const $=v*v-4*E*w;if($<0)continue;const tt=f($),nt=(-v+tt)/(2*w);0<nt&&nt<1&&p.push(nt);const st=(-v-tt)/(2*w);0<st&&st<1&&p.push(st)}let T=p.length;const P=T,R=Z0(r,t,e,n,i,o,l,c);for(;T--;){const{x:B,y:$}=R(p[T]);_[0][T]=B,_[1][T]=$}_[0][P]=r,_[1][P]=t,_[0][P+1]=l,_[1][P+1]=c;const X=[new F(Math.min(..._[0]),Math.min(..._[1])),new F(Math.max(..._[0]),Math.max(..._[1]))];return Lt.cachesBoundsOfCurve&&(Vs.boundsOfCurveCache[h]=X),X}const SA=(r,t,e)=>{let[n,i,o,l,c,h,f,d]=e;const p=vA(f-r,d-t,i,o,c,h,l);for(let _=0,v=p.length;_<v;_++)p[_][1]+=r,p[_][2]+=t,p[_][3]+=r,p[_][4]+=t,p[_][5]+=r,p[_][6]+=t;return p},J0=r=>{let t=0,e=0,n=0,i=0;const o=[];let l,c=0,h=0;for(const f of r){const d=[...f];let p;switch(d[0]){case"l":d[1]+=t,d[2]+=e;case"L":t=d[1],e=d[2],p=["L",t,e];break;case"h":d[1]+=t;case"H":t=d[1],p=["L",t,e];break;case"v":d[1]+=e;case"V":e=d[1],p=["L",t,e];break;case"m":d[1]+=t,d[2]+=e;case"M":t=d[1],e=d[2],n=d[1],i=d[2],p=["M",t,e];break;case"c":d[1]+=t,d[2]+=e,d[3]+=t,d[4]+=e,d[5]+=t,d[6]+=e;case"C":c=d[3],h=d[4],t=d[5],e=d[6],p=["C",d[1],d[2],c,h,t,e];break;case"s":d[1]+=t,d[2]+=e,d[3]+=t,d[4]+=e;case"S":l==="C"?(c=2*t-c,h=2*e-h):(c=t,h=e),t=d[3],e=d[4],p=["C",c,h,d[1],d[2],t,e],c=p[3],h=p[4];break;case"q":d[1]+=t,d[2]+=e,d[3]+=t,d[4]+=e;case"Q":c=d[1],h=d[2],t=d[3],e=d[4],p=["Q",c,h,t,e];break;case"t":d[1]+=t,d[2]+=e;case"T":l==="Q"?(c=2*t-c,h=2*e-h):(c=t,h=e),t=d[1],e=d[2],p=["Q",c,h,t,e];break;case"a":d[6]+=t,d[7]+=e;case"A":SA(t,e,d).forEach(_=>o.push(_)),t=d[6],e=d[7];break;case"z":case"Z":t=n,e=i,p=["Z"];break}p?(o.push(p),l=p[0]):l=""}return o},Fa=(r,t,e,n)=>Math.sqrt((e-r)**2+(n-t)**2),Z0=(r,t,e,n,i,o,l,c)=>h=>{const f=yA(h),d=xA(h),p=wA(h),_=CA(h);return new F(l*f+i*d+e*p+r*_,c*f+o*d+n*p+t*_)},Q0=r=>r**2,t_=r=>2*r*(1-r),e_=r=>(1-r)**2,bA=(r,t,e,n,i,o,l,c)=>h=>{const f=Q0(h),d=t_(h),p=e_(h),_=3*(p*(e-r)+d*(i-e)+f*(l-i)),v=3*(p*(n-t)+d*(o-n)+f*(c-o));return Math.atan2(v,_)},TA=(r,t,e,n,i,o)=>l=>{const c=Q0(l),h=t_(l),f=e_(l);return new F(i*c+e*h+r*f,o*c+n*h+t*f)},OA=(r,t,e,n,i,o)=>l=>{const c=1-l,h=2*(c*(e-r)+l*(i-e)),f=2*(c*(n-t)+l*(o-n));return Math.atan2(f,h)},Ip=(r,t,e)=>{let n=new F(t,e),i=0;for(let o=1;o<=100;o+=1){const l=r(o/100);i+=Fa(n.x,n.y,l.x,l.y),n=l}return i},Bp=(r,t)=>{let e=0,n=0,i={x:r.x,y:r.y},o=D({},i),l,c=.01,h=0;const f=r.iterator,d=r.angleFinder;for(;n<t&&c>1e-4;)o=f(e),h=e,l=Fa(i.x,i.y,o.x,o.y),l+n>t?(e-=c,c/=2):(i=o,e+=c,n+=l);return D(D({},o),{},{angle:d(h)})},mu=r=>{let t=0,e=0,n=0,i=0,o=0,l,c;const h=[];for(const f of r){const d={x:e,y:n,command:f[0],length:0};switch(f[0]){case"M":c=d,c.x=i=e=f[1],c.y=o=n=f[2];break;case"L":c=d,c.length=Fa(e,n,f[1],f[2]),e=f[1],n=f[2];break;case"C":l=Z0(e,n,f[1],f[2],f[3],f[4],f[5],f[6]),c=d,c.iterator=l,c.angleFinder=bA(e,n,f[1],f[2],f[3],f[4],f[5],f[6]),c.length=Ip(l,e,n),e=f[5],n=f[6];break;case"Q":l=TA(e,n,f[1],f[2],f[3],f[4]),c=d,c.iterator=l,c.angleFinder=OA(e,n,f[1],f[2],f[3],f[4]),c.length=Ip(l,e,n),e=f[3],n=f[4];break;case"Z":c=d,c.destX=i,c.destY=o,c.length=Fa(e,n,i,o),e=i,n=o;break}t+=c.length,h.push(c)}return h.push({length:t,x:e,y:n}),h},n_=function(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mu(r),n=0;for(;t-e[n].length>0&&n<e.length-2;)t-=e[n].length,n++;const i=e[n],o=t/i.length,l=r[n];switch(i.command){case"M":return{x:i.x,y:i.y,angle:0};case"Z":return D(D({},new F(i.x,i.y).lerp(new F(i.destX,i.destY),o)),{},{angle:Math.atan2(i.destY-i.y,i.destX-i.x)});case"L":return D(D({},new F(i.x,i.y).lerp(new F(l[1],l[2]),o)),{},{angle:Math.atan2(l[2]-i.y,l[1]-i.x)});case"C":return Bp(i,t);case"Q":return Bp(i,t)}},r_=r=>{r=H0(r);const t=[];for(const e of r.matchAll(new RegExp(Rp,"gi"))){let n=e[0];const i=[];let o;do{if(o=new RegExp(Rp,"i").exec(n),!o)break;const l=o.filter(h=>h);l.shift();const c=l.map(h=>{const f=Number.parseFloat(h);return Number.isNaN(f)?h:f});if(i.push(c),l.length<=1)break;l.shift(),n=n.replace(new RegExp("".concat(l.join(" ?")," ?$")),"")}while(o);i.reverse().forEach((l,c)=>{const h=mA[l[0]];c>0&&(h=="l"||h=="L")&&(l[0]=h),t.push(l)})}return t},EA=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=new F(r[0]),n=new F(r[1]),i=1,o=0;const l=[],c=r.length,h=c>2;h&&(i=r[2].x<n.x?-1:r[2].x===n.x?0:1,o=r[2].y<n.y?-1:r[2].y===n.y?0:1),l.push(["M",e.x-i*t,e.y-o*t]);let f;for(f=1;f<c;f++){if(!e.eq(n)){const d=e.midPointFrom(n);l.push(["Q",e.x,e.y,d.x,d.y])}e=r[f],f+1<r.length&&(n=r[f+1])}return h&&(i=e.x>r[f-2].x?1:e.x===r[f-2].x?0:-1,o=e.y>r[f-2].y?1:e.y===r[f-2].y?0:-1),l.push(["L",e.x+i*t,e.y+o*t]),l},PA=(r,t,e)=>(e&&(t=ke(t,[1,0,0,1,-e.x,-e.y])),r.map(n=>{const i=[...n];for(let o=1;o<n.length-1;o+=2){const{x:l,y:c}=fe({x:n[o],y:n[o+1]},t);i[o]=l,i[o+1]=c}return i})),AA=(r,t)=>{const e=Math.PI*2/r;let n=-xr;r%2===0&&(n+=e/2);const i=new Array(r+1);for(let o=0;o<r;o++){const l=o*e+n,{x:c,y:h}=new F(Ke(l),qe(l)).scalarMultiply(t);i[o]=[o===0?"M":"L",c,h]}return i[r]=["Z"],i},i_=(r,t)=>r.map(e=>e.map((n,i)=>i===0||t===void 0?n:Xt(n,t)).join(" ")).join(" "),DA=(r,t)=>{var e;let n=r,i=t;n.inverted&&!i.inverted&&(n=t,i=r),su(i,(e=i.group)===null||e===void 0?void 0:e.calcTransformMatrix(),n.calcTransformMatrix());const o=n.inverted&&i.inverted;return o&&(n.inverted=i.inverted=!1),new br([n],{clipPath:i,inverted:o})};function MA(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e=t.onComplete||mi,n=new(fi()).XMLHttpRequest,i=t.signal,o=function(){n.abort()},l=function(){i&&i.removeEventListener("abort",o),n.onerror=n.ontimeout=mi};if(i&&i.aborted)throw new Error("`options.signal` is in `aborted` state");return i&&i.addEventListener("abort",o,{once:!0}),n.onreadystatechange=function(){n.readyState===4&&(l(),e(n),n.onreadystatechange=mi)},n.onerror=n.ontimeout=l,n.open("get",r,!0),n.send(),n}const kA=r=>{if(r.transformMatrix){const{scaleX:t,scaleY:e,angle:n,skewX:i}=vi(r.transformMatrix);r.flipX=!1,r.flipY=!1,r.set("scaleX",t),r.set("scaleY",e),r.angle=n,r.skewX=i,r.skewY=0}},LA=(r,t)=>{let e=r._findCenterFromElement();r.transformMatrix&&(kA(r),e=e.transform(r.transformMatrix)),delete r.transformMatrix,t&&(r.scaleX*=t.scaleX,r.scaleY*=t.scaleY,r.cropX=t.cropX,r.cropY=t.cropY,e.x+=t.offsetLeft,e.y+=t.offsetTop,r.width=t.width,r.height=t.height),r.setPositionByOrigin(e,Tt,Tt)};var Hc=Object.freeze({__proto__:null,addTransformToObject:c0,animate:cu,animateColor:y0,applyTransformToObject:as,calcAngleBetweenVectors:Ra,calcDimensionsMatrix:rl,calcPlaneChangeMatrix:ru,calcVectorRotation:w0,cancelAnimFrame:Jm,capValue:yi,composeMatrix:t0,copyCanvasElement:ZE,cos:Ke,createCanvasElement:pe,createImage:Zm,createRotateMatrix:uo,createScaleMatrix:Jh,createSkewXMatrix:Zh,createSkewYMatrix:Qh,createTranslateMatrix:ho,createVector:ka,crossProduct:Ji,degreesToRadians:ne,dotProduct:C0,ease:K2,enlivenObjectEnlivables:fo,enlivenObjects:os,findScaleToCover:$0,findScaleToFit:G0,getBoundsOfCurve:Ch,getOrthonormalVector:uu,getPathSegmentsInfo:mu,getPointOnPath:n_,getPointer:l0,getRandomInt:KE,getRegularPolygonPath:AA,getSmoothPathFromPoints:EA,getSvgAttributes:s2,getUnitVector:il,groupSVGElements:nA,hasStyleChanged:cl,invertTransform:Me,isBetweenVectors:mh,isIdentityMatrix:e2,isTouchEvent:Da,isTransparent:W0,joinPath:i_,loadImage:$s,magnitude:La,makeBoundingBoxFromPoints:mr,makePathSimpler:J0,matrixToSVG:oo,mergeClipPaths:DA,multiplyTransformMatrices:ke,multiplyTransformMatrixArray:nl,parsePath:r_,parsePreserveAspectRatioAttribute:n0,parseUnit:_i,pick:wi,projectStrokeOnPoints:z0,qrDecompose:vi,radiansToDegrees:ss,removeFromArray:hi,removeTransformFromObject:m2,removeTransformMatrixForSvgParsing:LA,request:MA,requestAnimFrame:Gs,resetObjectTransform:tu,rotatePoint:tA,rotateVector:hu,saveObjectTransform:eu,sendObjectToPlane:su,sendPointToPlane:iu,setStyle:lo,sin:qe,sizeAfterTransform:nu,string:sA,stylesFromArray:V0,stylesToArray:N0,toDataURL:qh,toFixed:Xt,transformPath:PA,transformPoint:fe,transformPointRelativeToCanvas:_2});class RA extends a0{constructor(t){let{allowTouchScrolling:e=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t),M(this,"upper",void 0),M(this,"container",void 0);const{el:i}=this.lower,o=this.createUpperCanvas();this.upper={el:o,ctx:o.getContext("2d")},this.applyCanvasStyle(i,{allowTouchScrolling:e}),this.applyCanvasStyle(o,{allowTouchScrolling:e});const l=this.createContainerElement();l.classList.add(n),i.parentNode&&i.parentNode.replaceChild(l,i),l.append(i,o),this.container=l}createUpperCanvas(){const{el:t}=this.lower,e=pe();return e.className=t.className,e.classList.remove("lower-canvas"),e.classList.add("upper-canvas"),e.setAttribute("data-fabric","top"),e.style.cssText=t.style.cssText,e.setAttribute("draggable","true"),e}createContainerElement(){const t=us().createElement("div");return t.setAttribute("data-fabric","wrapper"),lo(t,{position:"relative"}),xp(t),t}applyCanvasStyle(t,e){let{allowTouchScrolling:n}=e;lo(t,{position:"absolute",left:"0",top:"0"}),h2(t,n),xp(t)}setDimensions(t,e){super.setDimensions(t,e);const{el:n,ctx:i}=this.upper;o0(n,i,t,e)}setCSSDimensions(t){super.setCSSDimensions(t),gh(this.upper.el,t),gh(this.container,t)}cleanupDOM(t){const e=this.container,{el:n}=this.lower,{el:i}=this.upper;super.cleanupDOM(t),e.removeChild(i),e.removeChild(n),e.parentNode&&e.parentNode.replaceChild(n,e)}dispose(){super.dispose(),Zn().dispose(this.upper.el),delete this.upper,delete this.container}}const FA={uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1},IA=["activeSelection"];class hl extends go{static getDefaults(){return D(D({},super.getDefaults()),hl.ownDefaults)}get upperCanvasEl(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.el}get contextTop(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.ctx}get wrapperEl(){return this.elements.container}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{activeSelection:n=new ll}=e,i=re(e,IA);super(t,i),M(this,"targets",[]),M(this,"_hoveredTargets",[]),M(this,"_objectsToRender",[]),M(this,"_currentTransform",null),M(this,"_groupSelector",null),M(this,"contextTopDirty",!1),M(this,"_activeSelection",void 0),this._activeSelection=n,this._activeSelection.set("canvas",this),this._activeSelection.setCoords()}initElements(t){this.elements=new RA(t,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(t){this._objectsToRender=void 0,super._onObjectAdded(t)}_onObjectRemoved(t){this._objectsToRender=void 0,t===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[t]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[t]}),t.fire("deselected",{target:t})),t===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(t)}_chooseObjectsToRender(){const t=this._activeObject;return!this.preserveObjectStacking&&t?this._objects.filter(e=>!e.group&&e!==t).concat(t):this._objects}renderAll(){this.cancelRequestedRender(),!this.destroyed&&(this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()}renderTop(){const t=this.contextTop;this.clearContext(t),this.renderTopLayer(t),this.fire("after:render",{ctx:t})}_normalizePointer(t,e){return fe(this.restorePointerVpt(e),Me(t.calcTransformMatrix()))}setTargetFindTolerance(t){t=Math.round(t),this.targetFindTolerance=t;const e=this.getRetinaScaling(),n=Math.ceil((t*2+1)*e);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(e,e)}isTargetTransparent(t,e,n){const i=this.targetFindTolerance,o=this.pixelFindContext;this.clearContext(o),o.save(),o.translate(-e+i,-n+i),o.transform(...this.viewportTransform);const l=t.selectionBackgroundColor;t.selectionBackgroundColor="",t.render(o),t.selectionBackgroundColor=l,o.restore();const c=Math.round(i*this.getRetinaScaling());return W0(o,c,c,c)}_isSelectionKeyPressed(t){const e=this.selectionKey;return e?Array.isArray(e)?!!e.find(n=>!!n&&t[n]===!0):t[e]:!1}_shouldClearSelection(t,e){const n=this.getActiveObjects(),i=this._activeObject;return!!(!e||e&&i&&n.length>1&&n.indexOf(e)===-1&&i!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&i&&i!==e)}_shouldCenterTransform(t,e,n){if(!t)return;let i;return e==="scale"||e==="scaleX"||e==="scaleY"||e==="resizing"?i=this.centeredScaling||t.centeredScaling:e==="rotate"&&(i=this.centeredRotation||t.centeredRotation),i?!n:n}_getOriginFromCorner(t,e){const n={x:t.originX,y:t.originY};return["ml","tl","bl"].includes(e)?n.x=ve:["mr","tr","br"].includes(e)&&(n.x=Nt),["tl","mt","tr"].includes(e)?n.y=uh:["bl","mb","br"].includes(e)&&(n.y=We),n}_setupCurrentTransform(t,e,n){if(!e)return;const i=e.group?iu(this.getPointer(t),void 0,e.group.calcTransformMatrix()):this.getPointer(t),o=e.getActiveControl()||"",l=!!o&&e.controls[o],c=n&&l?l.getActionHandler(t,e,l):g0,h=y2(n,o,t,e),f=this._getOriginFromCorner(e,o),d=t[this.centeredKey],p={target:e,action:h,actionHandler:c,actionPerformed:!1,corner:o,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:i.x-e.left,offsetY:i.y-e.top,originX:f.x,originY:f.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,theta:ne(e.angle),width:e.width,height:e.height,shiftKey:t.shiftKey,altKey:d,original:D(D({},eu(e)),{},{originX:f.x,originY:f.y})};this._shouldCenterTransform(e,h,d)&&(p.originX=Tt,p.originY=Tt),this._currentTransform=p,this._beforeTransform(t)}setCursor(t){this.upperCanvasEl.style.cursor=t}_drawSelection(t){const{x:e,y:n,deltaX:i,deltaY:o}=this._groupSelector,l=new F(e,n).transform(this.viewportTransform),c=new F(e+i,n+o).transform(this.viewportTransform),h=this.selectionLineWidth/2;let f=Math.min(l.x,c.x),d=Math.min(l.y,c.y),p=Math.max(l.x,c.x),_=Math.max(l.y,c.y);this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(f,d,p-f,_-d)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,f+=h,d+=h,p-=h,_-=h,ye.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(f,d,p-f,_-d))}findTarget(t){if(this.skipTargetFind)return;const e=this.getPointer(t,!0),n=this._activeObject,i=this.getActiveObjects();if(this.targets=[],n&&i.length>=1){if(n._findTargetCorner(e,Da(t)))return n;if(i.length>1&&this.searchPossibleTargets([n],e))return n;if(n===this.searchPossibleTargets([n],e))if(this.preserveObjectStacking){const o=this.targets;this.targets=[];const l=this.searchPossibleTargets(this._objects,e);return t[this.altSelectionKey]&&l&&l!==n?(this.targets=o,n):l}else return n}return this.searchPossibleTargets(this._objects,e)}_checkTarget(t,e,n){if(e&&e.visible&&e.evented&&e.containsPoint(t))if((this.perPixelTargetFind||e.perPixelTargetFind)&&!e.isEditing){if(!this.isTargetTransparent(e,n.x,n.y))return!0}else return!0;return!1}_searchPossibleTargets(t,e){let n,i=t.length;for(;i--;){const o=t[i],l=o.group?this._normalizePointer(o.group,e):e;if(this._checkTarget(l,o,e)){if(n=t[i],dh(n)&&n.subTargetCheck){const c=this._searchPossibleTargets(n._objects,e);c&&this.targets.push(c)}break}}return n}searchPossibleTargets(t,e){const n=this._searchPossibleTargets(t,e);return n&&dh(n)&&n.interactive&&this.targets[0]?this.targets[0]:n}restorePointerVpt(t){return t.transform(Me(this.viewportTransform))}getPointer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this._absolutePointer&&!e)return this._absolutePointer;if(this._pointer&&e)return this._pointer;const n=this.upperCanvasEl,i=n.getBoundingClientRect();let o=l0(t),l=i.width||0,c=i.height||0;(!l||!c)&&(We in i&&uh in i&&(c=Math.abs(i.top-i.bottom)),ve in i&&Nt in i&&(l=Math.abs(i.right-i.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,e||(o=this.restorePointerVpt(o));const h=this.getRetinaScaling();h!==1&&(o.x/=h,o.y/=h);const f=l===0||c===0?new F(1,1):new F(n.width/l,n.height/c);return o.multiply(f)}_setDimensionsImpl(t,e){this._resetTransformEventData(),super._setDimensionsImpl(t,e),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=pe(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveSelection(){return this._activeSelection}getActiveObjects(){const t=this._activeObject;return t?t===this._activeSelection?[...t._objects]:[t]:[]}_fireSelectionEvents(t,e){let n=!1,i=!1;const o=this.getActiveObjects(),l=[],c=[];t.forEach(h=>{o.includes(h)||(n=!0,h.fire("deselected",{e,target:h}),c.push(h))}),o.forEach(h=>{t.includes(h)||(n=!0,h.fire("selected",{e,target:h}),l.push(h))}),t.length>0&&o.length>0?(i=!0,n&&this.fire("selection:updated",{e,selected:l,deselected:c})):o.length>0?(i=!0,this.fire("selection:created",{e,selected:l})):t.length>0&&(i=!0,this.fire("selection:cleared",{e,deselected:c})),i&&(this._objectsToRender=void 0)}setActiveObject(t,e){const n=this.getActiveObjects(),i=this._setActiveObject(t,e);return this._fireSelectionEvents(n,e),i}_setActiveObject(t,e){return this._activeObject===t||!this._discardActiveObject(e,t)&&this._activeObject||t.onSelect({e})?!1:(this._activeObject=t,!0)}_discardActiveObject(t,e){const n=this._activeObject;return n?n.onDeselect({e:t,object:e})?!1:(n===this._activeSelection&&(this._activeSelection.removeAll(),tu(this._activeSelection)),this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(t),this._activeObject=void 0,!0):!1}discardActiveObject(t){const e=this.getActiveObjects(),n=this.getActiveObject();e.length&&this.fire("before:selection:cleared",{e:t,deselected:[n]});const i=this._discardActiveObject(t);return this._fireSelectionEvents(e,t),i}setViewportTransform(t){super.setViewportTransform(t);const e=this._activeObject;e&&e.setCoords()}destroy(){const t=this._activeSelection;t.removeAll(),this._activeSelection=void 0,t.dispose(),super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(t){const e=this._activeObject;e&&e._renderControls(t)}_toObject(t,e,n){const i=this._realizeGroupTransformOnObject(t),o=super._toObject(t,e,n);return t.set(i),o}_realizeGroupTransformOnObject(t){if(t.group&&t.group===this._activeSelection&&this._activeObject===t.group){const n=wi(t,["angle","flipX","flipY",Nt,"scaleX","scaleY","skewX","skewY",We]);return c0(t,this._activeObject.calcOwnMatrix()),n}else return{}}_setSVGObject(t,e,n){const i=this._realizeGroupTransformOnObject(e);super._setSVGObject(t,e,n),e.set(i)}}M(hl,"ownDefaults",FA);class BA{constructor(t){M(this,"targets",[]),M(this,"__disposer",void 0);const e=()=>{const i=t.getActiveObject();Ca(i)&&i.hiddenTextarea&&i.hiddenTextarea.focus()},n=t.upperCanvasEl;n.addEventListener("click",e),this.__disposer=()=>n.removeEventListener("click",e)}exitTextEditing(){this.target=void 0,this.targets.forEach(t=>{t.isEditing&&t.exitEditing()})}add(t){this.targets.push(t)}remove(t){this.unregister(t),hi(this.targets,t)}register(t){this.target=t}unregister(t){t===this.target&&(this.target=void 0)}onMouseMove(t){var e;!((e=this.target)===null||e===void 0)&&e.isEditing&&this.target.updateSelectionOnMouseMove(t)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const jA=["target","oldTarget","fireCanvas","e"],_n={passive:!1};function ma(r,t){return!!r.button&&r.button===t-1}const Br=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return r.addEventListener(...e)},Pn=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return r.removeEventListener(...e)},WA={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Sh extends hl{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,e),M(this,"_isClick",void 0),M(this,"textEditingManager",new BA(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(n=>{this[n]=this[n].bind(this)}),this.addOrRemove(Br,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(t,e){const n=this.upperCanvasEl,i=this._getEventPrefix();t(s0(n),"resize",this._onResize),t(n,i+"down",this._onMouseDown),t(n,"".concat(i,"move"),this._onMouseMove,_n),t(n,"".concat(i,"out"),this._onMouseOut),t(n,"".concat(i,"enter"),this._onMouseEnter),t(n,"wheel",this._onMouseWheel),t(n,"contextmenu",this._onContextMenu),t(n,"dblclick",this._onDoubleClick),t(n,"dragstart",this._onDragStart),t(n,"dragend",this._onDragEnd),t(n,"dragover",this._onDragOver),t(n,"dragenter",this._onDragEnter),t(n,"dragleave",this._onDragLeave),t(n,"drop",this._onDrop),this.enablePointerEvents||t(n,"touchstart",this._onTouchStart,_n)}removeListeners(){this.addOrRemove(Pn,"remove");const t=this._getEventPrefix(),e=Bn(this.upperCanvasEl);Pn(e,"".concat(t,"up"),this._onMouseUp),Pn(e,"touchend",this._onTouchEnd,_n),Pn(e,"".concat(t,"move"),this._onMouseMove,_n),Pn(e,"touchmove",this._onMouseMove,_n)}_onMouseWheel(t){this.__onMouseWheel(t)}_onMouseOut(t){const e=this._hoveredTarget,n={e:t,isClick:!1,pointer:this.getPointer(t,!0),absolutePointer:this.getPointer(t)};this.fire("mouse:out",D(D({},n),{},{target:e})),this._hoveredTarget=void 0,e&&e.fire("mouseout",D({},n)),this._hoveredTargets.forEach(i=>{this.fire("mouse:out",D(D({},n),{},{target:i})),i&&i.fire("mouseout",D({},n))}),this._hoveredTargets=[]}_onMouseEnter(t){!this._currentTransform&&!this.findTarget(t)&&(this.fire("mouse:over",{e:t,isClick:!1,pointer:this.getPointer(t,!0),absolutePointer:this.getPointer(t)}),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(t){this._isClick=!1;const e=this.getActiveObject();if(yp(e)&&e.onDragStart(t)){this._dragSource=e;const n={e:t,target:e};this.fire("dragstart",n),e.fire("dragstart",n),Br(this.upperCanvasEl,"drag",this._onDragProgress);return}ph(t)}_renderDragEffects(t,e,n){let i=!1;const o=this._dropTarget;o&&o!==e&&o!==n&&(o.clearContextTop(),i=!0),e==null||e.clearContextTop(),n!==e&&(n==null||n.clearContextTop());const l=this.contextTop;l.save(),l.transform(...this.viewportTransform),e&&(l.save(),e.transform(l),e.renderDragSourceEffect(t),l.restore(),i=!0),n&&(l.save(),n.transform(l),n.renderDropTargetEffect(t),l.restore(),i=!0),l.restore(),i&&(this.contextTopDirty=!0)}_onDragEnd(t){const e=!!t.dataTransfer&&t.dataTransfer.dropEffect!==ln,n=e?this._activeObject:void 0,i={e:t,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:e,dropTarget:n};Pn(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",i),this._dragSource&&this._dragSource.fire("dragend",i),delete this._dragSource,this._onMouseUp(t)}_onDragProgress(t){const e={e:t,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",e),this._dragSource&&this._dragSource.fire("drag",e)}findDragTargets(t){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getPointer(t,!0)),targets:[...this.targets]}}_onDragOver(t){const e="dragover",{target:n,targets:i}=this.findDragTargets(t),o=this._dragSource,l={e:t,target:n,subTargets:i,dragSource:o,canDrop:!1,dropTarget:void 0};let c;this.fire(e,l),this._fireEnterLeaveEvents(n,l),n&&(n.canDrop(t)&&(c=n),n.fire(e,l));for(let h=0;h<i.length;h++){const f=i[h];f.canDrop(t)&&(c=f),f.fire(e,l)}this._renderDragEffects(t,o,c),this._dropTarget=c}_onDragEnter(t){const{target:e,targets:n}=this.findDragTargets(t),i={e:t,target:e,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",i),this._fireEnterLeaveEvents(e,i)}_onDragLeave(t){const e={e:t,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",e),this._fireEnterLeaveEvents(void 0,e),this._renderDragEffects(t,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(t){const{target:e,targets:n}=this.findDragTargets(t),i=this._basicEventHandler("drop:before",{e:t,target:e,subTargets:n,dragSource:this._dragSource,pointer:this.getPointer(t,!0),absolutePointer:this.getPointer(t)});i.didDrop=!1,i.dropTarget=void 0,this._basicEventHandler("drop",i),this.fire("drop:after",i)}_onContextMenu(t){const e=this.findTarget(t),n=this.targets||[],i=this._basicEventHandler("contextmenu:before",{e:t,target:e,subTargets:n});return this.stopContextMenu&&ph(t),this._basicEventHandler("contextmenu",i),!1}_onDoubleClick(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData()}getPointerId(t){const e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1}_isMainEvent(t){return t.isPrimary===!0?!0:t.isPrimary===!1?!1:t.type==="touchend"&&t.touches.length===0?!0:t.changedTouches?t.changedTouches[0].identifier===this.mainTouchId:!0}_onTouchStart(t){t.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,n=this._getEventPrefix(),i=Bn(e);Br(i,"touchend",this._onTouchEnd,_n),Br(i,"touchmove",this._onMouseMove,_n),Pn(e,"".concat(n,"down"),this._onMouseDown)}_onMouseDown(t){this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,n=this._getEventPrefix();Pn(e,"".concat(n,"move"),this._onMouseMove,_n);const i=Bn(e);Br(i,"".concat(n,"up"),this._onMouseUp),Br(i,"".concat(n,"move"),this._onMouseMove,_n)}_onTouchEnd(t){if(t.touches.length>0)return;this.__onMouseUp(t),this._resetTransformEventData(),this.mainTouchId=null;const e=this._getEventPrefix(),n=Bn(this.upperCanvasEl);Pn(n,"touchend",this._onTouchEnd,_n),Pn(n,"touchmove",this._onMouseMove,_n),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Br(this.upperCanvasEl,"".concat(e,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(t){this.__onMouseUp(t),this._resetTransformEventData();const e=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(t)){const i=Bn(this.upperCanvasEl);Pn(i,"".concat(n,"up"),this._onMouseUp),Pn(i,"".concat(n,"move"),this._onMouseMove,_n),Br(e,"".concat(n,"move"),this._onMouseMove,_n)}}_onMouseMove(t){const e=this.getActiveObject();!this.allowTouchScrolling&&(!e||yp(e)&&!e.shouldStartDragging())&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(t){const e=this.getActiveObject();return!!e!=!!t||e&&t&&e!==t?!0:(Ca(e),!1)}__onMouseUp(t){const e=this._currentTransform;this._cacheTransformEventData(t);const n=this._target,i=this._isClick;if(this._handleEvent(t,"up:before"),ma(t,ga)){this.fireRightClick&&this._handleEvent(t,"up",ga,i);return}if(ma(t,da)){this.fireMiddleClick&&this._handleEvent(t,"up",da,i),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(t);return}if(!this._isMainEvent(t))return;let o=!1;if(e&&(this._finalizeCurrentTransform(t),o=e.actionPerformed),!i){const h=n===this._activeObject;this.handleSelection(t),o||(o=this._shouldRender(n)||!h&&n===this._activeObject)}let l,c;if(n){if(c=n._findTargetCorner(this.getPointer(t,!0),Da(t)),n.selectable&&n!==this._activeObject&&n.activeOn==="up")this.setActiveObject(n,t),o=!0;else{const h=n.controls[c],f=h&&h.getMouseUpHandler(t,n,h);f&&(l=this.getPointer(t),f(t,e,l.x,l.y))}n.isMoving=!1}if(e&&(e.target!==n||e.corner!==c)){const h=e.target&&e.target.controls[e.corner],f=h&&h.getMouseUpHandler(t,e.target,h);l=l||this.getPointer(t),f&&f(t,e,l.x,l.y)}this._setCursorFromEvent(t,n),this._handleEvent(t,"up",fp,i),this._groupSelector=null,this._currentTransform=null,n&&(n.__corner=void 0),o?this.requestRenderAll():!i&&!(Ca(this._activeObject)&&this._activeObject.isEditing)&&this.renderTop()}_basicEventHandler(t,e){const{target:n,subTargets:i=[]}=e;this.fire(t,e),n&&n.fire(t,e);for(let o=0;o<i.length;o++)i[o].fire(t,e);return e}_handleEvent(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fp,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const o=this._target,l=this.targets||[],c={e:t,target:o,subTargets:l,button:n,isClick:i,pointer:this.getPointer(t,!0),absolutePointer:this.getPointer(t),transform:this._currentTransform};e==="up"&&(c.currentTarget=this.findTarget(t),c.currentSubTargets=this.targets),this.fire("mouse:".concat(e),c),o&&o.fire("mouse".concat(e),c);for(let h=0;h<l.length;h++)l[h].fire("mouse".concat(e),c)}endCurrentTransform(t){const e=this._currentTransform;this._finalizeCurrentTransform(t),e&&e.target&&(e.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(t){const e=this._currentTransform,n=e.target,i={e:t,target:n,transform:e,action:e.action};n._scaling&&(n._scaling=!1),n.setCoords(),e.actionPerformed&&(this.fire("object:modified",i),n.fire("modified",i))}_onMouseDownInDrawingMode(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(t),this.requestRenderAll());const e=this.getPointer(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")}_onMouseMoveInDrawingMode(t){if(this._isCurrentlyDrawing){const e=this.getPointer(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")}_onMouseUpInDrawingMode(t){const e=this.getPointer(t);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:t,pointer:e}):this._isCurrentlyDrawing=!1,this._handleEvent(t,"up")}__onMouseDown(t){this._isClick=!0,this._cacheTransformEventData(t),this._handleEvent(t,"down:before");let e=this._target;if(ma(t,ga)){this.fireRightClick&&this._handleEvent(t,"down",ga);return}if(ma(t,da)){this.fireMiddleClick&&this._handleEvent(t,"down",da);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(t);return}if(!this._isMainEvent(t)||this._currentTransform)return;let n=this._shouldRender(e),i=!1;if(this.handleMultiSelection(t,e)?(e=this._activeObject,i=!0,n=!0):this._shouldClearSelection(t,e)&&this.discardActiveObject(t),this.selection&&(!e||!e.selectable&&!e.isEditing&&e!==this._activeObject)){const o=this.getPointer(t);this._groupSelector={x:o.x,y:o.y,deltaY:0,deltaX:0}}if(e){const o=e===this._activeObject;e.selectable&&e.activeOn==="down"&&this.setActiveObject(e,t);const l=e._findTargetCorner(this.getPointer(t,!0),Da(t));if(e===this._activeObject&&(l||!i)){this._setupCurrentTransform(t,e,o);const c=e.controls[l],h=this.getPointer(t),f=c&&c.getMouseDownHandler(t,e,c);f&&f(t,this._currentTransform,h.x,h.y)}}n&&(this._objectsToRender=void 0),this._handleEvent(t,"down"),n&&this.requestRenderAll()}_resetTransformEventData(){this._target=void 0,this._pointer=void 0,this._absolutePointer=void 0}_cacheTransformEventData(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)}_beforeTransform(t){const e=this._currentTransform;this.fire("before:transform",{e:t,transform:e})}__onMouseMove(t){if(this._isClick=!1,this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode){this._onMouseMoveInDrawingMode(t);return}if(!this._isMainEvent(t))return;const e=this._groupSelector;if(e){const n=this.getPointer(t);e.deltaX=n.x-e.x,e.deltaY=n.y-e.y,this.renderTop()}else if(this._currentTransform)this._transformObject(t);else{const n=this.findTarget(t);this._setCursorFromEvent(t,n),this._fireOverOutEvents(t,n)}this.textEditingManager.onMouseMove(t),this._handleEvent(t,"move"),this._resetTransformEventData()}_fireOverOutEvents(t,e){const n=this._hoveredTarget,i=this._hoveredTargets,o=this.targets,l=Math.max(i.length,o.length);this.fireSyntheticInOutEvents("mouse",{e:t,target:e,oldTarget:n,fireCanvas:!0});for(let c=0;c<l;c++)this.fireSyntheticInOutEvents("mouse",{e:t,target:o[c],oldTarget:i[c]});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(t,e){const n=this._draggedoverTarget,i=this._hoveredTargets,o=this.targets,l=Math.max(i.length,o.length);this.fireSyntheticInOutEvents("drag",D(D({},e),{},{target:t,oldTarget:n,fireCanvas:!0}));for(let c=0;c<l;c++)this.fireSyntheticInOutEvents("drag",D(D({},e),{},{target:o[c],oldTarget:i[c]}));this._draggedoverTarget=t}fireSyntheticInOutEvents(t,e){let{target:n,oldTarget:i,fireCanvas:o,e:l}=e,c=re(e,jA);const{targetIn:h,targetOut:f,canvasIn:d,canvasOut:p}=WA[t],_=i!==n;if(i&&_){const v=D(D({},c),{},{e:l,target:i,nextTarget:n,isClick:!1,pointer:this.getPointer(l,!0),absolutePointer:this.getPointer(l)});o&&this.fire(d,v),i.fire(f,v)}if(n&&_){const v=D(D({},c),{},{e:l,target:n,previousTarget:i,isClick:!1,pointer:this.getPointer(l,!0),absolutePointer:this.getPointer(l)});o&&this.fire(p,v),n.fire(h,v)}}__onMouseWheel(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()}_transformObject(t){const e=this.getPointer(t),n=this._currentTransform,i=n.target,o=i.group?iu(e,void 0,i.group.calcTransformMatrix()):e;n.reset=!1,n.shiftKey=t.shiftKey,n.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,n,o),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(t,e,n){const i=n.x,o=n.y,l=e.action,c=e.actionHandler;let h=!1;c&&(h=c(t,e,i,o)),l==="drag"&&h&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||h}_setCursorFromEvent(t,e){if(!e){this.setCursor(this.defaultCursor);return}let n=e.hoverCursor||this.hoverCursor;const i=this._activeObject===this._activeSelection?this._activeObject:null,o=(!i||e.group!==i)&&e._findTargetCorner(this.getPointer(t,!0));if(!o)e.subTargetCheck&&this.targets.concat().reverse().map(l=>{n=l.hoverCursor||n}),this.setCursor(n);else{const l=e.controls[o];this.setCursor(l.cursorStyleHandler(t,l,e))}}handleMultiSelection(t,e){const n=this._activeObject,i=this._activeSelection,o=n===i;if(n&&this._isSelectionKeyPressed(t)&&this.selection&&e&&e.selectable&&(n!==e||o)&&(o||!e.isDescendantOf(n)&&!n.isDescendantOf(e))&&!e.onSelect({e:t})&&!n.getActiveControl()){if(o){const l=i.getObjects();if(e===i){const c=this.getPointer(t,!0);if(e=this.searchPossibleTargets(l,c)||this.searchPossibleTargets(this._objects,c),!e||!e.selectable)return!1}e.group===i?(i.remove(e),this._hoveredTarget=e,this._hoveredTargets=[...this.targets],i.size()===1&&this._setActiveObject(i.item(0),t)):(i.multiSelectAdd(e),this._hoveredTarget=i,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(l,t)}else Ca(n)&&n.exitEditing(),i.multiSelectAdd(n,e),this._hoveredTarget=i,this._setActiveObject(i,t),this._fireSelectionEvents([n],t);return!0}return!1}handleSelection(t){if(!this.selection||!this._groupSelector)return!1;const{x:e,y:n,deltaX:i,deltaY:o}=this._groupSelector,l=new F(e,n),c=l.add(new F(i,o)),h=l.min(c),f=l.max(c),d=f.subtract(h),p=l.eq(c),_=this.collectObjects({left:h.x,top:h.y,width:d.x,height:d.y},{includeIntersecting:!this.selectionFullyContained}),v=p?_[0]?[_[0]]:[]:_.length>1?_.filter(w=>!w.onSelect({e:t})).reverse():_;return v.length===1?this.setActiveObject(v[0],t):v.length>1&&(this._activeSelection.add(...v),this.setActiveObject(this._activeSelection,t)),this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const s_={x1:0,y1:0,x2:0,y2:0},XA=D(D({},s_),{},{r1:0,r2:0}),HA=/^(\d+\.\d+)%|(\d+)%$/;function o_(r){return r&&HA.test(r)}function a_(r,t){const e=typeof r=="number"?r:typeof r=="string"?parseFloat(r)/(o_(r)?100:1):NaN;return yi(0,Ni(e,t),1)}const YA=/\s*;\s*/,UA=/\s*:\s*/;function zA(r,t){let e,n;const i=r.getAttribute("style");if(i){const l=i.split(YA);l[l.length-1]===""&&l.pop();for(let c=l.length;c--;){const[h,f]=l[c].split(UA).map(d=>d.trim());h==="stop-color"?e=f:h==="stop-opacity"&&(n=f)}}const o=new Qt(e||r.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:a_(r.getAttribute("offset"),0),color:o.toRgb(),opacity:Ni(parseFloat(n||r.getAttribute("stop-opacity")||""),1)*o.getAlpha()*t}}function NA(r,t){const e=[],n=r.getElementsByTagName("stop"),i=a_(t,1);for(let o=n.length;o--;)e.push(zA(n[o],i));return e}function l_(r){return r.nodeName==="linearGradient"||r.nodeName==="LINEARGRADIENT"?"linear":"radial"}function c_(r){return r.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function VA(r,t){let{width:e,height:n,gradientUnits:i}=t,o;return Object.keys(r).reduce((l,c)=>{const h=r[c];return h==="Infinity"?o=1:h==="-Infinity"?o=0:(o=typeof h=="string"?parseFloat(h):h,typeof h=="string"&&o_(h)&&(o*=.01,i==="pixels"&&((c==="x1"||c==="x2"||c==="r2")&&(o*=e),(c==="y1"||c==="y2")&&(o*=n)))),l[c]=o,l},{})}function Fn(r,t){return r.getAttribute(t)}function GA(r){return{x1:Fn(r,"x1")||0,y1:Fn(r,"y1")||0,x2:Fn(r,"x2")||"100%",y2:Fn(r,"y2")||0}}function $A(r){return{x1:Fn(r,"fx")||Fn(r,"cx")||"50%",y1:Fn(r,"fy")||Fn(r,"cy")||"50%",r1:0,x2:Fn(r,"cx")||"50%",y2:Fn(r,"cy")||"50%",r2:Fn(r,"r")||"50%"}}function KA(r,t){return VA(l_(r)==="linear"?GA(r):$A(r),D(D({},t),{},{gradientUnits:c_(r)}))}class h_{constructor(t){let{type:e="linear",gradientUnits:n="pixels",coords:i,colorStops:o=[],offsetX:l=0,offsetY:c=0,gradientTransform:h,id:f}=t;this.id=f?"".concat(f,"_").concat(Vr()):Vr(),this.type=e,this.gradientUnits=n,this.gradientTransform=h,this.offsetX=l,this.offsetY=c,this.coords=D(D({},this.type==="radial"?XA:s_),i),this.colorStops=o.slice()}addColorStop(t){for(const e in t){const n=new Qt(t[e]);this.colorStops.push({offset:parseFloat(e),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(t){return D(D({},wi(this,t)),{},{type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(t){let{additionalTransform:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[],i=this.gradientTransform?this.gradientTransform.concat():vn.concat(),o=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",l=this.colorStops.map(d=>D({},d)).sort((d,p)=>d.offset-p.offset);let c=-this.offsetX,h=-this.offsetY;o==="objectBoundingBox"?(c/=t.width,h/=t.height):(c+=t.width/2,h+=t.height/2),c2(t)&&this.gradientUnits!=="percentage"&&(c-=t.pathOffset.x,h-=t.pathOffset.y),i[4]-=c,i[5]-=h;const f=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(o,'"'),'gradientTransform="'.concat(e?e+" ":"").concat(oo(i),'"'),""].join(" ");if(this.type==="linear"){const{x1:d,y1:p,x2:_,y2:v}=this.coords;n.push("<linearGradient ",f,' x1="',d,'" y1="',p,'" x2="',_,'" y2="',v,`">
`)}else if(this.type==="radial"){const{x1:d,y1:p,x2:_,y2:v,r1:w,r2:E}=this.coords,T=w>E;n.push("<radialGradient ",f,' cx="',T?d:_,'" cy="',T?p:v,'" r="',T?w:E,'" fx="',T?_:d,'" fy="',T?v:p,`">
`),T&&(l.reverse(),l.forEach(R=>{R.offset=1-R.offset}));const P=Math.min(w,E);if(P>0){const R=Math.max(w,E),X=P/R;l.forEach(B=>{B.offset+=X*(1-B.offset)})}}return l.forEach(d=>{let{color:p,offset:_,opacity:v}=d;n.push("<stop ",'offset="',_*100+"%",'" style="stop-color:',p,typeof v<"u"?";stop-opacity: "+v:";",`"/>
`)}),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(t){const e=this.coords,n=this.type==="linear"?t.createLinearGradient(e.x1,e.y1,e.x2,e.y2):t.createRadialGradient(e.x1,e.y1,e.r1,e.x2,e.y2,e.r2);return this.colorStops.forEach(i=>{let{color:o,opacity:l,offset:c}=i;n.addColorStop(c,typeof l<"u"?new Qt(o).setAlpha(l).toRgba():o)}),n}static fromElement(t,e,n){const i=c_(t),o=e._findCenterFromElement();return new this(D({id:t.getAttribute("id")||void 0,type:l_(t),coords:KA(t,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:NA(t,n.opacity),gradientUnits:i,gradientTransform:wh(t.getAttribute("gradientTransform")||"")},i==="pixels"?{offsetX:e.width/2-o.x,offsetY:e.height/2-o.y}:{offsetX:0,offsetY:0}))}}M(h_,"type","Gradient");ft.setClass(h_,"gradient");const qA=["source"];class _u{get type(){return"pattern"}set type(t){console.warn("Setting type has no effect",t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};M(this,"repeat","repeat"),M(this,"offsetX",0),M(this,"offsetY",0),M(this,"crossOrigin",""),M(this,"patternTransform",null),this.id=Vr(),Object.assign(this,t)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(t){return!this.source||this.isImageSource()&&(!this.source.complete||this.source.naturalWidth===0||this.source.naturalHeight===0)?null:t.createPattern(this.source,this.repeat)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:e,crossOrigin:n}=this;return D(D({},wi(this,t)),{},{type:"pattern",source:this.sourceToString(),repeat:e,crossOrigin:n,offsetX:Xt(this.offsetX,Lt.NUM_FRACTION_DIGITS),offsetY:Xt(this.offsetY,Lt.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(t){let{width:e,height:n}=t;const{source:i,repeat:o,id:l}=this,c=Ni(this.offsetX/e,0),h=Ni(this.offsetY/n,0),f=o==="repeat-y"||o==="no-repeat"?1+Math.abs(c||0):Ni(i.width/e,0),d=o==="repeat-x"||o==="no-repeat"?1+Math.abs(h||0):Ni(i.height/n,0);return['<pattern id="SVGID_'.concat(l,'" x="').concat(c,'" y="').concat(h,'" width="').concat(f,'" height="').concat(d,'">'),'<image x="0" y="0" width="'.concat(i.width,'" height="').concat(i.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(t,e){let{source:n}=t,i=re(t,qA);const o=await $s(n,D(D({},e),{},{crossOrigin:i.crossOrigin}));return new this(D(D({},i),{},{source:o}))}}M(_u,"type","Pattern");ft.setClass(_u);ft.setClass(_u,"pattern");const JA=["path","left","top"],ZA=["d"];class mo extends ye{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:i,top:o}=e,l=re(e,JA);super(l),this._setPath(t||[],!0),typeof i=="number"&&this.set(Nt,i),typeof o=="number"&&this.set(We,o)}_setPath(t,e){this.path=J0(Array.isArray(t)?t:r_(t)),this.setBoundingBox(e)}_findCenterFromElement(){const t=this._calcBoundsFromPath();return new F(t.left+t.width/2,t.top+t.height/2)}_renderPathCommands(t){let e=0,n=0,i=0,o=0,l=0,c=0;const h=-this.pathOffset.x,f=-this.pathOffset.y;t.beginPath();for(const d of this.path)switch(d[0]){case"L":i=d[1],o=d[2],t.lineTo(i+h,o+f);break;case"M":i=d[1],o=d[2],e=i,n=o,t.moveTo(i+h,o+f);break;case"C":i=d[5],o=d[6],l=d[3],c=d[4],t.bezierCurveTo(d[1]+h,d[2]+f,l+h,c+f,i+h,o+f);break;case"Q":t.quadraticCurveTo(d[1]+h,d[2]+f,d[3]+h,d[4]+f),i=d[3],o=d[4],l=d[1],c=d[2];break;case"Z":i=e,o=n,t.closePath();break}}_render(t){this._renderPathCommands(t),this._renderPaintInOrder(t)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(t)),{},{path:fs(this.path)})}toDatalessObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.toObject(t);return this.sourcePath&&(delete e.path,e.sourcePath=this.sourcePath),e}_toSVG(){const t=i_(this.path,Lt.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(t,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const t=Lt.NUM_FRACTION_DIGITS;return" translate(".concat(Xt(-this.pathOffset.x,t),", ").concat(Xt(-this.pathOffset.y,t),")")}toClipPathSVG(t){const e=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}toSVG(t){const e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{width:e,height:n,pathOffset:i}=this._calcDimensions();this.set({width:e,height:n,pathOffset:i}),t&&this.setPositionByOrigin(i,Tt,Tt)}_calcBoundsFromPath(){const t=[];let e=0,n=0,i=0,o=0;for(const l of this.path)switch(l[0]){case"L":i=l[1],o=l[2],t.push(new F(e,n),new F(i,o));break;case"M":i=l[1],o=l[2],e=i,n=o;break;case"C":t.push(...Ch(i,o,l[1],l[2],l[3],l[4],l[5],l[6])),i=l[5],o=l[6];break;case"Q":t.push(...Ch(i,o,l[1],l[2],l[1],l[2],l[3],l[4])),i=l[3],o=l[4];break;case"Z":i=e,o=n;break}return mr(t)}_calcDimensions(){const t=this._calcBoundsFromPath();return D(D({},t),{},{pathOffset:new F(t.left+t.width/2,t.top+t.height/2)})}static fromObject(t){return this._fromObject(t,{extraParam:"path"})}static async fromElement(t,e,n){const i=Cr(t,this.ATTRIBUTE_NAMES,n),{d:o}=i,l=re(i,ZA);return new this(o,D(D(D({},l),e),{},{left:void 0,top:void 0}))}}M(mo,"type","Path");M(mo,"cacheProperties",[...wr,"path","fillRule"]);M(mo,"ATTRIBUTE_NAMES",[...Gr,"d"]);ft.setClass(mo);ft.setSVGClass(mo);const QA=["left","top","radius"],u_=["radius","startAngle","endAngle"],tD={radius:0,startAngle:0,endAngle:360};class $r extends ye{static getDefaults(){return D(D({},super.getDefaults()),$r.ownDefaults)}_set(t,e){return super._set(t,e),t==="radius"&&this.setRadius(e),this}_render(t){t.beginPath(),t.arc(0,0,this.radius,ne(this.startAngle),ne(this.endAngle),!1),this._renderPaintInOrder(t)}getRadiusX(){return this.get("radius")*this.get("scaleX")}getRadiusY(){return this.get("radius")*this.get("scaleY")}setRadius(t){this.radius=t,this.set({width:t*2,height:t*2})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...u_,...t])}_toSVG(){const t=(this.endAngle-this.startAngle)%360;if(t===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:e}=this,n=ne(this.startAngle),i=ne(this.endAngle),o=Ke(n)*e,l=qe(n)*e,c=Ke(i)*e,h=qe(i)*e,f=t>180?"1":"0";return['<path d="M '.concat(o," ").concat(l)," A ".concat(e," ").concat(e)," 0 ","".concat(f," 1")," ".concat(c," ").concat(h),'" ',"COMMON_PARTS",` />
`]}}static async fromElement(t,e,n){const i=Cr(t,this.ATTRIBUTE_NAMES,n),{left:o=0,top:l=0,radius:c=0}=i,h=re(i,QA);return new this(D(D({},h),{},{radius:c,left:o-c,top:l-c}))}static fromObject(t){return super._fromObject(t)}}M($r,"type","Circle");M($r,"cacheProperties",[...wr,...u_]);M($r,"ownDefaults",tD);M($r,"ATTRIBUTE_NAMES",["cx","cy","r",...Gr]);ft.setClass($r);ft.setSVGClass($r);const eD=["x1","y1","x2","y2"],nD=["x1","y1","x2","y2"],vu=["x1","x2","y1","y2"];class _o extends ye{constructor(){let[t,e,n,i]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(D(D({},o),{},{x1:t,y1:e,x2:n,y2:i})),this._setWidthHeight();const{left:l,top:c}=o;typeof l=="number"&&this.set(Nt,l),typeof c=="number"&&this.set(We,c)}_setWidthHeight(){const{x1:t,y1:e,x2:n,y2:i}=this;this.width=Math.abs(n-t),this.height=Math.abs(i-e);const{left:o,top:l,width:c,height:h}=mr([{x:t,y:e},{x:n,y:i}]),f=new F(o+c/2,l+h/2);this.setPositionByOrigin(f,Tt,Tt)}_set(t,e){return super._set(t,e),vu.includes(t)&&this._setWidthHeight(),this}_render(t){t.beginPath();const e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;const n=t.strokeStyle;if(An(this.stroke))t.strokeStyle=this.stroke.toLive(t);else{var i;t.strokeStyle=(i=this.stroke)!==null&&i!==void 0?i:t.fillStyle}this.stroke&&this._renderStroke(t),t.strokeStyle=n}_findCenterFromElement(){return new F((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(t)),this.calcLinePoints())}_getNonTransformedDimensions(){const t=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t}calcLinePoints(){const{x1:t,x2:e,y1:n,y2:i,width:o,height:l}=this,c=t<=e?-1:1,h=n<=i?-1:1,f=c*o/2,d=h*l/2,p=c*-o/2,_=h*-l/2;return{x1:f,x2:p,y1:d,y2:_}}_toSVG(){const{x1:t,x2:e,y1:n,y2:i}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(t,'" y1="').concat(n,'" x2="').concat(e,'" y2="').concat(i,`" />
`)]}static async fromElement(t,e,n){const i=Cr(t,this.ATTRIBUTE_NAMES,n),{x1:o=0,y1:l=0,x2:c=0,y2:h=0}=i,f=re(i,eD);return new this([o,l,c,h],f)}static fromObject(t){let{x1:e,y1:n,x2:i,y2:o}=t,l=re(t,nD);return this._fromObject(D(D({},l),{},{points:[e,n,i,o]}),{extraParam:"points"})}}M(_o,"type","Line");M(_o,"cacheProperties",[...wr,...vu]);M(_o,"ATTRIBUTE_NAMES",Gr.concat(vu));ft.setClass(_o);ft.setSVGClass(_o);const rD={width:100,height:100};class ds extends ye{static getDefaults(){return D(D({},super.getDefaults()),ds.ownDefaults)}_render(t){const e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,n),t.lineTo(0,-n),t.lineTo(e,n),t.closePath(),this._renderPaintInOrder(t)}_toSVG(){const t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-t," ").concat(e,",0 ").concat(-e,",").concat(t," ").concat(e),'" />']}}M(ds,"type","Triangle");M(ds,"ownDefaults",rD);ft.setClass(ds);ft.setSVGClass(ds);const iD={rx:0,ry:0},f_=["rx","ry"];class Kr extends ye{static getDefaults(){return D(D({},super.getDefaults()),Kr.ownDefaults)}_set(t,e){switch(super._set(t,e),t){case"rx":this.rx=e,this.set("width",e*2);break;case"ry":this.ry=e,this.set("height",e*2);break}return this}getRx(){return this.get("rx")*this.get("scaleX")}getRy(){return this.get("ry")*this.get("scaleY")}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...f_,...t])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,vr,!1),t.restore(),this._renderPaintInOrder(t)}static async fromElement(t,e,n){const i=Cr(t,this.ATTRIBUTE_NAMES,n);return i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,new this(i)}}M(Kr,"type","Ellipse");M(Kr,"cacheProperties",[...wr,...f_]);M(Kr,"ownDefaults",iD);M(Kr,"ATTRIBUTE_NAMES",[...Gr,"cx","cy","rx","ry"]);ft.setClass(Kr);ft.setSVGClass(Kr);function sD(r){if(!r)return[];const t=r.replace(/,/g," ").trim().split(/\s+/),e=[];for(let n=0;n<t.length;n+=2)e.push({x:parseFloat(t[n]),y:parseFloat(t[n+1])});return e}const oD=["left","top"],d_={exactBoundingBox:!1};class Un extends ye{static getDefaults(){return D(D({},super.getDefaults()),Un.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(D({points:t},e)),M(this,"strokeDiff",void 0);const{left:n,top:i}=e;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(Nt,n),typeof i=="number"&&this.set(We,i)}isOpen(){return!0}_projectStrokeOnPoints(t){return z0(this.points,t,this.isOpen())}_calcDimensions(t){t=D({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},t||{});const e=this.exactBoundingBox?this._projectStrokeOnPoints(t).map(p=>p.projectedPoint):this.points;if(e.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new F,strokeOffset:new F,strokeDiff:new F};const n=mr(e),i=rl(D(D({},t),{},{scaleX:1,scaleY:1})),o=mr(this.points.map(p=>fe(p,i,!0))),l=n.left+n.width/2,c=n.top+n.height/2,h=l-c*Math.tan(ne(this.skewX)),f=c-h*Math.tan(ne(this.skewY)),d=new F(this.scaleX,this.scaleY);return D(D({},n),{},{pathOffset:new F(h,f),strokeOffset:new F(o.left,o.top).subtract(new F(n.left,n.top)).multiply(d),strokeDiff:new F(n.width,n.height).subtract(new F(o.width,o.height)).multiply(d)})}_findCenterFromElement(){const t=mr(this.points);return new F(t.left+t.width/2,t.top+t.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{left:e,top:n,width:i,height:o,pathOffset:l,strokeOffset:c,strokeDiff:h}=this._calcDimensions();this.set({width:i,height:o,pathOffset:l,strokeOffset:c,strokeDiff:h}),t&&this.setPositionByOrigin(new F(e+i/2,n+o/2),Tt,Tt)}_getNonTransformedDimensions(){return this.exactBoundingBox?new F(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let l;if(Object.keys(t).some(c=>this.strokeUniform||this.constructor.layoutProperties.includes(c))){var e,n;const{width:c,height:h}=this._calcDimensions(t);l=new F((e=t.width)!==null&&e!==void 0?e:c,(n=t.height)!==null&&n!==void 0?n:h)}else{var i,o;l=new F((i=t.width)!==null&&i!==void 0?i:this.width,(o=t.height)!==null&&o!==void 0?o:this.height)}return l.multiply(new F(t.scaleX||this.scaleX,t.scaleY||this.scaleY))}else return super._getTransformedDimensions(t)}_set(t,e){const n=this.initialized&&this[t]!==e,i=super._set(t,e);return this.exactBoundingBox&&n&&((t==="scaleX"||t==="scaleY")&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(t))&&this.setDimensions(),i}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(t)),{},{points:fs(this.points)})}_toSVG(){const t=[],e=this.pathOffset.x,n=this.pathOffset.y,i=Lt.NUM_FRACTION_DIGITS;for(let o=0,l=this.points.length;o<l;o++)t.push(Xt(this.points[o].x-e,i),",",Xt(this.points[o].y-n,i)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(t.join(""),`" />
`)]}_render(t){const e=this.points.length,n=this.pathOffset.x,i=this.pathOffset.y;if(!(!e||isNaN(this.points[e-1].y))){t.beginPath(),t.moveTo(this.points[0].x-n,this.points[0].y-i);for(let o=0;o<e;o++){const l=this.points[o];t.lineTo(l.x-n,l.y-i)}!this.isOpen()&&t.closePath(),this._renderPaintInOrder(t)}}complexity(){return this.points.length}static async fromElement(t,e,n){const i=sD(t.getAttribute("points")),o=Cr(t,this.ATTRIBUTE_NAMES,n),l=re(o,oD);return new this(i,D(D({},l),e))}static fromObject(t){return this._fromObject(t,{extraParam:"points"})}}M(Un,"ownDefaults",d_);M(Un,"type","Polyline");M(Un,"layoutProperties",["skewX","skewY","strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]);M(Un,"cacheProperties",[...wr,"points"]);M(Un,"ATTRIBUTE_NAMES",[...Gr]);ft.setClass(Un);ft.setSVGClass(Un);class ul extends Un{static getDefaults(){return D(D({},super.getDefaults()),Un.ownDefaults)}isOpen(){return!1}}M(ul,"ownDefaults",d_);M(ul,"type","Polygon");ft.setClass(ul);ft.setSVGClass(ul);const g_=["fontSize","fontWeight","fontFamily","fontStyle"],p_=["underline","overline","linethrough"],m_=[...g_,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],__=[...m_,...p_,"textBackgroundColor","direction"],aD=[...g_,...p_,"stroke","strokeWidth","fill","deltaY","textBackgroundColor"],lD={_reNewline:Kh,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Nt,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Nt,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},Jn="justify",Ia="justify-left",Ks="justify-right",qs="justify-center";class v_ extends ye{isEmptyStyles(t){if(!this.styles||typeof t<"u"&&!this.styles[t])return!0;const e=typeof t>"u"?this.styles:{line:this.styles[t]};for(const n in e)for(const i in e[n])for(const o in e[n][i])return!1;return!0}styleHas(t,e){if(!this.styles||typeof e<"u"&&!this.styles[e])return!1;const n=typeof e>"u"?this.styles:{0:this.styles[e]};for(const i in n)for(const o in n[i])if(typeof n[i][o][t]<"u")return!0;return!1}cleanStyle(t){if(!this.styles)return!1;const e=this.styles;let n=0,i,o,l=!0,c=0;for(const h in e){i=0;for(const f in e[h]){const d=e[h][f]||{},p=d[t]!==void 0;n++,p?(o?d[t]!==o&&(l=!1):o=d[t],d[t]===this[t]&&delete d[t]):l=!1,Object.keys(d).length!==0?i++:delete e[h][f]}i===0&&delete e[h]}for(let h=0;h<this._textLines.length;h++)c+=this._textLines[h].length;l&&n===c&&(this[t]=o,this.removeStyle(t))}removeStyle(t){if(!this.styles)return;const e=this.styles;let n,i,o;for(i in e){n=e[i];for(o in n)delete n[o][t],Object.keys(n[o]).length===0&&delete n[o];Object.keys(n).length===0&&delete e[i]}}_extendStyles(t,e){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(t);this._getLineStyle(n)||this._setLineStyle(n),Object.keys(this._getStyleDeclaration(n,i)).length||this._setStyleDeclaration(n,i,{}),Object.assign(this._getStyleDeclaration(n,i),e)}getSelectionStyles(t,e,n){const i=[];for(let o=t;o<(e||t);o++)i.push(this.getStyleAtPosition(o,n));return i}getStyleAtPosition(t,e){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(t);return e?this.getCompleteStyleDeclaration(n,i):this._getStyleDeclaration(n,i)}setSelectionStyles(t,e,n){for(let i=e;i<(n||e);i++)this._extendStyles(i,t);this._forceClearCache=!0}_getStyleDeclaration(t,e){var n;const i=this.styles&&this.styles[t];return i?(n=i[e])!==null&&n!==void 0?n:{}:{}}getCompleteStyleDeclaration(t,e){return D(D({},wi(this,this.constructor._styleProperties)),this._getStyleDeclaration(t,e))}_setStyleDeclaration(t,e,n){this.styles[t][e]=n}_deleteStyleDeclaration(t,e){delete this.styles[t][e]}_getLineStyle(t){return!!this.styles[t]}_setLineStyle(t){this.styles[t]={}}_deleteLineStyle(t){delete this.styles[t]}}M(v_,"_styleProperties",aD);const cD=/  +/g,hD=/"/g;function Yc(r,t,e,n,i){return"		".concat(a2(r,{left:t,top:e,width:n,height:i}),`
`)}class uD extends p0{_toSVG(){const t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(t){let{textBgRects:e,textSpans:n}=t;const i=!0,o=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(hD,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",o?'text-decoration="'.concat(o,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(i),'"',this.addPaintOrder()," >",n.join(""),`</text>
`]}_getSVGTextAndBg(t,e){const n=[],i=[];let o=t,l;this.backgroundColor&&i.push(...Yc(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let c=0,h=this._textLines.length;c<h;c++)l=this._getLineLeftOffset(c),this.direction==="rtl"&&(l+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",c))&&this._setSVGTextLineBg(i,c,e+l,o),this._setSVGTextLineText(n,c,e+l,o),o+=this.getHeightOfLine(c);return{textSpans:n,textBgRects:i}}_createTextCharSpan(t,e,n,i){const o=this.getSvgSpanStyles(e,t!==t.trim()||!!t.match(cD)),l=o?'style="'.concat(o,'"'):"",c=e.deltaY,h=c?' dy="'.concat(Xt(c,Lt.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(Xt(n,Lt.NUM_FRACTION_DIGITS),'" y="').concat(Xt(i,Lt.NUM_FRACTION_DIGITS),'" ').concat(h).concat(l,">").concat(K0(t),"</tspan>")}_setSVGTextLineText(t,e,n,i){const o=this.getHeightOfLine(e),l=this.textAlign.includes(Jn),c=this._textLines[e];let h,f,d="",p,_,v=0,w;i+=o*(1-this._fontSizeFraction)/this.lineHeight;for(let E=0,T=c.length-1;E<=T;E++)w=E===T||this.charSpacing,d+=c[E],p=this.__charBounds[e][E],v===0?(n+=p.kernedWidth-p.width,v+=p.width):v+=p.kernedWidth,l&&!w&&this._reSpaceAndTab.test(c[E])&&(w=!0),w||(h=h||this.getCompleteStyleDeclaration(e,E),f=this.getCompleteStyleDeclaration(e,E+1),w=cl(h,f,!0)),w&&(_=this._getStyleDeclaration(e,E),t.push(this._createTextCharSpan(d,_,n,i)),d="",h=f,this.direction==="rtl"?n-=v:n+=v,v=0)}_setSVGTextLineBg(t,e,n,i){const o=this._textLines[e],l=this.getHeightOfLine(e)/this.lineHeight;let c=0,h=0,f,d=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let p=0;p<o.length;p++){const{left:_,width:v,kernedWidth:w}=this.__charBounds[e][p];f=this.getValueOfPropertyAt(e,p,"textBackgroundColor"),f!==d?(d&&t.push(...Yc(d,n+h,i,c,l)),h=_,c=v,d=f):c+=w}f&&t.push(...Yc(d,n+h,i,c,l))}_getSVGLineTopOffset(t){let e=0,n;for(n=0;n<t;n++)e+=this.getHeightOfLine(n);const i=this.getHeightOfLine(n);return{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(t){return"".concat(super.getSvgStyles(t)," white-space: pre;")}getSvgSpanStyles(t,e){const{fontFamily:n,strokeWidth:i,stroke:o,fill:l,fontSize:c,fontStyle:h,fontWeight:f,deltaY:d}=t,p=this.getSvgTextDecoration(t);return[o?ao("stroke",o):"",i?"stroke-width: ".concat(i,"; "):"",n?"font-family: ".concat(!n.includes("'")&&!n.includes('"')?"'".concat(n,"'"):n,"; "):"",c?"font-size: ".concat(c,"px; "):"",h?"font-style: ".concat(h,"; "):"",f?"font-weight: ".concat(f,"; "):"",p&&"text-decoration: ".concat(p,"; "),l?ao("fill",l):"",d?"baseline-shift: ".concat(-d,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(t){return["overline","underline","line-through"].filter(e=>t[e.replace("-","")]).join(" ")}}const fD=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Uc;function dD(){return Uc||(Uc=pe().getContext("2d")),Uc}class cn extends v_{static getDefaults(){return D(D({},super.getDefaults()),cn.ownDefaults)}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(D(D({},e),{},{text:t,styles:(e==null?void 0:e.styles)||{}})),M(this,"__charBounds",[]),this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const t=this.path;t&&(t.segmentsInfo=mu(t.path))}_splitText(){const t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Jn)&&this.enlargeSpaces()}enlargeSpaces(){let t,e,n,i,o,l,c;for(let h=0,f=this._textLines.length;h<f;h++)if(!(this.textAlign!==Jn&&(h===f-1||this.isEndOfWrapping(h)))&&(i=0,o=this._textLines[h],e=this.getLineWidth(h),e<this.width&&(c=this.textLines[h].match(this._reSpacesAndTabs)))){n=c.length,t=(this.width-e)/n;for(let d=0;d<=o.length;d++)l=this.__charBounds[h][d],this._reSpaceAndTab.test(o[d])?(l.width+=t,l.kernedWidth+=t,l.left+=i,i+=t):l.left+=i}}isEndOfWrapping(t){return t===this._textLines.length-1}missingNewlineOffset(t){return 1}get2DCursorLocation(t,e){const n=e?this._unwrappedTextLines:this._textLines;let i;for(i=0;i<n.length;i++){if(t<=n[i].length)return{lineIndex:i,charIndex:t};t-=n[i].length+this.missingNewlineOffset(i,e)}return{lineIndex:i-1,charIndex:n[i-1].length<t?n[i-1].length:t}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const t=super._getCacheCanvasDimensions(),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t}_render(t){const e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")}_renderText(t){this.paintFirst==="stroke"?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))}_setTextStyles(t,e,n){if(t.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Tt:t.textBaseline="middle";break;case"ascender":t.textBaseline=We;break;case"descender":t.textBaseline=uh;break}t.font=this._getFontDeclaration(e,n)}calcTextWidth(){let t=this.getLineWidth(0);for(let e=1,n=this._textLines.length;e<n;e++){const i=this.getLineWidth(e);i>t&&(t=i)}return t}_renderTextLine(t,e,n,i,o,l){this._renderChars(t,e,n,i,o,l)}_renderTextLinesBackground(t){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const e=t.fillStyle,n=this._getLeftOffset();let i=this._getTopOffset();for(let o=0,l=this._textLines.length;o<l;o++){const c=this.getHeightOfLine(o);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",o)){i+=c;continue}const h=this._textLines[o].length,f=this._getLineLeftOffset(o);let d=0,p=0,_,v,w=this.getValueOfPropertyAt(o,0,"textBackgroundColor");for(let E=0;E<h;E++){const T=this.__charBounds[o][E];v=this.getValueOfPropertyAt(o,E,"textBackgroundColor"),this.path?(t.save(),t.translate(T.renderLeft,T.renderTop),t.rotate(T.angle),t.fillStyle=v,v&&t.fillRect(-T.width/2,-c/this.lineHeight*(1-this._fontSizeFraction),T.width,c/this.lineHeight),t.restore()):v!==w?(_=n+f+p,this.direction==="rtl"&&(_=this.width-_-d),t.fillStyle=w,w&&t.fillRect(_,i,d,c/this.lineHeight),p=T.left,d=T.width,w=v):d+=T.kernedWidth}v&&!this.path&&(_=n+f+p,this.direction==="rtl"&&(_=this.width-_-d),t.fillStyle=v,t.fillRect(_,i,d,c/this.lineHeight)),i+=c}t.fillStyle=e,this._removeShadow(t)}_measureChar(t,e,n,i){const o=Vs.getFontCache(e),l=this._getFontDeclaration(e),c=n+t,h=n&&l===this._getFontDeclaration(i),f=e.fontSize/this.CACHE_FONT_SIZE;let d,p,_,v;if(n&&o[n]!==void 0&&(_=o[n]),o[t]!==void 0&&(v=d=o[t]),h&&o[c]!==void 0&&(p=o[c],v=p-_),d===void 0||_===void 0||p===void 0){const w=dD();this._setTextStyles(w,e,!0),d===void 0&&(v=d=w.measureText(t).width,o[t]=d),_===void 0&&h&&n&&(_=w.measureText(n).width,o[n]=_),h&&p===void 0&&(p=w.measureText(c).width,o[c]=p,v=p-_)}return{width:d*f,kernedWidth:v*f}}getHeightOfChar(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")}measureLine(t){const e=this._measureLine(t);return this.charSpacing!==0&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e}_measureLine(t){let e=0,n,i;const o=this.pathSide===ve,l=this.path,c=this._textLines[t],h=c.length,f=new Array(h);this.__charBounds[t]=f;for(let d=0;d<h;d++){const p=c[d];i=this._getGraphemeBox(p,t,d,n),f[d]=i,e+=i.kernedWidth,n=p}if(f[h]={left:i?i.left+i.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},l&&l.segmentsInfo){let d=0;const p=l.segmentsInfo[l.segmentsInfo.length-1].length;switch(this.textAlign){case Nt:d=o?p-e:0;break;case Tt:d=(p-e)/2;break;case ve:d=o?0:p-e;break}d+=this.pathStartOffset*(o?-1:1);for(let _=o?h-1:0;o?_>=0:_<h;o?_--:_++)i=f[_],d>p?d%=p:d<0&&(d+=p),this._setGraphemeOnPath(d,i),d+=i.kernedWidth}return{width:e,numOfSpaces:0}}_setGraphemeOnPath(t,e){const n=t+e.kernedWidth/2,i=this.path,o=n_(i.path,n,i.segmentsInfo);e.renderLeft=o.x-i.pathOffset.x,e.renderTop=o.y-i.pathOffset.y,e.angle=o.angle+(this.pathSide===ve?Math.PI:0)}_getGraphemeBox(t,e,n,i,o){const l=this.getCompleteStyleDeclaration(e,n),c=i?this.getCompleteStyleDeclaration(e,n-1):{},h=this._measureChar(t,l,i,c);let f=h.kernedWidth,d=h.width,p;this.charSpacing!==0&&(p=this._getWidthOfCharSpacing(),d+=p,f+=p);const _={width:d,left:0,height:l.fontSize,kernedWidth:f,deltaY:l.deltaY};if(n>0&&!o){const v=this.__charBounds[e][n-1];_.left=v.left+v.width+h.kernedWidth-h.width}return _}getHeightOfLine(t){if(this.__lineHeights[t])return this.__lineHeights[t];let e=this.getHeightOfChar(t,0);for(let n=1,i=this._textLines[t].length;n<i;n++)e=Math.max(this.getHeightOfChar(t,n),e);return this.__lineHeights[t]=e*this.lineHeight*this._fontSizeMult}calcTextHeight(){let t,e=0;for(let n=0,i=this._textLines.length;n<i;n++)t=this.getHeightOfLine(n),e+=n===i-1?t/this.lineHeight:t;return e}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(t,e){t.save();let n=0;const i=this._getLeftOffset(),o=this._getTopOffset();for(let l=0,c=this._textLines.length;l<c;l++){const h=this.getHeightOfLine(l),f=h/this.lineHeight,d=this._getLineLeftOffset(l);this._renderTextLine(e,t,this._textLines[l],i+d,o+n+f,l),n+=h}t.restore()}_renderTextFill(t){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(t,"fillText")}_renderTextStroke(t){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())}_renderChars(t,e,n,i,o,l){const c=this.getHeightOfLine(l),h=this.textAlign.includes(Jn),f=this.path,d=!h&&this.charSpacing===0&&this.isEmptyStyles(l)&&!f,p=this.direction==="ltr",_=this.direction==="ltr"?1:-1,v=e.direction;let w,E,T="",P,R=0,X,B;if(e.save(),v!==this.direction&&(e.canvas.setAttribute("dir",p?"ltr":"rtl"),e.direction=p?"ltr":"rtl",e.textAlign=p?Nt:ve),o-=c*this._fontSizeFraction/this.lineHeight,d){this._renderChar(t,e,l,0,n.join(""),i,o),e.restore();return}for(let $=0,tt=n.length-1;$<=tt;$++)X=$===tt||this.charSpacing||f,T+=n[$],P=this.__charBounds[l][$],R===0?(i+=_*(P.kernedWidth-P.width),R+=P.width):R+=P.kernedWidth,h&&!X&&this._reSpaceAndTab.test(n[$])&&(X=!0),X||(w=w||this.getCompleteStyleDeclaration(l,$),E=this.getCompleteStyleDeclaration(l,$+1),X=cl(w,E,!1)),X&&(f?(e.save(),e.translate(P.renderLeft,P.renderTop),e.rotate(P.angle),this._renderChar(t,e,l,$,T,-R/2,0),e.restore()):(B=i,this._renderChar(t,e,l,$,T,B,o)),T="",w=E,i+=_*R,R=0);e.restore()}_applyPatternGradientTransformText(t){const e=pe(),n=this.width+this.strokeWidth,i=this.height+this.strokeWidth,o=e.getContext("2d");return e.width=n,e.height=i,o.beginPath(),o.moveTo(0,0),o.lineTo(n,0),o.lineTo(n,i),o.lineTo(0,i),o.closePath(),o.translate(n/2,i/2),o.fillStyle=t.toLive(o),this._applyPatternGradientTransform(o,t),o.fill(),o.createPattern(e,"no-repeat")}handleFiller(t,e,n){let i,o;return An(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(i=-this.width/2,o=-this.height/2,t.translate(i,o),t[e]=this._applyPatternGradientTransformText(n),{offsetX:i,offsetY:o}):(t[e]=n.toLive(t),this._applyPatternGradientTransform(t,n)):(t[e]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(t,e){let{stroke:n,strokeWidth:i}=e;return t.lineWidth=i,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",n)}_setFillStyles(t,e){let{fill:n}=e;return this.handleFiller(t,"fillStyle",n)}_renderChar(t,e,n,i,o,l,c){const h=this._getStyleDeclaration(n,i),f=this.getCompleteStyleDeclaration(n,i),d=t==="fillText"&&f.fill,p=t==="strokeText"&&f.stroke&&f.strokeWidth;if(!(!p&&!d)){if(e.save(),e.font=this._getFontDeclaration(f),h.textBackgroundColor&&this._removeShadow(e),h.deltaY&&(c+=h.deltaY),d){const _=this._setFillStyles(e,f);e.fillText(o,l-_.offsetX,c-_.offsetY)}if(p){const _=this._setStrokeStyles(e,f);e.strokeText(o,l-_.offsetX,c-_.offsetY)}e.restore()}}setSuperscript(t,e){this._setScript(t,e,this.superscript)}setSubscript(t,e){this._setScript(t,e,this.subscript)}_setScript(t,e,n){const i=this.get2DCursorLocation(t,!0),o=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),l=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),c={fontSize:o*n.size,deltaY:l+o*n.baseline};this.setSelectionStyles(c,t,e)}_getLineLeftOffset(t){const e=this.getLineWidth(t),n=this.width-e,i=this.textAlign,o=this.direction,l=this.isEndOfWrapping(t);let c=0;return i===Jn||i===qs&&!l||i===Ks&&!l||i===Ia&&!l?0:(i===Tt&&(c=n/2),i===ve&&(c=n),i===qs&&(c=n/2),i===Ks&&(c=n),o==="rtl"&&(i===ve||i===Jn||i===Ks?c=0:i===Nt||i===Ia?c=-n:(i===Tt||i===qs)&&(c=-n/2)),c)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(t){if(this.__lineWidths[t]!==void 0)return this.__lineWidths[t];const{width:e}=this.measureLine(t);return this.__lineWidths[t]=e,e}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(t,e,n){var i;return(i=this._getStyleDeclaration(t,e)[n])!==null&&i!==void 0?i:this[n]}_renderTextDecoration(t,e){if(!this[e]&&!this.styleHas(e))return;let n=this._getTopOffset();const i=this._getLeftOffset(),o=this.path,l=this._getWidthOfCharSpacing(),c=this.offsets[e];for(let h=0,f=this._textLines.length;h<f;h++){const d=this.getHeightOfLine(h);if(!this[e]&&!this.styleHas(e,h)){n+=d;continue}const p=this._textLines[h],_=d/this.lineHeight,v=this._getLineLeftOffset(h);let w=0,E=0,T=this.getValueOfPropertyAt(h,0,e),P=this.getValueOfPropertyAt(h,0,"fill"),R,X;const B=n+_*(1-this._fontSizeFraction);let $=this.getHeightOfChar(h,0),tt=this.getValueOfPropertyAt(h,0,"deltaY");for(let st=0,Dt=p.length;st<Dt;st++){const Pt=this.__charBounds[h][st];R=this.getValueOfPropertyAt(h,st,e),X=this.getValueOfPropertyAt(h,st,"fill");const Zt=this.getHeightOfChar(h,st),ot=this.getValueOfPropertyAt(h,st,"deltaY");if(o&&R&&X)t.save(),t.fillStyle=P,t.translate(Pt.renderLeft,Pt.renderTop),t.rotate(Pt.angle),t.fillRect(-Pt.kernedWidth/2,c*Zt+ot,Pt.kernedWidth,this.fontSize/15),t.restore();else if((R!==T||X!==P||Zt!==$||ot!==tt)&&E>0){let ct=i+v+w;this.direction==="rtl"&&(ct=this.width-ct-E),T&&P&&(t.fillStyle=P,t.fillRect(ct,B+c*$+tt,E,this.fontSize/15)),w=Pt.left,E=Pt.width,T=R,P=X,$=Zt,tt=ot}else E+=Pt.kernedWidth}let nt=i+v+w;this.direction==="rtl"&&(nt=this.width-nt-E),t.fillStyle=X,R&&X&&t.fillRect(nt,B+c*$+tt,E-l,this.fontSize/15),n+=d}this._removeShadow(t)}_getFontDeclaration(){let{fontFamily:t=this.fontFamily,fontStyle:e=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:i=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;const l=t.includes("'")||t.includes('"')||t.includes(",")||cn.genericFonts.includes(t.toLowerCase())?t:'"'.concat(t,'"');return[e,n,"".concat(o?this.CACHE_FONT_SIZE:i,"px"),l].join(" ")}render(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(t)))}graphemeSplit(t){return q0(t)}_splitTextIntoLines(t){const e=t.split(this._reNewline),n=new Array(e.length),i=[`
`];let o=[];for(let l=0;l<e.length;l++)n[l]=this.graphemeSplit(e[l]),o=o.concat(n[l],i);return o.pop(),{_unwrappedLines:n,lines:e,graphemeText:o,graphemeLines:n}}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject([...__,...t])),{},{styles:N0(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(t,e){const{textLayoutProperties:n}=this.constructor;super.set(t,e);let i=!1,o=!1;if(typeof t=="object")for(const l in t)l==="path"&&this.setPathInfo(),i=i||n.includes(l),o=o||l==="path";else i=n.includes(t),o=t==="path";return o&&this.setPathInfo(),i&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(t,e,n){const i=Cr(t,cn.ATTRIBUTE_NAMES,n),o=D(D({},e),i),{textAnchor:l=Nt,textDecoration:c="",dx:h=0,dy:f=0,top:d=0,left:p=0,fontSize:_=$h,strokeWidth:v=1}=o,w=re(o,fD),E=(t.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),T=new this(E,D({left:p+h,top:d+f,underline:c.includes("underline"),overline:c.includes("overline"),linethrough:c.includes("line-through"),strokeWidth:0,fontSize:_},w)),P=T.getScaledHeight()/T.height,R=(T.height+T.strokeWidth)*T.lineHeight-T.height,X=R*P,B=T.getScaledHeight()+X;let $=0;return l===Tt&&($=T.getScaledWidth()/2),l===ve&&($=T.getScaledWidth()),T.set({left:T.left-$,top:T.top-(B-T.fontSize*(.07+T._fontSizeFraction))/T.lineHeight,strokeWidth:v}),T}static fromObject(t){return this._fromObject(D(D({},t),{},{styles:V0(t.styles||{},t.text)}),{extraParam:"text"})}}M(cn,"textLayoutProperties",m_);M(cn,"cacheProperties",[...wr,...__]);M(cn,"ownDefaults",lD);M(cn,"type","Text");M(cn,"genericFonts",["sans-serif","serif","cursive","fantasy","monospace"]);M(cn,"ATTRIBUTE_NAMES",Gr.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor"));j0(cn,[uD]);ft.setClass(cn);ft.setSVGClass(cn);class gD{constructor(t){M(this,"target",void 0),M(this,"__mouseDownInPlace",!1),M(this,"__dragStartFired",!1),M(this,"__isDraggingOver",!1),M(this,"__dragStartSelection",void 0),M(this,"__dragImageDisposer",void 0),M(this,"_dispose",void 0),this.target=t;const e=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{e.forEach(n=>n()),this._dispose=void 0}}isPointerOverSelection(t){const e=this.target,n=e.getSelectionStartFromPointer(t);return e.isEditing&&n>=e.selectionStart&&n<=e.selectionEnd&&e.selectionStart<e.selectionEnd}start(t){return this.__mouseDownInPlace=this.isPointerOverSelection(t)}isActive(){return this.__mouseDownInPlace}end(t){const e=this.isActive();return e&&!this.__dragStartFired&&(this.target.setCursorByClick(t),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,e}getDragStartSelection(){return this.__dragStartSelection}setDragImage(t,e){var n;let{selectionStart:i,selectionEnd:o}=e;const l=this.target,c=l.canvas,h=new F(l.flipX?-1:1,l.flipY?-1:1),f=l._getCursorBoundaries(i),p=new F(f.left+f.leftOffset,f.top+f.topOffset).multiply(h).transform(l.calcTransformMatrix()),v=c.getPointer(t).subtract(p),w=c._isRetinaScaling(),E=l.getCanvasRetinaScaling(),T=l.getBoundingRect(!0),P=p.subtract(new F(T.left,T.top)),R=c.viewportTransform,X=P.add(v).transform(R,!0),B=l.backgroundColor,$=fs(l.styles);l.backgroundColor="";const tt={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};l.setSelectionStyles(tt,0,i),l.setSelectionStyles(tt,o,l.text.length),l.dirty=!0;const nt=l.toCanvasElement({enableRetinaScaling:w,viewportTransform:!0});l.backgroundColor=B,l.styles=$,l.dirty=!0,lo(nt,{position:"fixed",left:"".concat(-nt.width,"px"),border:ln,width:"".concat(nt.width/E,"px"),height:"".concat(nt.height/E,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{nt.remove()},Bn(t.target||this.target.hiddenTextarea).body.appendChild(nt),(n=t.dataTransfer)===null||n===void 0||n.setDragImage(nt,X.x,X.y)}onDragStart(t){this.__dragStartFired=!0;const e=this.target,n=this.isActive();if(n&&t.dataTransfer){const i=this.__dragStartSelection={selectionStart:e.selectionStart,selectionEnd:e.selectionEnd},o=e._text.slice(i.selectionStart,i.selectionEnd).join(""),l=D({text:e.text,value:o},i);t.dataTransfer.setData("text/plain",o),t.dataTransfer.setData("application/fabric",JSON.stringify({value:o,styles:e.getSelectionStyles(i.selectionStart,i.selectionEnd,!0)})),t.dataTransfer.effectAllowed="copyMove",this.setDragImage(t,l)}return e.abortCursorAnimation(),n}canDrop(t){if(this.target.editable&&!this.target.getActiveControl()&&!t.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const e=this.target.getSelectionStartFromPointer(t),n=this.__dragStartSelection;return e<n.selectionStart||e>n.selectionEnd}return!0}return!1}targetCanDrop(t){return this.target.canDrop(t)}dragEnterHandler(t){let{e}=t;const n=this.targetCanDrop(e);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(t){const{e}=t,n=this.targetCanDrop(e);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(e.preventDefault(),t.canDrop=!0,t.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(t){var e;const{e:n}=t,i=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let o=(e=n.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain");if(o&&!i){const l=this.target,c=l.canvas;let h=l.getSelectionStartFromPointer(n);const{styles:f}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},d=o[Math.max(0,o.length-1)],p=0;if(this.__dragStartSelection){const _=this.__dragStartSelection.selectionStart,v=this.__dragStartSelection.selectionEnd;h>_&&h<=v?h=_:h>v&&(h-=v-_),l.removeChars(_,v),delete this.__dragStartSelection}l._reNewline.test(d)&&(l._reNewline.test(l._text[h])||h===l._text.length)&&(o=o.trimEnd()),t.didDrop=!0,t.dropTarget=l,l.insertChars(o,f,h),c.setActiveObject(l),l.enterEditing(n),l.selectionStart=Math.min(h+p,l._text.length),l.selectionEnd=Math.min(l.selectionStart+o.length,l._text.length),l.hiddenTextarea.value=l.text,l._updateTextarea(),l.hiddenTextarea.focus(),l.fire("changed",{index:h+p,action:"drop"}),c.fire("text:changed",{target:l}),c.contextTopDirty=!0,c.requestRenderAll()}}dragEndHandler(t){let{e}=t;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const i=this.target,o=this.target.canvas,{selectionStart:l,selectionEnd:c}=this.__dragStartSelection,h=((n=e.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||ln;h===ln?(i.selectionStart=l,i.selectionEnd=c,i._updateTextarea(),i.hiddenTextarea.focus()):(i.clearContextTop(),h==="move"&&(i.removeChars(l,c),i.selectionStart=i.selectionEnd=l,i.hiddenTextarea&&(i.hiddenTextarea.value=i.text),i._updateTextarea(),i.fire("changed",{index:l,action:"dragend"}),o.fire("text:changed",{target:i}),o.requestRenderAll()),i.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const jp=/[ \n\.,;!\?\-]/;class pD extends cn{constructor(){super(...arguments),M(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(t){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(t)}_animateCursor(t){let{toValue:e,duration:n,delay:i,onComplete:o}=t;return cu({startValue:this._currentCursorOpacity,endValue:e,duration:n,delay:i,onComplete:o,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:l=>{this._currentCursorOpacity=l,this.renderCursorOrSelection()}})}_tick(t){this._currentTickState=this._animateCursor({toValue:1,duration:this.cursorDuration,delay:t,onComplete:this._onTickComplete})}_onTickComplete(){var t;(t=this._currentTickCompleteState)===null||t===void 0||t.abort(),this._currentTickCompleteState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:100,onComplete:this._tick})}initDelayedCursor(t){this.abortCursorAnimation(),this._tick(t?0:this.cursorDelay)}abortCursorAnimation(){let t=!1;[this._currentTickState,this._currentTickCompleteState].forEach(e=>{e&&!e.isDone()&&(t=!0,e.abort())}),this._currentCursorOpacity=1,t&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(t=>!t||t.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(t){let e=0,n=t-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n--;for(;/\S/.test(this._text[n])&&n>-1;)e++,n--;return t-e}findWordBoundaryRight(t){let e=0,n=t;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e}findLineBoundaryLeft(t){let e=0,n=t-1;for(;!/\n/.test(this._text[n])&&n>-1;)e++,n--;return t-e}findLineBoundaryRight(t){let e=0,n=t;for(;!/\n/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e}searchWordBoundary(t,e){const n=this._text;let i=t>0&&this._reSpace.test(n[t])&&(e===-1||!Kh.test(n[t-1]))?t-1:t,o=n[i];for(;i>0&&i<n.length&&!jp.test(o);)i+=e,o=n[i];return e===-1&&jp.test(o)&&i++,i}selectWord(t){t=t||this.selectionStart;const e=this.searchWordBoundary(t,-1),n=Math.max(e,this.searchWordBoundary(t,1));this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(t){t=t||this.selectionStart;const e=this.findLineBoundaryLeft(t),n=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(t){this.isEditing||!this.editable||(this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}updateSelectionOnMouseMove(t){if(this.getActiveControl())return;const e=this.hiddenTextarea;Bn(e).activeElement!==e&&e.focus();const n=this.getSelectionStartFromPointer(t),i=this.selectionStart,o=this.selectionEnd;(n!==this.__selectionStartOnMouseDown||i===o)&&(i===n||o===n)||(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==i||this.selectionEnd!==o)&&(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(t,e,n){const i=n.slice(0,t),o=this.graphemeSplit(i).length;if(t===e)return{selectionStart:o,selectionEnd:o};const l=n.slice(t,e),c=this.graphemeSplit(l).length;return{selectionStart:o,selectionEnd:o+c}}fromGraphemeToStringSelection(t,e,n){const i=n.slice(0,t),o=i.join("").length;if(t===e)return{selectionStart:o,selectionEnd:o};const l=n.slice(t,e),c=l.join("").length;return{selectionStart:o,selectionEnd:o+c}}_updateTextarea(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){const t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const t=this.hiddenTextarea;this.text=t.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const e=this.fromStringToGraphemeSelection(t.selectionStart,t.selectionEnd,t.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),n=this.get2DCursorLocation(t),i=n.lineIndex,o=n.charIndex,l=this.getValueOfPropertyAt(i,o,"fontSize")*this.lineHeight,c=e.leftOffset,h=this.getCanvasRetinaScaling(),f=this.canvas.upperCanvasEl,d=f.width/h,p=f.height/h,_=d-l,v=p-l,w=new F(e.left+c,e.top+e.topOffset+l).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new F(f.clientWidth/d,f.clientHeight/p));return w.x<0&&(w.x=0),w.x>_&&(w.x=_),w.y<0&&(w.y=0),w.y>v&&(w.y=v),w.x+=this.canvas._offset.left,w.y+=this.canvas._offset.top,{left:"".concat(w.x,"px"),top:"".concat(w.y,"px"),fontSize:"".concat(l,"px"),charHeight:l}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const t=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditing(){const t=this._textBeforeEdit!==this.text;return this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const t in this.styles)this._textLines[t]||delete this.styles[t]}removeStyleFromTo(t,e){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(t,!0),{lineIndex:o,charIndex:l}=this.get2DCursorLocation(e,!0);if(n!==o){if(this.styles[n])for(let c=i;c<this._unwrappedTextLines[n].length;c++)delete this.styles[n][c];if(this.styles[o])for(let c=l;c<this._unwrappedTextLines[o].length;c++){const h=this.styles[o][c];h&&(this.styles[n]||(this.styles[n]={}),this.styles[n][i+c-l]=h)}for(let c=n+1;c<=o;c++)delete this.styles[c];this.shiftLineStyles(o,n-o)}else if(this.styles[n]){const c=this.styles[n],h=l-i;for(let f=i;f<l;f++)delete c[f];for(const f in this.styles[n]){const d=parseInt(f,10);d>=l&&(c[d-h]=c[f],delete c[f])}}}shiftLineStyles(t,e){const n=Object.assign({},this.styles);for(const i in this.styles){const o=parseInt(i,10);o>t&&(this.styles[o+e]=n[o],n[o-e]||delete this.styles[o])}}insertNewlineStyleObject(t,e,n,i){const o={},l=this._unwrappedTextLines[t].length===e;let c=!1;n||(n=1),this.shiftLineStyles(t,n);const h=this.styles[t]?this.styles[t][e===0?e:e-1]:void 0;for(const d in this.styles[t]){const p=parseInt(d,10);p>=e&&(c=!0,o[p-e]=this.styles[t][d],l&&e===0||delete this.styles[t][d])}let f=!1;for(c&&!l&&(this.styles[t+n]=o,f=!0),f&&n--;n>0;)i&&i[n-1]?this.styles[t+n]={0:D({},i[n-1])}:h?this.styles[t+n]={0:D({},h)}:delete this.styles[t+n],n--;this._forceClearCache=!0}insertCharStyleObject(t,e,n,i){this.styles||(this.styles={});const o=this.styles[t],l=o?D({},o):{};n||(n=1);for(const h in l){const f=parseInt(h,10);f>=e&&(o[f+n]=l[f],l[f-n]||delete o[f])}if(this._forceClearCache=!0,i){for(;n--;)Object.keys(i[n]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+n]=D({},i[n]));return}if(!o)return;const c=o[e?e-1:1];for(;c&&n--;)this.styles[t][e+n]=D({},c)}insertNewStyleBlock(t,e,n){const i=this.get2DCursorLocation(e,!0),o=[0];let l=0;for(let h=0;h<t.length;h++)t[h]===`
`?(l++,o[l]=0):o[l]++;o[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,o[0],n),n=n&&n.slice(o[0]+1)),l&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+o[0],l);let c;for(c=1;c<l;c++)o[c]>0?this.insertCharStyleObject(i.lineIndex+c,0,o[c],n):n&&this.styles[i.lineIndex+c]&&n[0]&&(this.styles[i.lineIndex+c][0]=n[0]),n=n&&n.slice(o[c]+1);o[c]>0&&this.insertCharStyleObject(i.lineIndex+c,0,o[c],n)}removeChars(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t+1;this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;i>n&&this.removeStyleFromTo(n,i);const o=this.graphemeSplit(t);this.insertNewStyleBlock(o,n,e),this._text=[...this._text.slice(0,n),...o,...this._text.slice(i)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(t,e,n){n<=t?(e===t?this._selectionDirection=Nt:this._selectionDirection===ve&&(this._selectionDirection=Nt,this.selectionEnd=t),this.selectionStart=n):n>t&&n<e?this._selectionDirection===ve?this.selectionEnd=n:this.selectionStart=n:(e===t?this._selectionDirection=ve:this._selectionDirection===Nt&&(this._selectionDirection=ve,this.selectionStart=e),this.selectionEnd=n)}}class mD extends pD{initHiddenTextarea(){const t=this.canvas&&Bn(this.canvas.getElement())||us(),e=t.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(l=>{let[c,h]=l;return e.setAttribute(c,h)});const{top:n,left:i,fontSize:o}=this._calcTextareaPosition();e.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(i,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(o,";"),(this.hiddenTextareaContainer||t.body).appendChild(e),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",onCompositionUpdate:"onCompositionEnd"}).map(l=>{let[c,h]=l;return e.addEventListener(c,this[h].bind(this))}),this.hiddenTextarea=e}blur(){this.abortCursorAnimation()}onKeyDown(t){if(!this.isEditing)return;const e=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else if(t.keyCode in this.ctrlKeysMapDown&&(t.ctrlKey||t.metaKey))this[this.ctrlKeysMapDown[t.keyCode]](t);else return;t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(t){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey))this[this.ctrlKeysMapUp[t.keyCode]](t);else return;t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll()}onInput(t){const e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),!this.isEditing)return;const n=()=>{this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value===""){this.styles={},n();return}const i=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,o=this._text.length,l=i.length,c=this.selectionStart,h=this.selectionEnd,f=c!==h;let d,p,_=l-o,v,w;const E=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),T=c>E.selectionStart;f?(p=this._text.slice(c,h),_+=h-c):l<o&&(T?p=this._text.slice(h+_,h):p=this._text.slice(c,c-_));const P=i.slice(E.selectionEnd-_,E.selectionEnd);if(p&&p.length&&(P.length&&(d=this.getSelectionStyles(c,c+1,!1),d=P.map(()=>d[0])),f?(v=c,w=h):T?(v=h-p.length,w=h):(v=h,w=h+p.length),this.removeStyleFromTo(v,w)),P.length){const{copyPasteData:R}=Zn();e&&P.join("")===R.copiedText&&!Lt.disableStyleCopyPaste&&(d=R.copiedTextStyle),this.insertNewStyleBlock(P,c,d)}n()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(t){let{target:e}=t;const{selectionStart:n,selectionEnd:i}=e;this.compositionStart=n,this.compositionEnd=i,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:t}=Zn();t.copiedText=this.getSelectedText(),Lt.disableStyleCopyPaste?t.copiedTextStyle=void 0:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(t,e){let n=this._getLineLeftOffset(t),i;return e>0&&(i=this.__charBounds[t][e-1],n+=i.left+i.width),n}getDownCursorOffset(t,e){const n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),o=i.lineIndex;if(o===this._textLines.length-1||t.metaKey||t.keyCode===34)return this._text.length-n;const l=i.charIndex,c=this._getWidthBeforeCursor(o,l),h=this._getIndexOnLine(o+1,c);return this._textLines[o].slice(l).length+h+1+this.missingNewlineOffset(o)}_getSelectionForOffset(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart}getUpCursorOffset(t,e){const n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),o=i.lineIndex;if(o===0||t.metaKey||t.keyCode===33)return-n;const l=i.charIndex,c=this._getWidthBeforeCursor(o,l),h=this._getIndexOnLine(o-1,c),f=this._textLines[o].slice(0,l),d=this.missingNewlineOffset(o-1);return-this._textLines[o-1].length+h-f.length+(1-d)}_getIndexOnLine(t,e){const n=this._textLines[t];let o=this._getLineLeftOffset(t),l=0,c,h;for(let f=0,d=n.length;f<d;f++)if(c=this.__charBounds[t][f].width,o+=c,o>e){h=!0;const p=o-c,_=o,v=Math.abs(p-e);l=Math.abs(_-e)<v?f:f-1;break}return h||(l=n.length-1),l}moveCursorDown(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)}moveCursorUp(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",t)}_moveCursorUpOrDown(t,e){const n=this["get".concat(t,"CursorOffset")](e,this._selectionDirection===ve);if(e.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){const i=this.text.length;this.selectionStart=yi(0,this.selectionStart,i),this.selectionEnd=yi(0,this.selectionEnd,i),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(t){const e=this._selectionDirection===Nt?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),t!==0}moveCursorWithoutShift(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),t!==0}moveCursorLeft(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",t)}_move(t,e,n){let i;if(t.altKey)i=this["findWordBoundary".concat(n)](this[e]);else if(t.metaKey||t.keyCode===35||t.keyCode===36)i=this["findLineBoundary".concat(n)](this[e]);else return this[e]+=n==="Left"?-1:1,!0;return typeof i<"u"&&this[e]!==i?(this[e]=i,!0):!1}_moveLeft(t,e){return this._move(t,e,"Left")}_moveRight(t,e){return this._move(t,e,"Right")}moveCursorLeftWithoutShift(t){let e=!0;return this._selectionDirection=Nt,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e}moveCursorLeftWithShift(t){if(this._selectionDirection===ve&&this.selectionStart!==this.selectionEnd)return this._moveLeft(t,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection=Nt,this._moveLeft(t,"selectionStart")}moveCursorRight(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)}_moveCursorLeftOrRight(t,e){const n="moveCursor".concat(t).concat(e.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(t){if(this._selectionDirection===Nt&&this.selectionStart!==this.selectionEnd)return this._moveRight(t,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection=ve,this._moveRight(t,"selectionEnd")}moveCursorRightWithoutShift(t){let e=!0;return this._selectionDirection=ve,this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e}}function zc(r){return r.button&&r.button!==1}class _D extends mD{constructor(){super(...arguments),M(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new gD(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(t){return this.draggableTextDelegate.onDragStart(t)}canDrop(t){return this.draggableTextDelegate.canDrop(t)}onMouseDown(t){if(!this.canvas)return;this.__newClickTime=+new Date;const e=t.pointer;this.isTripleClick(e)&&(this.fire("tripleclick",t),ph(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastSelected=this.selected}isTripleClick(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y}doubleClickHandler(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))}tripleClickHandler(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))}_mouseDownHandler(t){let{e}=t;!this.canvas||!this.editable||zc(e)||this.getActiveControl()||this.draggableTextDelegate.start(e)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))}_mouseDownHandlerBefore(t){let{e}=t;!this.canvas||!this.editable||zc(e)||(this.selected=this===this.canvas._activeObject)}mouseUpHandler(t){let{e,transform:n,button:i}=t;const o=this.draggableTextDelegate.end(e);if(this.canvas){this.canvas.textEditingManager.unregister(this);const l=this.canvas._activeObject;if(l&&l!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||zc(e)||o||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(t){const e=this.getSelectionStartFromPointer(t),n=this.selectionStart,i=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(n,i,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(t){const e=this.canvas.getPointer(t).transform(Me(this.calcTransformMatrix())).add(new F(-this._getLeftOffset(),-this._getTopOffset()));let n=0,i=0,o=0;for(let d=0;d<this._textLines.length&&n<=e.y;d++)n+=this.getHeightOfLine(d),o=d,d>0&&(i+=this._textLines[d-1].length+this.missingNewlineOffset(d-1));let c=Math.abs(this._getLineLeftOffset(o));const h=this._textLines[o].length,f=this.__charBounds[o];for(let d=0;d<h;d++){const p=f[d].kernedWidth,_=c+p;if(e.x<=_){Math.abs(e.x-_)<=Math.abs(e.x-c)&&i++;break}c=_,i++}return Math.min(this.flipX?h-i:i,this._text.length)}}const Ba="moveCursorUp",ja="moveCursorDown",Wa="moveCursorLeft",Xa="moveCursorRight",Ha="exitEditing",vD={9:Ha,27:Ha,33:Ba,34:ja,35:Xa,36:Wa,37:Wa,38:Ba,39:Xa,40:ja},yD={9:Ha,27:Ha,33:Ba,34:ja,35:Wa,36:Xa,37:Xa,38:Ba,39:Wa,40:ja},xD={67:"copy",88:"cut"},wD={65:"selectAll"},CD={selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1,keysMap:vD,keysMapRtl:yD,ctrlKeysMapDown:wD,ctrlKeysMapUp:xD};class qr extends _D{static getDefaults(){return D(D({},super.getDefaults()),qr.ownDefaults)}get type(){const t=super.type;return t==="itext"?"i-text":t}constructor(t,e){super(t,e),this.initBehavior()}_set(t,e){return this.isEditing&&this._savedProps&&t in this._savedProps?(this._savedProps[t]=e,this):(t==="canvas"&&(this.canvas instanceof Sh&&this.canvas.textEditingManager.remove(this),e instanceof Sh&&e.textEditingManager.add(this)),super._set(t,e))}setSelectionStart(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)}setSelectionEnd(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)}_updateAndFire(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(t,e,n)}setSelectionStyles(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(t,e,n)}get2DCursorLocation(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(t,e)}render(t){super.render(t),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(t){const e=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(t);return this.isEditing=e,n}renderCursorOrSelection(){if(!this.isEditing)return;const t=this.clearContextTop(!0);if(!t)return;const e=this._getCursorBoundaries();this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),this.canvas.contextTopDirty=!0,t.restore()}_getCursorBoundaries(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),i=this._getTopOffset(),o=this._getCursorBoundariesOffsets(t,e);return{left:n,top:i,leftOffset:o.left,topOffset:o.top}}_getCursorBoundariesOffsets(t,e){return e?this.__getCursorBoundariesOffsets(t):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(t)}__getCursorBoundariesOffsets(t){let e=0,n=0;const{charIndex:i,lineIndex:o}=this.get2DCursorLocation(t);for(let f=0;f<o;f++)e+=this.getHeightOfLine(f);const l=this._getLineLeftOffset(o),c=this.__charBounds[o][i];c&&(n=c.left),this.charSpacing!==0&&i===this._textLines[o].length&&(n-=this._getWidthOfCharSpacing());const h={top:e,left:l+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===ve||this.textAlign===Jn||this.textAlign===Ks?h.left*=-1:(this.textAlign===Nt||this.textAlign===Ia||this.textAlign===Tt||this.textAlign===qs)&&(h.left=l-(n>0?n:0))),h}renderCursorAt(t){const e=this._getCursorBoundaries(t,!0);this._renderCursor(this.canvas.contextTop,e,t)}renderCursor(t,e){this._renderCursor(t,e,this.selectionStart)}_renderCursor(t,e,n){const i=this.get2DCursorLocation(n),o=i.lineIndex,l=i.charIndex>0?i.charIndex-1:0,c=this.getValueOfPropertyAt(o,l,"fontSize"),h=this.scaleX*this.canvas.getZoom(),f=this.cursorWidth/h,d=this.getValueOfPropertyAt(o,l,"deltaY"),p=e.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(o)/this.lineHeight-c*(1-this._fontSizeFraction);this.inCompositionMode&&this.renderSelection(t,e),t.fillStyle=this.cursorColor||this.getValueOfPropertyAt(o,l,"fill"),t.globalAlpha=this._currentCursorOpacity,t.fillRect(e.left+e.leftOffset-f/2,p+e.top+d,f,c)}renderSelection(t,e){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(t,n,e)}renderDragSourceEffect(){const t=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,t,this._getCursorBoundaries(t.selectionStart,!0))}renderDropTargetEffect(t){const e=this.getSelectionStartFromPointer(t);this.renderCursorAt(e)}_renderSelection(t,e,n){const i=e.selectionStart,o=e.selectionEnd,l=this.textAlign.includes(Jn),c=this.get2DCursorLocation(i),h=this.get2DCursorLocation(o),f=c.lineIndex,d=h.lineIndex,p=c.charIndex<0?0:c.charIndex,_=h.charIndex<0?0:h.charIndex;for(let v=f;v<=d;v++){const w=this._getLineLeftOffset(v)||0;let E=this.getHeightOfLine(v),T=0,P=0,R=0;if(v===f&&(P=this.__charBounds[f][p].left),v>=f&&v<d)R=l&&!this.isEndOfWrapping(v)?this.width:this.getLineWidth(v)||5;else if(v===d)if(_===0)R=this.__charBounds[d][_].left;else{const nt=this._getWidthOfCharSpacing();R=this.__charBounds[d][_-1].left+this.__charBounds[d][_-1].width-nt}T=E,(this.lineHeight<1||v===d&&this.lineHeight>1)&&(E/=this.lineHeight);let X=n.left+w+P,B=E,$=0;const tt=R-P;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",B=1,$=E):t.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===ve||this.textAlign===Jn||this.textAlign===Ks?X=this.width-X-tt:(this.textAlign===Nt||this.textAlign===Ia||this.textAlign===Tt||this.textAlign===qs)&&(X=n.left+w-R)),t.fillRect(X,n.top+n.topOffset+$,tt,B),n.topOffset+=T}}getCurrentCharFontSize(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")}getCurrentCharColor(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fill")}_getCurrentCharIndex(){const t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}dispose(){this._exitEditing(),this.draggableTextDelegate.dispose(),super.dispose()}}M(qr,"ownDefaults",CD);M(qr,"type","IText");ft.setClass(qr);ft.setClass(qr,"i-text");const SD={minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1};class gs extends qr{static getDefaults(){return D(D({},super.getDefaults()),{},{controls:B0()},gs.ownDefaults)}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Jn)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(t){let e=0,n=0,i=0;const o={};for(let l=0;l<t.graphemeLines.length;l++)t.graphemeText[i]===`
`&&l>0?(n=0,i++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[i])&&l>0&&(n++,i++),o[l]={line:e,offset:n},i+=t.graphemeLines[l].length,n+=t.graphemeLines[l].length;return o}styleHas(t,e){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];n&&(e=n.line)}return super.styleHas(t,e)}isEmptyStyles(t){if(!this.styles)return!0;let e=0,n=t+1,i,o=!1;const l=this._styleMap[t],c=this._styleMap[t+1];l&&(t=l.line,e=l.offset),c&&(n=c.line,o=n===t,i=c.offset);const h=typeof t>"u"?this.styles:{line:this.styles[t]};for(const f in h)for(const d in h[f]){const p=parseInt(d,10);if(p>=e&&(!o||p<i))for(const _ in h[f][d])return!1}return!0}_getStyleDeclaration(t,e){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[t];if(!n)return{};t=n.line,e=n.offset+e}return super._getStyleDeclaration(t,e)}_setStyleDeclaration(t,e,n){const i=this._styleMap[t];t=i.line,e=i.offset+e,this.styles[t][e]=n}_deleteStyleDeclaration(t,e){const n=this._styleMap[t];t=n.line,e=n.offset+e,delete this.styles[t][e]}_getLineStyle(t){const e=this._styleMap[t];return!!this.styles[e.line]}_setLineStyle(t){const e=this._styleMap[t];this.styles[e.line]={}}_wrapText(t,e){this.isWrapping=!0;const n=this.getGraphemeDataForRender(t),i=[];for(let o=0;o<n.wordsData.length;o++)i.push(...this._wrapLine(o,e,n));return this.isWrapping=!1,i}getGraphemeDataForRender(t){const e=this.splitByGrapheme,n=e?"":" ";let i=0;return{wordsData:t.map((l,c)=>{let h=0;const f=e?this.graphemeSplit(l):this.wordSplit(l);return f.length===0?[{word:[],width:0}]:f.map(d=>{const p=e?[d]:this.graphemeSplit(d),_=this._measureWord(p,c,h);return i=Math.max(_,i),h+=p.length+n.length,{word:p,width:_}})}),largestWordWidth:i}}_measureWord(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=0,o;const l=!0;for(let c=0,h=t.length;c<h;c++){const f=this._getGraphemeBox(t[c],e,c+n,o,l);i+=f.kernedWidth,o=t[c]}return i}wordSplit(t){return t.split(this._wordJoiners)}_wrapLine(t,e,n){let{largestWordWidth:i,wordsData:o}=n,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const c=this._getWidthOfCharSpacing(),h=this.splitByGrapheme,f=[],d=h?"":" ";let p=0,_=[],v=0,w=0,E=!0;e-=l;const T=Math.max(e,i,this.dynamicMinWidth),P=o[t];v=0;let R;for(R=0;R<P.length;R++){const{word:X,width:B}=P[R];v+=X.length,p+=w+B-c,p>T&&!E?(f.push(_),_=[],p=B,E=!0):p+=c,!E&&!h&&_.push(d),_=_.concat(X),w=h?0:this._measureWord([d],t,v),v++,E=!1}return R&&f.push(_),i+l>this.dynamicMinWidth&&(this.dynamicMinWidth=i-c+l),f}isEndOfWrapping(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line}missingNewlineOffset(t,e){return this.splitByGrapheme&&!e?this.isEndOfWrapping(t)?1:0:1}_splitTextIntoLines(t){const e=super._splitTextIntoLines(t),n=this._wrapText(e.lines,this.width),i=new Array(n.length);for(let o=0;o<n.length;o++)i[o]=n[o].join("");return e.lines=i,e.graphemeLines=n,e}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const t=new Map;for(const e in this._styleMap){const n=parseInt(e,10);if(this._textLines[n]){const i=this._styleMap[e].line;t.set("".concat(i),!0)}}for(const e in this.styles)t.has(e)||delete this.styles[e]}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...t])}}M(gs,"type","Textbox");M(gs,"textLayoutProperties",[...qr.textLayoutProperties,"width"]);M(gs,"ownDefaults",SD);ft.setClass(gs);class bD{constructor(){M(this,"resources",{})}applyFilters(t,e,n,i,o){const l=o.getContext("2d");if(!l)return;l.drawImage(e,0,0,n,i);const c=l.getImageData(0,0,n,i),h=l.getImageData(0,0,n,i),f={sourceWidth:n,sourceHeight:i,imageData:c,originalEl:e,originalImageData:h,canvasEl:o,ctx:l,filterBackend:this};t.forEach(p=>{p.applyTo(f)});const{imageData:d}=f;return(d.width!==n||d.height!==i)&&(o.width=d.width,o.height=d.height),l.putImageData(d,0,0),f}}class y_{constructor(){let{tileSize:t=Lt.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};M(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),M(this,"resources",{}),this.tileSize=t,this.setupGLContext(t,t),this.captureGPUInfo()}setupGLContext(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.chooseFastestCopyGLTo2DMethod(t,e)}chooseFastestCopyGLTo2DMethod(t,e){const n=pe(),i=new ArrayBuffer(t*e*4);if(Lt.forceGLPutImageData){this.imageBuffer=i,this.copyGLTo2D=Nc;return}const o={imageBuffer:i},l={destinationWidth:t,destinationHeight:e,targetCanvas:n};let c;n.width=t,n.height=e,c=fi().performance.now(),this.copyGLTo2D.call(o,this.gl,l);const h=fi().performance.now()-c;c=fi().performance.now(),Nc.call(o,this.gl,l);const f=fi().performance.now()-c;h>f&&(this.imageBuffer=i,this.copyGLTo2D=Nc)}createWebGLCanvas(t,e){const n=pe();n.width=t,n.height=e;const i={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},o=n.getContext("webgl",i);o&&(o.clearColor(0,0,0,0),this.canvas=n,this.gl=o)}applyFilters(t,e,n,i,o,l){const c=this.gl,h=o.getContext("2d");if(!c||!h)return;let f;l&&(f=this.getCachedTexture(l,e));const d={originalWidth:e.width||e.originalWidth||0,originalHeight:e.height||e.originalHeight||0,sourceWidth:n,sourceHeight:i,destinationWidth:n,destinationHeight:i,context:c,sourceTexture:this.createTexture(c,n,i,f?void 0:e),targetTexture:this.createTexture(c,n,i),originalTexture:f||this.createTexture(c,n,i,f?void 0:e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:o},p=c.createFramebuffer();return c.bindFramebuffer(c.FRAMEBUFFER,p),t.forEach(_=>{_&&_.applyTo(d)}),TD(d),this.copyGLTo2D(c,d),c.bindTexture(c.TEXTURE_2D,null),c.deleteTexture(d.sourceTexture),c.deleteTexture(d.targetTexture),c.deleteFramebuffer(p),h.setTransform(1,0,0,1,0,0),d}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(t,e,n,i,o){const{NEAREST:l,TEXTURE_2D:c,RGBA:h,UNSIGNED_BYTE:f,CLAMP_TO_EDGE:d,TEXTURE_MAG_FILTER:p,TEXTURE_MIN_FILTER:_,TEXTURE_WRAP_S:v,TEXTURE_WRAP_T:w}=t,E=t.createTexture();return t.bindTexture(c,E),t.texParameteri(c,p,o||l),t.texParameteri(c,_,o||l),t.texParameteri(c,v,d),t.texParameteri(c,w,d),i?t.texImage2D(c,0,h,h,f,i):t.texImage2D(c,0,h,e,n,0,h,f,null),E}getCachedTexture(t,e,n){const{textureCache:i}=this;if(i[t])return i[t];{const o=this.createTexture(this.gl,e.width,e.height,e,n);return o&&(i[t]=o),o}}evictCachesForKey(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])}copyGLTo2D(t,e){const n=t.canvas,i=e.targetCanvas,o=i.getContext("2d");if(!o)return;o.translate(0,i.height),o.scale(1,-1);const l=n.height-i.height;o.drawImage(n,0,l,i.width,i.height,0,0,i.width,i.height)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const t=this.gl,e={renderer:"",vendor:""};if(!t)return e;const n=t.getExtension("WEBGL_debug_renderer_info");if(n){const i=t.getParameter(n.UNMASKED_RENDERER_WEBGL),o=t.getParameter(n.UNMASKED_VENDOR_WEBGL);i&&(e.renderer=i.toLowerCase()),o&&(e.vendor=o.toLowerCase())}return this.gpuInfo=e,e}}function TD(r){const t=r.targetCanvas,e=t.width,n=t.height,i=r.destinationWidth,o=r.destinationHeight;(e!==i||n!==o)&&(t.width=i,t.height=o)}function Nc(r,t){const e=t.targetCanvas,n=e.getContext("2d"),i=t.destinationWidth,o=t.destinationHeight,l=i*o*4;if(!n)return;const c=new Uint8Array(this.imageBuffer,0,l),h=new Uint8ClampedArray(this.imageBuffer,0,l);r.readPixels(0,0,i,o,r.RGBA,r.UNSIGNED_BYTE,c);const f=new ImageData(h,i,o);n.putImageData(f,0,0)}let Vc;function OD(){const{WebGLProbe:r}=Zn();return r.queryWebGL(pe()),Lt.enableGLFiltering&&r.isSupported(Lt.textureSize)?new y_({tileSize:Lt.textureSize}):new bD}function Gc(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return!Vc&&r&&(Vc=OD()),Vc}const ED=["filters","resizeFilter","src","crossOrigin"],PD={strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0},x_=["cropX","cropY"];class yn extends ye{static getDefaults(){return D(D({},super.getDefaults()),yn.ownDefaults)}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(D({filters:[]},e)),M(this,"_lastScaleX",1),M(this,"_lastScaleY",1),M(this,"_filterScalingX",1),M(this,"_filterScalingY",1),this.cacheKey="texture".concat(Vr()),this.setElement(typeof t=="string"?(this.canvas&&Bn(this.canvas.getElement())||us()).getElementById(t):t,e)}getElement(){return this._element}setElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=t,this._originalElement=t,this._setWidthHeight(e),t.classList.add(yn.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(t){const e=Gc(!1);e instanceof y_&&e.evictCachesForKey(t)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(t=>{const e=this[t];e&&Zn().dispose(e),this[t]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const t=this.getElement();return t?{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}:{width:0,height:0}}_stroke(t){if(!this.stroke||this.strokeWidth===0)return;const e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,-n),t.lineTo(e,-n),t.lineTo(e,n),t.lineTo(-e,n),t.lineTo(-e,-n),t.closePath()}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=[];return this.filters.forEach(n=>{n&&e.push(n.toObject())}),D(D({},super.toObject([...x_,...t])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const t=[],e=this._element,n=-this.width/2,i=-this.height/2;let o=[],l=[],c="",h="";if(!e)return[];if(this.hasCrop()){const f=Vr();o.push('<clipPath id="imageCrop_'+f+`">
`,'	<rect x="'+n+'" y="'+i+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),c=' clip-path="url(#imageCrop_'+f+')" '}if(this.imageSmoothing||(h=' image-rendering="optimizeSpeed"'),t.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(i-this.cropY,'" width="').concat(e.width||e.naturalWidth,'" height="').concat(e.height||e.naturalHeight,'"').concat(h).concat(c,`></image>
`)),this.stroke||this.strokeDashArray){const f=this.fill;this.fill=null,l=['	<rect x="'.concat(n,'" y="').concat(i,'" width="').concat(this.width,'" height="').concat(this.height,'" styles="').concat(this.getSvgStyles(),`" />
`)],this.fill=f}return this.paintFirst!=="fill"?o=o.concat(l,t):o=o.concat(t,l),o}getSrc(t){const e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src")||"":e.src:this.src||""}getSvgSrc(t){return this.getSrc(t)}setSrc(t){let{crossOrigin:e,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return $s(t,{crossOrigin:e,signal:n}).then(i=>{typeof e<"u"&&this.set({crossOrigin:e}),this.setElement(i)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const t=this.resizeFilter,e=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),i=n.x,o=n.y,l=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||i>e&&o>e){this._element=l,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,this._lastScaleY=o;return}const c=pe(),h=l.width,f=l.height;c.width=h,c.height=f,this._element=c,this._lastScaleX=t.scaleX=i,this._lastScaleY=t.scaleY=o,Gc().applyFilters([t],l,h,f,this._element),this._filterScalingX=c.width/this._originalElement.width,this._filterScalingY=c.height/this._originalElement.height}applyFilters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(t=t.filter(o=>o&&!o.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),t.length===0){this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,this._filterScalingY=1;return}const e=this._originalElement,n=e.naturalWidth||e.width,i=e.naturalHeight||e.height;if(this._element===this._originalElement){const o=pe();o.width=n,o.height=i,this._element=o,this._filteredEl=o}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,i),this._lastScaleX=1,this._lastScaleY=1);Gc().applyFilters(t,this._originalElement,n,i,this._element),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(t){t.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)}drawCacheOnCanvas(t){t.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(t)}shouldCache(){return this.needsItsOwnCache()}_renderFill(t){const e=this._element;if(!e)return;const n=this._filterScalingX,i=this._filterScalingY,o=this.width,l=this.height,c=Math.max(this.cropX,0),h=Math.max(this.cropY,0),f=e.naturalWidth||e.width,d=e.naturalHeight||e.height,p=c*n,_=h*i,v=Math.min(o*n,f-p),w=Math.min(l*i,d-_),E=-o/2,T=-l/2,P=Math.min(o,f/n-c),R=Math.min(l,d/i-h);e&&t.drawImage(e,p,_,v,w,E,T,P,R)}_needsResize(){const t=this.getTotalObjectScaling();return t.x!==this._lastScaleX||t.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:t,height:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getOriginalSize();this.width=t||n.width,this.height=e||n.height}parsePreserveAspectRatioAttribute(){const t=n0(this.preserveAspectRatio||""),e=this.width,n=this.height,i={width:e,height:n};let o=this._element.width,l=this._element.height,c=1,h=1,f=0,d=0,p=0,_=0,v;return t&&(t.alignX!==ln||t.alignY!==ln)?(t.meetOrSlice==="meet"&&(c=h=G0(this._element,i),v=(e-o*c)/2,t.alignX==="Min"&&(f=-v),t.alignX==="Max"&&(f=v),v=(n-l*h)/2,t.alignY==="Min"&&(d=-v),t.alignY==="Max"&&(d=v)),t.meetOrSlice==="slice"&&(c=h=$0(this._element,i),v=o-e/c,t.alignX==="Mid"&&(p=v/2),t.alignX==="Max"&&(p=v),v=l-n/h,t.alignY==="Mid"&&(_=v/2),t.alignY==="Max"&&(_=v),o=e/c,l=n/h)):(c=e/o,h=n/l),{width:o,height:l,scaleX:c,scaleY:h,offsetLeft:f,offsetTop:d,cropX:p,cropY:_}}static fromObject(t){let{filters:e,resizeFilter:n,src:i,crossOrigin:o}=t,l=re(t,ED),c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Promise.all([$s(i,D(D({},c),{},{crossOrigin:o})),e&&os(e,c),n&&os([n],c),fo(l,c)]).then(h=>{let[f,d=[],[p]=[],_={}]=h;return new this(f,D(D({},l),{},{src:i,filters:d,resizeFilter:p},_))})}static fromURL(t){let{crossOrigin:e=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return $s(t,{crossOrigin:e,signal:n}).then(o=>new this(o,i))}static async fromElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i=Cr(t,this.ATTRIBUTE_NAMES,n);return this.fromURL(i["xlink:href"],e,i).catch(o=>(console.log(o),null))}}M(yn,"type","Image");M(yn,"cacheProperties",[...wr,...x_]);M(yn,"ownDefaults",PD);M(yn,"CSS_CANVAS","canvas-img");M(yn,"ATTRIBUTE_NAMES",[...Gr,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]);ft.setClass(yn);ft.setSVGClass(yn);al(OP);const AD=r=>new F(r.width,r.height),DD=r=>function(t,e,n){var i,o;const l=n.points[r].x-n.pathOffset.x,c=n.points[r].y-n.pathOffset.y;return new F(l,c).transform(ke((i=(o=n.canvas)===null||o===void 0?void 0:o.viewportTransform)!==null&&i!==void 0?i:vn,n.calcTransformMatrix()))},MD=(r,t,e,n)=>{const i=t.target,o=t.pointIndex,l=po(t,Tt,Tt,e,n),c=AD(i),h=i._getTransformedDimensions(),f=c.divide(h),d=new F(i.flipX?-1:1,i.flipY?-1:1),p=l.multiply(d).multiply(f).add(i.pathOffset);return i.points[o]=p,i.setDimensions(),!0},kD=(r,t)=>function(e,n,i,o){const l=n.target,c=new F(l.points[(r>0?r:l.points.length)-1]),h=c.subtract(l.pathOffset).transform(l.calcOwnMatrix()),f=t(e,D(D({},n),{},{pointIndex:r}),i,o),d=new F(l.flipX?-1:1,l.flipY?-1:1),p=c.subtract(l.pathOffset).divide(l._getNonTransformedDimensions()).multiply(d);return l.setPositionByOrigin(h,p.x+.5,p.y+.5),f};function LD(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e={};for(let n=0;n<(typeof r=="number"?r:r.points.length);n++)e["p".concat(n)]=new Ne(D({actionName:"modifyPoly",positionHandler:DD(n),actionHandler:kD(n,MD)},t));return e}var RD=Object.freeze({__proto__:null,changeWidth:_h,createObjectDefaultControls:gu,createPolyControls:LD,createResizeControls:I0,createTextboxDefaultControls:B0,dragHandler:g0,getLocalPoint:po,renderCircleControl:b0,renderSquareControl:T0,rotationStyleHandler:O0,rotationWithSnapping:E0,scaleCursorStyleHandler:Vi,scaleOrSkewActionName:Xs,scaleSkewCursorStyleHandler:di,scalingEqually:Ws,scalingX:D0,scalingXOrSkewingY:yh,scalingY:M0,scalingYOrSkewingX:xh,skewCursorStyleHandler:k0,skewHandlerX:R0,skewHandlerY:F0,wrapWithFireEvent:Si,wrapWithFixedAnchor:bi});const fl=r=>r.webgl!==void 0,bh="precision highp float",FD=`
    `.concat(bh,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),ID=`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`,BD=["type"],jD=["type"];class Ee{get type(){return this.constructor.type}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=re(t,BD);M(this,"vertexSource",ID),Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return FD}createProgram(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.vertexSource;const{WebGLProbe:{GLPrecision:i="highp"}}=Zn();i!=="highp"&&(e=e.replace(new RegExp(bh,"g"),bh.replace("highp",i)));const o=t.createShader(t.VERTEX_SHADER),l=t.createShader(t.FRAGMENT_SHADER),c=t.createProgram();if(!o||!l||!c)throw new Error("Vertex, fragment shader or program creation error");if(t.shaderSource(o,n),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Error("Vertex shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(o)));if(t.shaderSource(l,e),t.compileShader(l),!t.getShaderParameter(l,t.COMPILE_STATUS))throw new Error("Fragment shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(l)));if(t.attachShader(c,o),t.attachShader(c,l),t.linkProgram(c),!t.getProgramParameter(c,t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+t.getProgramInfoLog(c));const h=this.getUniformLocations(t,c)||{};return h.uStepW=t.getUniformLocation(c,"uStepW"),h.uStepH=t.getUniformLocation(c,"uStepH"),{program:c,attributeLocations:this.getAttributeLocations(t,c),uniformLocations:h}}getAttributeLocations(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}}getUniformLocations(t,e){return{}}sendAttributeData(t,e,n){const i=e.aPosition,o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}_setupFrameBuffer(t){const e=t.context;if(t.passes>1){const n=t.destinationWidth,i=t.destinationHeight;(t.sourceWidth!==n||t.sourceHeight!==i)&&(e.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(e,n,i)),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.targetTexture,0)}else e.bindFramebuffer(e.FRAMEBUFFER,null),e.finish()}_swapTextures(t){t.passes--,t.pass++;const e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e}isNeutralState(t){const e=this.mainParameter,n=this.constructor.defaults[e];if(e){const i=this[e];return Array.isArray(n)&&Array.isArray(i)?n.every((o,l)=>o===i[l]):n===i}else return!1}applyTo(t){fl(t)?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){}getCacheKey(){return this.type}retrieveShader(t){const e=this.getCacheKey();return t.programCache[e]||(t.programCache[e]=this.createProgram(t.context)),t.programCache[e]}applyToWebGL(t){const e=t.context,n=this.retrieveShader(t);t.pass===0&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(n.program),this.sendAttributeData(e,n.attributeLocations,t.aPosition),e.uniform1f(n.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(n.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,n.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(t,e,n){t.activeTexture(n),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)}unbindAdditionalTexture(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)}getMainParameter(){return this.mainParameter?this[this.mainParameter]:void 0}setMainParameter(t){this.mainParameter&&(this[this.mainParameter]=t)}sendUniformData(t,e){}createHelpLayer(t){if(!t.helpLayer){const e=pe();e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}}toObject(){const t=this.mainParameter;return D({type:this.type},t?{[t]:this[t]}:{})}toJSON(){return this.toObject()}static async fromObject(t,e){let n=re(t,jD);return new this(n)}}M(Ee,"type","BaseFilter");const WD={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `},XD={color:"#F95C63",mode:"multiply",alpha:1};class yu extends Ee{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(WD[this.mode],`
        }
      }
      `)}applyTo2d(t){let{imageData:{data:e}}=t;const n=new Qt(this.color).getSource(),i=n[0]*this.alpha,o=n[1]*this.alpha,l=n[2]*this.alpha,c=1-this.alpha;for(let h=0;h<e.length;h+=4){const f=e[h],d=e[h+1],p=e[h+2];switch(this.mode){case"multiply":e[h]=f*i/255,e[h+1]=d*o/255,e[h+2]=p*l/255;break;case"screen":e[h]=255-(255-f)*(255-i)/255,e[h+1]=255-(255-d)*(255-o)/255,e[h+2]=255-(255-p)*(255-l)/255;break;case"add":e[h]=f+i,e[h+1]=d+o,e[h+2]=p+l;break;case"difference":e[h]=Math.abs(f-i),e[h+1]=Math.abs(d-o),e[h+2]=Math.abs(p-l);break;case"subtract":e[h]=f-i,e[h+1]=d-o,e[h+2]=p-l;break;case"darken":e[h]=Math.min(f,i),e[h+1]=Math.min(d,o),e[h+2]=Math.min(p,l);break;case"lighten":e[h]=Math.max(f,i),e[h+1]=Math.max(d,o),e[h+2]=Math.max(p,l);break;case"overlay":e[h]=i<128?2*f*i/255:255-2*(255-f)*(255-i)/255,e[h+1]=o<128?2*d*o/255:255-2*(255-d)*(255-o)/255,e[h+2]=l<128?2*p*l/255:255-2*(255-p)*(255-l)/255;break;case"exclusion":e[h]=i+f-2*i*f/255,e[h+1]=o+d-2*o*d/255,e[h+2]=l+p-2*l*p/255;break;case"tint":e[h]=i+f*c,e[h+1]=o+d*c,e[h+2]=l+p*c}}}getUniformLocations(t,e){return{uColor:t.getUniformLocation(e,"uColor")}}sendUniformData(t,e){const n=new Qt(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,t.uniform4fv(e.uColor,n)}toObject(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}M(yu,"defaults",XD);M(yu,"type","BlendColor");ft.setClass(yu);const HD={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},YD=["type","image"],UD={mode:"multiply",alpha:1,vertexSource:`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `};class xu extends Ee{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return HD[this.mode]}applyToWebGL(t){const e=t.context,n=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,n,e.TEXTURE1),super.applyToWebGL(t),this.unbindAdditionalTexture(e,e.TEXTURE1)}createTexture(t,e){return t.getCachedTexture(e.cacheKey,e.getElement())}calculateMatrix(){const t=this.image,{width:e,height:n}=t.getElement();return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/n,1]}applyTo2d(t){let{imageData:{data:e,width:n,height:i},filterBackend:{resources:o}}=t;const l=this.image;o.blendImage||(o.blendImage=pe());const c=o.blendImage,h=c.getContext("2d");c.width!==n||c.height!==i?(c.width=n,c.height=i):h.clearRect(0,0,n,i),h.setTransform(l.scaleX,0,0,l.scaleY,l.left,l.top),h.drawImage(l.getElement(),0,0,n,i);const f=h.getImageData(0,0,n,i).data;for(let d=0;d<e.length;d+=4){const p=e[d],_=e[d+1],v=e[d+2],w=e[d+3],E=f[d],T=f[d+1],P=f[d+2],R=f[d+3];switch(this.mode){case"multiply":e[d]=p*E/255,e[d+1]=_*T/255,e[d+2]=v*P/255,e[d+3]=w*R/255;break;case"mask":e[d+3]=R;break}}}getUniformLocations(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}}sendUniformData(t,e){const n=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,n)}toObject(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}static fromObject(t,e){let{type:n,image:i}=t,o=re(t,YD);return yn.fromObject(i,e).then(l=>new this(D(D({},o),{},{image:l})))}}M(xu,"type","BlendImage");M(xu,"defaults",UD);ft.setClass(xu);const zD=`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `,ND={blur:0,mainParameter:"blur"};class wu extends Ee{getFragmentSource(){return zD}applyTo(t){fl(t)?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){t.imageData=this.simpleBlur(t)}simpleBlur(t){let{ctx:e,imageData:n,filterBackend:{resources:i}}=t;const{width:o,height:l}=n;i.blurLayer1||(i.blurLayer1=pe(),i.blurLayer2=pe());const c=i.blurLayer1,h=i.blurLayer2;(c.width!==o||c.height!==l)&&(h.width=c.width=o,h.height=c.height=l);const f=c.getContext("2d"),d=h.getContext("2d"),p=15,_=this.blur*.06*.5;let v,w,E,T;for(f.putImageData(n,0,0),d.clearRect(0,0,o,l),T=-p;T<=p;T++)v=(Math.random()-.5)/4,w=T/p,E=_*w*o+v,d.globalAlpha=1-Math.abs(w),d.drawImage(c,E,v),f.drawImage(h,0,0),d.globalAlpha=1,d.clearRect(0,0,h.width,h.height);for(T=-p;T<=p;T++)v=(Math.random()-.5)/4,w=T/p,E=_*w*l+v,d.globalAlpha=1-Math.abs(w),d.drawImage(c,v,E),f.drawImage(h,0,0),d.globalAlpha=1,d.clearRect(0,0,h.width,h.height);e.drawImage(c,0,0);const P=e.getImageData(0,0,c.width,c.height);return f.globalAlpha=1,f.clearRect(0,0,c.width,c.height),P}getUniformLocations(t,e){return{delta:t.getUniformLocation(e,"uDelta")}}sendUniformData(t,e){const n=this.chooseRightDelta();t.uniform2fv(e.delta,n)}chooseRightDelta(){let t=1;const e=[0,0];this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio);const n=t*this.blur*.12;return this.horizontal?e[0]=n:e[1]=n,e}}M(wu,"type","Blur");M(wu,"defaults",ND);ft.setClass(wu);const VD=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`,GD={brightness:0,mainParameter:"brightness"};class Cu extends Ee{getFragmentSource(){return VD}applyTo2d(t){let{imageData:{data:e}}=t;if(this.brightness===0)return;const n=Math.round(this.brightness*255);for(let i=0;i<e.length;i+=4)e[i]=e[i]+n,e[i+1]=e[i+1]+n,e[i+2]=e[i+2]+n}getUniformLocations(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}}sendUniformData(t,e){t.uniform1f(e.uBrightness,this.brightness)}}M(Cu,"type","Brightness");M(Cu,"defaults",GD);ft.setClass(Cu);const $D=`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`,KD=["matrix"],w_={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0};class vo extends Ee{setOptions(t){let{matrix:e}=t,n=re(t,KD);e&&(this.matrix=[...e]),Object.assign(this,n)}getFragmentSource(){return $D}applyTo2d(t){const e=t.imageData,n=e.data,i=this.matrix,o=this.colorsOnly;for(let l=0;l<n.length;l+=4){const c=n[l],h=n[l+1],f=n[l+2];if(o)n[l]=c*i[0]+h*i[1]+f*i[2]+i[4]*255,n[l+1]=c*i[5]+h*i[6]+f*i[7]+i[9]*255,n[l+2]=c*i[10]+h*i[11]+f*i[12]+i[14]*255;else{const d=n[l+3];n[l]=c*i[0]+h*i[1]+f*i[2]+d*i[3]+i[4]*255,n[l+1]=c*i[5]+h*i[6]+f*i[7]+d*i[8]+i[9]*255,n[l+2]=c*i[10]+h*i[11]+f*i[12]+d*i[13]+i[14]*255,n[l+3]=c*i[15]+h*i[16]+f*i[17]+d*i[18]+i[19]*255}}}getUniformLocations(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}}sendUniformData(t,e){const n=this.matrix,i=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],o=[n[4],n[9],n[14],n[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,i),t.uniform4fv(e.uConstants,o)}}M(vo,"type","ColorMatrix");M(vo,"defaults",w_);ft.setClass(vo);function Ti(r,t){var e;const n=(e=class extends vo{},M(e,"type",r),M(e,"defaults",D(D({},w_),{},{mainParameter:void 0,matrix:t})),e);return ft.setClass(n,r),n}Ti("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Ti("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Ti("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Ti("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Ti("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Ti("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Ti("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);const qD=["subFilters"];class C_ extends Ee{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{subFilters:e=[]}=t,n=re(t,qD);super(n),this.subFilters=e}applyTo(t){fl(t)&&(t.passes+=this.subFilters.length-1),this.subFilters.forEach(e=>{e.applyTo(t)})}toObject(){return D(D({},super.toObject()),{},{subFilters:this.subFilters.map(t=>t.toObject())})}isNeutralState(){return!this.subFilters.some(t=>!t.isNeutralState())}static fromObject(t,e){return Promise.all((t.subFilters||[]).map(n=>ft.getClass(n.type).fromObject(n,e))).then(n=>new this({subFilters:n}))}}M(C_,"type","Composed");ft.setClass(C_);const JD=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`,ZD={contrast:0,mainParameter:"contrast"};class Su extends Ee{getFragmentSource(){return JD}applyTo2d(t){let{imageData:{data:e}}=t;if(this.contrast===0)return;const n=Math.floor(this.contrast*255),i=259*(n+255)/(255*(259-n));for(let o=0;o<e.length;o+=4)e[o]=i*(e[o]-128)+128,e[o+1]=i*(e[o+1]-128)+128,e[o+2]=i*(e[o+2]-128)+128}getUniformLocations(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}}sendUniformData(t,e){t.uniform1f(e.uContrast,this.contrast)}}M(Su,"type","Contrast");M(Su,"defaults",ZD);ft.setClass(Su);const QD={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `},tM={opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]};class bu extends Ee{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return QD[this.getCacheKey()]}applyTo2d(t){const e=t.imageData,n=e.data,i=this.matrix,o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=e.width,h=e.height,f=t.ctx.createImageData(c,h),d=f.data,p=this.opaque?1:0;let _,v,w,E,T,P,R,X,B,$,tt,nt,st;for(tt=0;tt<h;tt++)for($=0;$<c;$++){for(T=(tt*c+$)*4,_=0,v=0,w=0,E=0,st=0;st<o;st++)for(nt=0;nt<o;nt++)R=tt+st-l,P=$+nt-l,!(R<0||R>=h||P<0||P>=c)&&(X=(R*c+P)*4,B=i[st*o+nt],_+=n[X]*B,v+=n[X+1]*B,w+=n[X+2]*B,p||(E+=n[X+3]*B));d[T]=_,d[T+1]=v,d[T+2]=w,p?d[T+3]=n[T+3]:d[T+3]=E}t.imageData=f}getUniformLocations(t,e){return{uMatrix:t.getUniformLocation(e,"uMatrix"),uOpaque:t.getUniformLocation(e,"uOpaque"),uHalfSize:t.getUniformLocation(e,"uHalfSize"),uSize:t.getUniformLocation(e,"uSize")}}sendUniformData(t,e){t.uniform1fv(e.uMatrix,this.matrix)}toObject(){return D(D({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}M(bu,"type","Convolute");M(bu,"defaults",tM);ft.setClass(bu);const eM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`,nM=["gamma"],rM={mainParameter:"gamma",gamma:[1,1,1]};class Tu extends Ee{getFragmentSource(){return eM}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{gamma:e=[1,1,1]}=t,n=re(t,nM);super(n),this.gamma=e}applyTo2d(t){let{imageData:{data:e}}=t;const n=this.gamma,i=1/n[0],o=1/n[1],l=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const c=this.rgbValues;for(let h=0;h<256;h++)c.r[h]=Math.pow(h/255,i)*255,c.g[h]=Math.pow(h/255,o)*255,c.b[h]=Math.pow(h/255,l)*255;for(let h=0;h<e.length;h+=4)e[h]=c.r[e[h]],e[h+1]=c.g[e[h+1]],e[h+2]=c.b[e[h+2]]}getUniformLocations(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}}sendUniformData(t,e){t.uniform3fv(e.uGamma,this.gamma)}}M(Tu,"type","Gamma");M(Tu,"defaults",rM);ft.setClass(Tu);const iM={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `},sM={mode:"average",mainParameter:"mode"};class Ou extends Ee{applyTo2d(t){let{imageData:{data:e}}=t;for(let n=0,i;n<e.length;n+=4){switch(this.mode){case"average":i=(e[n]+e[n+1]+e[n+2])/3;break;case"lightness":i=(Math.min(e[n],e[n+1],e[n+2])+Math.max(e[n],e[n+1],e[n+2]))/2;break;case"luminosity":i=.21*e[n]+.72*e[n+1]+.07*e[n+2];break}e[n]=i,e[n+1]=i,e[n+2]=i}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return iM[this.mode]}getUniformLocations(t,e){return{uMode:t.getUniformLocation(e,"uMode")}}sendUniformData(t,e){t.uniform1i(e.uMode,1)}isNeutralState(){return!1}}M(Ou,"type","Grayscale");M(Ou,"defaults",sM);ft.setClass(Ou);const oM={rotation:0,mainParameter:"rotation"};class Eu extends vo{calculateMatrix(){const t=this.rotation*Math.PI,e=Ke(t),n=qe(t),i=1/3,o=Math.sqrt(i)*n,l=1-e;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=e+l/3,this.matrix[1]=i*l-o,this.matrix[2]=i*l+o,this.matrix[5]=i*l+o,this.matrix[6]=e+i*l,this.matrix[7]=i*l-o,this.matrix[10]=i*l-o,this.matrix[11]=i*l+o,this.matrix[12]=e+i*l}isNeutralState(){return this.calculateMatrix(),super.isNeutralState()}applyTo(t){this.calculateMatrix(),super.applyTo(t)}}M(Eu,"type","HueRotation");M(Eu,"defaults",oM);ft.setClass(Eu);const aM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`,lM={alpha:!1,invert:!0,mainParameter:"invert"};class Pu extends Ee{applyTo2d(t){let{imageData:{data:e}}=t;for(let n=0;n<e.length;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2],this.alpha&&(e[n+3]=255-e[n+3])}getFragmentSource(){return aM}isNeutralState(){return!this.invert}getUniformLocations(t,e){return{uInvert:t.getUniformLocation(e,"uInvert"),uAlpha:t.getUniformLocation(e,"uAlpha")}}sendUniformData(t,e){t.uniform1i(e.uInvert,Number(this.invert)),t.uniform1i(e.uAlpha,Number(this.alpha))}}M(Pu,"type","Invert");M(Pu,"defaults",lM);ft.setClass(Pu);const cM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`,hM={mainParameter:"noise",noise:0};class Au extends Ee{getFragmentSource(){return cM}applyTo2d(t){let{imageData:{data:e}}=t;if(this.noise===0)return;const n=this.noise;for(let i=0;i<e.length;i+=4){const o=(.5-Math.random())*n;e[i]+=o,e[i+1]+=o,e[i+2]+=o}}getUniformLocations(t,e){return{uNoise:t.getUniformLocation(e,"uNoise"),uSeed:t.getUniformLocation(e,"uSeed")}}sendUniformData(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())}toObject(){return D(D({},super.toObject()),{},{noise:this.noise})}}M(Au,"type","Noise");M(Au,"defaults",hM);ft.setClass(Au);const uM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepW;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`,fM={blocksize:4,mainParameter:"blocksize"};class Du extends Ee{applyTo2d(t){let{imageData:{data:e,width:n,height:i}}=t;for(let o=0;o<i;o+=this.blocksize)for(let l=0;l<n;l+=this.blocksize){const c=o*4*n+l*4,h=e[c],f=e[c+1],d=e[c+2],p=e[c+3];for(let _=o;_<Math.min(o+this.blocksize,i);_++)for(let v=l;v<Math.min(l+this.blocksize,n);v++){const w=_*4*n+v*4;e[w]=h,e[w+1]=f,e[w+2]=d,e[w+3]=p}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return uM}getUniformLocations(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}}sendUniformData(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}M(Du,"type","Pixelate");M(Du,"defaults",fM);ft.setClass(Du);const dM=`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`,gM={color:"#FFFFFF",distance:.02,useAlpha:!1};class Mu extends Ee{getFragmentShader(){return dM}applyTo2d(t){let{imageData:{data:e}}=t;const n=this.distance*255,i=new Qt(this.color).getSource(),o=[i[0]-n,i[1]-n,i[2]-n],l=[i[0]+n,i[1]+n,i[2]+n];for(let c=0;c<e.length;c+=4){const h=e[c],f=e[c+1],d=e[c+2];h>o[0]&&f>o[1]&&d>o[2]&&h<l[0]&&f<l[1]&&d<l[2]&&(e[c+3]=0)}}getUniformLocations(t,e){return{uLow:t.getUniformLocation(e,"uLow"),uHigh:t.getUniformLocation(e,"uHigh")}}sendUniformData(t,e){const n=new Qt(this.color).getSource(),i=this.distance,o=[0+n[0]/255-i,0+n[1]/255-i,0+n[2]/255-i,1],l=[n[0]/255+i,n[1]/255+i,n[2]/255+i,1];t.uniform4fv(e.uLow,o),t.uniform4fv(e.uHigh,l)}toObject(){return D(D({},super.toObject()),{},{color:this.color,distance:this.distance})}}M(Mu,"type","RemoveColor");M(Mu,"defaults",gM);ft.setClass(Mu);const pM={resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,fragmentSourceTOP:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
  `};class ku extends Ee{getUniformLocations(t,e){return{uDelta:t.getUniformLocation(e,"uDelta"),uTaps:t.getUniformLocation(e,"uTaps")}}sendUniformData(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)}getFilterWindow(){const t=this.tempScale;return Math.ceil(this.lanczosLobes/t)}getCacheKey(){const t=this.getFilterWindow();return"".concat(this.type,"_").concat(t)}getFragmentSource(){const t=this.getFilterWindow();return this.generateShader(t)}getTaps(){const t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,n=this.getFilterWindow(),i=new Array(n);for(let o=1;o<=n;o++)i[o-1]=t(o*e);return i}generateShader(t){const e=new Array(t);for(let n=1;n<=t;n++)e[n-1]="".concat(n,".0 * uDelta");return`
      `.concat(this.fragmentSourceTOP,`
      uniform float uTaps[`).concat(t,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(e.map((n,i)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(i,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(i,`];
              sum += 2.0 * uTaps[`).concat(i,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(t){t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,super.applyTo(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,super.applyTo(t),t.sourceHeight=t.destinationHeight}applyTo(t){fl(t)?this.applyToForWebgl(t):this.applyTo2d(t)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(t){return e=>{if(e>=t||e<=-t)return 0;if(e<11920929e-14&&e>-11920929e-14)return 1;e*=Math.PI;const n=e/t;return Math.sin(e)/e*Math.sin(n)/n}}applyTo2d(t){const e=t.imageData,n=this.scaleX,i=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/i;const o=e.width,l=e.height,c=Math.round(o*n),h=Math.round(l*i);let f;this.resizeType==="sliceHack"?f=this.sliceByTwo(t,o,l,c,h):this.resizeType==="hermite"?f=this.hermiteFastResize(t,o,l,c,h):this.resizeType==="bilinear"?f=this.bilinearFiltering(t,o,l,c,h):this.resizeType==="lanczos"?f=this.lanczosResize(t,o,l,c,h):f=new ImageData(c,h),t.imageData=f}sliceByTwo(t,e,n,i,o){const l=t.imageData,c=.5;let h=!1,f=!1,d=e*c,p=n*c;const _=t.filterBackend.resources;let v=0,w=0;const E=e;let T=0;_.sliceByTwo||(_.sliceByTwo=pe());const P=_.sliceByTwo;(P.width<e*1.5||P.height<n)&&(P.width=e*1.5,P.height=n);const R=P.getContext("2d");for(R.clearRect(0,0,e*1.5,n),R.putImageData(l,0,0),i=Math.floor(i),o=Math.floor(o);!h||!f;)e=d,n=p,i<Math.floor(d*c)?d=Math.floor(d*c):(d=i,h=!0),o<Math.floor(p*c)?p=Math.floor(p*c):(p=o,f=!0),R.drawImage(P,v,w,e,n,E,T,d,p),v=E,w=T,T+=p;return R.getImageData(v,w,i,o)}lanczosResize(t,e,n,i,o){function l(B){let $,tt,nt,st,Dt,Pt,Zt,ot,ct,ht,gt;for(R.x=(B+.5)*p,X.x=Math.floor(R.x),$=0;$<o;$++){for(R.y=($+.5)*_,X.y=Math.floor(R.y),Dt=0,Pt=0,Zt=0,ot=0,ct=0,tt=X.x-E;tt<=X.x+E;tt++)if(!(tt<0||tt>=e)){ht=Math.floor(1e3*Math.abs(tt-R.x)),P[ht]||(P[ht]={});for(let Mt=X.y-T;Mt<=X.y+T;Mt++)Mt<0||Mt>=n||(gt=Math.floor(1e3*Math.abs(Mt-R.y)),P[ht][gt]||(P[ht][gt]=d(Math.sqrt(Math.pow(ht*v,2)+Math.pow(gt*w,2))/1e3)),nt=P[ht][gt],nt>0&&(st=(Mt*e+tt)*4,Dt+=nt,Pt+=nt*c[st],Zt+=nt*c[st+1],ot+=nt*c[st+2],ct+=nt*c[st+3]))}st=($*i+B)*4,f[st]=Pt/Dt,f[st+1]=Zt/Dt,f[st+2]=ot/Dt,f[st+3]=ct/Dt}return++B<i?l(B):h}const c=t.imageData.data,h=t.ctx.createImageData(i,o),f=h.data,d=this.lanczosCreate(this.lanczosLobes),p=this.rcpScaleX,_=this.rcpScaleY,v=2/this.rcpScaleX,w=2/this.rcpScaleY,E=Math.ceil(p*this.lanczosLobes/2),T=Math.ceil(_*this.lanczosLobes/2),P={},R={x:0,y:0},X={x:0,y:0};return l(0)}bilinearFiltering(t,e,n,i,o){let l,c,h,f,d,p,_,v,w,E,T,P,R=0,X;const B=this.rcpScaleX,$=this.rcpScaleY,tt=4*(e-1),st=t.imageData.data,Dt=t.ctx.createImageData(i,o),Pt=Dt.data;for(_=0;_<o;_++)for(v=0;v<i;v++)for(d=Math.floor(B*v),p=Math.floor($*_),w=B*v-d,E=$*_-p,X=4*(p*e+d),T=0;T<4;T++)l=st[X+T],c=st[X+4+T],h=st[X+tt+T],f=st[X+tt+4+T],P=l*(1-w)*(1-E)+c*w*(1-E)+h*E*(1-w)+f*w*E,Pt[R++]=P;return Dt}hermiteFastResize(t,e,n,i,o){const l=this.rcpScaleX,c=this.rcpScaleY,h=Math.ceil(l/2),f=Math.ceil(c/2),d=t.imageData,p=d.data,_=t.ctx.createImageData(i,o),v=_.data;for(let w=0;w<o;w++)for(let E=0;E<i;E++){const T=(E+w*i)*4;let P=0,R=0,X=0,B=0,$=0,tt=0,nt=0;const st=(w+.5)*c;for(let Dt=Math.floor(w*c);Dt<(w+1)*c;Dt++){const Pt=Math.abs(st-(Dt+.5))/f,Zt=(E+.5)*l,ot=Pt*Pt;for(let ct=Math.floor(E*l);ct<(E+1)*l;ct++){let ht=Math.abs(Zt-(ct+.5))/h;const gt=Math.sqrt(ot+ht*ht);gt>1&&gt<-1||(P=2*gt*gt*gt-3*gt*gt+1,P>0&&(ht=4*(ct+Dt*e),nt+=P*p[ht+3],X+=P,p[ht+3]<255&&(P=P*p[ht+3]/250),B+=P*p[ht],$+=P*p[ht+1],tt+=P*p[ht+2],R+=P))}}v[T]=B/R,v[T+1]=$/R,v[T+2]=tt/R,v[T+3]=nt/X}return _}toObject(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}M(ku,"type","Resize");M(ku,"defaults",pM);ft.setClass(ku);const mM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`,_M={saturation:0,mainParameter:"saturation"};class Lu extends Ee{getFragmentSource(){return mM}applyTo2d(t){let{imageData:{data:e}}=t;if(this.saturation===0)return;const n=-this.saturation;for(let i=0;i<e.length;i+=4){const o=Math.max(e[i],e[i+1],e[i+2]);e[i]+=o!==e[i]?(o-e[i])*n:0,e[i+1]+=o!==e[i+1]?(o-e[i+1])*n:0,e[i+2]+=o!==e[i+2]?(o-e[i+2])*n:0}}getUniformLocations(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}}sendUniformData(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}M(Lu,"type","Saturation");M(Lu,"defaults",_M);ft.setClass(Lu);const vM=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`,yM={vibrance:0,mainParameter:"vibrance"};class Ru extends Ee{getFragmentSource(){return vM}applyTo2d(t){let{imageData:{data:e}}=t;if(this.vibrance===0)return;const n=-this.vibrance;for(let i=0;i<e.length;i+=4){const o=Math.max(e[i],e[i+1],e[i+2]),l=(e[i]+e[i+1]+e[i+2])/3,c=Math.abs(o-l)*2/255*n;e[i]+=o!==e[i]?(o-e[i])*c:0,e[i+1]+=o!==e[i+1]?(o-e[i+1])*c:0,e[i+2]+=o!==e[i+2]?(o-e[i+2])*c:0}}getUniformLocations(t,e){return{uVibrance:t.getUniformLocation(e,"uVibrance")}}sendUniformData(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}M(Ru,"type","Vibrance");M(Ru,"defaults",yM);ft.setClass(Ru);const xM=["href"],_a=xi({__name:"BaseButton",props:{look:{type:String,default:"primary"},href:{type:String,default:void 0}},setup(r){const t=r,e={primary:"rounded bg-[--primary-button-background-color] px-3 py-2 text-xs font-semibold text-white shadow-sm hover:bg-[--primary-button-background-hover-color] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[--primary-button-background-color]",secondary:"rounded bg-white px-3 py-2 text-xs font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},n=Ge(()=>e[t.look]);return(i,o)=>r.href?(on(),dr("a",{key:1,href:r.href,target:"_blank",class:Zs(n.value)},[Sg(i.$slots,"default")],10,xM)):(on(),dr("button",{key:0,class:Zs(n.value)},[Sg(i.$slots,"default")],2))}}),wM={class:"relative flex items-start"},CM={class:"flex h-6 items-center"},SM=["name","value","checked","id"],bM={class:"ml-3 text-sm leading-6"},TM=["for"],OM=xi({__name:"BaseCheckbox",props:{label:{type:String,default:""},name:{type:String,default:""},value:{type:String,required:!0},modelValue:{type:[String,Number,Array],required:!0}},emits:["update:modelValue"],setup(r,{emit:t}){const e=r,n=Ge(()=>Array.isArray(e.modelValue)?e.modelValue.includes(e.value):!!e.modelValue),i=o=>{const l=o.target.checked;if(Array.isArray(e.modelValue)){let c=[...e.modelValue];l?c.push(e.value):c.splice(c.indexOf(e.value),1),t("update:modelValue",c)}else t("update:modelValue",!!l)};return(o,l)=>(on(),dr("div",wM,[ge("div",CM,[ge("input",{name:r.name,value:r.value,checked:n.value,onChange:i,id:r.name,type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-[--checkbox-background-color] focus:ring-[--checkbox-background-color] cursor-pointer"},null,40,SM)]),ge("div",bM,[ge("label",{for:r.name,class:"font-medium text-gray-900 cursor-pointer"},Fs(r.label),9,TM)])]))}});var Rs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function EM(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ya={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ya.exports;(function(r,t){(function(){var e,n="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",f=500,d="__lodash_placeholder__",p=1,_=2,v=4,w=1,E=2,T=1,P=2,R=4,X=8,B=16,$=32,tt=64,nt=128,st=256,Dt=512,Pt=30,Zt="...",ot=800,ct=16,ht=1,gt=2,Mt=3,xt=1/0,pt=9007199254740991,Le=17976931348623157e292,Ft=0/0,Ht=4294967295,Vt=Ht-1,Ut=Ht>>>1,Je=[["ary",nt],["bind",T],["bindKey",P],["curry",X],["curryRight",B],["flip",Dt],["partial",$],["partialRight",tt],["rearg",st]],Ze="[object Arguments]",he="[object Array]",U="[object AsyncFunction]",et="[object Boolean]",J="[object Date]",ut="[object DOMException]",Bt="[object Error]",C="[object Function]",b="[object GeneratorFunction]",L="[object Map]",j="[object Number]",z="[object Null]",N="[object Object]",Q="[object Promise]",K="[object Proxy]",q="[object RegExp]",V="[object Set]",lt="[object String]",it="[object Symbol]",dt="[object Undefined]",_t="[object WeakMap]",kt="[object WeakSet]",zt="[object ArrayBuffer]",jt="[object DataView]",ae="[object Float32Array]",Xe="[object Float64Array]",zn="[object Int8Array]",Oi="[object Int16Array]",tr="[object Int32Array]",Ei="[object Uint8Array]",Pe="[object Uint8ClampedArray]",Qe="[object Uint16Array]",Pi="[object Uint32Array]",S_=/\b__p \+= '';/g,b_=/\b(__p \+=) '' \+/g,T_=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Iu=/&(?:amp|lt|gt|quot|#39);/g,Bu=/[&<>"']/g,O_=RegExp(Iu.source),E_=RegExp(Bu.source),P_=/<%-([\s\S]+?)%>/g,A_=/<%([\s\S]+?)%>/g,ju=/<%=([\s\S]+?)%>/g,D_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,M_=/^\w*$/,k_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dl=/[\\^$.*+?()[\]{}|]/g,L_=RegExp(dl.source),gl=/^\s+/,R_=/\s/,F_=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,I_=/\{\n\/\* \[wrapped with (.+)\] \*/,B_=/,? & /,j_=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,W_=/[()=,{}\[\]\/\s]/,X_=/\\(\\)?/g,H_=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wu=/\w*$/,Y_=/^[-+]0x[0-9a-f]+$/i,U_=/^0b[01]+$/i,z_=/^\[object .+?Constructor\]$/,N_=/^0o[0-7]+$/i,V_=/^(?:0|[1-9]\d*)$/,G_=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yo=/($^)/,$_=/['\n\r\u2028\u2029\\]/g,xo="\\ud800-\\udfff",K_="\\u0300-\\u036f",q_="\\ufe20-\\ufe2f",J_="\\u20d0-\\u20ff",Xu=K_+q_+J_,Hu="\\u2700-\\u27bf",Yu="a-z\\xdf-\\xf6\\xf8-\\xff",Z_="\\xac\\xb1\\xd7\\xf7",Q_="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",tv="\\u2000-\\u206f",ev=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Uu="A-Z\\xc0-\\xd6\\xd8-\\xde",zu="\\ufe0e\\ufe0f",Nu=Z_+Q_+tv+ev,pl="[']",nv="["+xo+"]",Vu="["+Nu+"]",wo="["+Xu+"]",Gu="\\d+",rv="["+Hu+"]",$u="["+Yu+"]",Ku="[^"+xo+Nu+Gu+Hu+Yu+Uu+"]",ml="\\ud83c[\\udffb-\\udfff]",iv="(?:"+wo+"|"+ml+")",qu="[^"+xo+"]",_l="(?:\\ud83c[\\udde6-\\uddff]){2}",vl="[\\ud800-\\udbff][\\udc00-\\udfff]",Ai="["+Uu+"]",Ju="\\u200d",Zu="(?:"+$u+"|"+Ku+")",sv="(?:"+Ai+"|"+Ku+")",Qu="(?:"+pl+"(?:d|ll|m|re|s|t|ve))?",tf="(?:"+pl+"(?:D|LL|M|RE|S|T|VE))?",ef=iv+"?",nf="["+zu+"]?",ov="(?:"+Ju+"(?:"+[qu,_l,vl].join("|")+")"+nf+ef+")*",av="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",lv="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rf=nf+ef+ov,cv="(?:"+[rv,_l,vl].join("|")+")"+rf,hv="(?:"+[qu+wo+"?",wo,_l,vl,nv].join("|")+")",uv=RegExp(pl,"g"),fv=RegExp(wo,"g"),yl=RegExp(ml+"(?="+ml+")|"+hv+rf,"g"),dv=RegExp([Ai+"?"+$u+"+"+Qu+"(?="+[Vu,Ai,"$"].join("|")+")",sv+"+"+tf+"(?="+[Vu,Ai+Zu,"$"].join("|")+")",Ai+"?"+Zu+"+"+Qu,Ai+"+"+tf,lv,av,Gu,cv].join("|"),"g"),gv=RegExp("["+Ju+xo+Xu+zu+"]"),pv=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,mv=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_v=-1,se={};se[ae]=se[Xe]=se[zn]=se[Oi]=se[tr]=se[Ei]=se[Pe]=se[Qe]=se[Pi]=!0,se[Ze]=se[he]=se[zt]=se[et]=se[jt]=se[J]=se[Bt]=se[C]=se[L]=se[j]=se[N]=se[q]=se[V]=se[lt]=se[_t]=!1;var ie={};ie[Ze]=ie[he]=ie[zt]=ie[jt]=ie[et]=ie[J]=ie[ae]=ie[Xe]=ie[zn]=ie[Oi]=ie[tr]=ie[L]=ie[j]=ie[N]=ie[q]=ie[V]=ie[lt]=ie[it]=ie[Ei]=ie[Pe]=ie[Qe]=ie[Pi]=!0,ie[Bt]=ie[C]=ie[_t]=!1;var vv={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},yv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xv={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},wv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Cv=parseFloat,Sv=parseInt,sf=typeof Rs=="object"&&Rs&&Rs.Object===Object&&Rs,bv=typeof self=="object"&&self&&self.Object===Object&&self,Ae=sf||bv||Function("return this")(),xl=t&&!t.nodeType&&t,Jr=xl&&!0&&r&&!r.nodeType&&r,of=Jr&&Jr.exports===xl,wl=of&&sf.process,xn=function(){try{var A=Jr&&Jr.require&&Jr.require("util").types;return A||wl&&wl.binding&&wl.binding("util")}catch{}}(),af=xn&&xn.isArrayBuffer,lf=xn&&xn.isDate,cf=xn&&xn.isMap,hf=xn&&xn.isRegExp,uf=xn&&xn.isSet,ff=xn&&xn.isTypedArray;function un(A,W,I){switch(I.length){case 0:return A.call(W);case 1:return A.call(W,I[0]);case 2:return A.call(W,I[0],I[1]);case 3:return A.call(W,I[0],I[1],I[2])}return A.apply(W,I)}function Tv(A,W,I,rt){for(var Ct=-1,Gt=A==null?0:A.length;++Ct<Gt;){var we=A[Ct];W(rt,we,I(we),A)}return rt}function wn(A,W){for(var I=-1,rt=A==null?0:A.length;++I<rt&&W(A[I],I,A)!==!1;);return A}function Ov(A,W){for(var I=A==null?0:A.length;I--&&W(A[I],I,A)!==!1;);return A}function df(A,W){for(var I=-1,rt=A==null?0:A.length;++I<rt;)if(!W(A[I],I,A))return!1;return!0}function Tr(A,W){for(var I=-1,rt=A==null?0:A.length,Ct=0,Gt=[];++I<rt;){var we=A[I];W(we,I,A)&&(Gt[Ct++]=we)}return Gt}function Co(A,W){var I=A==null?0:A.length;return!!I&&Di(A,W,0)>-1}function Cl(A,W,I){for(var rt=-1,Ct=A==null?0:A.length;++rt<Ct;)if(I(W,A[rt]))return!0;return!1}function le(A,W){for(var I=-1,rt=A==null?0:A.length,Ct=Array(rt);++I<rt;)Ct[I]=W(A[I],I,A);return Ct}function Or(A,W){for(var I=-1,rt=W.length,Ct=A.length;++I<rt;)A[Ct+I]=W[I];return A}function Sl(A,W,I,rt){var Ct=-1,Gt=A==null?0:A.length;for(rt&&Gt&&(I=A[++Ct]);++Ct<Gt;)I=W(I,A[Ct],Ct,A);return I}function Ev(A,W,I,rt){var Ct=A==null?0:A.length;for(rt&&Ct&&(I=A[--Ct]);Ct--;)I=W(I,A[Ct],Ct,A);return I}function bl(A,W){for(var I=-1,rt=A==null?0:A.length;++I<rt;)if(W(A[I],I,A))return!0;return!1}var Pv=Tl("length");function Av(A){return A.split("")}function Dv(A){return A.match(j_)||[]}function gf(A,W,I){var rt;return I(A,function(Ct,Gt,we){if(W(Ct,Gt,we))return rt=Gt,!1}),rt}function So(A,W,I,rt){for(var Ct=A.length,Gt=I+(rt?1:-1);rt?Gt--:++Gt<Ct;)if(W(A[Gt],Gt,A))return Gt;return-1}function Di(A,W,I){return W===W?Yv(A,W,I):So(A,pf,I)}function Mv(A,W,I,rt){for(var Ct=I-1,Gt=A.length;++Ct<Gt;)if(rt(A[Ct],W))return Ct;return-1}function pf(A){return A!==A}function mf(A,W){var I=A==null?0:A.length;return I?El(A,W)/I:Ft}function Tl(A){return function(W){return W==null?e:W[A]}}function Ol(A){return function(W){return A==null?e:A[W]}}function _f(A,W,I,rt,Ct){return Ct(A,function(Gt,we,te){I=rt?(rt=!1,Gt):W(I,Gt,we,te)}),I}function kv(A,W){var I=A.length;for(A.sort(W);I--;)A[I]=A[I].value;return A}function El(A,W){for(var I,rt=-1,Ct=A.length;++rt<Ct;){var Gt=W(A[rt]);Gt!==e&&(I=I===e?Gt:I+Gt)}return I}function Pl(A,W){for(var I=-1,rt=Array(A);++I<A;)rt[I]=W(I);return rt}function Lv(A,W){return le(W,function(I){return[I,A[I]]})}function vf(A){return A&&A.slice(0,Cf(A)+1).replace(gl,"")}function fn(A){return function(W){return A(W)}}function Al(A,W){return le(W,function(I){return A[I]})}function ps(A,W){return A.has(W)}function yf(A,W){for(var I=-1,rt=A.length;++I<rt&&Di(W,A[I],0)>-1;);return I}function xf(A,W){for(var I=A.length;I--&&Di(W,A[I],0)>-1;);return I}function Rv(A,W){for(var I=A.length,rt=0;I--;)A[I]===W&&++rt;return rt}var Fv=Ol(vv),Iv=Ol(yv);function Bv(A){return"\\"+wv[A]}function jv(A,W){return A==null?e:A[W]}function Mi(A){return gv.test(A)}function Wv(A){return pv.test(A)}function Xv(A){for(var W,I=[];!(W=A.next()).done;)I.push(W.value);return I}function Dl(A){var W=-1,I=Array(A.size);return A.forEach(function(rt,Ct){I[++W]=[Ct,rt]}),I}function wf(A,W){return function(I){return A(W(I))}}function Er(A,W){for(var I=-1,rt=A.length,Ct=0,Gt=[];++I<rt;){var we=A[I];(we===W||we===d)&&(A[I]=d,Gt[Ct++]=I)}return Gt}function bo(A){var W=-1,I=Array(A.size);return A.forEach(function(rt){I[++W]=rt}),I}function Hv(A){var W=-1,I=Array(A.size);return A.forEach(function(rt){I[++W]=[rt,rt]}),I}function Yv(A,W,I){for(var rt=I-1,Ct=A.length;++rt<Ct;)if(A[rt]===W)return rt;return-1}function Uv(A,W,I){for(var rt=I+1;rt--;)if(A[rt]===W)return rt;return rt}function ki(A){return Mi(A)?Nv(A):Pv(A)}function Dn(A){return Mi(A)?Vv(A):Av(A)}function Cf(A){for(var W=A.length;W--&&R_.test(A.charAt(W)););return W}var zv=Ol(xv);function Nv(A){for(var W=yl.lastIndex=0;yl.test(A);)++W;return W}function Vv(A){return A.match(yl)||[]}function Gv(A){return A.match(dv)||[]}var $v=function A(W){W=W==null?Ae:Li.defaults(Ae.Object(),W,Li.pick(Ae,mv));var I=W.Array,rt=W.Date,Ct=W.Error,Gt=W.Function,we=W.Math,te=W.Object,Ml=W.RegExp,Kv=W.String,Cn=W.TypeError,To=I.prototype,qv=Gt.prototype,Ri=te.prototype,Oo=W["__core-js_shared__"],Eo=qv.toString,qt=Ri.hasOwnProperty,Jv=0,Sf=function(){var s=/[^.]+$/.exec(Oo&&Oo.keys&&Oo.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Po=Ri.toString,Zv=Eo.call(te),Qv=Ae._,ty=Ml("^"+Eo.call(qt).replace(dl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ao=of?W.Buffer:e,Pr=W.Symbol,Do=W.Uint8Array,bf=Ao?Ao.allocUnsafe:e,Mo=wf(te.getPrototypeOf,te),Tf=te.create,Of=Ri.propertyIsEnumerable,ko=To.splice,Ef=Pr?Pr.isConcatSpreadable:e,ms=Pr?Pr.iterator:e,Zr=Pr?Pr.toStringTag:e,Lo=function(){try{var s=ri(te,"defineProperty");return s({},"",{}),s}catch{}}(),ey=W.clearTimeout!==Ae.clearTimeout&&W.clearTimeout,ny=rt&&rt.now!==Ae.Date.now&&rt.now,ry=W.setTimeout!==Ae.setTimeout&&W.setTimeout,Ro=we.ceil,Fo=we.floor,kl=te.getOwnPropertySymbols,iy=Ao?Ao.isBuffer:e,Pf=W.isFinite,sy=To.join,oy=wf(te.keys,te),Ce=we.max,Re=we.min,ay=rt.now,ly=W.parseInt,Af=we.random,cy=To.reverse,Ll=ri(W,"DataView"),_s=ri(W,"Map"),Rl=ri(W,"Promise"),Fi=ri(W,"Set"),vs=ri(W,"WeakMap"),ys=ri(te,"create"),Io=vs&&new vs,Ii={},hy=ii(Ll),uy=ii(_s),fy=ii(Rl),dy=ii(Fi),gy=ii(vs),Bo=Pr?Pr.prototype:e,xs=Bo?Bo.valueOf:e,Df=Bo?Bo.toString:e;function y(s){if(de(s)&&!St(s)&&!(s instanceof It)){if(s instanceof Sn)return s;if(qt.call(s,"__wrapped__"))return Md(s)}return new Sn(s)}var Bi=function(){function s(){}return function(a){if(!ue(a))return{};if(Tf)return Tf(a);s.prototype=a;var u=new s;return s.prototype=e,u}}();function jo(){}function Sn(s,a){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=e}y.templateSettings={escape:P_,evaluate:A_,interpolate:ju,variable:"",imports:{_:y}},y.prototype=jo.prototype,y.prototype.constructor=y,Sn.prototype=Bi(jo.prototype),Sn.prototype.constructor=Sn;function It(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ht,this.__views__=[]}function py(){var s=new It(this.__wrapped__);return s.__actions__=tn(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=tn(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=tn(this.__views__),s}function my(){if(this.__filtered__){var s=new It(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function _y(){var s=this.__wrapped__.value(),a=this.__dir__,u=St(s),g=a<0,m=u?s.length:0,x=Ax(0,m,this.__views__),S=x.start,O=x.end,k=O-S,H=g?O:S-1,Y=this.__iteratees__,G=Y.length,Z=0,at=Re(k,this.__takeCount__);if(!u||!g&&m==k&&at==k)return td(s,this.__actions__);var vt=[];t:for(;k--&&Z<at;){H+=a;for(var Ot=-1,yt=s[H];++Ot<G;){var Rt=Y[Ot],Wt=Rt.iteratee,pn=Rt.type,Ue=Wt(yt);if(pn==gt)yt=Ue;else if(!Ue){if(pn==ht)continue t;break t}}vt[Z++]=yt}return vt}It.prototype=Bi(jo.prototype),It.prototype.constructor=It;function Qr(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var g=s[a];this.set(g[0],g[1])}}function vy(){this.__data__=ys?ys(null):{},this.size=0}function yy(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}function xy(s){var a=this.__data__;if(ys){var u=a[s];return u===h?e:u}return qt.call(a,s)?a[s]:e}function wy(s){var a=this.__data__;return ys?a[s]!==e:qt.call(a,s)}function Cy(s,a){var u=this.__data__;return this.size+=this.has(s)?0:1,u[s]=ys&&a===e?h:a,this}Qr.prototype.clear=vy,Qr.prototype.delete=yy,Qr.prototype.get=xy,Qr.prototype.has=wy,Qr.prototype.set=Cy;function er(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var g=s[a];this.set(g[0],g[1])}}function Sy(){this.__data__=[],this.size=0}function by(s){var a=this.__data__,u=Wo(a,s);if(u<0)return!1;var g=a.length-1;return u==g?a.pop():ko.call(a,u,1),--this.size,!0}function Ty(s){var a=this.__data__,u=Wo(a,s);return u<0?e:a[u][1]}function Oy(s){return Wo(this.__data__,s)>-1}function Ey(s,a){var u=this.__data__,g=Wo(u,s);return g<0?(++this.size,u.push([s,a])):u[g][1]=a,this}er.prototype.clear=Sy,er.prototype.delete=by,er.prototype.get=Ty,er.prototype.has=Oy,er.prototype.set=Ey;function nr(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var g=s[a];this.set(g[0],g[1])}}function Py(){this.size=0,this.__data__={hash:new Qr,map:new(_s||er),string:new Qr}}function Ay(s){var a=Jo(this,s).delete(s);return this.size-=a?1:0,a}function Dy(s){return Jo(this,s).get(s)}function My(s){return Jo(this,s).has(s)}function ky(s,a){var u=Jo(this,s),g=u.size;return u.set(s,a),this.size+=u.size==g?0:1,this}nr.prototype.clear=Py,nr.prototype.delete=Ay,nr.prototype.get=Dy,nr.prototype.has=My,nr.prototype.set=ky;function ti(s){var a=-1,u=s==null?0:s.length;for(this.__data__=new nr;++a<u;)this.add(s[a])}function Ly(s){return this.__data__.set(s,h),this}function Ry(s){return this.__data__.has(s)}ti.prototype.add=ti.prototype.push=Ly,ti.prototype.has=Ry;function Mn(s){var a=this.__data__=new er(s);this.size=a.size}function Fy(){this.__data__=new er,this.size=0}function Iy(s){var a=this.__data__,u=a.delete(s);return this.size=a.size,u}function By(s){return this.__data__.get(s)}function jy(s){return this.__data__.has(s)}function Wy(s,a){var u=this.__data__;if(u instanceof er){var g=u.__data__;if(!_s||g.length<i-1)return g.push([s,a]),this.size=++u.size,this;u=this.__data__=new nr(g)}return u.set(s,a),this.size=u.size,this}Mn.prototype.clear=Fy,Mn.prototype.delete=Iy,Mn.prototype.get=By,Mn.prototype.has=jy,Mn.prototype.set=Wy;function Mf(s,a){var u=St(s),g=!u&&si(s),m=!u&&!g&&Lr(s),x=!u&&!g&&!m&&Hi(s),S=u||g||m||x,O=S?Pl(s.length,Kv):[],k=O.length;for(var H in s)(a||qt.call(s,H))&&!(S&&(H=="length"||m&&(H=="offset"||H=="parent")||x&&(H=="buffer"||H=="byteLength"||H=="byteOffset")||or(H,k)))&&O.push(H);return O}function kf(s){var a=s.length;return a?s[Nl(0,a-1)]:e}function Xy(s,a){return Zo(tn(s),ei(a,0,s.length))}function Hy(s){return Zo(tn(s))}function Fl(s,a,u){(u!==e&&!kn(s[a],u)||u===e&&!(a in s))&&rr(s,a,u)}function ws(s,a,u){var g=s[a];(!(qt.call(s,a)&&kn(g,u))||u===e&&!(a in s))&&rr(s,a,u)}function Wo(s,a){for(var u=s.length;u--;)if(kn(s[u][0],a))return u;return-1}function Yy(s,a,u,g){return Ar(s,function(m,x,S){a(g,m,u(m),S)}),g}function Lf(s,a){return s&&Vn(a,be(a),s)}function Uy(s,a){return s&&Vn(a,nn(a),s)}function rr(s,a,u){a=="__proto__"&&Lo?Lo(s,a,{configurable:!0,enumerable:!0,value:u,writable:!0}):s[a]=u}function Il(s,a){for(var u=-1,g=a.length,m=I(g),x=s==null;++u<g;)m[u]=x?e:mc(s,a[u]);return m}function ei(s,a,u){return s===s&&(u!==e&&(s=s<=u?s:u),a!==e&&(s=s>=a?s:a)),s}function bn(s,a,u,g,m,x){var S,O=a&p,k=a&_,H=a&v;if(u&&(S=m?u(s,g,m,x):u(s)),S!==e)return S;if(!ue(s))return s;var Y=St(s);if(Y){if(S=Mx(s),!O)return tn(s,S)}else{var G=Fe(s),Z=G==C||G==b;if(Lr(s))return rd(s,O);if(G==N||G==Ze||Z&&!m){if(S=k||Z?{}:Cd(s),!O)return k?xx(s,Uy(S,s)):yx(s,Lf(S,s))}else{if(!ie[G])return m?s:{};S=kx(s,G,O)}}x||(x=new Mn);var at=x.get(s);if(at)return at;x.set(s,S),Jd(s)?s.forEach(function(yt){S.add(bn(yt,a,u,yt,s,x))}):Kd(s)&&s.forEach(function(yt,Rt){S.set(Rt,bn(yt,a,u,Rt,s,x))});var vt=H?k?nc:ec:k?nn:be,Ot=Y?e:vt(s);return wn(Ot||s,function(yt,Rt){Ot&&(Rt=yt,yt=s[Rt]),ws(S,Rt,bn(yt,a,u,Rt,s,x))}),S}function zy(s){var a=be(s);return function(u){return Rf(u,s,a)}}function Rf(s,a,u){var g=u.length;if(s==null)return!g;for(s=te(s);g--;){var m=u[g],x=a[m],S=s[m];if(S===e&&!(m in s)||!x(S))return!1}return!0}function Ff(s,a,u){if(typeof s!="function")throw new Cn(l);return Ps(function(){s.apply(e,u)},a)}function Cs(s,a,u,g){var m=-1,x=Co,S=!0,O=s.length,k=[],H=a.length;if(!O)return k;u&&(a=le(a,fn(u))),g?(x=Cl,S=!1):a.length>=i&&(x=ps,S=!1,a=new ti(a));t:for(;++m<O;){var Y=s[m],G=u==null?Y:u(Y);if(Y=g||Y!==0?Y:0,S&&G===G){for(var Z=H;Z--;)if(a[Z]===G)continue t;k.push(Y)}else x(a,G,g)||k.push(Y)}return k}var Ar=ld(Nn),If=ld(jl,!0);function Ny(s,a){var u=!0;return Ar(s,function(g,m,x){return u=!!a(g,m,x),u}),u}function Xo(s,a,u){for(var g=-1,m=s.length;++g<m;){var x=s[g],S=a(x);if(S!=null&&(O===e?S===S&&!gn(S):u(S,O)))var O=S,k=x}return k}function Vy(s,a,u,g){var m=s.length;for(u=bt(u),u<0&&(u=-u>m?0:m+u),g=g===e||g>m?m:bt(g),g<0&&(g+=m),g=u>g?0:Qd(g);u<g;)s[u++]=a;return s}function Bf(s,a){var u=[];return Ar(s,function(g,m,x){a(g,m,x)&&u.push(g)}),u}function De(s,a,u,g,m){var x=-1,S=s.length;for(u||(u=Rx),m||(m=[]);++x<S;){var O=s[x];a>0&&u(O)?a>1?De(O,a-1,u,g,m):Or(m,O):g||(m[m.length]=O)}return m}var Bl=cd(),jf=cd(!0);function Nn(s,a){return s&&Bl(s,a,be)}function jl(s,a){return s&&jf(s,a,be)}function Ho(s,a){return Tr(a,function(u){return ar(s[u])})}function ni(s,a){a=Mr(a,s);for(var u=0,g=a.length;s!=null&&u<g;)s=s[Gn(a[u++])];return u&&u==g?s:e}function Wf(s,a,u){var g=a(s);return St(s)?g:Or(g,u(s))}function He(s){return s==null?s===e?dt:z:Zr&&Zr in te(s)?Px(s):Hx(s)}function Wl(s,a){return s>a}function Gy(s,a){return s!=null&&qt.call(s,a)}function $y(s,a){return s!=null&&a in te(s)}function Ky(s,a,u){return s>=Re(a,u)&&s<Ce(a,u)}function Xl(s,a,u){for(var g=u?Cl:Co,m=s[0].length,x=s.length,S=x,O=I(x),k=1/0,H=[];S--;){var Y=s[S];S&&a&&(Y=le(Y,fn(a))),k=Re(Y.length,k),O[S]=!u&&(a||m>=120&&Y.length>=120)?new ti(S&&Y):e}Y=s[0];var G=-1,Z=O[0];t:for(;++G<m&&H.length<k;){var at=Y[G],vt=a?a(at):at;if(at=u||at!==0?at:0,!(Z?ps(Z,vt):g(H,vt,u))){for(S=x;--S;){var Ot=O[S];if(!(Ot?ps(Ot,vt):g(s[S],vt,u)))continue t}Z&&Z.push(vt),H.push(at)}}return H}function qy(s,a,u,g){return Nn(s,function(m,x,S){a(g,u(m),x,S)}),g}function Ss(s,a,u){a=Mr(a,s),s=Od(s,a);var g=s==null?s:s[Gn(On(a))];return g==null?e:un(g,s,u)}function Xf(s){return de(s)&&He(s)==Ze}function Jy(s){return de(s)&&He(s)==zt}function Zy(s){return de(s)&&He(s)==J}function bs(s,a,u,g,m){return s===a?!0:s==null||a==null||!de(s)&&!de(a)?s!==s&&a!==a:Qy(s,a,u,g,bs,m)}function Qy(s,a,u,g,m,x){var S=St(s),O=St(a),k=S?he:Fe(s),H=O?he:Fe(a);k=k==Ze?N:k,H=H==Ze?N:H;var Y=k==N,G=H==N,Z=k==H;if(Z&&Lr(s)){if(!Lr(a))return!1;S=!0,Y=!1}if(Z&&!Y)return x||(x=new Mn),S||Hi(s)?yd(s,a,u,g,m,x):Ox(s,a,k,u,g,m,x);if(!(u&w)){var at=Y&&qt.call(s,"__wrapped__"),vt=G&&qt.call(a,"__wrapped__");if(at||vt){var Ot=at?s.value():s,yt=vt?a.value():a;return x||(x=new Mn),m(Ot,yt,u,g,x)}}return Z?(x||(x=new Mn),Ex(s,a,u,g,m,x)):!1}function tx(s){return de(s)&&Fe(s)==L}function Hl(s,a,u,g){var m=u.length,x=m,S=!g;if(s==null)return!x;for(s=te(s);m--;){var O=u[m];if(S&&O[2]?O[1]!==s[O[0]]:!(O[0]in s))return!1}for(;++m<x;){O=u[m];var k=O[0],H=s[k],Y=O[1];if(S&&O[2]){if(H===e&&!(k in s))return!1}else{var G=new Mn;if(g)var Z=g(H,Y,k,s,a,G);if(!(Z===e?bs(Y,H,w|E,g,G):Z))return!1}}return!0}function Hf(s){if(!ue(s)||Ix(s))return!1;var a=ar(s)?ty:z_;return a.test(ii(s))}function ex(s){return de(s)&&He(s)==q}function nx(s){return de(s)&&Fe(s)==V}function rx(s){return de(s)&&ia(s.length)&&!!se[He(s)]}function Yf(s){return typeof s=="function"?s:s==null?rn:typeof s=="object"?St(s)?Nf(s[0],s[1]):zf(s):hg(s)}function Yl(s){if(!Es(s))return oy(s);var a=[];for(var u in te(s))qt.call(s,u)&&u!="constructor"&&a.push(u);return a}function ix(s){if(!ue(s))return Xx(s);var a=Es(s),u=[];for(var g in s)g=="constructor"&&(a||!qt.call(s,g))||u.push(g);return u}function Ul(s,a){return s<a}function Uf(s,a){var u=-1,g=en(s)?I(s.length):[];return Ar(s,function(m,x,S){g[++u]=a(m,x,S)}),g}function zf(s){var a=ic(s);return a.length==1&&a[0][2]?bd(a[0][0],a[0][1]):function(u){return u===s||Hl(u,s,a)}}function Nf(s,a){return oc(s)&&Sd(a)?bd(Gn(s),a):function(u){var g=mc(u,s);return g===e&&g===a?_c(u,s):bs(a,g,w|E)}}function Yo(s,a,u,g,m){s!==a&&Bl(a,function(x,S){if(m||(m=new Mn),ue(x))sx(s,a,S,u,Yo,g,m);else{var O=g?g(lc(s,S),x,S+"",s,a,m):e;O===e&&(O=x),Fl(s,S,O)}},nn)}function sx(s,a,u,g,m,x,S){var O=lc(s,u),k=lc(a,u),H=S.get(k);if(H){Fl(s,u,H);return}var Y=x?x(O,k,u+"",s,a,S):e,G=Y===e;if(G){var Z=St(k),at=!Z&&Lr(k),vt=!Z&&!at&&Hi(k);Y=k,Z||at||vt?St(O)?Y=O:me(O)?Y=tn(O):at?(G=!1,Y=rd(k,!0)):vt?(G=!1,Y=id(k,!0)):Y=[]:As(k)||si(k)?(Y=O,si(O)?Y=tg(O):(!ue(O)||ar(O))&&(Y=Cd(k))):G=!1}G&&(S.set(k,Y),m(Y,k,g,x,S),S.delete(k)),Fl(s,u,Y)}function Vf(s,a){var u=s.length;if(u)return a+=a<0?u:0,or(a,u)?s[a]:e}function Gf(s,a,u){a.length?a=le(a,function(x){return St(x)?function(S){return ni(S,x.length===1?x[0]:x)}:x}):a=[rn];var g=-1;a=le(a,fn(mt()));var m=Uf(s,function(x,S,O){var k=le(a,function(H){return H(x)});return{criteria:k,index:++g,value:x}});return kv(m,function(x,S){return vx(x,S,u)})}function ox(s,a){return $f(s,a,function(u,g){return _c(s,g)})}function $f(s,a,u){for(var g=-1,m=a.length,x={};++g<m;){var S=a[g],O=ni(s,S);u(O,S)&&Ts(x,Mr(S,s),O)}return x}function ax(s){return function(a){return ni(a,s)}}function zl(s,a,u,g){var m=g?Mv:Di,x=-1,S=a.length,O=s;for(s===a&&(a=tn(a)),u&&(O=le(s,fn(u)));++x<S;)for(var k=0,H=a[x],Y=u?u(H):H;(k=m(O,Y,k,g))>-1;)O!==s&&ko.call(O,k,1),ko.call(s,k,1);return s}function Kf(s,a){for(var u=s?a.length:0,g=u-1;u--;){var m=a[u];if(u==g||m!==x){var x=m;or(m)?ko.call(s,m,1):$l(s,m)}}return s}function Nl(s,a){return s+Fo(Af()*(a-s+1))}function lx(s,a,u,g){for(var m=-1,x=Ce(Ro((a-s)/(u||1)),0),S=I(x);x--;)S[g?x:++m]=s,s+=u;return S}function Vl(s,a){var u="";if(!s||a<1||a>pt)return u;do a%2&&(u+=s),a=Fo(a/2),a&&(s+=s);while(a);return u}function At(s,a){return cc(Td(s,a,rn),s+"")}function cx(s){return kf(Yi(s))}function hx(s,a){var u=Yi(s);return Zo(u,ei(a,0,u.length))}function Ts(s,a,u,g){if(!ue(s))return s;a=Mr(a,s);for(var m=-1,x=a.length,S=x-1,O=s;O!=null&&++m<x;){var k=Gn(a[m]),H=u;if(k==="__proto__"||k==="constructor"||k==="prototype")return s;if(m!=S){var Y=O[k];H=g?g(Y,k,O):e,H===e&&(H=ue(Y)?Y:or(a[m+1])?[]:{})}ws(O,k,H),O=O[k]}return s}var qf=Io?function(s,a){return Io.set(s,a),s}:rn,ux=Lo?function(s,a){return Lo(s,"toString",{configurable:!0,enumerable:!1,value:yc(a),writable:!0})}:rn;function fx(s){return Zo(Yi(s))}function Tn(s,a,u){var g=-1,m=s.length;a<0&&(a=-a>m?0:m+a),u=u>m?m:u,u<0&&(u+=m),m=a>u?0:u-a>>>0,a>>>=0;for(var x=I(m);++g<m;)x[g]=s[g+a];return x}function dx(s,a){var u;return Ar(s,function(g,m,x){return u=a(g,m,x),!u}),!!u}function Uo(s,a,u){var g=0,m=s==null?g:s.length;if(typeof a=="number"&&a===a&&m<=Ut){for(;g<m;){var x=g+m>>>1,S=s[x];S!==null&&!gn(S)&&(u?S<=a:S<a)?g=x+1:m=x}return m}return Gl(s,a,rn,u)}function Gl(s,a,u,g){var m=0,x=s==null?0:s.length;if(x===0)return 0;a=u(a);for(var S=a!==a,O=a===null,k=gn(a),H=a===e;m<x;){var Y=Fo((m+x)/2),G=u(s[Y]),Z=G!==e,at=G===null,vt=G===G,Ot=gn(G);if(S)var yt=g||vt;else H?yt=vt&&(g||Z):O?yt=vt&&Z&&(g||!at):k?yt=vt&&Z&&!at&&(g||!Ot):at||Ot?yt=!1:yt=g?G<=a:G<a;yt?m=Y+1:x=Y}return Re(x,Vt)}function Jf(s,a){for(var u=-1,g=s.length,m=0,x=[];++u<g;){var S=s[u],O=a?a(S):S;if(!u||!kn(O,k)){var k=O;x[m++]=S===0?0:S}}return x}function Zf(s){return typeof s=="number"?s:gn(s)?Ft:+s}function dn(s){if(typeof s=="string")return s;if(St(s))return le(s,dn)+"";if(gn(s))return Df?Df.call(s):"";var a=s+"";return a=="0"&&1/s==-xt?"-0":a}function Dr(s,a,u){var g=-1,m=Co,x=s.length,S=!0,O=[],k=O;if(u)S=!1,m=Cl;else if(x>=i){var H=a?null:bx(s);if(H)return bo(H);S=!1,m=ps,k=new ti}else k=a?[]:O;t:for(;++g<x;){var Y=s[g],G=a?a(Y):Y;if(Y=u||Y!==0?Y:0,S&&G===G){for(var Z=k.length;Z--;)if(k[Z]===G)continue t;a&&k.push(G),O.push(Y)}else m(k,G,u)||(k!==O&&k.push(G),O.push(Y))}return O}function $l(s,a){return a=Mr(a,s),s=Od(s,a),s==null||delete s[Gn(On(a))]}function Qf(s,a,u,g){return Ts(s,a,u(ni(s,a)),g)}function zo(s,a,u,g){for(var m=s.length,x=g?m:-1;(g?x--:++x<m)&&a(s[x],x,s););return u?Tn(s,g?0:x,g?x+1:m):Tn(s,g?x+1:0,g?m:x)}function td(s,a){var u=s;return u instanceof It&&(u=u.value()),Sl(a,function(g,m){return m.func.apply(m.thisArg,Or([g],m.args))},u)}function Kl(s,a,u){var g=s.length;if(g<2)return g?Dr(s[0]):[];for(var m=-1,x=I(g);++m<g;)for(var S=s[m],O=-1;++O<g;)O!=m&&(x[m]=Cs(x[m]||S,s[O],a,u));return Dr(De(x,1),a,u)}function ed(s,a,u){for(var g=-1,m=s.length,x=a.length,S={};++g<m;){var O=g<x?a[g]:e;u(S,s[g],O)}return S}function ql(s){return me(s)?s:[]}function Jl(s){return typeof s=="function"?s:rn}function Mr(s,a){return St(s)?s:oc(s,a)?[s]:Dd(Kt(s))}var gx=At;function kr(s,a,u){var g=s.length;return u=u===e?g:u,!a&&u>=g?s:Tn(s,a,u)}var nd=ey||function(s){return Ae.clearTimeout(s)};function rd(s,a){if(a)return s.slice();var u=s.length,g=bf?bf(u):new s.constructor(u);return s.copy(g),g}function Zl(s){var a=new s.constructor(s.byteLength);return new Do(a).set(new Do(s)),a}function px(s,a){var u=a?Zl(s.buffer):s.buffer;return new s.constructor(u,s.byteOffset,s.byteLength)}function mx(s){var a=new s.constructor(s.source,Wu.exec(s));return a.lastIndex=s.lastIndex,a}function _x(s){return xs?te(xs.call(s)):{}}function id(s,a){var u=a?Zl(s.buffer):s.buffer;return new s.constructor(u,s.byteOffset,s.length)}function sd(s,a){if(s!==a){var u=s!==e,g=s===null,m=s===s,x=gn(s),S=a!==e,O=a===null,k=a===a,H=gn(a);if(!O&&!H&&!x&&s>a||x&&S&&k&&!O&&!H||g&&S&&k||!u&&k||!m)return 1;if(!g&&!x&&!H&&s<a||H&&u&&m&&!g&&!x||O&&u&&m||!S&&m||!k)return-1}return 0}function vx(s,a,u){for(var g=-1,m=s.criteria,x=a.criteria,S=m.length,O=u.length;++g<S;){var k=sd(m[g],x[g]);if(k){if(g>=O)return k;var H=u[g];return k*(H=="desc"?-1:1)}}return s.index-a.index}function od(s,a,u,g){for(var m=-1,x=s.length,S=u.length,O=-1,k=a.length,H=Ce(x-S,0),Y=I(k+H),G=!g;++O<k;)Y[O]=a[O];for(;++m<S;)(G||m<x)&&(Y[u[m]]=s[m]);for(;H--;)Y[O++]=s[m++];return Y}function ad(s,a,u,g){for(var m=-1,x=s.length,S=-1,O=u.length,k=-1,H=a.length,Y=Ce(x-O,0),G=I(Y+H),Z=!g;++m<Y;)G[m]=s[m];for(var at=m;++k<H;)G[at+k]=a[k];for(;++S<O;)(Z||m<x)&&(G[at+u[S]]=s[m++]);return G}function tn(s,a){var u=-1,g=s.length;for(a||(a=I(g));++u<g;)a[u]=s[u];return a}function Vn(s,a,u,g){var m=!u;u||(u={});for(var x=-1,S=a.length;++x<S;){var O=a[x],k=g?g(u[O],s[O],O,u,s):e;k===e&&(k=s[O]),m?rr(u,O,k):ws(u,O,k)}return u}function yx(s,a){return Vn(s,sc(s),a)}function xx(s,a){return Vn(s,xd(s),a)}function No(s,a){return function(u,g){var m=St(u)?Tv:Yy,x=a?a():{};return m(u,s,mt(g,2),x)}}function ji(s){return At(function(a,u){var g=-1,m=u.length,x=m>1?u[m-1]:e,S=m>2?u[2]:e;for(x=s.length>3&&typeof x=="function"?(m--,x):e,S&&Ye(u[0],u[1],S)&&(x=m<3?e:x,m=1),a=te(a);++g<m;){var O=u[g];O&&s(a,O,g,x)}return a})}function ld(s,a){return function(u,g){if(u==null)return u;if(!en(u))return s(u,g);for(var m=u.length,x=a?m:-1,S=te(u);(a?x--:++x<m)&&g(S[x],x,S)!==!1;);return u}}function cd(s){return function(a,u,g){for(var m=-1,x=te(a),S=g(a),O=S.length;O--;){var k=S[s?O:++m];if(u(x[k],k,x)===!1)break}return a}}function wx(s,a,u){var g=a&T,m=Os(s);function x(){var S=this&&this!==Ae&&this instanceof x?m:s;return S.apply(g?u:this,arguments)}return x}function hd(s){return function(a){a=Kt(a);var u=Mi(a)?Dn(a):e,g=u?u[0]:a.charAt(0),m=u?kr(u,1).join(""):a.slice(1);return g[s]()+m}}function Wi(s){return function(a){return Sl(lg(ag(a).replace(uv,"")),s,"")}}function Os(s){return function(){var a=arguments;switch(a.length){case 0:return new s;case 1:return new s(a[0]);case 2:return new s(a[0],a[1]);case 3:return new s(a[0],a[1],a[2]);case 4:return new s(a[0],a[1],a[2],a[3]);case 5:return new s(a[0],a[1],a[2],a[3],a[4]);case 6:return new s(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new s(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var u=Bi(s.prototype),g=s.apply(u,a);return ue(g)?g:u}}function Cx(s,a,u){var g=Os(s);function m(){for(var x=arguments.length,S=I(x),O=x,k=Xi(m);O--;)S[O]=arguments[O];var H=x<3&&S[0]!==k&&S[x-1]!==k?[]:Er(S,k);if(x-=H.length,x<u)return pd(s,a,Vo,m.placeholder,e,S,H,e,e,u-x);var Y=this&&this!==Ae&&this instanceof m?g:s;return un(Y,this,S)}return m}function ud(s){return function(a,u,g){var m=te(a);if(!en(a)){var x=mt(u,3);a=be(a),u=function(O){return x(m[O],O,m)}}var S=s(a,u,g);return S>-1?m[x?a[S]:S]:e}}function fd(s){return sr(function(a){var u=a.length,g=u,m=Sn.prototype.thru;for(s&&a.reverse();g--;){var x=a[g];if(typeof x!="function")throw new Cn(l);if(m&&!S&&qo(x)=="wrapper")var S=new Sn([],!0)}for(g=S?g:u;++g<u;){x=a[g];var O=qo(x),k=O=="wrapper"?rc(x):e;k&&ac(k[0])&&k[1]==(nt|X|$|st)&&!k[4].length&&k[9]==1?S=S[qo(k[0])].apply(S,k[3]):S=x.length==1&&ac(x)?S[O]():S.thru(x)}return function(){var H=arguments,Y=H[0];if(S&&H.length==1&&St(Y))return S.plant(Y).value();for(var G=0,Z=u?a[G].apply(this,H):Y;++G<u;)Z=a[G].call(this,Z);return Z}})}function Vo(s,a,u,g,m,x,S,O,k,H){var Y=a&nt,G=a&T,Z=a&P,at=a&(X|B),vt=a&Dt,Ot=Z?e:Os(s);function yt(){for(var Rt=arguments.length,Wt=I(Rt),pn=Rt;pn--;)Wt[pn]=arguments[pn];if(at)var Ue=Xi(yt),mn=Rv(Wt,Ue);if(g&&(Wt=od(Wt,g,m,at)),x&&(Wt=ad(Wt,x,S,at)),Rt-=mn,at&&Rt<H){var _e=Er(Wt,Ue);return pd(s,a,Vo,yt.placeholder,u,Wt,_e,O,k,H-Rt)}var Ln=G?u:this,cr=Z?Ln[s]:s;return Rt=Wt.length,O?Wt=Yx(Wt,O):vt&&Rt>1&&Wt.reverse(),Y&&k<Rt&&(Wt.length=k),this&&this!==Ae&&this instanceof yt&&(cr=Ot||Os(cr)),cr.apply(Ln,Wt)}return yt}function dd(s,a){return function(u,g){return qy(u,s,a(g),{})}}function Go(s,a){return function(u,g){var m;if(u===e&&g===e)return a;if(u!==e&&(m=u),g!==e){if(m===e)return g;typeof u=="string"||typeof g=="string"?(u=dn(u),g=dn(g)):(u=Zf(u),g=Zf(g)),m=s(u,g)}return m}}function Ql(s){return sr(function(a){return a=le(a,fn(mt())),At(function(u){var g=this;return s(a,function(m){return un(m,g,u)})})})}function $o(s,a){a=a===e?" ":dn(a);var u=a.length;if(u<2)return u?Vl(a,s):a;var g=Vl(a,Ro(s/ki(a)));return Mi(a)?kr(Dn(g),0,s).join(""):g.slice(0,s)}function Sx(s,a,u,g){var m=a&T,x=Os(s);function S(){for(var O=-1,k=arguments.length,H=-1,Y=g.length,G=I(Y+k),Z=this&&this!==Ae&&this instanceof S?x:s;++H<Y;)G[H]=g[H];for(;k--;)G[H++]=arguments[++O];return un(Z,m?u:this,G)}return S}function gd(s){return function(a,u,g){return g&&typeof g!="number"&&Ye(a,u,g)&&(u=g=e),a=lr(a),u===e?(u=a,a=0):u=lr(u),g=g===e?a<u?1:-1:lr(g),lx(a,u,g,s)}}function Ko(s){return function(a,u){return typeof a=="string"&&typeof u=="string"||(a=En(a),u=En(u)),s(a,u)}}function pd(s,a,u,g,m,x,S,O,k,H){var Y=a&X,G=Y?S:e,Z=Y?e:S,at=Y?x:e,vt=Y?e:x;a|=Y?$:tt,a&=~(Y?tt:$),a&R||(a&=~(T|P));var Ot=[s,a,m,at,G,vt,Z,O,k,H],yt=u.apply(e,Ot);return ac(s)&&Ed(yt,Ot),yt.placeholder=g,Pd(yt,s,a)}function tc(s){var a=we[s];return function(u,g){if(u=En(u),g=g==null?0:Re(bt(g),292),g&&Pf(u)){var m=(Kt(u)+"e").split("e"),x=a(m[0]+"e"+(+m[1]+g));return m=(Kt(x)+"e").split("e"),+(m[0]+"e"+(+m[1]-g))}return a(u)}}var bx=Fi&&1/bo(new Fi([,-0]))[1]==xt?function(s){return new Fi(s)}:Cc;function md(s){return function(a){var u=Fe(a);return u==L?Dl(a):u==V?Hv(a):Lv(a,s(a))}}function ir(s,a,u,g,m,x,S,O){var k=a&P;if(!k&&typeof s!="function")throw new Cn(l);var H=g?g.length:0;if(H||(a&=~($|tt),g=m=e),S=S===e?S:Ce(bt(S),0),O=O===e?O:bt(O),H-=m?m.length:0,a&tt){var Y=g,G=m;g=m=e}var Z=k?e:rc(s),at=[s,a,u,g,m,Y,G,x,S,O];if(Z&&Wx(at,Z),s=at[0],a=at[1],u=at[2],g=at[3],m=at[4],O=at[9]=at[9]===e?k?0:s.length:Ce(at[9]-H,0),!O&&a&(X|B)&&(a&=~(X|B)),!a||a==T)var vt=wx(s,a,u);else a==X||a==B?vt=Cx(s,a,O):(a==$||a==(T|$))&&!m.length?vt=Sx(s,a,u,g):vt=Vo.apply(e,at);var Ot=Z?qf:Ed;return Pd(Ot(vt,at),s,a)}function _d(s,a,u,g){return s===e||kn(s,Ri[u])&&!qt.call(g,u)?a:s}function vd(s,a,u,g,m,x){return ue(s)&&ue(a)&&(x.set(a,s),Yo(s,a,e,vd,x),x.delete(a)),s}function Tx(s){return As(s)?e:s}function yd(s,a,u,g,m,x){var S=u&w,O=s.length,k=a.length;if(O!=k&&!(S&&k>O))return!1;var H=x.get(s),Y=x.get(a);if(H&&Y)return H==a&&Y==s;var G=-1,Z=!0,at=u&E?new ti:e;for(x.set(s,a),x.set(a,s);++G<O;){var vt=s[G],Ot=a[G];if(g)var yt=S?g(Ot,vt,G,a,s,x):g(vt,Ot,G,s,a,x);if(yt!==e){if(yt)continue;Z=!1;break}if(at){if(!bl(a,function(Rt,Wt){if(!ps(at,Wt)&&(vt===Rt||m(vt,Rt,u,g,x)))return at.push(Wt)})){Z=!1;break}}else if(!(vt===Ot||m(vt,Ot,u,g,x))){Z=!1;break}}return x.delete(s),x.delete(a),Z}function Ox(s,a,u,g,m,x,S){switch(u){case jt:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case zt:return!(s.byteLength!=a.byteLength||!x(new Do(s),new Do(a)));case et:case J:case j:return kn(+s,+a);case Bt:return s.name==a.name&&s.message==a.message;case q:case lt:return s==a+"";case L:var O=Dl;case V:var k=g&w;if(O||(O=bo),s.size!=a.size&&!k)return!1;var H=S.get(s);if(H)return H==a;g|=E,S.set(s,a);var Y=yd(O(s),O(a),g,m,x,S);return S.delete(s),Y;case it:if(xs)return xs.call(s)==xs.call(a)}return!1}function Ex(s,a,u,g,m,x){var S=u&w,O=ec(s),k=O.length,H=ec(a),Y=H.length;if(k!=Y&&!S)return!1;for(var G=k;G--;){var Z=O[G];if(!(S?Z in a:qt.call(a,Z)))return!1}var at=x.get(s),vt=x.get(a);if(at&&vt)return at==a&&vt==s;var Ot=!0;x.set(s,a),x.set(a,s);for(var yt=S;++G<k;){Z=O[G];var Rt=s[Z],Wt=a[Z];if(g)var pn=S?g(Wt,Rt,Z,a,s,x):g(Rt,Wt,Z,s,a,x);if(!(pn===e?Rt===Wt||m(Rt,Wt,u,g,x):pn)){Ot=!1;break}yt||(yt=Z=="constructor")}if(Ot&&!yt){var Ue=s.constructor,mn=a.constructor;Ue!=mn&&"constructor"in s&&"constructor"in a&&!(typeof Ue=="function"&&Ue instanceof Ue&&typeof mn=="function"&&mn instanceof mn)&&(Ot=!1)}return x.delete(s),x.delete(a),Ot}function sr(s){return cc(Td(s,e,Rd),s+"")}function ec(s){return Wf(s,be,sc)}function nc(s){return Wf(s,nn,xd)}var rc=Io?function(s){return Io.get(s)}:Cc;function qo(s){for(var a=s.name+"",u=Ii[a],g=qt.call(Ii,a)?u.length:0;g--;){var m=u[g],x=m.func;if(x==null||x==s)return m.name}return a}function Xi(s){var a=qt.call(y,"placeholder")?y:s;return a.placeholder}function mt(){var s=y.iteratee||xc;return s=s===xc?Yf:s,arguments.length?s(arguments[0],arguments[1]):s}function Jo(s,a){var u=s.__data__;return Fx(a)?u[typeof a=="string"?"string":"hash"]:u.map}function ic(s){for(var a=be(s),u=a.length;u--;){var g=a[u],m=s[g];a[u]=[g,m,Sd(m)]}return a}function ri(s,a){var u=jv(s,a);return Hf(u)?u:e}function Px(s){var a=qt.call(s,Zr),u=s[Zr];try{s[Zr]=e;var g=!0}catch{}var m=Po.call(s);return g&&(a?s[Zr]=u:delete s[Zr]),m}var sc=kl?function(s){return s==null?[]:(s=te(s),Tr(kl(s),function(a){return Of.call(s,a)}))}:Sc,xd=kl?function(s){for(var a=[];s;)Or(a,sc(s)),s=Mo(s);return a}:Sc,Fe=He;(Ll&&Fe(new Ll(new ArrayBuffer(1)))!=jt||_s&&Fe(new _s)!=L||Rl&&Fe(Rl.resolve())!=Q||Fi&&Fe(new Fi)!=V||vs&&Fe(new vs)!=_t)&&(Fe=function(s){var a=He(s),u=a==N?s.constructor:e,g=u?ii(u):"";if(g)switch(g){case hy:return jt;case uy:return L;case fy:return Q;case dy:return V;case gy:return _t}return a});function Ax(s,a,u){for(var g=-1,m=u.length;++g<m;){var x=u[g],S=x.size;switch(x.type){case"drop":s+=S;break;case"dropRight":a-=S;break;case"take":a=Re(a,s+S);break;case"takeRight":s=Ce(s,a-S);break}}return{start:s,end:a}}function Dx(s){var a=s.match(I_);return a?a[1].split(B_):[]}function wd(s,a,u){a=Mr(a,s);for(var g=-1,m=a.length,x=!1;++g<m;){var S=Gn(a[g]);if(!(x=s!=null&&u(s,S)))break;s=s[S]}return x||++g!=m?x:(m=s==null?0:s.length,!!m&&ia(m)&&or(S,m)&&(St(s)||si(s)))}function Mx(s){var a=s.length,u=new s.constructor(a);return a&&typeof s[0]=="string"&&qt.call(s,"index")&&(u.index=s.index,u.input=s.input),u}function Cd(s){return typeof s.constructor=="function"&&!Es(s)?Bi(Mo(s)):{}}function kx(s,a,u){var g=s.constructor;switch(a){case zt:return Zl(s);case et:case J:return new g(+s);case jt:return px(s,u);case ae:case Xe:case zn:case Oi:case tr:case Ei:case Pe:case Qe:case Pi:return id(s,u);case L:return new g;case j:case lt:return new g(s);case q:return mx(s);case V:return new g;case it:return _x(s)}}function Lx(s,a){var u=a.length;if(!u)return s;var g=u-1;return a[g]=(u>1?"& ":"")+a[g],a=a.join(u>2?", ":" "),s.replace(F_,`{
/* [wrapped with `+a+`] */
`)}function Rx(s){return St(s)||si(s)||!!(Ef&&s&&s[Ef])}function or(s,a){var u=typeof s;return a=a??pt,!!a&&(u=="number"||u!="symbol"&&V_.test(s))&&s>-1&&s%1==0&&s<a}function Ye(s,a,u){if(!ue(u))return!1;var g=typeof a;return(g=="number"?en(u)&&or(a,u.length):g=="string"&&a in u)?kn(u[a],s):!1}function oc(s,a){if(St(s))return!1;var u=typeof s;return u=="number"||u=="symbol"||u=="boolean"||s==null||gn(s)?!0:M_.test(s)||!D_.test(s)||a!=null&&s in te(a)}function Fx(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}function ac(s){var a=qo(s),u=y[a];if(typeof u!="function"||!(a in It.prototype))return!1;if(s===u)return!0;var g=rc(u);return!!g&&s===g[0]}function Ix(s){return!!Sf&&Sf in s}var Bx=Oo?ar:bc;function Es(s){var a=s&&s.constructor,u=typeof a=="function"&&a.prototype||Ri;return s===u}function Sd(s){return s===s&&!ue(s)}function bd(s,a){return function(u){return u==null?!1:u[s]===a&&(a!==e||s in te(u))}}function jx(s){var a=na(s,function(g){return u.size===f&&u.clear(),g}),u=a.cache;return a}function Wx(s,a){var u=s[1],g=a[1],m=u|g,x=m<(T|P|nt),S=g==nt&&u==X||g==nt&&u==st&&s[7].length<=a[8]||g==(nt|st)&&a[7].length<=a[8]&&u==X;if(!(x||S))return s;g&T&&(s[2]=a[2],m|=u&T?0:R);var O=a[3];if(O){var k=s[3];s[3]=k?od(k,O,a[4]):O,s[4]=k?Er(s[3],d):a[4]}return O=a[5],O&&(k=s[5],s[5]=k?ad(k,O,a[6]):O,s[6]=k?Er(s[5],d):a[6]),O=a[7],O&&(s[7]=O),g&nt&&(s[8]=s[8]==null?a[8]:Re(s[8],a[8])),s[9]==null&&(s[9]=a[9]),s[0]=a[0],s[1]=m,s}function Xx(s){var a=[];if(s!=null)for(var u in te(s))a.push(u);return a}function Hx(s){return Po.call(s)}function Td(s,a,u){return a=Ce(a===e?s.length-1:a,0),function(){for(var g=arguments,m=-1,x=Ce(g.length-a,0),S=I(x);++m<x;)S[m]=g[a+m];m=-1;for(var O=I(a+1);++m<a;)O[m]=g[m];return O[a]=u(S),un(s,this,O)}}function Od(s,a){return a.length<2?s:ni(s,Tn(a,0,-1))}function Yx(s,a){for(var u=s.length,g=Re(a.length,u),m=tn(s);g--;){var x=a[g];s[g]=or(x,u)?m[x]:e}return s}function lc(s,a){if(!(a==="constructor"&&typeof s[a]=="function")&&a!="__proto__")return s[a]}var Ed=Ad(qf),Ps=ry||function(s,a){return Ae.setTimeout(s,a)},cc=Ad(ux);function Pd(s,a,u){var g=a+"";return cc(s,Lx(g,Ux(Dx(g),u)))}function Ad(s){var a=0,u=0;return function(){var g=ay(),m=ct-(g-u);if(u=g,m>0){if(++a>=ot)return arguments[0]}else a=0;return s.apply(e,arguments)}}function Zo(s,a){var u=-1,g=s.length,m=g-1;for(a=a===e?g:a;++u<a;){var x=Nl(u,m),S=s[x];s[x]=s[u],s[u]=S}return s.length=a,s}var Dd=jx(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(k_,function(u,g,m,x){a.push(m?x.replace(X_,"$1"):g||u)}),a});function Gn(s){if(typeof s=="string"||gn(s))return s;var a=s+"";return a=="0"&&1/s==-xt?"-0":a}function ii(s){if(s!=null){try{return Eo.call(s)}catch{}try{return s+""}catch{}}return""}function Ux(s,a){return wn(Je,function(u){var g="_."+u[0];a&u[1]&&!Co(s,g)&&s.push(g)}),s.sort()}function Md(s){if(s instanceof It)return s.clone();var a=new Sn(s.__wrapped__,s.__chain__);return a.__actions__=tn(s.__actions__),a.__index__=s.__index__,a.__values__=s.__values__,a}function zx(s,a,u){(u?Ye(s,a,u):a===e)?a=1:a=Ce(bt(a),0);var g=s==null?0:s.length;if(!g||a<1)return[];for(var m=0,x=0,S=I(Ro(g/a));m<g;)S[x++]=Tn(s,m,m+=a);return S}function Nx(s){for(var a=-1,u=s==null?0:s.length,g=0,m=[];++a<u;){var x=s[a];x&&(m[g++]=x)}return m}function Vx(){var s=arguments.length;if(!s)return[];for(var a=I(s-1),u=arguments[0],g=s;g--;)a[g-1]=arguments[g];return Or(St(u)?tn(u):[u],De(a,1))}var Gx=At(function(s,a){return me(s)?Cs(s,De(a,1,me,!0)):[]}),$x=At(function(s,a){var u=On(a);return me(u)&&(u=e),me(s)?Cs(s,De(a,1,me,!0),mt(u,2)):[]}),Kx=At(function(s,a){var u=On(a);return me(u)&&(u=e),me(s)?Cs(s,De(a,1,me,!0),e,u):[]});function qx(s,a,u){var g=s==null?0:s.length;return g?(a=u||a===e?1:bt(a),Tn(s,a<0?0:a,g)):[]}function Jx(s,a,u){var g=s==null?0:s.length;return g?(a=u||a===e?1:bt(a),a=g-a,Tn(s,0,a<0?0:a)):[]}function Zx(s,a){return s&&s.length?zo(s,mt(a,3),!0,!0):[]}function Qx(s,a){return s&&s.length?zo(s,mt(a,3),!0):[]}function tw(s,a,u,g){var m=s==null?0:s.length;return m?(u&&typeof u!="number"&&Ye(s,a,u)&&(u=0,g=m),Vy(s,a,u,g)):[]}function kd(s,a,u){var g=s==null?0:s.length;if(!g)return-1;var m=u==null?0:bt(u);return m<0&&(m=Ce(g+m,0)),So(s,mt(a,3),m)}function Ld(s,a,u){var g=s==null?0:s.length;if(!g)return-1;var m=g-1;return u!==e&&(m=bt(u),m=u<0?Ce(g+m,0):Re(m,g-1)),So(s,mt(a,3),m,!0)}function Rd(s){var a=s==null?0:s.length;return a?De(s,1):[]}function ew(s){var a=s==null?0:s.length;return a?De(s,xt):[]}function nw(s,a){var u=s==null?0:s.length;return u?(a=a===e?1:bt(a),De(s,a)):[]}function rw(s){for(var a=-1,u=s==null?0:s.length,g={};++a<u;){var m=s[a];g[m[0]]=m[1]}return g}function Fd(s){return s&&s.length?s[0]:e}function iw(s,a,u){var g=s==null?0:s.length;if(!g)return-1;var m=u==null?0:bt(u);return m<0&&(m=Ce(g+m,0)),Di(s,a,m)}function sw(s){var a=s==null?0:s.length;return a?Tn(s,0,-1):[]}var ow=At(function(s){var a=le(s,ql);return a.length&&a[0]===s[0]?Xl(a):[]}),aw=At(function(s){var a=On(s),u=le(s,ql);return a===On(u)?a=e:u.pop(),u.length&&u[0]===s[0]?Xl(u,mt(a,2)):[]}),lw=At(function(s){var a=On(s),u=le(s,ql);return a=typeof a=="function"?a:e,a&&u.pop(),u.length&&u[0]===s[0]?Xl(u,e,a):[]});function cw(s,a){return s==null?"":sy.call(s,a)}function On(s){var a=s==null?0:s.length;return a?s[a-1]:e}function hw(s,a,u){var g=s==null?0:s.length;if(!g)return-1;var m=g;return u!==e&&(m=bt(u),m=m<0?Ce(g+m,0):Re(m,g-1)),a===a?Uv(s,a,m):So(s,pf,m,!0)}function uw(s,a){return s&&s.length?Vf(s,bt(a)):e}var fw=At(Id);function Id(s,a){return s&&s.length&&a&&a.length?zl(s,a):s}function dw(s,a,u){return s&&s.length&&a&&a.length?zl(s,a,mt(u,2)):s}function gw(s,a,u){return s&&s.length&&a&&a.length?zl(s,a,e,u):s}var pw=sr(function(s,a){var u=s==null?0:s.length,g=Il(s,a);return Kf(s,le(a,function(m){return or(m,u)?+m:m}).sort(sd)),g});function mw(s,a){var u=[];if(!(s&&s.length))return u;var g=-1,m=[],x=s.length;for(a=mt(a,3);++g<x;){var S=s[g];a(S,g,s)&&(u.push(S),m.push(g))}return Kf(s,m),u}function hc(s){return s==null?s:cy.call(s)}function _w(s,a,u){var g=s==null?0:s.length;return g?(u&&typeof u!="number"&&Ye(s,a,u)?(a=0,u=g):(a=a==null?0:bt(a),u=u===e?g:bt(u)),Tn(s,a,u)):[]}function vw(s,a){return Uo(s,a)}function yw(s,a,u){return Gl(s,a,mt(u,2))}function xw(s,a){var u=s==null?0:s.length;if(u){var g=Uo(s,a);if(g<u&&kn(s[g],a))return g}return-1}function ww(s,a){return Uo(s,a,!0)}function Cw(s,a,u){return Gl(s,a,mt(u,2),!0)}function Sw(s,a){var u=s==null?0:s.length;if(u){var g=Uo(s,a,!0)-1;if(kn(s[g],a))return g}return-1}function bw(s){return s&&s.length?Jf(s):[]}function Tw(s,a){return s&&s.length?Jf(s,mt(a,2)):[]}function Ow(s){var a=s==null?0:s.length;return a?Tn(s,1,a):[]}function Ew(s,a,u){return s&&s.length?(a=u||a===e?1:bt(a),Tn(s,0,a<0?0:a)):[]}function Pw(s,a,u){var g=s==null?0:s.length;return g?(a=u||a===e?1:bt(a),a=g-a,Tn(s,a<0?0:a,g)):[]}function Aw(s,a){return s&&s.length?zo(s,mt(a,3),!1,!0):[]}function Dw(s,a){return s&&s.length?zo(s,mt(a,3)):[]}var Mw=At(function(s){return Dr(De(s,1,me,!0))}),kw=At(function(s){var a=On(s);return me(a)&&(a=e),Dr(De(s,1,me,!0),mt(a,2))}),Lw=At(function(s){var a=On(s);return a=typeof a=="function"?a:e,Dr(De(s,1,me,!0),e,a)});function Rw(s){return s&&s.length?Dr(s):[]}function Fw(s,a){return s&&s.length?Dr(s,mt(a,2)):[]}function Iw(s,a){return a=typeof a=="function"?a:e,s&&s.length?Dr(s,e,a):[]}function uc(s){if(!(s&&s.length))return[];var a=0;return s=Tr(s,function(u){if(me(u))return a=Ce(u.length,a),!0}),Pl(a,function(u){return le(s,Tl(u))})}function Bd(s,a){if(!(s&&s.length))return[];var u=uc(s);return a==null?u:le(u,function(g){return un(a,e,g)})}var Bw=At(function(s,a){return me(s)?Cs(s,a):[]}),jw=At(function(s){return Kl(Tr(s,me))}),Ww=At(function(s){var a=On(s);return me(a)&&(a=e),Kl(Tr(s,me),mt(a,2))}),Xw=At(function(s){var a=On(s);return a=typeof a=="function"?a:e,Kl(Tr(s,me),e,a)}),Hw=At(uc);function Yw(s,a){return ed(s||[],a||[],ws)}function Uw(s,a){return ed(s||[],a||[],Ts)}var zw=At(function(s){var a=s.length,u=a>1?s[a-1]:e;return u=typeof u=="function"?(s.pop(),u):e,Bd(s,u)});function jd(s){var a=y(s);return a.__chain__=!0,a}function Nw(s,a){return a(s),s}function Qo(s,a){return a(s)}var Vw=sr(function(s){var a=s.length,u=a?s[0]:0,g=this.__wrapped__,m=function(x){return Il(x,s)};return a>1||this.__actions__.length||!(g instanceof It)||!or(u)?this.thru(m):(g=g.slice(u,+u+(a?1:0)),g.__actions__.push({func:Qo,args:[m],thisArg:e}),new Sn(g,this.__chain__).thru(function(x){return a&&!x.length&&x.push(e),x}))});function Gw(){return jd(this)}function $w(){return new Sn(this.value(),this.__chain__)}function Kw(){this.__values__===e&&(this.__values__=Zd(this.value()));var s=this.__index__>=this.__values__.length,a=s?e:this.__values__[this.__index__++];return{done:s,value:a}}function qw(){return this}function Jw(s){for(var a,u=this;u instanceof jo;){var g=Md(u);g.__index__=0,g.__values__=e,a?m.__wrapped__=g:a=g;var m=g;u=u.__wrapped__}return m.__wrapped__=s,a}function Zw(){var s=this.__wrapped__;if(s instanceof It){var a=s;return this.__actions__.length&&(a=new It(this)),a=a.reverse(),a.__actions__.push({func:Qo,args:[hc],thisArg:e}),new Sn(a,this.__chain__)}return this.thru(hc)}function Qw(){return td(this.__wrapped__,this.__actions__)}var tC=No(function(s,a,u){qt.call(s,u)?++s[u]:rr(s,u,1)});function eC(s,a,u){var g=St(s)?df:Ny;return u&&Ye(s,a,u)&&(a=e),g(s,mt(a,3))}function nC(s,a){var u=St(s)?Tr:Bf;return u(s,mt(a,3))}var rC=ud(kd),iC=ud(Ld);function sC(s,a){return De(ta(s,a),1)}function oC(s,a){return De(ta(s,a),xt)}function aC(s,a,u){return u=u===e?1:bt(u),De(ta(s,a),u)}function Wd(s,a){var u=St(s)?wn:Ar;return u(s,mt(a,3))}function Xd(s,a){var u=St(s)?Ov:If;return u(s,mt(a,3))}var lC=No(function(s,a,u){qt.call(s,u)?s[u].push(a):rr(s,u,[a])});function cC(s,a,u,g){s=en(s)?s:Yi(s),u=u&&!g?bt(u):0;var m=s.length;return u<0&&(u=Ce(m+u,0)),sa(s)?u<=m&&s.indexOf(a,u)>-1:!!m&&Di(s,a,u)>-1}var hC=At(function(s,a,u){var g=-1,m=typeof a=="function",x=en(s)?I(s.length):[];return Ar(s,function(S){x[++g]=m?un(a,S,u):Ss(S,a,u)}),x}),uC=No(function(s,a,u){rr(s,u,a)});function ta(s,a){var u=St(s)?le:Uf;return u(s,mt(a,3))}function fC(s,a,u,g){return s==null?[]:(St(a)||(a=a==null?[]:[a]),u=g?e:u,St(u)||(u=u==null?[]:[u]),Gf(s,a,u))}var dC=No(function(s,a,u){s[u?0:1].push(a)},function(){return[[],[]]});function gC(s,a,u){var g=St(s)?Sl:_f,m=arguments.length<3;return g(s,mt(a,4),u,m,Ar)}function pC(s,a,u){var g=St(s)?Ev:_f,m=arguments.length<3;return g(s,mt(a,4),u,m,If)}function mC(s,a){var u=St(s)?Tr:Bf;return u(s,ra(mt(a,3)))}function _C(s){var a=St(s)?kf:cx;return a(s)}function vC(s,a,u){(u?Ye(s,a,u):a===e)?a=1:a=bt(a);var g=St(s)?Xy:hx;return g(s,a)}function yC(s){var a=St(s)?Hy:fx;return a(s)}function xC(s){if(s==null)return 0;if(en(s))return sa(s)?ki(s):s.length;var a=Fe(s);return a==L||a==V?s.size:Yl(s).length}function wC(s,a,u){var g=St(s)?bl:dx;return u&&Ye(s,a,u)&&(a=e),g(s,mt(a,3))}var CC=At(function(s,a){if(s==null)return[];var u=a.length;return u>1&&Ye(s,a[0],a[1])?a=[]:u>2&&Ye(a[0],a[1],a[2])&&(a=[a[0]]),Gf(s,De(a,1),[])}),ea=ny||function(){return Ae.Date.now()};function SC(s,a){if(typeof a!="function")throw new Cn(l);return s=bt(s),function(){if(--s<1)return a.apply(this,arguments)}}function Hd(s,a,u){return a=u?e:a,a=s&&a==null?s.length:a,ir(s,nt,e,e,e,e,a)}function Yd(s,a){var u;if(typeof a!="function")throw new Cn(l);return s=bt(s),function(){return--s>0&&(u=a.apply(this,arguments)),s<=1&&(a=e),u}}var fc=At(function(s,a,u){var g=T;if(u.length){var m=Er(u,Xi(fc));g|=$}return ir(s,g,a,u,m)}),Ud=At(function(s,a,u){var g=T|P;if(u.length){var m=Er(u,Xi(Ud));g|=$}return ir(a,g,s,u,m)});function zd(s,a,u){a=u?e:a;var g=ir(s,X,e,e,e,e,e,a);return g.placeholder=zd.placeholder,g}function Nd(s,a,u){a=u?e:a;var g=ir(s,B,e,e,e,e,e,a);return g.placeholder=Nd.placeholder,g}function Vd(s,a,u){var g,m,x,S,O,k,H=0,Y=!1,G=!1,Z=!0;if(typeof s!="function")throw new Cn(l);a=En(a)||0,ue(u)&&(Y=!!u.leading,G="maxWait"in u,x=G?Ce(En(u.maxWait)||0,a):x,Z="trailing"in u?!!u.trailing:Z);function at(_e){var Ln=g,cr=m;return g=m=e,H=_e,S=s.apply(cr,Ln),S}function vt(_e){return H=_e,O=Ps(Rt,a),Y?at(_e):S}function Ot(_e){var Ln=_e-k,cr=_e-H,ug=a-Ln;return G?Re(ug,x-cr):ug}function yt(_e){var Ln=_e-k,cr=_e-H;return k===e||Ln>=a||Ln<0||G&&cr>=x}function Rt(){var _e=ea();if(yt(_e))return Wt(_e);O=Ps(Rt,Ot(_e))}function Wt(_e){return O=e,Z&&g?at(_e):(g=m=e,S)}function pn(){O!==e&&nd(O),H=0,g=k=m=O=e}function Ue(){return O===e?S:Wt(ea())}function mn(){var _e=ea(),Ln=yt(_e);if(g=arguments,m=this,k=_e,Ln){if(O===e)return vt(k);if(G)return nd(O),O=Ps(Rt,a),at(k)}return O===e&&(O=Ps(Rt,a)),S}return mn.cancel=pn,mn.flush=Ue,mn}var bC=At(function(s,a){return Ff(s,1,a)}),TC=At(function(s,a,u){return Ff(s,En(a)||0,u)});function OC(s){return ir(s,Dt)}function na(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new Cn(l);var u=function(){var g=arguments,m=a?a.apply(this,g):g[0],x=u.cache;if(x.has(m))return x.get(m);var S=s.apply(this,g);return u.cache=x.set(m,S)||x,S};return u.cache=new(na.Cache||nr),u}na.Cache=nr;function ra(s){if(typeof s!="function")throw new Cn(l);return function(){var a=arguments;switch(a.length){case 0:return!s.call(this);case 1:return!s.call(this,a[0]);case 2:return!s.call(this,a[0],a[1]);case 3:return!s.call(this,a[0],a[1],a[2])}return!s.apply(this,a)}}function EC(s){return Yd(2,s)}var PC=gx(function(s,a){a=a.length==1&&St(a[0])?le(a[0],fn(mt())):le(De(a,1),fn(mt()));var u=a.length;return At(function(g){for(var m=-1,x=Re(g.length,u);++m<x;)g[m]=a[m].call(this,g[m]);return un(s,this,g)})}),dc=At(function(s,a){var u=Er(a,Xi(dc));return ir(s,$,e,a,u)}),Gd=At(function(s,a){var u=Er(a,Xi(Gd));return ir(s,tt,e,a,u)}),AC=sr(function(s,a){return ir(s,st,e,e,e,a)});function DC(s,a){if(typeof s!="function")throw new Cn(l);return a=a===e?a:bt(a),At(s,a)}function MC(s,a){if(typeof s!="function")throw new Cn(l);return a=a==null?0:Ce(bt(a),0),At(function(u){var g=u[a],m=kr(u,0,a);return g&&Or(m,g),un(s,this,m)})}function kC(s,a,u){var g=!0,m=!0;if(typeof s!="function")throw new Cn(l);return ue(u)&&(g="leading"in u?!!u.leading:g,m="trailing"in u?!!u.trailing:m),Vd(s,a,{leading:g,maxWait:a,trailing:m})}function LC(s){return Hd(s,1)}function RC(s,a){return dc(Jl(a),s)}function FC(){if(!arguments.length)return[];var s=arguments[0];return St(s)?s:[s]}function IC(s){return bn(s,v)}function BC(s,a){return a=typeof a=="function"?a:e,bn(s,v,a)}function jC(s){return bn(s,p|v)}function WC(s,a){return a=typeof a=="function"?a:e,bn(s,p|v,a)}function XC(s,a){return a==null||Rf(s,a,be(a))}function kn(s,a){return s===a||s!==s&&a!==a}var HC=Ko(Wl),YC=Ko(function(s,a){return s>=a}),si=Xf(function(){return arguments}())?Xf:function(s){return de(s)&&qt.call(s,"callee")&&!Of.call(s,"callee")},St=I.isArray,UC=af?fn(af):Jy;function en(s){return s!=null&&ia(s.length)&&!ar(s)}function me(s){return de(s)&&en(s)}function zC(s){return s===!0||s===!1||de(s)&&He(s)==et}var Lr=iy||bc,NC=lf?fn(lf):Zy;function VC(s){return de(s)&&s.nodeType===1&&!As(s)}function GC(s){if(s==null)return!0;if(en(s)&&(St(s)||typeof s=="string"||typeof s.splice=="function"||Lr(s)||Hi(s)||si(s)))return!s.length;var a=Fe(s);if(a==L||a==V)return!s.size;if(Es(s))return!Yl(s).length;for(var u in s)if(qt.call(s,u))return!1;return!0}function $C(s,a){return bs(s,a)}function KC(s,a,u){u=typeof u=="function"?u:e;var g=u?u(s,a):e;return g===e?bs(s,a,e,u):!!g}function gc(s){if(!de(s))return!1;var a=He(s);return a==Bt||a==ut||typeof s.message=="string"&&typeof s.name=="string"&&!As(s)}function qC(s){return typeof s=="number"&&Pf(s)}function ar(s){if(!ue(s))return!1;var a=He(s);return a==C||a==b||a==U||a==K}function $d(s){return typeof s=="number"&&s==bt(s)}function ia(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=pt}function ue(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}function de(s){return s!=null&&typeof s=="object"}var Kd=cf?fn(cf):tx;function JC(s,a){return s===a||Hl(s,a,ic(a))}function ZC(s,a,u){return u=typeof u=="function"?u:e,Hl(s,a,ic(a),u)}function QC(s){return qd(s)&&s!=+s}function t1(s){if(Bx(s))throw new Ct(o);return Hf(s)}function e1(s){return s===null}function n1(s){return s==null}function qd(s){return typeof s=="number"||de(s)&&He(s)==j}function As(s){if(!de(s)||He(s)!=N)return!1;var a=Mo(s);if(a===null)return!0;var u=qt.call(a,"constructor")&&a.constructor;return typeof u=="function"&&u instanceof u&&Eo.call(u)==Zv}var pc=hf?fn(hf):ex;function r1(s){return $d(s)&&s>=-pt&&s<=pt}var Jd=uf?fn(uf):nx;function sa(s){return typeof s=="string"||!St(s)&&de(s)&&He(s)==lt}function gn(s){return typeof s=="symbol"||de(s)&&He(s)==it}var Hi=ff?fn(ff):rx;function i1(s){return s===e}function s1(s){return de(s)&&Fe(s)==_t}function o1(s){return de(s)&&He(s)==kt}var a1=Ko(Ul),l1=Ko(function(s,a){return s<=a});function Zd(s){if(!s)return[];if(en(s))return sa(s)?Dn(s):tn(s);if(ms&&s[ms])return Xv(s[ms]());var a=Fe(s),u=a==L?Dl:a==V?bo:Yi;return u(s)}function lr(s){if(!s)return s===0?s:0;if(s=En(s),s===xt||s===-xt){var a=s<0?-1:1;return a*Le}return s===s?s:0}function bt(s){var a=lr(s),u=a%1;return a===a?u?a-u:a:0}function Qd(s){return s?ei(bt(s),0,Ht):0}function En(s){if(typeof s=="number")return s;if(gn(s))return Ft;if(ue(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=ue(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=vf(s);var u=U_.test(s);return u||N_.test(s)?Sv(s.slice(2),u?2:8):Y_.test(s)?Ft:+s}function tg(s){return Vn(s,nn(s))}function c1(s){return s?ei(bt(s),-pt,pt):s===0?s:0}function Kt(s){return s==null?"":dn(s)}var h1=ji(function(s,a){if(Es(a)||en(a)){Vn(a,be(a),s);return}for(var u in a)qt.call(a,u)&&ws(s,u,a[u])}),eg=ji(function(s,a){Vn(a,nn(a),s)}),oa=ji(function(s,a,u,g){Vn(a,nn(a),s,g)}),u1=ji(function(s,a,u,g){Vn(a,be(a),s,g)}),f1=sr(Il);function d1(s,a){var u=Bi(s);return a==null?u:Lf(u,a)}var g1=At(function(s,a){s=te(s);var u=-1,g=a.length,m=g>2?a[2]:e;for(m&&Ye(a[0],a[1],m)&&(g=1);++u<g;)for(var x=a[u],S=nn(x),O=-1,k=S.length;++O<k;){var H=S[O],Y=s[H];(Y===e||kn(Y,Ri[H])&&!qt.call(s,H))&&(s[H]=x[H])}return s}),p1=At(function(s){return s.push(e,vd),un(ng,e,s)});function m1(s,a){return gf(s,mt(a,3),Nn)}function _1(s,a){return gf(s,mt(a,3),jl)}function v1(s,a){return s==null?s:Bl(s,mt(a,3),nn)}function y1(s,a){return s==null?s:jf(s,mt(a,3),nn)}function x1(s,a){return s&&Nn(s,mt(a,3))}function w1(s,a){return s&&jl(s,mt(a,3))}function C1(s){return s==null?[]:Ho(s,be(s))}function S1(s){return s==null?[]:Ho(s,nn(s))}function mc(s,a,u){var g=s==null?e:ni(s,a);return g===e?u:g}function b1(s,a){return s!=null&&wd(s,a,Gy)}function _c(s,a){return s!=null&&wd(s,a,$y)}var T1=dd(function(s,a,u){a!=null&&typeof a.toString!="function"&&(a=Po.call(a)),s[a]=u},yc(rn)),O1=dd(function(s,a,u){a!=null&&typeof a.toString!="function"&&(a=Po.call(a)),qt.call(s,a)?s[a].push(u):s[a]=[u]},mt),E1=At(Ss);function be(s){return en(s)?Mf(s):Yl(s)}function nn(s){return en(s)?Mf(s,!0):ix(s)}function P1(s,a){var u={};return a=mt(a,3),Nn(s,function(g,m,x){rr(u,a(g,m,x),g)}),u}function A1(s,a){var u={};return a=mt(a,3),Nn(s,function(g,m,x){rr(u,m,a(g,m,x))}),u}var D1=ji(function(s,a,u){Yo(s,a,u)}),ng=ji(function(s,a,u,g){Yo(s,a,u,g)}),M1=sr(function(s,a){var u={};if(s==null)return u;var g=!1;a=le(a,function(x){return x=Mr(x,s),g||(g=x.length>1),x}),Vn(s,nc(s),u),g&&(u=bn(u,p|_|v,Tx));for(var m=a.length;m--;)$l(u,a[m]);return u});function k1(s,a){return rg(s,ra(mt(a)))}var L1=sr(function(s,a){return s==null?{}:ox(s,a)});function rg(s,a){if(s==null)return{};var u=le(nc(s),function(g){return[g]});return a=mt(a),$f(s,u,function(g,m){return a(g,m[0])})}function R1(s,a,u){a=Mr(a,s);var g=-1,m=a.length;for(m||(m=1,s=e);++g<m;){var x=s==null?e:s[Gn(a[g])];x===e&&(g=m,x=u),s=ar(x)?x.call(s):x}return s}function F1(s,a,u){return s==null?s:Ts(s,a,u)}function I1(s,a,u,g){return g=typeof g=="function"?g:e,s==null?s:Ts(s,a,u,g)}var ig=md(be),sg=md(nn);function B1(s,a,u){var g=St(s),m=g||Lr(s)||Hi(s);if(a=mt(a,4),u==null){var x=s&&s.constructor;m?u=g?new x:[]:ue(s)?u=ar(x)?Bi(Mo(s)):{}:u={}}return(m?wn:Nn)(s,function(S,O,k){return a(u,S,O,k)}),u}function j1(s,a){return s==null?!0:$l(s,a)}function W1(s,a,u){return s==null?s:Qf(s,a,Jl(u))}function X1(s,a,u,g){return g=typeof g=="function"?g:e,s==null?s:Qf(s,a,Jl(u),g)}function Yi(s){return s==null?[]:Al(s,be(s))}function H1(s){return s==null?[]:Al(s,nn(s))}function Y1(s,a,u){return u===e&&(u=a,a=e),u!==e&&(u=En(u),u=u===u?u:0),a!==e&&(a=En(a),a=a===a?a:0),ei(En(s),a,u)}function U1(s,a,u){return a=lr(a),u===e?(u=a,a=0):u=lr(u),s=En(s),Ky(s,a,u)}function z1(s,a,u){if(u&&typeof u!="boolean"&&Ye(s,a,u)&&(a=u=e),u===e&&(typeof a=="boolean"?(u=a,a=e):typeof s=="boolean"&&(u=s,s=e)),s===e&&a===e?(s=0,a=1):(s=lr(s),a===e?(a=s,s=0):a=lr(a)),s>a){var g=s;s=a,a=g}if(u||s%1||a%1){var m=Af();return Re(s+m*(a-s+Cv("1e-"+((m+"").length-1))),a)}return Nl(s,a)}var N1=Wi(function(s,a,u){return a=a.toLowerCase(),s+(u?og(a):a)});function og(s){return vc(Kt(s).toLowerCase())}function ag(s){return s=Kt(s),s&&s.replace(G_,Fv).replace(fv,"")}function V1(s,a,u){s=Kt(s),a=dn(a);var g=s.length;u=u===e?g:ei(bt(u),0,g);var m=u;return u-=a.length,u>=0&&s.slice(u,m)==a}function G1(s){return s=Kt(s),s&&E_.test(s)?s.replace(Bu,Iv):s}function $1(s){return s=Kt(s),s&&L_.test(s)?s.replace(dl,"\\$&"):s}var K1=Wi(function(s,a,u){return s+(u?"-":"")+a.toLowerCase()}),q1=Wi(function(s,a,u){return s+(u?" ":"")+a.toLowerCase()}),J1=hd("toLowerCase");function Z1(s,a,u){s=Kt(s),a=bt(a);var g=a?ki(s):0;if(!a||g>=a)return s;var m=(a-g)/2;return $o(Fo(m),u)+s+$o(Ro(m),u)}function Q1(s,a,u){s=Kt(s),a=bt(a);var g=a?ki(s):0;return a&&g<a?s+$o(a-g,u):s}function tS(s,a,u){s=Kt(s),a=bt(a);var g=a?ki(s):0;return a&&g<a?$o(a-g,u)+s:s}function eS(s,a,u){return u||a==null?a=0:a&&(a=+a),ly(Kt(s).replace(gl,""),a||0)}function nS(s,a,u){return(u?Ye(s,a,u):a===e)?a=1:a=bt(a),Vl(Kt(s),a)}function rS(){var s=arguments,a=Kt(s[0]);return s.length<3?a:a.replace(s[1],s[2])}var iS=Wi(function(s,a,u){return s+(u?"_":"")+a.toLowerCase()});function sS(s,a,u){return u&&typeof u!="number"&&Ye(s,a,u)&&(a=u=e),u=u===e?Ht:u>>>0,u?(s=Kt(s),s&&(typeof a=="string"||a!=null&&!pc(a))&&(a=dn(a),!a&&Mi(s))?kr(Dn(s),0,u):s.split(a,u)):[]}var oS=Wi(function(s,a,u){return s+(u?" ":"")+vc(a)});function aS(s,a,u){return s=Kt(s),u=u==null?0:ei(bt(u),0,s.length),a=dn(a),s.slice(u,u+a.length)==a}function lS(s,a,u){var g=y.templateSettings;u&&Ye(s,a,u)&&(a=e),s=Kt(s),a=oa({},a,g,_d);var m=oa({},a.imports,g.imports,_d),x=be(m),S=Al(m,x),O,k,H=0,Y=a.interpolate||yo,G="__p += '",Z=Ml((a.escape||yo).source+"|"+Y.source+"|"+(Y===ju?H_:yo).source+"|"+(a.evaluate||yo).source+"|$","g"),at="//# sourceURL="+(qt.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_v+"]")+`
`;s.replace(Z,function(yt,Rt,Wt,pn,Ue,mn){return Wt||(Wt=pn),G+=s.slice(H,mn).replace($_,Bv),Rt&&(O=!0,G+=`' +
__e(`+Rt+`) +
'`),Ue&&(k=!0,G+=`';
`+Ue+`;
__p += '`),Wt&&(G+=`' +
((__t = (`+Wt+`)) == null ? '' : __t) +
'`),H=mn+yt.length,yt}),G+=`';
`;var vt=qt.call(a,"variable")&&a.variable;if(!vt)G=`with (obj) {
`+G+`
}
`;else if(W_.test(vt))throw new Ct(c);G=(k?G.replace(S_,""):G).replace(b_,"$1").replace(T_,"$1;"),G="function("+(vt||"obj")+`) {
`+(vt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(O?", __e = _.escape":"")+(k?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+G+`return __p
}`;var Ot=cg(function(){return Gt(x,at+"return "+G).apply(e,S)});if(Ot.source=G,gc(Ot))throw Ot;return Ot}function cS(s){return Kt(s).toLowerCase()}function hS(s){return Kt(s).toUpperCase()}function uS(s,a,u){if(s=Kt(s),s&&(u||a===e))return vf(s);if(!s||!(a=dn(a)))return s;var g=Dn(s),m=Dn(a),x=yf(g,m),S=xf(g,m)+1;return kr(g,x,S).join("")}function fS(s,a,u){if(s=Kt(s),s&&(u||a===e))return s.slice(0,Cf(s)+1);if(!s||!(a=dn(a)))return s;var g=Dn(s),m=xf(g,Dn(a))+1;return kr(g,0,m).join("")}function dS(s,a,u){if(s=Kt(s),s&&(u||a===e))return s.replace(gl,"");if(!s||!(a=dn(a)))return s;var g=Dn(s),m=yf(g,Dn(a));return kr(g,m).join("")}function gS(s,a){var u=Pt,g=Zt;if(ue(a)){var m="separator"in a?a.separator:m;u="length"in a?bt(a.length):u,g="omission"in a?dn(a.omission):g}s=Kt(s);var x=s.length;if(Mi(s)){var S=Dn(s);x=S.length}if(u>=x)return s;var O=u-ki(g);if(O<1)return g;var k=S?kr(S,0,O).join(""):s.slice(0,O);if(m===e)return k+g;if(S&&(O+=k.length-O),pc(m)){if(s.slice(O).search(m)){var H,Y=k;for(m.global||(m=Ml(m.source,Kt(Wu.exec(m))+"g")),m.lastIndex=0;H=m.exec(Y);)var G=H.index;k=k.slice(0,G===e?O:G)}}else if(s.indexOf(dn(m),O)!=O){var Z=k.lastIndexOf(m);Z>-1&&(k=k.slice(0,Z))}return k+g}function pS(s){return s=Kt(s),s&&O_.test(s)?s.replace(Iu,zv):s}var mS=Wi(function(s,a,u){return s+(u?" ":"")+a.toUpperCase()}),vc=hd("toUpperCase");function lg(s,a,u){return s=Kt(s),a=u?e:a,a===e?Wv(s)?Gv(s):Dv(s):s.match(a)||[]}var cg=At(function(s,a){try{return un(s,e,a)}catch(u){return gc(u)?u:new Ct(u)}}),_S=sr(function(s,a){return wn(a,function(u){u=Gn(u),rr(s,u,fc(s[u],s))}),s});function vS(s){var a=s==null?0:s.length,u=mt();return s=a?le(s,function(g){if(typeof g[1]!="function")throw new Cn(l);return[u(g[0]),g[1]]}):[],At(function(g){for(var m=-1;++m<a;){var x=s[m];if(un(x[0],this,g))return un(x[1],this,g)}})}function yS(s){return zy(bn(s,p))}function yc(s){return function(){return s}}function xS(s,a){return s==null||s!==s?a:s}var wS=fd(),CS=fd(!0);function rn(s){return s}function xc(s){return Yf(typeof s=="function"?s:bn(s,p))}function SS(s){return zf(bn(s,p))}function bS(s,a){return Nf(s,bn(a,p))}var TS=At(function(s,a){return function(u){return Ss(u,s,a)}}),OS=At(function(s,a){return function(u){return Ss(s,u,a)}});function wc(s,a,u){var g=be(a),m=Ho(a,g);u==null&&!(ue(a)&&(m.length||!g.length))&&(u=a,a=s,s=this,m=Ho(a,be(a)));var x=!(ue(u)&&"chain"in u)||!!u.chain,S=ar(s);return wn(m,function(O){var k=a[O];s[O]=k,S&&(s.prototype[O]=function(){var H=this.__chain__;if(x||H){var Y=s(this.__wrapped__),G=Y.__actions__=tn(this.__actions__);return G.push({func:k,args:arguments,thisArg:s}),Y.__chain__=H,Y}return k.apply(s,Or([this.value()],arguments))})}),s}function ES(){return Ae._===this&&(Ae._=Qv),this}function Cc(){}function PS(s){return s=bt(s),At(function(a){return Vf(a,s)})}var AS=Ql(le),DS=Ql(df),MS=Ql(bl);function hg(s){return oc(s)?Tl(Gn(s)):ax(s)}function kS(s){return function(a){return s==null?e:ni(s,a)}}var LS=gd(),RS=gd(!0);function Sc(){return[]}function bc(){return!1}function FS(){return{}}function IS(){return""}function BS(){return!0}function jS(s,a){if(s=bt(s),s<1||s>pt)return[];var u=Ht,g=Re(s,Ht);a=mt(a),s-=Ht;for(var m=Pl(g,a);++u<s;)a(u);return m}function WS(s){return St(s)?le(s,Gn):gn(s)?[s]:tn(Dd(Kt(s)))}function XS(s){var a=++Jv;return Kt(s)+a}var HS=Go(function(s,a){return s+a},0),YS=tc("ceil"),US=Go(function(s,a){return s/a},1),zS=tc("floor");function NS(s){return s&&s.length?Xo(s,rn,Wl):e}function VS(s,a){return s&&s.length?Xo(s,mt(a,2),Wl):e}function GS(s){return mf(s,rn)}function $S(s,a){return mf(s,mt(a,2))}function KS(s){return s&&s.length?Xo(s,rn,Ul):e}function qS(s,a){return s&&s.length?Xo(s,mt(a,2),Ul):e}var JS=Go(function(s,a){return s*a},1),ZS=tc("round"),QS=Go(function(s,a){return s-a},0);function tb(s){return s&&s.length?El(s,rn):0}function eb(s,a){return s&&s.length?El(s,mt(a,2)):0}return y.after=SC,y.ary=Hd,y.assign=h1,y.assignIn=eg,y.assignInWith=oa,y.assignWith=u1,y.at=f1,y.before=Yd,y.bind=fc,y.bindAll=_S,y.bindKey=Ud,y.castArray=FC,y.chain=jd,y.chunk=zx,y.compact=Nx,y.concat=Vx,y.cond=vS,y.conforms=yS,y.constant=yc,y.countBy=tC,y.create=d1,y.curry=zd,y.curryRight=Nd,y.debounce=Vd,y.defaults=g1,y.defaultsDeep=p1,y.defer=bC,y.delay=TC,y.difference=Gx,y.differenceBy=$x,y.differenceWith=Kx,y.drop=qx,y.dropRight=Jx,y.dropRightWhile=Zx,y.dropWhile=Qx,y.fill=tw,y.filter=nC,y.flatMap=sC,y.flatMapDeep=oC,y.flatMapDepth=aC,y.flatten=Rd,y.flattenDeep=ew,y.flattenDepth=nw,y.flip=OC,y.flow=wS,y.flowRight=CS,y.fromPairs=rw,y.functions=C1,y.functionsIn=S1,y.groupBy=lC,y.initial=sw,y.intersection=ow,y.intersectionBy=aw,y.intersectionWith=lw,y.invert=T1,y.invertBy=O1,y.invokeMap=hC,y.iteratee=xc,y.keyBy=uC,y.keys=be,y.keysIn=nn,y.map=ta,y.mapKeys=P1,y.mapValues=A1,y.matches=SS,y.matchesProperty=bS,y.memoize=na,y.merge=D1,y.mergeWith=ng,y.method=TS,y.methodOf=OS,y.mixin=wc,y.negate=ra,y.nthArg=PS,y.omit=M1,y.omitBy=k1,y.once=EC,y.orderBy=fC,y.over=AS,y.overArgs=PC,y.overEvery=DS,y.overSome=MS,y.partial=dc,y.partialRight=Gd,y.partition=dC,y.pick=L1,y.pickBy=rg,y.property=hg,y.propertyOf=kS,y.pull=fw,y.pullAll=Id,y.pullAllBy=dw,y.pullAllWith=gw,y.pullAt=pw,y.range=LS,y.rangeRight=RS,y.rearg=AC,y.reject=mC,y.remove=mw,y.rest=DC,y.reverse=hc,y.sampleSize=vC,y.set=F1,y.setWith=I1,y.shuffle=yC,y.slice=_w,y.sortBy=CC,y.sortedUniq=bw,y.sortedUniqBy=Tw,y.split=sS,y.spread=MC,y.tail=Ow,y.take=Ew,y.takeRight=Pw,y.takeRightWhile=Aw,y.takeWhile=Dw,y.tap=Nw,y.throttle=kC,y.thru=Qo,y.toArray=Zd,y.toPairs=ig,y.toPairsIn=sg,y.toPath=WS,y.toPlainObject=tg,y.transform=B1,y.unary=LC,y.union=Mw,y.unionBy=kw,y.unionWith=Lw,y.uniq=Rw,y.uniqBy=Fw,y.uniqWith=Iw,y.unset=j1,y.unzip=uc,y.unzipWith=Bd,y.update=W1,y.updateWith=X1,y.values=Yi,y.valuesIn=H1,y.without=Bw,y.words=lg,y.wrap=RC,y.xor=jw,y.xorBy=Ww,y.xorWith=Xw,y.zip=Hw,y.zipObject=Yw,y.zipObjectDeep=Uw,y.zipWith=zw,y.entries=ig,y.entriesIn=sg,y.extend=eg,y.extendWith=oa,wc(y,y),y.add=HS,y.attempt=cg,y.camelCase=N1,y.capitalize=og,y.ceil=YS,y.clamp=Y1,y.clone=IC,y.cloneDeep=jC,y.cloneDeepWith=WC,y.cloneWith=BC,y.conformsTo=XC,y.deburr=ag,y.defaultTo=xS,y.divide=US,y.endsWith=V1,y.eq=kn,y.escape=G1,y.escapeRegExp=$1,y.every=eC,y.find=rC,y.findIndex=kd,y.findKey=m1,y.findLast=iC,y.findLastIndex=Ld,y.findLastKey=_1,y.floor=zS,y.forEach=Wd,y.forEachRight=Xd,y.forIn=v1,y.forInRight=y1,y.forOwn=x1,y.forOwnRight=w1,y.get=mc,y.gt=HC,y.gte=YC,y.has=b1,y.hasIn=_c,y.head=Fd,y.identity=rn,y.includes=cC,y.indexOf=iw,y.inRange=U1,y.invoke=E1,y.isArguments=si,y.isArray=St,y.isArrayBuffer=UC,y.isArrayLike=en,y.isArrayLikeObject=me,y.isBoolean=zC,y.isBuffer=Lr,y.isDate=NC,y.isElement=VC,y.isEmpty=GC,y.isEqual=$C,y.isEqualWith=KC,y.isError=gc,y.isFinite=qC,y.isFunction=ar,y.isInteger=$d,y.isLength=ia,y.isMap=Kd,y.isMatch=JC,y.isMatchWith=ZC,y.isNaN=QC,y.isNative=t1,y.isNil=n1,y.isNull=e1,y.isNumber=qd,y.isObject=ue,y.isObjectLike=de,y.isPlainObject=As,y.isRegExp=pc,y.isSafeInteger=r1,y.isSet=Jd,y.isString=sa,y.isSymbol=gn,y.isTypedArray=Hi,y.isUndefined=i1,y.isWeakMap=s1,y.isWeakSet=o1,y.join=cw,y.kebabCase=K1,y.last=On,y.lastIndexOf=hw,y.lowerCase=q1,y.lowerFirst=J1,y.lt=a1,y.lte=l1,y.max=NS,y.maxBy=VS,y.mean=GS,y.meanBy=$S,y.min=KS,y.minBy=qS,y.stubArray=Sc,y.stubFalse=bc,y.stubObject=FS,y.stubString=IS,y.stubTrue=BS,y.multiply=JS,y.nth=uw,y.noConflict=ES,y.noop=Cc,y.now=ea,y.pad=Z1,y.padEnd=Q1,y.padStart=tS,y.parseInt=eS,y.random=z1,y.reduce=gC,y.reduceRight=pC,y.repeat=nS,y.replace=rS,y.result=R1,y.round=ZS,y.runInContext=A,y.sample=_C,y.size=xC,y.snakeCase=iS,y.some=wC,y.sortedIndex=vw,y.sortedIndexBy=yw,y.sortedIndexOf=xw,y.sortedLastIndex=ww,y.sortedLastIndexBy=Cw,y.sortedLastIndexOf=Sw,y.startCase=oS,y.startsWith=aS,y.subtract=QS,y.sum=tb,y.sumBy=eb,y.template=lS,y.times=jS,y.toFinite=lr,y.toInteger=bt,y.toLength=Qd,y.toLower=cS,y.toNumber=En,y.toSafeInteger=c1,y.toString=Kt,y.toUpper=hS,y.trim=uS,y.trimEnd=fS,y.trimStart=dS,y.truncate=gS,y.unescape=pS,y.uniqueId=XS,y.upperCase=mS,y.upperFirst=vc,y.each=Wd,y.eachRight=Xd,y.first=Fd,wc(y,function(){var s={};return Nn(y,function(a,u){qt.call(y.prototype,u)||(s[u]=a)}),s}(),{chain:!1}),y.VERSION=n,wn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){y[s].placeholder=y}),wn(["drop","take"],function(s,a){It.prototype[s]=function(u){u=u===e?1:Ce(bt(u),0);var g=this.__filtered__&&!a?new It(this):this.clone();return g.__filtered__?g.__takeCount__=Re(u,g.__takeCount__):g.__views__.push({size:Re(u,Ht),type:s+(g.__dir__<0?"Right":"")}),g},It.prototype[s+"Right"]=function(u){return this.reverse()[s](u).reverse()}}),wn(["filter","map","takeWhile"],function(s,a){var u=a+1,g=u==ht||u==Mt;It.prototype[s]=function(m){var x=this.clone();return x.__iteratees__.push({iteratee:mt(m,3),type:u}),x.__filtered__=x.__filtered__||g,x}}),wn(["head","last"],function(s,a){var u="take"+(a?"Right":"");It.prototype[s]=function(){return this[u](1).value()[0]}}),wn(["initial","tail"],function(s,a){var u="drop"+(a?"":"Right");It.prototype[s]=function(){return this.__filtered__?new It(this):this[u](1)}}),It.prototype.compact=function(){return this.filter(rn)},It.prototype.find=function(s){return this.filter(s).head()},It.prototype.findLast=function(s){return this.reverse().find(s)},It.prototype.invokeMap=At(function(s,a){return typeof s=="function"?new It(this):this.map(function(u){return Ss(u,s,a)})}),It.prototype.reject=function(s){return this.filter(ra(mt(s)))},It.prototype.slice=function(s,a){s=bt(s);var u=this;return u.__filtered__&&(s>0||a<0)?new It(u):(s<0?u=u.takeRight(-s):s&&(u=u.drop(s)),a!==e&&(a=bt(a),u=a<0?u.dropRight(-a):u.take(a-s)),u)},It.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},It.prototype.toArray=function(){return this.take(Ht)},Nn(It.prototype,function(s,a){var u=/^(?:filter|find|map|reject)|While$/.test(a),g=/^(?:head|last)$/.test(a),m=y[g?"take"+(a=="last"?"Right":""):a],x=g||/^find/.test(a);m&&(y.prototype[a]=function(){var S=this.__wrapped__,O=g?[1]:arguments,k=S instanceof It,H=O[0],Y=k||St(S),G=function(Rt){var Wt=m.apply(y,Or([Rt],O));return g&&Z?Wt[0]:Wt};Y&&u&&typeof H=="function"&&H.length!=1&&(k=Y=!1);var Z=this.__chain__,at=!!this.__actions__.length,vt=x&&!Z,Ot=k&&!at;if(!x&&Y){S=Ot?S:new It(this);var yt=s.apply(S,O);return yt.__actions__.push({func:Qo,args:[G],thisArg:e}),new Sn(yt,Z)}return vt&&Ot?s.apply(this,O):(yt=this.thru(G),vt?g?yt.value()[0]:yt.value():yt)})}),wn(["pop","push","shift","sort","splice","unshift"],function(s){var a=To[s],u=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",g=/^(?:pop|shift)$/.test(s);y.prototype[s]=function(){var m=arguments;if(g&&!this.__chain__){var x=this.value();return a.apply(St(x)?x:[],m)}return this[u](function(S){return a.apply(St(S)?S:[],m)})}}),Nn(It.prototype,function(s,a){var u=y[a];if(u){var g=u.name+"";qt.call(Ii,g)||(Ii[g]=[]),Ii[g].push({name:a,func:u})}}),Ii[Vo(e,P).name]=[{name:"wrapper",func:e}],It.prototype.clone=py,It.prototype.reverse=my,It.prototype.value=_y,y.prototype.at=Vw,y.prototype.chain=Gw,y.prototype.commit=$w,y.prototype.next=Kw,y.prototype.plant=Jw,y.prototype.reverse=Zw,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=Qw,y.prototype.first=y.prototype.head,ms&&(y.prototype[ms]=qw),y},Li=$v();Jr?((Jr.exports=Li)._=Li,xl._=Li):Ae._=Li}).call(Rs)})(Ya,Ya.exports);var PM=Ya.exports,AM=["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(;\\s+wv|Version/\\d.\\d\\s+Chrome/\\d+(\\.0){3})","Linux; U; Android"],DM=AM,MM=new RegExp("("+DM.join("|")+")","ig"),kM=function(t){return!!t.match(MM)};const LM=EM(kM),RM={class:"flex gap-3 justify-between items-center p-3 fixed bottom-0 sm:top-0 sm:bottom-auto right-0 z-10"},FM={class:"flex flex-row gap-3 sm:gap-2 flex-wrap justify-end"},IM={class:"flex gap-2 items-center"},BM=ge("img",{class:"h-4",src:FE},null,-1),jM={class:"flex items-center gap-3 sm:gap-2"},WM={key:0,class:"fixed left-3 z-10 translate-y-1/2 bottom-1/2"},XM=ge("svg",{xmlns:"http://www.w3.org/2000/svg",width:"9",height:"16",viewBox:"0 0 9 16",fill:"none",class:"text-gray-400"},[ge("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.707077 15.9961L8.69926 8.00395L7.99216 7.29684L-2.97672e-05 15.289L0.707077 15.9961Z",fill:"currentColor"}),ge("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.69929 7.99219L0.707107 7.7486e-07L0 0.707108L7.99219 8.69929L8.69929 7.99219Z",fill:"currentColor"})],-1),HM={class:"flex relative"},YM={class:"h-screen absolute flex flex-col offset-0 z-10 border border-r w-[220px] bg-white/90"},UM={class:"flex flex-wrap gap-2 p-2"},zM={class:"overflow-auto h-full"},NM=["src"],VM=["onDragover"],GM=xi({__name:"TheConstructor",setup(r){const t=ur(null),e=ur(null),n=ur(!0),i=ur([]),o=ur(!0);let l;const c=ur([]),h="",f=!1,d=ur(),p=!LM(navigator.userAgent);console.log("constructor: is dev mode",f);const _=Ge(()=>i.value.length?c.value.filter(ot=>Array.isArray(ot.category)?ot.category.some(ct=>i.value.includes(ct)):i.value.includes(ot.category)):c.value);async function v(){var Mt;const[ot,ct]=await Promise.all([fetch("config.json"),fetch("customization.json")]),ht=await ot.json(),gt=await ct.json();d.value=gt,Object.entries(((Mt=d.value)==null?void 0:Mt.colors)||{}).forEach(([xt,pt])=>{const Le=String(pt)||"";document.documentElement.style.setProperty(`--${xt}-color`,Le)}),ht.forEach(xt=>c.value.push({...xt,key:Symbol("image-key")})),c.value.concat(ht)}const w=Ge(()=>{const ot=c.value.reduce((ct,ht)=>(Array.isArray(ht.category)?ht.category.forEach(gt=>ct.push(gt)):ct.push(ht.category),ct),[]);return[...new Set(ot)]});let E,T,P=null;function R(){n.value=!1}function X(){if(l){const ot=l==null?void 0:l.toDataURL({format:"jpeg",quality:90,multiplier:2}),ct=document.createElement("a");ct.download="tattoo.jpeg",ct.target="_blank",ct.href=ot,ct.click()}}function B(ot){if("ontouchstart"in window){const ht=ot.target;var ct=new yn(ht,{scaleX:ht.width/ht.naturalWidth,scaleY:ht.height/ht.naturalHeight,width:ht.naturalWidth,height:ht.naturalHeight,left:window.innerWidth/2-ht.width/2,top:window.innerHeight/2-ht.height/2});l==null||l.add(ct),n.value=!1}}function $(ot){var ht;P=ot.target;const ct=(ht=ot.target)==null?void 0:ht.getBoundingClientRect();E=ot.clientX-(ct.left+window.scrollX),T=ot.clientY-(ct.top+window.scrollY)}function tt(ot){return ot.dataTransfer&&(ot.dataTransfer.dropEffect="copy"),!1}function nt(){P=null}function st(ot){if(ot=ot||window.event,ot.preventDefault&&ot.preventDefault(),ot.stopPropagation&&ot.stopPropagation(),!t.value||!P)return;const ct=t.value.getBoundingClientRect();if(T===void 0||E===void 0)return;const ht=ot.clientX-(ct.left+window.scrollX+E),gt=ot.clientY-(ct.top+window.scrollY+T);var Mt=new yn(P,{scaleX:P.width/P.naturalWidth,scaleY:P.height/P.naturalHeight,width:P.naturalWidth,height:P.naturalHeight,left:ht,top:gt});return l==null||l.add(Mt),n.value=!1,!1}const Dt=PM.throttle(()=>{console.log("constructor: store data"),localStorage.setItem("canvas",JSON.stringify(l==null?void 0:l.toJSON()))},300,{leading:!1,trailing:!0});function Pt(){localStorage.removeItem("canvas"),l&&(l.clear(),l.backgroundColor="#fff")}function Zt(){if(!t.value||!e.value||!d.value)return;l=new Sh(t.value,{targetFindTolerance:10,perPixelTargetFind:!0}),l.backgroundColor="#fff";function ot(){l==null||l.setDimensions({width:window.innerWidth,height:window.innerHeight})}l.on("after:render",Dt),window.addEventListener("resize",()=>ot());const ct=localStorage.getItem("canvas");if(ct){const Ft=JSON.parse(ct);l==null||l.loadFromJSON(Ft,()=>{l&&l.requestRenderAll()})}ot();const ht=`data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15.289 15.9961L-1.44839e-05 0.707107L0.707092 0L15.9961 15.289L15.289 15.9961Z' fill='${encodeURIComponent(d.value.colors.selection)}'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M0.707107 15.9961L15.9961 0.707107L15.289 0L5.23321e-07 15.289L0.707107 15.9961Z' fill='${encodeURIComponent(d.value.colors.selection)}'/%3E%3C/svg%3E%0A`,gt=`data:image/svg+xml,%3Csvg width='17' height='10' viewBox='0 0 17 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M0.351549 1.35551L8.34374 9.3477L9.05084 8.64059L1.05866 0.648408L0.351549 1.35551Z' fill='${encodeURIComponent(d.value.colors.selection)}'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M8.35551 9.34773L16.3477 1.35554L15.6406 0.648438L7.64841 8.64062L8.35551 9.34773Z' fill='${encodeURIComponent(d.value.colors.selection)}'/%3E%3C/svg%3E%0A`,Mt=`data:image/svg+xml,%3Csvg width='17' height='10' viewBox='0 0 17 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M16.3477 8.64063L8.35551 0.648438L7.64841 1.35555L15.6406 9.34773L16.3477 8.64063Z' fill='${encodeURIComponent(d.value.colors.selection)}'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M8.34374 0.648409L0.351548 8.6406L1.05865 9.3477L9.05084 1.35552L8.34374 0.648409Z' fill='${encodeURIComponent(d.value.colors.selection)}'/%3E%3C/svg%3E%0A`,xt=document.createElement("img");xt.src=ht;const pt=document.createElement("img");pt.src=Mt;const Le=document.createElement("img");Le.src=gt,ye.ownDefaults.cornerColor=d.value.colors.selection,ye.ownDefaults.borderColor=d.value.colors.selection,ye.ownDefaults.controls={...RD.createObjectDefaultControls(),forwardControl:new Ne({x:.5,y:-.5,offsetX:24,offsetY:48,cursorStyle:"pointer",mouseUpHandler:(Ft,Ht)=>{const Vt=Ht.target,Ut=Vt.canvas;Ut==null||Ut.bringObjectToFront(Vt),Ut==null||Ut.requestRenderAll()},render:(Ft,Ht,Vt,Ut,Je)=>{Ft.save(),Ft.translate(Ht,Vt),Ft.rotate(Hc.degreesToRadians(Je.angle)),Ft.drawImage(pt,-16/2,-10/2,16,10),Ft.restore()}}),backControl:new Ne({x:.5,y:-.5,offsetX:24,offsetY:96,cursorStyle:"pointer",mouseUpHandler:(Ft,Ht)=>{const Vt=Ht.target,Ut=Vt.canvas;Ut==null||Ut.sendObjectToBack(Vt),Ut==null||Ut.requestRenderAll()},render:(Ft,Ht,Vt,Ut,Je)=>{Ft.save(),Ft.translate(Ht,Vt),Ft.rotate(Hc.degreesToRadians(Je.angle)),Ft.drawImage(Le,-16/2,-10/2,16,10),Ft.restore()}}),deleteControl:new Ne({x:.5,y:-.5,offsetX:24,cursorStyle:"pointer",mouseUpHandler:(Ft,Ht)=>{const Vt=Ht.target,Ut=Vt.canvas;Ut==null||Ut.remove(Vt),Ut==null||Ut.requestRenderAll()},render:(Ft,Ht,Vt,Ut,Je)=>{Ft.save(),Ft.translate(Ht,Vt),Ft.rotate(Hc.degreesToRadians(Je.angle)),Ft.drawImage(xt,-16/2,-16/2,16,16),Ft.restore()}})}}return xm(async()=>{await v(),o.value=!1,await Wh(),Zt()}),(ot,ct)=>{var ht;return!o.value&&d.value?(on(),dr(an,{key:0},[ge("header",RM,[ge("h1",{class:"font-bold text-xl header hidden sm:block",style:Va({color:"var(--title-color)"})},Fs((ht=d.value.literals)==null?void 0:ht.title),5),ge("div",FM,[Te(_a,{look:"secondary",href:"https://www.instagram.com/oleshevatattoo"},{default:Bs(()=>{var gt;return[ge("div",IM,[ge("div",null,Fs((gt=d.value.literals)==null?void 0:gt.book),1),BM])]}),_:1}),ge("div",jM,[p?(on(),ro(_a,{key:0,onClick:X},{default:Bs(()=>{var gt;return[sh(Fs((gt=d.value.literals)==null?void 0:gt.download),1)]}),_:1})):Dc("",!0),Te(_a,{onClick:Pt},{default:Bs(()=>{var gt;return[sh(Fs((gt=d.value.literals)==null?void 0:gt.reset),1)]}),_:1})])])]),n.value?Dc("",!0):(on(),dr("div",WM,[Te(_a,{look:"secondary",class:"h-32 w-8 flex items-center justify-center",onClick:ct[0]||(ct[0]=gt=>n.value=!0)},{default:Bs(()=>[XM]),_:1})])),ge("div",HM,[lT(ge("div",YM,[ge("div",UM,[(on(!0),dr(an,null,Cg(w.value,gt=>(on(),ro(OM,{key:gt,modelValue:i.value,"onUpdate:modelValue":ct[1]||(ct[1]=Mt=>i.value=Mt),value:gt,name:gt,label:gt,class:"border px-2 rounded-sm py-0.5"},null,8,["modelValue","value","name","label"]))),128))]),ge("div",zM,[(on(!0),dr(an,null,Cg(_.value,gt=>(on(),dr("img",{key:gt.key,loading:"lazy",width:"220",height:"220",draggable:"",src:`${Yr(h)||""}/tattoo/${gt.file}`,onDragstartPassive:$,onDragendPassive:nt,onClick:B},null,40,NM))),128))])],512),[[yO,n.value]]),ge("div",{ref_key:"canvasContainer",ref:e,class:"canvas-container",onDragover:vO(tt,["prevent"]),onDrop:st,onTouchstart:R,onClick:R},[ge("canvas",{ref_key:"canvasElement",ref:t,class:"w-full"},null,512)],40,VM)])],64)):Dc("",!0)}}});const $M=xi({__name:"HomeView",setup(r){return(t,e)=>(on(),dr("main",null,[Te(GM)]))}}),KM=EE({history:zO("/"),routes:[{path:"/",name:"home",component:$M},{path:"/about",name:"about",component:()=>RE(()=>import("./AboutView-c1599e52.js"),["assets/AboutView-c1599e52.js","assets/AboutView-4d995ba2.css"])}]}),Fu=CO(ME);Fu.use(OO());Fu.use(KM);Fu.mount("#app");export{DE as _,ge as a,dr as c,on as o};
